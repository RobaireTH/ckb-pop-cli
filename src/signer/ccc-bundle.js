(()=>{var Wv=Object.create;var L2=Object.defineProperty;var Zv=Object.getOwnPropertyDescriptor;var Gv=Object.getOwnPropertyNames;var Jv=Object.getPrototypeOf,Xv=Object.prototype.hasOwnProperty;var de=(r,e)=>()=>(e||r((e={exports:{}}).exports,e),e.exports),be=(r,e)=>{for(var t in e)L2(r,t,{get:e[t],enumerable:!0})},Yv=(r,e,t,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of Gv(e))!Xv.call(r,s)&&s!==t&&L2(r,s,{get:()=>e[s],enumerable:!(n=Zv(e,s))||n.enumerable});return r};var Ge=(r,e,t)=>(t=r!=null?Wv(Jv(r)):{},Yv(e||!r||!r.__esModule?L2(t,"default",{value:r,enumerable:!0}):t,r));var Jr=de(Aa=>{"use strict";Object.defineProperty(Aa,"__esModule",{value:!0});Aa.bech32m=Aa.bech32=void 0;var op="qpzry9x8gf2tvdw0s3jn54khce6mua7l",Ly={};for(let r=0;r<op.length;r++){let e=op.charAt(r);Ly[e]=r}function Ea(r){let e=r>>25;return(r&33554431)<<5^-(e>>0&1)&996825010^-(e>>1&1)&642813549^-(e>>2&1)&513874426^-(e>>3&1)&1027748829^-(e>>4&1)&705979059}function Ny(r){let e=1;for(let t=0;t<r.length;++t){let n=r.charCodeAt(t);if(n<33||n>126)return"Invalid prefix ("+r+")";e=Ea(e)^n>>5}e=Ea(e);for(let t=0;t<r.length;++t){let n=r.charCodeAt(t);e=Ea(e)^n&31}return e}function H2(r,e,t,n){let s=0,o=0,i=(1<<t)-1,c=[];for(let a=0;a<r.length;++a)for(s=s<<e|r[a],o+=e;o>=t;)o-=t,c.push(s>>o&i);if(n)o>0&&c.push(s<<t-o&i);else{if(o>=e)return"Excess padding";if(s<<t-o&i)return"Non-zero padding"}return c}function Qv(r){return H2(r,8,5,!0)}function eS(r){let e=H2(r,5,8,!1);if(Array.isArray(e))return e}function tS(r){let e=H2(r,5,8,!1);if(Array.isArray(e))return e;throw new Error(e)}function Hy(r){let e;r==="bech32"?e=1:e=734539939;function t(i,c,a){if(a=a||90,i.length+7+c.length>a)throw new TypeError("Exceeds length limit");i=i.toLowerCase();let u=Ny(i);if(typeof u=="string")throw new Error(u);let d=i+"1";for(let y=0;y<c.length;++y){let v=c[y];if(v>>5!==0)throw new Error("Non 5-bit word");u=Ea(u)^v,d+=op.charAt(v)}for(let y=0;y<6;++y)u=Ea(u);u^=e;for(let y=0;y<6;++y){let v=u>>(5-y)*5&31;d+=op.charAt(v)}return d}function n(i,c){if(c=c||90,i.length<8)return i+" too short";if(i.length>c)return"Exceeds length limit";let a=i.toLowerCase(),u=i.toUpperCase();if(i!==a&&i!==u)return"Mixed-case string "+i;i=a;let d=i.lastIndexOf("1");if(d===-1)return"No separator character for "+i;if(d===0)return"Missing prefix for "+i;let y=i.slice(0,d),v=i.slice(d+1);if(v.length<6)return"Data too short";let _=Ny(y);if(typeof _=="string")return _;let T=[];for(let A=0;A<v.length;++A){let B=v.charAt(A),I=Ly[B];if(I===void 0)return"Unknown character "+B;_=Ea(_)^I,!(A+6>=v.length)&&T.push(I)}return _!==e?"Invalid checksum for "+i:{prefix:y,words:T}}function s(i,c){let a=n(i,c);if(typeof a=="object")return a}function o(i,c){let a=n(i,c);if(typeof a=="object")return a;throw new Error(a)}return{decodeUnsafe:s,decode:o,encode:t,toWords:Qv,fromWordsUnsafe:eS,fromWords:tS}}Aa.bech32=Hy("bech32");Aa.bech32m=Hy("bech32m")});var $y=de(ip=>{"use strict";ip.byteLength=nS;ip.toByteArray=oS;ip.fromByteArray=aS;var as=[],On=[],rS=typeof Uint8Array<"u"?Uint8Array:Array,U2="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";for(Fi=0,Uy=U2.length;Fi<Uy;++Fi)as[Fi]=U2[Fi],On[U2.charCodeAt(Fi)]=Fi;var Fi,Uy;On[45]=62;On[95]=63;function Fy(r){var e=r.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var t=r.indexOf("=");t===-1&&(t=e);var n=t===e?0:4-t%4;return[t,n]}function nS(r){var e=Fy(r),t=e[0],n=e[1];return(t+n)*3/4-n}function sS(r,e,t){return(e+t)*3/4-t}function oS(r){var e,t=Fy(r),n=t[0],s=t[1],o=new rS(sS(r,n,s)),i=0,c=s>0?n-4:n,a;for(a=0;a<c;a+=4)e=On[r.charCodeAt(a)]<<18|On[r.charCodeAt(a+1)]<<12|On[r.charCodeAt(a+2)]<<6|On[r.charCodeAt(a+3)],o[i++]=e>>16&255,o[i++]=e>>8&255,o[i++]=e&255;return s===2&&(e=On[r.charCodeAt(a)]<<2|On[r.charCodeAt(a+1)]>>4,o[i++]=e&255),s===1&&(e=On[r.charCodeAt(a)]<<10|On[r.charCodeAt(a+1)]<<4|On[r.charCodeAt(a+2)]>>2,o[i++]=e>>8&255,o[i++]=e&255),o}function iS(r){return as[r>>18&63]+as[r>>12&63]+as[r>>6&63]+as[r&63]}function cS(r,e,t){for(var n,s=[],o=e;o<t;o+=3)n=(r[o]<<16&16711680)+(r[o+1]<<8&65280)+(r[o+2]&255),s.push(iS(n));return s.join("")}function aS(r){for(var e,t=r.length,n=t%3,s=[],o=16383,i=0,c=t-n;i<c;i+=o)s.push(cS(r,i,i+o>c?c:i+o));return n===1?(e=r[t-1],s.push(as[e>>2]+as[e<<4&63]+"==")):n===2&&(e=(r[t-2]<<8)+r[t-1],s.push(as[e>>10]+as[e>>4&63]+as[e<<2&63]+"=")),s.join("")}});var qy=de(F2=>{F2.read=function(r,e,t,n,s){var o,i,c=s*8-n-1,a=(1<<c)-1,u=a>>1,d=-7,y=t?s-1:0,v=t?-1:1,_=r[e+y];for(y+=v,o=_&(1<<-d)-1,_>>=-d,d+=c;d>0;o=o*256+r[e+y],y+=v,d-=8);for(i=o&(1<<-d)-1,o>>=-d,d+=n;d>0;i=i*256+r[e+y],y+=v,d-=8);if(o===0)o=1-u;else{if(o===a)return i?NaN:(_?-1:1)*(1/0);i=i+Math.pow(2,n),o=o-u}return(_?-1:1)*i*Math.pow(2,o-n)};F2.write=function(r,e,t,n,s,o){var i,c,a,u=o*8-s-1,d=(1<<u)-1,y=d>>1,v=s===23?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:o-1,T=n?1:-1,A=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(c=isNaN(e)?1:0,i=d):(i=Math.floor(Math.log(e)/Math.LN2),e*(a=Math.pow(2,-i))<1&&(i--,a*=2),i+y>=1?e+=v/a:e+=v*Math.pow(2,1-y),e*a>=2&&(i++,a/=2),i+y>=d?(c=0,i=d):i+y>=1?(c=(e*a-1)*Math.pow(2,s),i=i+y):(c=e*Math.pow(2,y-1)*Math.pow(2,s),i=0));s>=8;r[t+_]=c&255,_+=T,c/=256,s-=8);for(i=i<<s|c,u+=s;u>0;r[t+_]=i&255,_+=T,i/=256,u-=8);r[t+_-T]|=A*128}});var G2=de(Ia=>{"use strict";var $2=$y(),Ca=qy(),jy=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;Ia.Buffer=V;Ia.SlowBuffer=hS;Ia.INSPECT_MAX_BYTES=50;var cp=2147483647;Ia.kMaxLength=cp;V.TYPED_ARRAY_SUPPORT=fS();!V.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function fS(){try{let r=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(r,e),r.foo()===42}catch{return!1}}Object.defineProperty(V.prototype,"parent",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.buffer}});Object.defineProperty(V.prototype,"offset",{enumerable:!0,get:function(){if(V.isBuffer(this))return this.byteOffset}});function Ws(r){if(r>cp)throw new RangeError('The value "'+r+'" is invalid for option "size"');let e=new Uint8Array(r);return Object.setPrototypeOf(e,V.prototype),e}function V(r,e,t){if(typeof r=="number"){if(typeof e=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return V2(r)}return Wy(r,e,t)}V.poolSize=8192;function Wy(r,e,t){if(typeof r=="string")return lS(r,e);if(ArrayBuffer.isView(r))return dS(r);if(r==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r);if(fs(r,ArrayBuffer)||r&&fs(r.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(fs(r,SharedArrayBuffer)||r&&fs(r.buffer,SharedArrayBuffer)))return j2(r,e,t);if(typeof r=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');let n=r.valueOf&&r.valueOf();if(n!=null&&n!==r)return V.from(n,e,t);let s=pS(r);if(s)return s;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof r[Symbol.toPrimitive]=="function")return V.from(r[Symbol.toPrimitive]("string"),e,t);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof r)}V.from=function(r,e,t){return Wy(r,e,t)};Object.setPrototypeOf(V.prototype,Uint8Array.prototype);Object.setPrototypeOf(V,Uint8Array);function Zy(r){if(typeof r!="number")throw new TypeError('"size" argument must be of type number');if(r<0)throw new RangeError('The value "'+r+'" is invalid for option "size"')}function uS(r,e,t){return Zy(r),r<=0?Ws(r):e!==void 0?typeof t=="string"?Ws(r).fill(e,t):Ws(r).fill(e):Ws(r)}V.alloc=function(r,e,t){return uS(r,e,t)};function V2(r){return Zy(r),Ws(r<0?0:K2(r)|0)}V.allocUnsafe=function(r){return V2(r)};V.allocUnsafeSlow=function(r){return V2(r)};function lS(r,e){if((typeof e!="string"||e==="")&&(e="utf8"),!V.isEncoding(e))throw new TypeError("Unknown encoding: "+e);let t=Gy(r,e)|0,n=Ws(t),s=n.write(r,e);return s!==t&&(n=n.slice(0,s)),n}function q2(r){let e=r.length<0?0:K2(r.length)|0,t=Ws(e);for(let n=0;n<e;n+=1)t[n]=r[n]&255;return t}function dS(r){if(fs(r,Uint8Array)){let e=new Uint8Array(r);return j2(e.buffer,e.byteOffset,e.byteLength)}return q2(r)}function j2(r,e,t){if(e<0||r.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(r.byteLength<e+(t||0))throw new RangeError('"length" is outside of buffer bounds');let n;return e===void 0&&t===void 0?n=new Uint8Array(r):t===void 0?n=new Uint8Array(r,e):n=new Uint8Array(r,e,t),Object.setPrototypeOf(n,V.prototype),n}function pS(r){if(V.isBuffer(r)){let e=K2(r.length)|0,t=Ws(e);return t.length===0||r.copy(t,0,0,e),t}if(r.length!==void 0)return typeof r.length!="number"||Z2(r.length)?Ws(0):q2(r);if(r.type==="Buffer"&&Array.isArray(r.data))return q2(r.data)}function K2(r){if(r>=cp)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+cp.toString(16)+" bytes");return r|0}function hS(r){return+r!=r&&(r=0),V.alloc(+r)}V.isBuffer=function(e){return e!=null&&e._isBuffer===!0&&e!==V.prototype};V.compare=function(e,t){if(fs(e,Uint8Array)&&(e=V.from(e,e.offset,e.byteLength)),fs(t,Uint8Array)&&(t=V.from(t,t.offset,t.byteLength)),!V.isBuffer(e)||!V.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,s=t.length;for(let o=0,i=Math.min(n,s);o<i;++o)if(e[o]!==t[o]){n=e[o],s=t[o];break}return n<s?-1:s<n?1:0};V.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}};V.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(e.length===0)return V.alloc(0);let n;if(t===void 0)for(t=0,n=0;n<e.length;++n)t+=e[n].length;let s=V.allocUnsafe(t),o=0;for(n=0;n<e.length;++n){let i=e[n];if(fs(i,Uint8Array))o+i.length>s.length?(V.isBuffer(i)||(i=V.from(i)),i.copy(s,o)):Uint8Array.prototype.set.call(s,i,o);else if(V.isBuffer(i))i.copy(s,o);else throw new TypeError('"list" argument must be an Array of Buffers');o+=i.length}return s};function Gy(r,e){if(V.isBuffer(r))return r.length;if(ArrayBuffer.isView(r)||fs(r,ArrayBuffer))return r.byteLength;if(typeof r!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof r);let t=r.length,n=arguments.length>2&&arguments[2]===!0;if(!n&&t===0)return 0;let s=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return t;case"utf8":case"utf-8":return z2(r).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return t*2;case"hex":return t>>>1;case"base64":return s8(r).length;default:if(s)return n?-1:z2(r).length;e=(""+e).toLowerCase(),s=!0}}V.byteLength=Gy;function mS(r,e,t){let n=!1;if((e===void 0||e<0)&&(e=0),e>this.length||((t===void 0||t>this.length)&&(t=this.length),t<=0)||(t>>>=0,e>>>=0,t<=e))return"";for(r||(r="utf8");;)switch(r){case"hex":return ES(this,e,t);case"utf8":case"utf-8":return Xy(this,e,t);case"ascii":return _S(this,e,t);case"latin1":case"binary":return TS(this,e,t);case"base64":return vS(this,e,t);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return AS(this,e,t);default:if(n)throw new TypeError("Unknown encoding: "+r);r=(r+"").toLowerCase(),n=!0}}V.prototype._isBuffer=!0;function $i(r,e,t){let n=r[e];r[e]=r[t],r[t]=n}V.prototype.swap16=function(){let e=this.length;if(e%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)$i(this,t,t+1);return this};V.prototype.swap32=function(){let e=this.length;if(e%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)$i(this,t,t+3),$i(this,t+1,t+2);return this};V.prototype.swap64=function(){let e=this.length;if(e%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)$i(this,t,t+7),$i(this,t+1,t+6),$i(this,t+2,t+5),$i(this,t+3,t+4);return this};V.prototype.toString=function(){let e=this.length;return e===0?"":arguments.length===0?Xy(this,0,e):mS.apply(this,arguments)};V.prototype.toLocaleString=V.prototype.toString;V.prototype.equals=function(e){if(!V.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e?!0:V.compare(this,e)===0};V.prototype.inspect=function(){let e="",t=Ia.INSPECT_MAX_BYTES;return e=this.toString("hex",0,t).replace(/(.{2})/g,"$1 ").trim(),this.length>t&&(e+=" ... "),"<Buffer "+e+">"};jy&&(V.prototype[jy]=V.prototype.inspect);V.prototype.compare=function(e,t,n,s,o){if(fs(e,Uint8Array)&&(e=V.from(e,e.offset,e.byteLength)),!V.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(t===void 0&&(t=0),n===void 0&&(n=e?e.length:0),s===void 0&&(s=0),o===void 0&&(o=this.length),t<0||n>e.length||s<0||o>this.length)throw new RangeError("out of range index");if(s>=o&&t>=n)return 0;if(s>=o)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,s>>>=0,o>>>=0,this===e)return 0;let i=o-s,c=n-t,a=Math.min(i,c),u=this.slice(s,o),d=e.slice(t,n);for(let y=0;y<a;++y)if(u[y]!==d[y]){i=u[y],c=d[y];break}return i<c?-1:c<i?1:0};function Jy(r,e,t,n,s){if(r.length===0)return-1;if(typeof t=="string"?(n=t,t=0):t>2147483647?t=2147483647:t<-2147483648&&(t=-2147483648),t=+t,Z2(t)&&(t=s?0:r.length-1),t<0&&(t=r.length+t),t>=r.length){if(s)return-1;t=r.length-1}else if(t<0)if(s)t=0;else return-1;if(typeof e=="string"&&(e=V.from(e,n)),V.isBuffer(e))return e.length===0?-1:zy(r,e,t,n,s);if(typeof e=="number")return e=e&255,typeof Uint8Array.prototype.indexOf=="function"?s?Uint8Array.prototype.indexOf.call(r,e,t):Uint8Array.prototype.lastIndexOf.call(r,e,t):zy(r,[e],t,n,s);throw new TypeError("val must be string, number or Buffer")}function zy(r,e,t,n,s){let o=1,i=r.length,c=e.length;if(n!==void 0&&(n=String(n).toLowerCase(),n==="ucs2"||n==="ucs-2"||n==="utf16le"||n==="utf-16le")){if(r.length<2||e.length<2)return-1;o=2,i/=2,c/=2,t/=2}function a(d,y){return o===1?d[y]:d.readUInt16BE(y*o)}let u;if(s){let d=-1;for(u=t;u<i;u++)if(a(r,u)===a(e,d===-1?0:u-d)){if(d===-1&&(d=u),u-d+1===c)return d*o}else d!==-1&&(u-=u-d),d=-1}else for(t+c>i&&(t=i-c),u=t;u>=0;u--){let d=!0;for(let y=0;y<c;y++)if(a(r,u+y)!==a(e,y)){d=!1;break}if(d)return u}return-1}V.prototype.includes=function(e,t,n){return this.indexOf(e,t,n)!==-1};V.prototype.indexOf=function(e,t,n){return Jy(this,e,t,n,!0)};V.prototype.lastIndexOf=function(e,t,n){return Jy(this,e,t,n,!1)};function yS(r,e,t,n){t=Number(t)||0;let s=r.length-t;n?(n=Number(n),n>s&&(n=s)):n=s;let o=e.length;n>o/2&&(n=o/2);let i;for(i=0;i<n;++i){let c=parseInt(e.substr(i*2,2),16);if(Z2(c))return i;r[t+i]=c}return i}function gS(r,e,t,n){return ap(z2(e,r.length-t),r,t,n)}function bS(r,e,t,n){return ap(IS(e),r,t,n)}function xS(r,e,t,n){return ap(s8(e),r,t,n)}function wS(r,e,t,n){return ap(OS(e,r.length-t),r,t,n)}V.prototype.write=function(e,t,n,s){if(t===void 0)s="utf8",n=this.length,t=0;else if(n===void 0&&typeof t=="string")s=t,n=this.length,t=0;else if(isFinite(t))t=t>>>0,isFinite(n)?(n=n>>>0,s===void 0&&(s="utf8")):(s=n,n=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");let o=this.length-t;if((n===void 0||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");s||(s="utf8");let i=!1;for(;;)switch(s){case"hex":return yS(this,e,t,n);case"utf8":case"utf-8":return gS(this,e,t,n);case"ascii":case"latin1":case"binary":return bS(this,e,t,n);case"base64":return xS(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return wS(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+s);s=(""+s).toLowerCase(),i=!0}};V.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function vS(r,e,t){return e===0&&t===r.length?$2.fromByteArray(r):$2.fromByteArray(r.slice(e,t))}function Xy(r,e,t){t=Math.min(r.length,t);let n=[],s=e;for(;s<t;){let o=r[s],i=null,c=o>239?4:o>223?3:o>191?2:1;if(s+c<=t){let a,u,d,y;switch(c){case 1:o<128&&(i=o);break;case 2:a=r[s+1],(a&192)===128&&(y=(o&31)<<6|a&63,y>127&&(i=y));break;case 3:a=r[s+1],u=r[s+2],(a&192)===128&&(u&192)===128&&(y=(o&15)<<12|(a&63)<<6|u&63,y>2047&&(y<55296||y>57343)&&(i=y));break;case 4:a=r[s+1],u=r[s+2],d=r[s+3],(a&192)===128&&(u&192)===128&&(d&192)===128&&(y=(o&15)<<18|(a&63)<<12|(u&63)<<6|d&63,y>65535&&y<1114112&&(i=y))}}i===null?(i=65533,c=1):i>65535&&(i-=65536,n.push(i>>>10&1023|55296),i=56320|i&1023),n.push(i),s+=c}return SS(n)}var Vy=4096;function SS(r){let e=r.length;if(e<=Vy)return String.fromCharCode.apply(String,r);let t="",n=0;for(;n<e;)t+=String.fromCharCode.apply(String,r.slice(n,n+=Vy));return t}function _S(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]&127);return n}function TS(r,e,t){let n="";t=Math.min(r.length,t);for(let s=e;s<t;++s)n+=String.fromCharCode(r[s]);return n}function ES(r,e,t){let n=r.length;(!e||e<0)&&(e=0),(!t||t<0||t>n)&&(t=n);let s="";for(let o=e;o<t;++o)s+=DS[r[o]];return s}function AS(r,e,t){let n=r.slice(e,t),s="";for(let o=0;o<n.length-1;o+=2)s+=String.fromCharCode(n[o]+n[o+1]*256);return s}V.prototype.slice=function(e,t){let n=this.length;e=~~e,t=t===void 0?n:~~t,e<0?(e+=n,e<0&&(e=0)):e>n&&(e=n),t<0?(t+=n,t<0&&(t=0)):t>n&&(t=n),t<e&&(t=e);let s=this.subarray(e,t);return Object.setPrototypeOf(s,V.prototype),s};function er(r,e,t){if(r%1!==0||r<0)throw new RangeError("offset is not uint");if(r+e>t)throw new RangeError("Trying to access beyond buffer length")}V.prototype.readUintLE=V.prototype.readUIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||er(e,t,this.length);let s=this[e],o=1,i=0;for(;++i<t&&(o*=256);)s+=this[e+i]*o;return s};V.prototype.readUintBE=V.prototype.readUIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||er(e,t,this.length);let s=this[e+--t],o=1;for(;t>0&&(o*=256);)s+=this[e+--t]*o;return s};V.prototype.readUint8=V.prototype.readUInt8=function(e,t){return e=e>>>0,t||er(e,1,this.length),this[e]};V.prototype.readUint16LE=V.prototype.readUInt16LE=function(e,t){return e=e>>>0,t||er(e,2,this.length),this[e]|this[e+1]<<8};V.prototype.readUint16BE=V.prototype.readUInt16BE=function(e,t){return e=e>>>0,t||er(e,2,this.length),this[e]<<8|this[e+1]};V.prototype.readUint32LE=V.prototype.readUInt32LE=function(e,t){return e=e>>>0,t||er(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+this[e+3]*16777216};V.prototype.readUint32BE=V.prototype.readUInt32BE=function(e,t){return e=e>>>0,t||er(e,4,this.length),this[e]*16777216+(this[e+1]<<16|this[e+2]<<8|this[e+3])};V.prototype.readBigUInt64LE=$o(function(e){e=e>>>0,Ba(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Su(e,this.length-8);let s=t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24,o=this[++e]+this[++e]*2**8+this[++e]*2**16+n*2**24;return BigInt(s)+(BigInt(o)<<BigInt(32))});V.prototype.readBigUInt64BE=$o(function(e){e=e>>>0,Ba(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Su(e,this.length-8);let s=t*2**24+this[++e]*2**16+this[++e]*2**8+this[++e],o=this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n;return(BigInt(s)<<BigInt(32))+BigInt(o)});V.prototype.readIntLE=function(e,t,n){e=e>>>0,t=t>>>0,n||er(e,t,this.length);let s=this[e],o=1,i=0;for(;++i<t&&(o*=256);)s+=this[e+i]*o;return o*=128,s>=o&&(s-=Math.pow(2,8*t)),s};V.prototype.readIntBE=function(e,t,n){e=e>>>0,t=t>>>0,n||er(e,t,this.length);let s=t,o=1,i=this[e+--s];for(;s>0&&(o*=256);)i+=this[e+--s]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i};V.prototype.readInt8=function(e,t){return e=e>>>0,t||er(e,1,this.length),this[e]&128?(255-this[e]+1)*-1:this[e]};V.prototype.readInt16LE=function(e,t){e=e>>>0,t||er(e,2,this.length);let n=this[e]|this[e+1]<<8;return n&32768?n|4294901760:n};V.prototype.readInt16BE=function(e,t){e=e>>>0,t||er(e,2,this.length);let n=this[e+1]|this[e]<<8;return n&32768?n|4294901760:n};V.prototype.readInt32LE=function(e,t){return e=e>>>0,t||er(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24};V.prototype.readInt32BE=function(e,t){return e=e>>>0,t||er(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]};V.prototype.readBigInt64LE=$o(function(e){e=e>>>0,Ba(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Su(e,this.length-8);let s=this[e+4]+this[e+5]*2**8+this[e+6]*2**16+(n<<24);return(BigInt(s)<<BigInt(32))+BigInt(t+this[++e]*2**8+this[++e]*2**16+this[++e]*2**24)});V.prototype.readBigInt64BE=$o(function(e){e=e>>>0,Ba(e,"offset");let t=this[e],n=this[e+7];(t===void 0||n===void 0)&&Su(e,this.length-8);let s=(t<<24)+this[++e]*2**16+this[++e]*2**8+this[++e];return(BigInt(s)<<BigInt(32))+BigInt(this[++e]*2**24+this[++e]*2**16+this[++e]*2**8+n)});V.prototype.readFloatLE=function(e,t){return e=e>>>0,t||er(e,4,this.length),Ca.read(this,e,!0,23,4)};V.prototype.readFloatBE=function(e,t){return e=e>>>0,t||er(e,4,this.length),Ca.read(this,e,!1,23,4)};V.prototype.readDoubleLE=function(e,t){return e=e>>>0,t||er(e,8,this.length),Ca.read(this,e,!0,52,8)};V.prototype.readDoubleBE=function(e,t){return e=e>>>0,t||er(e,8,this.length),Ca.read(this,e,!1,52,8)};function Xr(r,e,t,n,s,o){if(!V.isBuffer(r))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<o)throw new RangeError('"value" argument is out of bounds');if(t+n>r.length)throw new RangeError("Index out of range")}V.prototype.writeUintLE=V.prototype.writeUIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){let c=Math.pow(2,8*n)-1;Xr(this,e,t,n,c,0)}let o=1,i=0;for(this[t]=e&255;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n};V.prototype.writeUintBE=V.prototype.writeUIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,n=n>>>0,!s){let c=Math.pow(2,8*n)-1;Xr(this,e,t,n,c,0)}let o=n-1,i=1;for(this[t+o]=e&255;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n};V.prototype.writeUint8=V.prototype.writeUInt8=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,1,255,0),this[t]=e&255,t+1};V.prototype.writeUint16LE=V.prototype.writeUInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,2,65535,0),this[t]=e&255,this[t+1]=e>>>8,t+2};V.prototype.writeUint16BE=V.prototype.writeUInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=e&255,t+2};V.prototype.writeUint32LE=V.prototype.writeUInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=e&255,t+4};V.prototype.writeUint32BE=V.prototype.writeUInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};function Yy(r,e,t,n,s){n8(e,n,s,r,t,7);let o=Number(e&BigInt(4294967295));r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o,o=o>>8,r[t++]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return r[t++]=i,i=i>>8,r[t++]=i,i=i>>8,r[t++]=i,i=i>>8,r[t++]=i,t}function Qy(r,e,t,n,s){n8(e,n,s,r,t,7);let o=Number(e&BigInt(4294967295));r[t+7]=o,o=o>>8,r[t+6]=o,o=o>>8,r[t+5]=o,o=o>>8,r[t+4]=o;let i=Number(e>>BigInt(32)&BigInt(4294967295));return r[t+3]=i,i=i>>8,r[t+2]=i,i=i>>8,r[t+1]=i,i=i>>8,r[t]=i,t+8}V.prototype.writeBigUInt64LE=$o(function(e,t=0){return Yy(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});V.prototype.writeBigUInt64BE=$o(function(e,t=0){return Qy(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))});V.prototype.writeIntLE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){let a=Math.pow(2,8*n-1);Xr(this,e,t,n,a-1,-a)}let o=0,i=1,c=0;for(this[t]=e&255;++o<n&&(i*=256);)e<0&&c===0&&this[t+o-1]!==0&&(c=1),this[t+o]=(e/i>>0)-c&255;return t+n};V.prototype.writeIntBE=function(e,t,n,s){if(e=+e,t=t>>>0,!s){let a=Math.pow(2,8*n-1);Xr(this,e,t,n,a-1,-a)}let o=n-1,i=1,c=0;for(this[t+o]=e&255;--o>=0&&(i*=256);)e<0&&c===0&&this[t+o+1]!==0&&(c=1),this[t+o]=(e/i>>0)-c&255;return t+n};V.prototype.writeInt8=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=e&255,t+1};V.prototype.writeInt16LE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,2,32767,-32768),this[t]=e&255,this[t+1]=e>>>8,t+2};V.prototype.writeInt16BE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=e&255,t+2};V.prototype.writeInt32LE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,4,2147483647,-2147483648),this[t]=e&255,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4};V.prototype.writeInt32BE=function(e,t,n){return e=+e,t=t>>>0,n||Xr(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=e&255,t+4};V.prototype.writeBigInt64LE=$o(function(e,t=0){return Yy(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});V.prototype.writeBigInt64BE=$o(function(e,t=0){return Qy(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function e8(r,e,t,n,s,o){if(t+n>r.length)throw new RangeError("Index out of range");if(t<0)throw new RangeError("Index out of range")}function t8(r,e,t,n,s){return e=+e,t=t>>>0,s||e8(r,e,t,4,34028234663852886e22,-34028234663852886e22),Ca.write(r,e,t,n,23,4),t+4}V.prototype.writeFloatLE=function(e,t,n){return t8(this,e,t,!0,n)};V.prototype.writeFloatBE=function(e,t,n){return t8(this,e,t,!1,n)};function r8(r,e,t,n,s){return e=+e,t=t>>>0,s||e8(r,e,t,8,17976931348623157e292,-17976931348623157e292),Ca.write(r,e,t,n,52,8),t+8}V.prototype.writeDoubleLE=function(e,t,n){return r8(this,e,t,!0,n)};V.prototype.writeDoubleBE=function(e,t,n){return r8(this,e,t,!1,n)};V.prototype.copy=function(e,t,n,s){if(!V.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),!s&&s!==0&&(s=this.length),t>=e.length&&(t=e.length),t||(t=0),s>0&&s<n&&(s=n),s===n||e.length===0||this.length===0)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(s<0)throw new RangeError("sourceEnd out of bounds");s>this.length&&(s=this.length),e.length-t<s-n&&(s=e.length-t+n);let o=s-n;return this===e&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(t,n,s):Uint8Array.prototype.set.call(e,this.subarray(n,s),t),o};V.prototype.fill=function(e,t,n,s){if(typeof e=="string"){if(typeof t=="string"?(s=t,t=0,n=this.length):typeof n=="string"&&(s=n,n=this.length),s!==void 0&&typeof s!="string")throw new TypeError("encoding must be a string");if(typeof s=="string"&&!V.isEncoding(s))throw new TypeError("Unknown encoding: "+s);if(e.length===1){let i=e.charCodeAt(0);(s==="utf8"&&i<128||s==="latin1")&&(e=i)}}else typeof e=="number"?e=e&255:typeof e=="boolean"&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t=t>>>0,n=n===void 0?this.length:n>>>0,e||(e=0);let o;if(typeof e=="number")for(o=t;o<n;++o)this[o]=e;else{let i=V.isBuffer(e)?e:V.from(e,s),c=i.length;if(c===0)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%c]}return this};var ka={};function W2(r,e,t){ka[r]=class extends t{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${r}]`,this.stack,delete this.name}get code(){return r}set code(s){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:s,writable:!0})}toString(){return`${this.name} [${r}]: ${this.message}`}}}W2("ERR_BUFFER_OUT_OF_BOUNDS",function(r){return r?`${r} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError);W2("ERR_INVALID_ARG_TYPE",function(r,e){return`The "${r}" argument must be of type number. Received type ${typeof e}`},TypeError);W2("ERR_OUT_OF_RANGE",function(r,e,t){let n=`The value of "${r}" is out of range.`,s=t;return Number.isInteger(t)&&Math.abs(t)>2**32?s=Ky(String(t)):typeof t=="bigint"&&(s=String(t),(t>BigInt(2)**BigInt(32)||t<-(BigInt(2)**BigInt(32)))&&(s=Ky(s)),s+="n"),n+=` It must be ${e}. Received ${s}`,n},RangeError);function Ky(r){let e="",t=r.length,n=r[0]==="-"?1:0;for(;t>=n+4;t-=3)e=`_${r.slice(t-3,t)}${e}`;return`${r.slice(0,t)}${e}`}function kS(r,e,t){Ba(e,"offset"),(r[e]===void 0||r[e+t]===void 0)&&Su(e,r.length-(t+1))}function n8(r,e,t,n,s,o){if(r>t||r<e){let i=typeof e=="bigint"?"n":"",c;throw o>3?e===0||e===BigInt(0)?c=`>= 0${i} and < 2${i} ** ${(o+1)*8}${i}`:c=`>= -(2${i} ** ${(o+1)*8-1}${i}) and < 2 ** ${(o+1)*8-1}${i}`:c=`>= ${e}${i} and <= ${t}${i}`,new ka.ERR_OUT_OF_RANGE("value",c,r)}kS(n,s,o)}function Ba(r,e){if(typeof r!="number")throw new ka.ERR_INVALID_ARG_TYPE(e,"number",r)}function Su(r,e,t){throw Math.floor(r)!==r?(Ba(r,t),new ka.ERR_OUT_OF_RANGE(t||"offset","an integer",r)):e<0?new ka.ERR_BUFFER_OUT_OF_BOUNDS:new ka.ERR_OUT_OF_RANGE(t||"offset",`>= ${t?1:0} and <= ${e}`,r)}var CS=/[^+/0-9A-Za-z-_]/g;function BS(r){if(r=r.split("=")[0],r=r.trim().replace(CS,""),r.length<2)return"";for(;r.length%4!==0;)r=r+"=";return r}function z2(r,e){e=e||1/0;let t,n=r.length,s=null,o=[];for(let i=0;i<n;++i){if(t=r.charCodeAt(i),t>55295&&t<57344){if(!s){if(t>56319){(e-=3)>-1&&o.push(239,191,189);continue}else if(i+1===n){(e-=3)>-1&&o.push(239,191,189);continue}s=t;continue}if(t<56320){(e-=3)>-1&&o.push(239,191,189),s=t;continue}t=(s-55296<<10|t-56320)+65536}else s&&(e-=3)>-1&&o.push(239,191,189);if(s=null,t<128){if((e-=1)<0)break;o.push(t)}else if(t<2048){if((e-=2)<0)break;o.push(t>>6|192,t&63|128)}else if(t<65536){if((e-=3)<0)break;o.push(t>>12|224,t>>6&63|128,t&63|128)}else if(t<1114112){if((e-=4)<0)break;o.push(t>>18|240,t>>12&63|128,t>>6&63|128,t&63|128)}else throw new Error("Invalid code point")}return o}function IS(r){let e=[];for(let t=0;t<r.length;++t)e.push(r.charCodeAt(t)&255);return e}function OS(r,e){let t,n,s,o=[];for(let i=0;i<r.length&&!((e-=2)<0);++i)t=r.charCodeAt(i),n=t>>8,s=t%256,o.push(s),o.push(n);return o}function s8(r){return $2.toByteArray(BS(r))}function ap(r,e,t,n){let s;for(s=0;s<n&&!(s+t>=e.length||s>=r.length);++s)e[s+t]=r[s];return s}function fs(r,e){return r instanceof e||r!=null&&r.constructor!=null&&r.constructor.name!=null&&r.constructor.name===e.name}function Z2(r){return r!==r}var DS=(function(){let r="0123456789abcdef",e=new Array(256);for(let t=0;t<16;++t){let n=t*16;for(let s=0;s<16;++s)e[n+s]=r[t]+r[s]}return e})();function $o(r){return typeof BigInt>"u"?PS:r}function PS(){throw new Error("BigInt not supported")}});var c0=de((C4,B4)=>{(function(r,e){typeof C4=="object"&&typeof B4<"u"?B4.exports=e():typeof define=="function"&&define.amd?define(e):(r=r||self,r.JSBI=e())})(C4,function(){"use strict";function r(P){"@babel/helpers - typeof";return r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},r(P)}function e(P,M){if(!(P instanceof M))throw new TypeError("Cannot call a class as a function")}function t(P,M){for(var L,U=0;U<M.length;U++)L=M[U],L.enumerable=L.enumerable||!1,L.configurable=!0,"value"in L&&(L.writable=!0),Object.defineProperty(P,L.key,L)}function n(P,M,L){return M&&t(P.prototype,M),L&&t(P,L),P}function s(P,M){if(typeof M!="function"&&M!==null)throw new TypeError("Super expression must either be null or a function");P.prototype=Object.create(M&&M.prototype,{constructor:{value:P,writable:!0,configurable:!0}}),M&&i(P,M)}function o(P){return o=Object.setPrototypeOf?Object.getPrototypeOf:function(M){return M.__proto__||Object.getPrototypeOf(M)},o(P)}function i(P,M){return i=Object.setPrototypeOf||function(L,U){return L.__proto__=U,L},i(P,M)}function c(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function a(){return a=c()?Reflect.construct:function(P,M,L){var U=[null];U.push.apply(U,M);var Z=Function.bind.apply(P,U),C=new Z;return L&&i(C,L.prototype),C},a.apply(null,arguments)}function u(P){return Function.toString.call(P).indexOf("[native code]")!==-1}function d(P){var M=typeof Map=="function"?new Map:void 0;return d=function(L){function U(){return a(L,arguments,o(this).constructor)}if(L===null||!u(L))return L;if(typeof L!="function")throw new TypeError("Super expression must either be null or a function");if(typeof M<"u"){if(M.has(L))return M.get(L);M.set(L,U)}return U.prototype=Object.create(L.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),i(U,L)},d(P)}function y(P){if(P===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return P}function v(P,M){return M&&(typeof M=="object"||typeof M=="function")?M:y(P)}function _(P){var M=c();return function(){var L,U=o(P);if(M){var Z=o(this).constructor;L=Reflect.construct(U,arguments,Z)}else L=U.apply(this,arguments);return v(this,L)}}function T(P,M){if(P){if(typeof P=="string")return A(P,M);var L=Object.prototype.toString.call(P).slice(8,-1);return L==="Object"&&P.constructor&&(L=P.constructor.name),L==="Map"||L==="Set"?Array.from(P):L==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(L)?A(P,M):void 0}}function A(P,M){(M==null||M>P.length)&&(M=P.length);for(var L=0,U=Array(M);L<M;L++)U[L]=P[L];return U}function B(P,M){var L;if(typeof Symbol>"u"||P[Symbol.iterator]==null){if(Array.isArray(P)||(L=T(P))||M&&P&&typeof P.length=="number"){L&&(P=L);var U=0,Z=function(){};return{s:Z,n:function(){return U>=P.length?{done:!0}:{done:!1,value:P[U++]}},e:function(m){throw m},f:Z}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var C,J=!0,x=!1;return{s:function(){L=P[Symbol.iterator]()},n:function(){var m=L.next();return J=m.done,m},e:function(m){x=!0,C=m},f:function(){try{J||L.return==null||L.return()}finally{if(x)throw C}}}}var I=(function(P){var M=Math.abs,L=Math.max,U=Math.imul,Z=Math.clz32;function C(x,m){var f;if(e(this,C),x>C.__kMaxLength)throw new RangeError("Maximum BigInt size exceeded");return f=J.call(this,x),f.sign=m,f}s(C,P);var J=_(C);return n(C,[{key:"toDebugString",value:function(){var x,m=["BigInt["],f=B(this);try{for(f.s();!(x=f.n()).done;){var l=x.value;m.push((l&&(l>>>0).toString(16))+", ")}}catch(h){f.e(h)}finally{f.f()}return m.push("]"),m.join("")}},{key:"toString",value:function(){var x=0<arguments.length&&arguments[0]!==void 0?arguments[0]:10;if(2>x||36<x)throw new RangeError("toString() radix argument must be between 2 and 36");return this.length===0?"0":(x&x-1)==0?C.__toStringBasePowerOfTwo(this,x):C.__toStringGeneric(this,x,!1)}},{key:"__copy",value:function(){for(var x=new C(this.length,this.sign),m=0;m<this.length;m++)x[m]=this[m];return x}},{key:"__trim",value:function(){for(var x=this.length,m=this[x-1];m===0;)x--,m=this[x-1],this.pop();return x===0&&(this.sign=!1),this}},{key:"__initializeDigits",value:function(){for(var x=0;x<this.length;x++)this[x]=0}},{key:"__clzmsd",value:function(){return Z(this[this.length-1])}},{key:"__inplaceMultiplyAdd",value:function(x,m,f){f>this.length&&(f=this.length);for(var l=65535&x,h=x>>>16,g=0,b=65535&m,w=m>>>16,k=0;k<f;k++){var S=this.__digit(k),p=65535&S,E=S>>>16,R=U(p,l),N=U(p,h),q=U(E,l),G=U(E,h),X=b+(65535&R),ee=w+g+(X>>>16)+(R>>>16)+(65535&N)+(65535&q);b=(N>>>16)+(q>>>16)+(65535&G)+(ee>>>16),g=b>>>16,b&=65535,w=G>>>16,this.__setDigit(k,65535&X|ee<<16)}if(g!==0||b!==0||w!==0)throw new Error("implementation bug")}},{key:"__inplaceAdd",value:function(x,m,f){for(var l,h=0,g=0;g<f;g++)l=this.__halfDigit(m+g)+x.__halfDigit(g)+h,h=l>>>16,this.__setHalfDigit(m+g,l);return h}},{key:"__inplaceSub",value:function(x,m,f){var l=0;if(1&m){m>>=1;for(var h=this.__digit(m),g=65535&h,b=0;b<f-1>>>1;b++){var w=x.__digit(b),k=(h>>>16)-(65535&w)-l;l=1&k>>>16,this.__setDigit(m+b,k<<16|65535&g),h=this.__digit(m+b+1),g=(65535&h)-(w>>>16)-l,l=1&g>>>16}var S=x.__digit(b),p=(h>>>16)-(65535&S)-l;if(l=1&p>>>16,this.__setDigit(m+b,p<<16|65535&g),m+b+1>=this.length)throw new RangeError("out of bounds");(1&f)==0&&(h=this.__digit(m+b+1),g=(65535&h)-(S>>>16)-l,l=1&g>>>16,this.__setDigit(m+x.length,4294901760&h|65535&g))}else{m>>=1;for(var E=0;E<x.length-1;E++){var R=this.__digit(m+E),N=x.__digit(E),q=(65535&R)-(65535&N)-l;l=1&q>>>16;var G=(R>>>16)-(N>>>16)-l;l=1&G>>>16,this.__setDigit(m+E,G<<16|65535&q)}var X=this.__digit(m+E),ee=x.__digit(E),ce=(65535&X)-(65535&ee)-l;l=1&ce>>>16;var ie=0;(1&f)==0&&(ie=(X>>>16)-(ee>>>16)-l,l=1&ie>>>16),this.__setDigit(m+E,ie<<16|65535&ce)}return l}},{key:"__inplaceRightShift",value:function(x){if(x!==0){for(var m,f=this.__digit(0)>>>x,l=this.length-1,h=0;h<l;h++)m=this.__digit(h+1),this.__setDigit(h,m<<32-x|f),f=m>>>x;this.__setDigit(l,f)}}},{key:"__digit",value:function(x){return this[x]}},{key:"__unsignedDigit",value:function(x){return this[x]>>>0}},{key:"__setDigit",value:function(x,m){this[x]=0|m}},{key:"__setDigitGrow",value:function(x,m){this[x]=0|m}},{key:"__halfDigitLength",value:function(){var x=this.length;return 65535>=this.__unsignedDigit(x-1)?2*x-1:2*x}},{key:"__halfDigit",value:function(x){return 65535&this[x>>>1]>>>((1&x)<<4)}},{key:"__setHalfDigit",value:function(x,m){var f=x>>>1,l=this.__digit(f),h=1&x?65535&l|m<<16:4294901760&l|65535&m;this.__setDigit(f,h)}}],[{key:"BigInt",value:function(x){var m=Math.floor,f=Number.isFinite;if(typeof x=="number"){if(x===0)return C.__zero();if((0|x)===x)return 0>x?C.__oneDigit(-x,!0):C.__oneDigit(x,!1);if(!f(x)||m(x)!==x)throw new RangeError("The number "+x+" cannot be converted to BigInt because it is not an integer");return C.__fromDouble(x)}if(typeof x=="string"){var l=C.__fromString(x);if(l===null)throw new SyntaxError("Cannot convert "+x+" to a BigInt");return l}if(typeof x=="boolean")return x===!0?C.__oneDigit(1,!1):C.__zero();if(r(x)==="object"){if(x.constructor===C)return x;var h=C.__toPrimitive(x);return C.BigInt(h)}throw new TypeError("Cannot convert "+x+" to a BigInt")}},{key:"toNumber",value:function(x){var m=x.length;if(m===0)return 0;if(m===1){var f=x.__unsignedDigit(0);return x.sign?-f:f}var l=x.__digit(m-1),h=Z(l),g=32*m-h;if(1024<g)return x.sign?-1/0:1/0;var b=g-1,w=l,k=m-1,S=h+1,p=S===32?0:w<<S;p>>>=12;var E=S-12,R=12<=S?0:w<<20+S,N=20+S;0<E&&0<k&&(k--,w=x.__digit(k),p|=w>>>32-E,R=w<<E,N=E),0<N&&0<k&&(k--,w=x.__digit(k),R|=w>>>32-N,N-=32);var q=C.__decideRounding(x,N,k,w);if((q===1||q===0&&(1&R)==1)&&(R=R+1>>>0,R===0&&(p++,p>>>20!=0&&(p=0,b++,1023<b))))return x.sign?-1/0:1/0;var G=x.sign?-2147483648:0;return b=b+1023<<20,C.__kBitConversionInts[1]=G|b|p,C.__kBitConversionInts[0]=R,C.__kBitConversionDouble[0]}},{key:"unaryMinus",value:function(x){if(x.length===0)return x;var m=x.__copy();return m.sign=!x.sign,m}},{key:"bitwiseNot",value:function(x){return x.sign?C.__absoluteSubOne(x).__trim():C.__absoluteAddOne(x,!0)}},{key:"exponentiate",value:function(x,m){if(m.sign)throw new RangeError("Exponent must be positive");if(m.length===0)return C.__oneDigit(1,!1);if(x.length===0)return x;if(x.length===1&&x.__digit(0)===1)return x.sign&&(1&m.__digit(0))==0?C.unaryMinus(x):x;if(1<m.length)throw new RangeError("BigInt too big");var f=m.__unsignedDigit(0);if(f===1)return x;if(f>=C.__kMaxLengthBits)throw new RangeError("BigInt too big");if(x.length===1&&x.__digit(0)===2){var l=1+(f>>>5),h=x.sign&&(1&f)!=0,g=new C(l,h);g.__initializeDigits();var b=1<<(31&f);return g.__setDigit(l-1,b),g}var w=null,k=x;for((1&f)!=0&&(w=x),f>>=1;f!==0;f>>=1)k=C.multiply(k,k),(1&f)!=0&&(w===null?w=k:w=C.multiply(w,k));return w}},{key:"multiply",value:function(x,m){if(x.length===0)return x;if(m.length===0)return m;var f=x.length+m.length;32<=x.__clzmsd()+m.__clzmsd()&&f--;var l=new C(f,x.sign!==m.sign);l.__initializeDigits();for(var h=0;h<x.length;h++)C.__multiplyAccumulate(m,x.__digit(h),l,h);return l.__trim()}},{key:"divide",value:function(x,m){if(m.length===0)throw new RangeError("Division by zero");if(0>C.__absoluteCompare(x,m))return C.__zero();var f,l=x.sign!==m.sign,h=m.__unsignedDigit(0);if(m.length===1&&65535>=h){if(h===1)return l===x.sign?x:C.unaryMinus(x);f=C.__absoluteDivSmall(x,h,null)}else f=C.__absoluteDivLarge(x,m,!0,!1);return f.sign=l,f.__trim()}},{key:"remainder",value:function(m,f){if(f.length===0)throw new RangeError("Division by zero");if(0>C.__absoluteCompare(m,f))return m;var l=f.__unsignedDigit(0);if(f.length===1&&65535>=l){if(l===1)return C.__zero();var h=C.__absoluteModSmall(m,l);return h===0?C.__zero():C.__oneDigit(h,m.sign)}var g=C.__absoluteDivLarge(m,f,!1,!0);return g.sign=m.sign,g.__trim()}},{key:"add",value:function(x,m){var f=x.sign;return f===m.sign?C.__absoluteAdd(x,m,f):0<=C.__absoluteCompare(x,m)?C.__absoluteSub(x,m,f):C.__absoluteSub(m,x,!f)}},{key:"subtract",value:function(x,m){var f=x.sign;return f===m.sign?0<=C.__absoluteCompare(x,m)?C.__absoluteSub(x,m,f):C.__absoluteSub(m,x,!f):C.__absoluteAdd(x,m,f)}},{key:"leftShift",value:function(x,m){return m.length===0||x.length===0?x:m.sign?C.__rightShiftByAbsolute(x,m):C.__leftShiftByAbsolute(x,m)}},{key:"signedRightShift",value:function(x,m){return m.length===0||x.length===0?x:m.sign?C.__leftShiftByAbsolute(x,m):C.__rightShiftByAbsolute(x,m)}},{key:"unsignedRightShift",value:function(){throw new TypeError("BigInts have no unsigned right shift; use >> instead")}},{key:"lessThan",value:function(x,m){return 0>C.__compareToBigInt(x,m)}},{key:"lessThanOrEqual",value:function(x,m){return 0>=C.__compareToBigInt(x,m)}},{key:"greaterThan",value:function(x,m){return 0<C.__compareToBigInt(x,m)}},{key:"greaterThanOrEqual",value:function(x,m){return 0<=C.__compareToBigInt(x,m)}},{key:"equal",value:function(x,m){if(x.sign!==m.sign||x.length!==m.length)return!1;for(var f=0;f<x.length;f++)if(x.__digit(f)!==m.__digit(f))return!1;return!0}},{key:"notEqual",value:function(x,m){return!C.equal(x,m)}},{key:"bitwiseAnd",value:function(x,m){if(!x.sign&&!m.sign)return C.__absoluteAnd(x,m).__trim();if(x.sign&&m.sign){var f=L(x.length,m.length)+1,l=C.__absoluteSubOne(x,f),h=C.__absoluteSubOne(m);return l=C.__absoluteOr(l,h,l),C.__absoluteAddOne(l,!0,l).__trim()}if(x.sign){var g=[m,x];x=g[0],m=g[1]}return C.__absoluteAndNot(x,C.__absoluteSubOne(m)).__trim()}},{key:"bitwiseXor",value:function(x,m){if(!x.sign&&!m.sign)return C.__absoluteXor(x,m).__trim();if(x.sign&&m.sign){var f=L(x.length,m.length),l=C.__absoluteSubOne(x,f),h=C.__absoluteSubOne(m);return C.__absoluteXor(l,h,l).__trim()}var g=L(x.length,m.length)+1;if(x.sign){var b=[m,x];x=b[0],m=b[1]}var w=C.__absoluteSubOne(m,g);return w=C.__absoluteXor(w,x,w),C.__absoluteAddOne(w,!0,w).__trim()}},{key:"bitwiseOr",value:function(x,m){var f=L(x.length,m.length);if(!x.sign&&!m.sign)return C.__absoluteOr(x,m).__trim();if(x.sign&&m.sign){var l=C.__absoluteSubOne(x,f),h=C.__absoluteSubOne(m);return l=C.__absoluteAnd(l,h,l),C.__absoluteAddOne(l,!0,l).__trim()}if(x.sign){var g=[m,x];x=g[0],m=g[1]}var b=C.__absoluteSubOne(m,f);return b=C.__absoluteAndNot(b,x,b),C.__absoluteAddOne(b,!0,b).__trim()}},{key:"asIntN",value:function(x,m){if(m.length===0)return m;if(x===0)return C.__zero();if(x>=C.__kMaxLengthBits)return m;var f=x+31>>>5;if(m.length<f)return m;var l=m.__unsignedDigit(f-1),h=1<<(31&x-1);if(m.length===f&&l<h)return m;if((l&h)!==h)return C.__truncateToNBits(x,m);if(!m.sign)return C.__truncateAndSubFromPowerOfTwo(x,m,!0);if((l&h-1)==0){for(var g=f-2;0<=g;g--)if(m.__digit(g)!==0)return C.__truncateAndSubFromPowerOfTwo(x,m,!1);return m.length===f&&l===h?m:C.__truncateToNBits(x,m)}return C.__truncateAndSubFromPowerOfTwo(x,m,!1)}},{key:"asUintN",value:function(x,m){if(m.length===0)return m;if(x===0)return C.__zero();if(m.sign){if(x>C.__kMaxLengthBits)throw new RangeError("BigInt too big");return C.__truncateAndSubFromPowerOfTwo(x,m,!1)}if(x>=C.__kMaxLengthBits)return m;var f=x+31>>>5;if(m.length<f)return m;var l=31&x;if(m.length==f){if(l===0)return m;var h=m.__digit(f-1);if(!(h>>>l))return m}return C.__truncateToNBits(x,m)}},{key:"ADD",value:function(x,m){if(x=C.__toPrimitive(x),m=C.__toPrimitive(m),typeof x=="string")return typeof m!="string"&&(m=m.toString()),x+m;if(typeof m=="string")return x.toString()+m;if(x=C.__toNumeric(x),m=C.__toNumeric(m),C.__isBigInt(x)&&C.__isBigInt(m))return C.add(x,m);if(typeof x=="number"&&typeof m=="number")return x+m;throw new TypeError("Cannot mix BigInt and other types, use explicit conversions")}},{key:"LT",value:function(x,m){return C.__compare(x,m,0)}},{key:"LE",value:function(x,m){return C.__compare(x,m,1)}},{key:"GT",value:function(x,m){return C.__compare(x,m,2)}},{key:"GE",value:function(x,m){return C.__compare(x,m,3)}},{key:"EQ",value:function(x,m){for(;;){if(C.__isBigInt(x))return C.__isBigInt(m)?C.equal(x,m):C.EQ(m,x);if(typeof x=="number"){if(C.__isBigInt(m))return C.__equalToNumber(m,x);if(r(m)!=="object")return x==m;m=C.__toPrimitive(m)}else if(typeof x=="string"){if(C.__isBigInt(m))return x=C.__fromString(x),x!==null&&C.equal(x,m);if(r(m)!=="object")return x==m;m=C.__toPrimitive(m)}else if(typeof x=="boolean"){if(C.__isBigInt(m))return C.__equalToNumber(m,+x);if(r(m)!=="object")return x==m;m=C.__toPrimitive(m)}else if(r(x)==="symbol"){if(C.__isBigInt(m))return!1;if(r(m)!=="object")return x==m;m=C.__toPrimitive(m)}else if(r(x)==="object"){if(r(m)==="object"&&m.constructor!==C)return x==m;x=C.__toPrimitive(x)}else return x==m}}},{key:"NE",value:function(x,m){return!C.EQ(x,m)}},{key:"__zero",value:function(){return new C(0,!1)}},{key:"__oneDigit",value:function(x,m){var f=new C(1,m);return f.__setDigit(0,x),f}},{key:"__decideRounding",value:function(x,m,f,l){if(0<m)return-1;var h;if(0>m)h=-m-1;else{if(f===0)return-1;f--,l=x.__digit(f),h=31}var g=1<<h;if((l&g)==0)return-1;if(g-=1,(l&g)!=0)return 1;for(;0<f;)if(f--,x.__digit(f)!==0)return 1;return 0}},{key:"__fromDouble",value:function(x){C.__kBitConversionDouble[0]=x;var m,f=2047&C.__kBitConversionInts[1]>>>20,l=f-1023,h=(l>>>5)+1,g=new C(h,0>x),b=1048575&C.__kBitConversionInts[1]|1048576,w=C.__kBitConversionInts[0],k=20,S=31&l,p=0;if(S<k){var E=k-S;p=E+32,m=b>>>E,b=b<<32-E|w>>>E,w<<=32-E}else if(S===k)p=32,m=b,b=w;else{var R=S-k;p=32-R,m=b<<R|w>>>32-R,b=w<<R}g.__setDigit(h-1,m);for(var N=h-2;0<=N;N--)0<p?(p-=32,m=b,b=w):m=0,g.__setDigit(N,m);return g.__trim()}},{key:"__isWhitespace",value:function(x){return 13>=x&&9<=x||(159>=x?x==32:131071>=x?x==160||x==5760:196607>=x?(x&=131071,10>=x||x==40||x==41||x==47||x==95||x==4096):x==65279)}},{key:"__fromString",value:function(x){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:0,f=0,l=x.length,h=0;if(h===l)return C.__zero();for(var g=x.charCodeAt(h);C.__isWhitespace(g);){if(++h===l)return C.__zero();g=x.charCodeAt(h)}if(g===43){if(++h===l)return null;g=x.charCodeAt(h),f=1}else if(g===45){if(++h===l)return null;g=x.charCodeAt(h),f=-1}if(m===0){if(m=10,g===48){if(++h===l)return C.__zero();if(g=x.charCodeAt(h),g===88||g===120){if(m=16,++h===l)return null;g=x.charCodeAt(h)}else if(g===79||g===111){if(m=8,++h===l)return null;g=x.charCodeAt(h)}else if(g===66||g===98){if(m=2,++h===l)return null;g=x.charCodeAt(h)}}}else if(m===16&&g===48){if(++h===l)return C.__zero();if(g=x.charCodeAt(h),g===88||g===120){if(++h===l)return null;g=x.charCodeAt(h)}}for(;g===48;){if(++h===l)return C.__zero();g=x.charCodeAt(h)}var b=l-h,w=C.__kMaxBitsPerChar[m],k=C.__kBitsPerCharTableMultiplier-1;if(b>1073741824/w)return null;var S=w*b+k>>>C.__kBitsPerCharTableShift,p=new C(S+31>>>5,!1),E=10>m?m:10,R=10<m?m-10:0;if((m&m-1)==0){w>>=C.__kBitsPerCharTableShift;var N=[],q=[],G=!1;do{for(var X,ee=0,ce=0;;){if(X=void 0,g-48>>>0<E)X=g-48;else if((32|g)-97>>>0<R)X=(32|g)-87;else{G=!0;break}if(ce+=w,ee=ee<<w|X,++h===l){G=!0;break}if(g=x.charCodeAt(h),32<ce+w)break}N.push(ee),q.push(ce)}while(!G);C.__fillFromParts(p,N,q)}else{p.__initializeDigits();var ie=!1,oe=0;do{for(var ve,Ee=0,xe=1;;){if(ve=void 0,g-48>>>0<E)ve=g-48;else if((32|g)-97>>>0<R)ve=(32|g)-87;else{ie=!0;break}var Pr=xe*m;if(4294967295<Pr)break;if(xe=Pr,Ee=Ee*m+ve,oe++,++h===l){ie=!0;break}g=x.charCodeAt(h)}k=32*C.__kBitsPerCharTableMultiplier-1;var Oe=w*oe+k>>>C.__kBitsPerCharTableShift+5;p.__inplaceMultiplyAdd(xe,Ee,Oe)}while(!ie)}if(h!==l){if(!C.__isWhitespace(g))return null;for(h++;h<l;h++)if(g=x.charCodeAt(h),!C.__isWhitespace(g))return null}return f!==0&&m!==10?null:(p.sign=f===-1,p.__trim())}},{key:"__fillFromParts",value:function(x,m,f){for(var l=0,h=0,g=0,b=m.length-1;0<=b;b--){var w=m[b],k=f[b];h|=w<<g,g+=k,g===32?(x.__setDigit(l++,h),g=0,h=0):32<g&&(x.__setDigit(l++,h),g-=32,h=w>>>k-g)}if(h!==0){if(l>=x.length)throw new Error("implementation bug");x.__setDigit(l++,h)}for(;l<x.length;l++)x.__setDigit(l,0)}},{key:"__toStringBasePowerOfTwo",value:function(x,m){var f=x.length,l=m-1;l=(85&l>>>1)+(85&l),l=(51&l>>>2)+(51&l),l=(15&l>>>4)+(15&l);var h=l,g=m-1,b=x.__digit(f-1),w=Z(b),k=0|(32*f-w+h-1)/h;if(x.sign&&k++,268435456<k)throw new Error("string too long");for(var S=Array(k),p=k-1,E=0,R=0,N=0;N<f-1;N++){var q=x.__digit(N),G=(E|q<<R)&g;S[p--]=C.__kConversionChars[G];var X=h-R;for(E=q>>>X,R=32-X;R>=h;)S[p--]=C.__kConversionChars[E&g],E>>>=h,R-=h}var ee=(E|b<<R)&g;for(S[p--]=C.__kConversionChars[ee],E=b>>>h-R;E!==0;)S[p--]=C.__kConversionChars[E&g],E>>>=h;if(x.sign&&(S[p--]="-"),p!==-1)throw new Error("implementation bug");return S.join("")}},{key:"__toStringGeneric",value:function(x,m,f){var l=x.length;if(l===0)return"";if(l===1){var h=x.__unsignedDigit(0).toString(m);return f===!1&&x.sign&&(h="-"+h),h}var g=32*l-Z(x.__digit(l-1)),b=C.__kMaxBitsPerChar[m],w=b-1,k=g*C.__kBitsPerCharTableMultiplier;k+=w-1,k=0|k/w;var S,p,E=k+1>>1,R=C.exponentiate(C.__oneDigit(m,!1),C.__oneDigit(E,!1)),N=R.__unsignedDigit(0);if(R.length===1&&65535>=N){S=new C(x.length,!1),S.__initializeDigits();for(var q,G=0,X=2*x.length-1;0<=X;X--)q=G<<16|x.__halfDigit(X),S.__setHalfDigit(X,0|q/N),G=0|q%N;p=G.toString(m)}else{var ee=C.__absoluteDivLarge(x,R,!0,!0);S=ee.quotient;var ce=ee.remainder.__trim();p=C.__toStringGeneric(ce,m,!0)}S.__trim();for(var ie=C.__toStringGeneric(S,m,!0);p.length<E;)p="0"+p;return f===!1&&x.sign&&(ie="-"+ie),ie+p}},{key:"__unequalSign",value:function(x){return x?-1:1}},{key:"__absoluteGreater",value:function(x){return x?-1:1}},{key:"__absoluteLess",value:function(x){return x?1:-1}},{key:"__compareToBigInt",value:function(x,m){var f=x.sign;if(f!==m.sign)return C.__unequalSign(f);var l=C.__absoluteCompare(x,m);return 0<l?C.__absoluteGreater(f):0>l?C.__absoluteLess(f):0}},{key:"__compareToNumber",value:function(x,m){if(!0|m){var f=x.sign,l=0>m;if(f!==l)return C.__unequalSign(f);if(x.length===0){if(l)throw new Error("implementation bug");return m===0?0:-1}if(1<x.length)return C.__absoluteGreater(f);var h=M(m),g=x.__unsignedDigit(0);return g>h?C.__absoluteGreater(f):g<h?C.__absoluteLess(f):0}return C.__compareToDouble(x,m)}},{key:"__compareToDouble",value:function(x,m){if(m!==m)return m;if(m===1/0)return-1;if(m===-1/0)return 1;var f=x.sign;if(f!==0>m)return C.__unequalSign(f);if(m===0)throw new Error("implementation bug: should be handled elsewhere");if(x.length===0)return-1;C.__kBitConversionDouble[0]=m;var l=2047&C.__kBitConversionInts[1]>>>20;if(l==2047)throw new Error("implementation bug: handled elsewhere");var h=l-1023;if(0>h)return C.__absoluteGreater(f);var g=x.length,b=x.__digit(g-1),w=Z(b),k=32*g-w,S=h+1;if(k<S)return C.__absoluteLess(f);if(k>S)return C.__absoluteGreater(f);var p=1048576|1048575&C.__kBitConversionInts[1],E=C.__kBitConversionInts[0],R=20,N=31-w;if(N!==(k-1)%31)throw new Error("implementation bug");var q,G=0;if(N<R){var X=R-N;G=X+32,q=p>>>X,p=p<<32-X|E>>>X,E<<=32-X}else if(N===R)G=32,q=p,p=E;else{var ee=N-R;G=32-ee,q=p<<ee|E>>>32-ee,p=E<<ee}if(b>>>=0,q>>>=0,b>q)return C.__absoluteGreater(f);if(b<q)return C.__absoluteLess(f);for(var ce=g-2;0<=ce;ce--){0<G?(G-=32,q=p>>>0,p=E,E=0):q=0;var ie=x.__unsignedDigit(ce);if(ie>q)return C.__absoluteGreater(f);if(ie<q)return C.__absoluteLess(f)}if(p!==0||E!==0){if(G===0)throw new Error("implementation bug");return C.__absoluteLess(f)}return 0}},{key:"__equalToNumber",value:function(x,m){return m|m===0?m===0?x.length===0:x.length===1&&x.sign===0>m&&x.__unsignedDigit(0)===M(m):C.__compareToDouble(x,m)===0}},{key:"__comparisonResultToBool",value:function(x,m){switch(m){case 0:return 0>x;case 1:return 0>=x;case 2:return 0<x;case 3:return 0<=x}throw new Error("unreachable")}},{key:"__compare",value:function(x,m,f){if(x=C.__toPrimitive(x),m=C.__toPrimitive(m),typeof x=="string"&&typeof m=="string")switch(f){case 0:return x<m;case 1:return x<=m;case 2:return x>m;case 3:return x>=m}if(C.__isBigInt(x)&&typeof m=="string")return m=C.__fromString(m),m!==null&&C.__comparisonResultToBool(C.__compareToBigInt(x,m),f);if(typeof x=="string"&&C.__isBigInt(m))return x=C.__fromString(x),x!==null&&C.__comparisonResultToBool(C.__compareToBigInt(x,m),f);if(x=C.__toNumeric(x),m=C.__toNumeric(m),C.__isBigInt(x)){if(C.__isBigInt(m))return C.__comparisonResultToBool(C.__compareToBigInt(x,m),f);if(typeof m!="number")throw new Error("implementation bug");return C.__comparisonResultToBool(C.__compareToNumber(x,m),f)}if(typeof x!="number")throw new Error("implementation bug");if(C.__isBigInt(m))return C.__comparisonResultToBool(C.__compareToNumber(m,x),2^f);if(typeof m!="number")throw new Error("implementation bug");return f===0?x<m:f===1?x<=m:f===2?x>m:f===3?x>=m:void 0}},{key:"__absoluteAdd",value:function(x,m,f){if(x.length<m.length)return C.__absoluteAdd(m,x,f);if(x.length===0)return x;if(m.length===0)return x.sign===f?x:C.unaryMinus(x);var l=x.length;(x.__clzmsd()===0||m.length===x.length&&m.__clzmsd()===0)&&l++;for(var h=new C(l,f),g=0,b=0;b<m.length;b++){var w=m.__digit(b),k=x.__digit(b),S=(65535&k)+(65535&w)+g,p=(k>>>16)+(w>>>16)+(S>>>16);g=p>>>16,h.__setDigit(b,65535&S|p<<16)}for(;b<x.length;b++){var E=x.__digit(b),R=(65535&E)+g,N=(E>>>16)+(R>>>16);g=N>>>16,h.__setDigit(b,65535&R|N<<16)}return b<h.length&&h.__setDigit(b,g),h.__trim()}},{key:"__absoluteSub",value:function(x,m,f){if(x.length===0)return x;if(m.length===0)return x.sign===f?x:C.unaryMinus(x);for(var l=new C(x.length,f),h=0,g=0;g<m.length;g++){var b=x.__digit(g),w=m.__digit(g),k=(65535&b)-(65535&w)-h;h=1&k>>>16;var S=(b>>>16)-(w>>>16)-h;h=1&S>>>16,l.__setDigit(g,65535&k|S<<16)}for(;g<x.length;g++){var p=x.__digit(g),E=(65535&p)-h;h=1&E>>>16;var R=(p>>>16)-h;h=1&R>>>16,l.__setDigit(g,65535&E|R<<16)}return l.__trim()}},{key:"__absoluteAddOne",value:function(x,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=x.length;f===null?f=new C(l,m):f.sign=m;for(var h,g=!0,b=0;b<l;b++){if(h=x.__digit(b),g){var w=h===-1;h=0|h+1,g=w}f.__setDigit(b,h)}return g&&f.__setDigitGrow(l,1),f}},{key:"__absoluteSubOne",value:function(x,m){var f=x.length;m=m||f;for(var l,h=new C(m,!1),g=!0,b=0;b<f;b++){if(l=x.__digit(b),g){var w=l===0;l=0|l-1,g=w}h.__setDigit(b,l)}if(g)throw new Error("implementation bug");for(var k=f;k<m;k++)h.__setDigit(k,0);return h}},{key:"__absoluteAnd",value:function(x,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=x.length,h=m.length,g=h;if(l<h){g=l;var b=x,w=l;x=m,l=h,m=b,h=w}var k=g;f===null?f=new C(k,!1):k=f.length;for(var S=0;S<g;S++)f.__setDigit(S,x.__digit(S)&m.__digit(S));for(;S<k;S++)f.__setDigit(S,0);return f}},{key:"__absoluteAndNot",value:function(x,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=x.length,h=m.length,g=h;l<h&&(g=l);var b=l;f===null?f=new C(b,!1):b=f.length;for(var w=0;w<g;w++)f.__setDigit(w,x.__digit(w)&~m.__digit(w));for(;w<l;w++)f.__setDigit(w,x.__digit(w));for(;w<b;w++)f.__setDigit(w,0);return f}},{key:"__absoluteOr",value:function(x,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=x.length,h=m.length,g=h;if(l<h){g=l;var b=x,w=l;x=m,l=h,m=b,h=w}var k=l;f===null?f=new C(k,!1):k=f.length;for(var S=0;S<g;S++)f.__setDigit(S,x.__digit(S)|m.__digit(S));for(;S<l;S++)f.__setDigit(S,x.__digit(S));for(;S<k;S++)f.__setDigit(S,0);return f}},{key:"__absoluteXor",value:function(x,m){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null,l=x.length,h=m.length,g=h;if(l<h){g=l;var b=x,w=l;x=m,l=h,m=b,h=w}var k=l;f===null?f=new C(k,!1):k=f.length;for(var S=0;S<g;S++)f.__setDigit(S,x.__digit(S)^m.__digit(S));for(;S<l;S++)f.__setDigit(S,x.__digit(S));for(;S<k;S++)f.__setDigit(S,0);return f}},{key:"__absoluteCompare",value:function(x,m){var f=x.length-m.length;if(f!=0)return f;for(var l=x.length-1;0<=l&&x.__digit(l)===m.__digit(l);)l--;return 0>l?0:x.__unsignedDigit(l)>m.__unsignedDigit(l)?1:-1}},{key:"__multiplyAccumulate",value:function(x,m,f,l){if(m!==0){for(var h=65535&m,g=m>>>16,b=0,w=0,k=0,S=0;S<x.length;S++,l++){var p=f.__digit(l),E=65535&p,R=p>>>16,N=x.__digit(S),q=65535&N,G=N>>>16,X=U(q,h),ee=U(q,g),ce=U(G,h),ie=U(G,g);E+=w+(65535&X),R+=k+b+(E>>>16)+(X>>>16)+(65535&ee)+(65535&ce),b=R>>>16,w=(ee>>>16)+(ce>>>16)+(65535&ie)+b,b=w>>>16,w&=65535,k=ie>>>16,p=65535&E|R<<16,f.__setDigit(l,p)}for(;b!==0||w!==0||k!==0;l++){var oe=f.__digit(l),ve=(65535&oe)+w,Ee=(oe>>>16)+(ve>>>16)+k+b;w=0,k=0,b=Ee>>>16,oe=65535&ve|Ee<<16,f.__setDigit(l,oe)}}}},{key:"__internalMultiplyAdd",value:function(x,m,f,l,h){for(var g=f,b=0,w=0;w<l;w++){var k=x.__digit(w),S=U(65535&k,m),p=(65535&S)+b+g;g=p>>>16;var E=U(k>>>16,m),R=(65535&E)+(S>>>16)+g;g=R>>>16,b=E>>>16,h.__setDigit(w,R<<16|65535&p)}if(h.length>l)for(h.__setDigit(l++,g+b);l<h.length;)h.__setDigit(l++,0);else if(g+b!==0)throw new Error("implementation bug")}},{key:"__absoluteDivSmall",value:function(x,m,f){f===null&&(f=new C(x.length,!1));for(var l=0,h=2*x.length-1;0<=h;h-=2){var g=(l<<16|x.__halfDigit(h))>>>0,b=0|g/m;l=0|g%m,g=(l<<16|x.__halfDigit(h-1))>>>0;var w=0|g/m;l=0|g%m,f.__setDigit(h>>>1,b<<16|w)}return f}},{key:"__absoluteModSmall",value:function(x,m){for(var f,l=0,h=2*x.length-1;0<=h;h--)f=(l<<16|x.__halfDigit(h))>>>0,l=0|f%m;return l}},{key:"__absoluteDivLarge",value:function(x,m,f,l){var h=m.__halfDigitLength(),g=m.length,b=x.__halfDigitLength()-h,w=null;f&&(w=new C(b+2>>>1,!1),w.__initializeDigits());var k=new C(h+2>>>1,!1);k.__initializeDigits();var S=C.__clz16(m.__halfDigit(h-1));0<S&&(m=C.__specialLeftShift(m,S,0));for(var p=C.__specialLeftShift(x,S,1),E=m.__halfDigit(h-1),R=0,N=b;0<=N;N--){var q=65535,G=p.__halfDigit(N+h);if(G!==E){var X=(G<<16|p.__halfDigit(N+h-1))>>>0;q=0|X/E;for(var ee=0|X%E,ce=m.__halfDigit(h-2),ie=p.__halfDigit(N+h-2);U(q,ce)>>>0>(ee<<16|ie)>>>0&&(q--,ee+=E,!(65535<ee)););}C.__internalMultiplyAdd(m,q,0,g,k);var oe=p.__inplaceSub(k,N,h+1);oe!==0&&(oe=p.__inplaceAdd(m,N,h),p.__setHalfDigit(N+h,p.__halfDigit(N+h)+oe),q--),f&&(1&N?R=q<<16:w.__setDigit(N>>>1,R|q))}return l?(p.__inplaceRightShift(S),f?{quotient:w,remainder:p}:p):f?w:void 0}},{key:"__clz16",value:function(x){return Z(x)-16}},{key:"__specialLeftShift",value:function(x,m,f){var l=x.length,h=new C(l+f,!1);if(m===0){for(var g=0;g<l;g++)h.__setDigit(g,x.__digit(g));return 0<f&&h.__setDigit(l,0),h}for(var b,w=0,k=0;k<l;k++)b=x.__digit(k),h.__setDigit(k,b<<m|w),w=b>>>32-m;return 0<f&&h.__setDigit(l,w),h}},{key:"__leftShiftByAbsolute",value:function(x,m){var f=C.__toShiftAmount(m);if(0>f)throw new RangeError("BigInt too big");var l=f>>>5,h=31&f,g=x.length,b=h!==0&&x.__digit(g-1)>>>32-h!=0,w=g+l+(b?1:0),k=new C(w,x.sign);if(h===0){for(var S=0;S<l;S++)k.__setDigit(S,0);for(;S<w;S++)k.__setDigit(S,x.__digit(S-l))}else{for(var p=0,E=0;E<l;E++)k.__setDigit(E,0);for(var R,N=0;N<g;N++)R=x.__digit(N),k.__setDigit(N+l,R<<h|p),p=R>>>32-h;if(b)k.__setDigit(g+l,p);else if(p!==0)throw new Error("implementation bug")}return k.__trim()}},{key:"__rightShiftByAbsolute",value:function(x,m){var f=x.length,l=x.sign,h=C.__toShiftAmount(m);if(0>h)return C.__rightShiftByMaximum(l);var g=h>>>5,b=31&h,w=f-g;if(0>=w)return C.__rightShiftByMaximum(l);var k=!1;if(l){if((x.__digit(g)&(1<<b)-1)!=0)k=!0;else for(var S=0;S<g;S++)if(x.__digit(S)!==0){k=!0;break}}if(k&&b===0){var p=x.__digit(f-1);~p==0&&w++}var E=new C(w,l);if(b===0)for(var R=g;R<f;R++)E.__setDigit(R-g,x.__digit(R));else{for(var N,q=x.__digit(g)>>>b,G=f-g-1,X=0;X<G;X++)N=x.__digit(X+g+1),E.__setDigit(X,N<<32-b|q),q=N>>>b;E.__setDigit(G,q)}return k&&(E=C.__absoluteAddOne(E,!0,E)),E.__trim()}},{key:"__rightShiftByMaximum",value:function(x){return x?C.__oneDigit(1,!0):C.__zero()}},{key:"__toShiftAmount",value:function(x){if(1<x.length)return-1;var m=x.__unsignedDigit(0);return m>C.__kMaxLengthBits?-1:m}},{key:"__toPrimitive",value:function(x){var m=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"default";if(r(x)!=="object"||x.constructor===C)return x;var f=x[Symbol.toPrimitive];if(f){var l=f(m);if(r(l)!=="object")return l;throw new TypeError("Cannot convert object to primitive value")}var h=x.valueOf;if(h){var g=h.call(x);if(r(g)!=="object")return g}var b=x.toString;if(b){var w=b.call(x);if(r(w)!=="object")return w}throw new TypeError("Cannot convert object to primitive value")}},{key:"__toNumeric",value:function(x){return C.__isBigInt(x)?x:+x}},{key:"__isBigInt",value:function(x){return r(x)==="object"&&x.constructor===C}},{key:"__truncateToNBits",value:function(x,m){for(var f=x+31>>>5,l=new C(f,m.sign),h=f-1,g=0;g<h;g++)l.__setDigit(g,m.__digit(g));var b=m.__digit(h);if((31&x)!=0){var w=32-(31&x);b=b<<w>>>w}return l.__setDigit(h,b),l.__trim()}},{key:"__truncateAndSubFromPowerOfTwo",value:function(x,m,f){for(var l=Math.min,h=x+31>>>5,g=new C(h,f),b=0,w=h-1,k=0,S=l(w,m.length);b<S;b++){var p=m.__digit(b),E=0-(65535&p)-k;k=1&E>>>16;var R=0-(p>>>16)-k;k=1&R>>>16,g.__setDigit(b,65535&E|R<<16)}for(;b<w;b++)g.__setDigit(b,0|-k);var N,q=w<m.length?m.__digit(w):0,G=31&x;if(G===0){var X=0-(65535&q)-k;k=1&X>>>16;var ee=0-(q>>>16)-k;N=65535&X|ee<<16}else{var ce=32-G;q=q<<ce>>>ce;var ie=1<<32-ce,oe=(65535&ie)-(65535&q)-k;k=1&oe>>>16;var ve=(ie>>>16)-(q>>>16)-k;N=65535&oe|ve<<16,N&=ie-1}return g.__setDigit(w,N),g.__trim()}},{key:"__digitPow",value:function(x,m){for(var f=1;0<m;)1&m&&(f*=x),m>>>=1,x*=x;return f}}]),C})(d(Array));return I.__kMaxLength=33554432,I.__kMaxLengthBits=I.__kMaxLength<<5,I.__kMaxBitsPerChar=[0,0,32,51,64,75,83,90,96,102,107,111,115,119,122,126,128,131,134,136,139,141,143,145,147,149,151,153,154,156,158,159,160,162,163,165,166],I.__kBitsPerCharTableShift=5,I.__kBitsPerCharTableMultiplier=1<<I.__kBitsPerCharTableShift,I.__kConversionChars=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],I.__kBitConversionBuffer=new ArrayBuffer(8),I.__kBitConversionDouble=new Float64Array(I.__kBitConversionBuffer),I.__kBitConversionInts=new Int32Array(I.__kBitConversionBuffer),I})});var W7=de((yU,VT)=>{VT.exports={name:"elliptic",version:"6.6.1",description:"EC cryptography",main:"lib/elliptic.js",files:["lib"],scripts:{lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},repository:{type:"git",url:"git@github.com:indutny/elliptic"},keywords:["EC","Elliptic","curve","Cryptography"],author:"Fedor Indutny <fedor@indutny.com>",license:"MIT",bugs:{url:"https://github.com/indutny/elliptic/issues"},homepage:"https://github.com/indutny/elliptic",devDependencies:{brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},dependencies:{"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"}}});var Z7=de(()=>{});var ws=de((G7,I4)=>{(function(r,e){"use strict";function t(m,f){if(!m)throw new Error(f||"Assertion failed")}function n(m,f){m.super_=f;var l=function(){};l.prototype=f.prototype,m.prototype=new l,m.prototype.constructor=m}function s(m,f,l){if(s.isBN(m))return m;this.negative=0,this.words=null,this.length=0,this.red=null,m!==null&&((f==="le"||f==="be")&&(l=f,f=10),this._init(m||0,f||10,l||"be"))}typeof r=="object"?r.exports=s:e.BN=s,s.BN=s,s.wordSize=26;var o;try{typeof window<"u"&&typeof window.Buffer<"u"?o=window.Buffer:o=Z7().Buffer}catch{}s.isBN=function(f){return f instanceof s?!0:f!==null&&typeof f=="object"&&f.constructor.wordSize===s.wordSize&&Array.isArray(f.words)},s.max=function(f,l){return f.cmp(l)>0?f:l},s.min=function(f,l){return f.cmp(l)<0?f:l},s.prototype._init=function(f,l,h){if(typeof f=="number")return this._initNumber(f,l,h);if(typeof f=="object")return this._initArray(f,l,h);l==="hex"&&(l=16),t(l===(l|0)&&l>=2&&l<=36),f=f.toString().replace(/\s+/g,"");var g=0;f[0]==="-"&&(g++,this.negative=1),g<f.length&&(l===16?this._parseHex(f,g,h):(this._parseBase(f,l,g),h==="le"&&this._initArray(this.toArray(),l,h)))},s.prototype._initNumber=function(f,l,h){f<0&&(this.negative=1,f=-f),f<67108864?(this.words=[f&67108863],this.length=1):f<4503599627370496?(this.words=[f&67108863,f/67108864&67108863],this.length=2):(t(f<9007199254740992),this.words=[f&67108863,f/67108864&67108863,1],this.length=3),h==="le"&&this._initArray(this.toArray(),l,h)},s.prototype._initArray=function(f,l,h){if(t(typeof f.length=="number"),f.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(f.length/3),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var b,w,k=0;if(h==="be")for(g=f.length-1,b=0;g>=0;g-=3)w=f[g]|f[g-1]<<8|f[g-2]<<16,this.words[b]|=w<<k&67108863,this.words[b+1]=w>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);else if(h==="le")for(g=0,b=0;g<f.length;g+=3)w=f[g]|f[g+1]<<8|f[g+2]<<16,this.words[b]|=w<<k&67108863,this.words[b+1]=w>>>26-k&67108863,k+=24,k>=26&&(k-=26,b++);return this.strip()};function i(m,f){var l=m.charCodeAt(f);return l>=65&&l<=70?l-55:l>=97&&l<=102?l-87:l-48&15}function c(m,f,l){var h=i(m,l);return l-1>=f&&(h|=i(m,l-1)<<4),h}s.prototype._parseHex=function(f,l,h){this.length=Math.ceil((f.length-l)/6),this.words=new Array(this.length);for(var g=0;g<this.length;g++)this.words[g]=0;var b=0,w=0,k;if(h==="be")for(g=f.length-1;g>=l;g-=2)k=c(f,l,g)<<b,this.words[w]|=k&67108863,b>=18?(b-=18,w+=1,this.words[w]|=k>>>26):b+=8;else{var S=f.length-l;for(g=S%2===0?l+1:l;g<f.length;g+=2)k=c(f,l,g)<<b,this.words[w]|=k&67108863,b>=18?(b-=18,w+=1,this.words[w]|=k>>>26):b+=8}this.strip()};function a(m,f,l,h){for(var g=0,b=Math.min(m.length,l),w=f;w<b;w++){var k=m.charCodeAt(w)-48;g*=h,k>=49?g+=k-49+10:k>=17?g+=k-17+10:g+=k}return g}s.prototype._parseBase=function(f,l,h){this.words=[0],this.length=1;for(var g=0,b=1;b<=67108863;b*=l)g++;g--,b=b/l|0;for(var w=f.length-h,k=w%g,S=Math.min(w,w-k)+h,p=0,E=h;E<S;E+=g)p=a(f,E,E+g,l),this.imuln(b),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p);if(k!==0){var R=1;for(p=a(f,E,f.length,l),E=0;E<k;E++)R*=l;this.imuln(R),this.words[0]+p<67108864?this.words[0]+=p:this._iaddn(p)}this.strip()},s.prototype.copy=function(f){f.words=new Array(this.length);for(var l=0;l<this.length;l++)f.words[l]=this.words[l];f.length=this.length,f.negative=this.negative,f.red=this.red},s.prototype.clone=function(){var f=new s(null);return this.copy(f),f},s.prototype._expand=function(f){for(;this.length<f;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},s.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],d=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],y=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];s.prototype.toString=function(f,l){f=f||10,l=l|0||1;var h;if(f===16||f==="hex"){h="";for(var g=0,b=0,w=0;w<this.length;w++){var k=this.words[w],S=((k<<g|b)&16777215).toString(16);b=k>>>24-g&16777215,g+=2,g>=26&&(g-=26,w--),b!==0||w!==this.length-1?h=u[6-S.length]+S+h:h=S+h}for(b!==0&&(h=b.toString(16)+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}if(f===(f|0)&&f>=2&&f<=36){var p=d[f],E=y[f];h="";var R=this.clone();for(R.negative=0;!R.isZero();){var N=R.modn(E).toString(f);R=R.idivn(E),R.isZero()?h=N+h:h=u[p-N.length]+N+h}for(this.isZero()&&(h="0"+h);h.length%l!==0;)h="0"+h;return this.negative!==0&&(h="-"+h),h}t(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var f=this.words[0];return this.length===2?f+=this.words[1]*67108864:this.length===3&&this.words[2]===1?f+=4503599627370496+this.words[1]*67108864:this.length>2&&t(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-f:f},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(f,l){return t(typeof o<"u"),this.toArrayLike(o,f,l)},s.prototype.toArray=function(f,l){return this.toArrayLike(Array,f,l)},s.prototype.toArrayLike=function(f,l,h){var g=this.byteLength(),b=h||Math.max(1,g);t(g<=b,"byte array longer than desired length"),t(b>0,"Requested array length <= 0"),this.strip();var w=l==="le",k=new f(b),S,p,E=this.clone();if(w){for(p=0;!E.isZero();p++)S=E.andln(255),E.iushrn(8),k[p]=S;for(;p<b;p++)k[p]=0}else{for(p=0;p<b-g;p++)k[p]=0;for(p=0;!E.isZero();p++)S=E.andln(255),E.iushrn(8),k[b-p-1]=S}return k},Math.clz32?s.prototype._countBits=function(f){return 32-Math.clz32(f)}:s.prototype._countBits=function(f){var l=f,h=0;return l>=4096&&(h+=13,l>>>=13),l>=64&&(h+=7,l>>>=7),l>=8&&(h+=4,l>>>=4),l>=2&&(h+=2,l>>>=2),h+l},s.prototype._zeroBits=function(f){if(f===0)return 26;var l=f,h=0;return(l&8191)===0&&(h+=13,l>>>=13),(l&127)===0&&(h+=7,l>>>=7),(l&15)===0&&(h+=4,l>>>=4),(l&3)===0&&(h+=2,l>>>=2),(l&1)===0&&h++,h},s.prototype.bitLength=function(){var f=this.words[this.length-1],l=this._countBits(f);return(this.length-1)*26+l};function v(m){for(var f=new Array(m.bitLength()),l=0;l<f.length;l++){var h=l/26|0,g=l%26;f[l]=(m.words[h]&1<<g)>>>g}return f}s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var f=0,l=0;l<this.length;l++){var h=this._zeroBits(this.words[l]);if(f+=h,h!==26)break}return f},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(f){return this.negative!==0?this.abs().inotn(f).iaddn(1):this.clone()},s.prototype.fromTwos=function(f){return this.testn(f-1)?this.notn(f).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return this.negative!==0},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(f){for(;this.length<f.length;)this.words[this.length++]=0;for(var l=0;l<f.length;l++)this.words[l]=this.words[l]|f.words[l];return this.strip()},s.prototype.ior=function(f){return t((this.negative|f.negative)===0),this.iuor(f)},s.prototype.or=function(f){return this.length>f.length?this.clone().ior(f):f.clone().ior(this)},s.prototype.uor=function(f){return this.length>f.length?this.clone().iuor(f):f.clone().iuor(this)},s.prototype.iuand=function(f){var l;this.length>f.length?l=f:l=this;for(var h=0;h<l.length;h++)this.words[h]=this.words[h]&f.words[h];return this.length=l.length,this.strip()},s.prototype.iand=function(f){return t((this.negative|f.negative)===0),this.iuand(f)},s.prototype.and=function(f){return this.length>f.length?this.clone().iand(f):f.clone().iand(this)},s.prototype.uand=function(f){return this.length>f.length?this.clone().iuand(f):f.clone().iuand(this)},s.prototype.iuxor=function(f){var l,h;this.length>f.length?(l=this,h=f):(l=f,h=this);for(var g=0;g<h.length;g++)this.words[g]=l.words[g]^h.words[g];if(this!==l)for(;g<l.length;g++)this.words[g]=l.words[g];return this.length=l.length,this.strip()},s.prototype.ixor=function(f){return t((this.negative|f.negative)===0),this.iuxor(f)},s.prototype.xor=function(f){return this.length>f.length?this.clone().ixor(f):f.clone().ixor(this)},s.prototype.uxor=function(f){return this.length>f.length?this.clone().iuxor(f):f.clone().iuxor(this)},s.prototype.inotn=function(f){t(typeof f=="number"&&f>=0);var l=Math.ceil(f/26)|0,h=f%26;this._expand(l),h>0&&l--;for(var g=0;g<l;g++)this.words[g]=~this.words[g]&67108863;return h>0&&(this.words[g]=~this.words[g]&67108863>>26-h),this.strip()},s.prototype.notn=function(f){return this.clone().inotn(f)},s.prototype.setn=function(f,l){t(typeof f=="number"&&f>=0);var h=f/26|0,g=f%26;return this._expand(h+1),l?this.words[h]=this.words[h]|1<<g:this.words[h]=this.words[h]&~(1<<g),this.strip()},s.prototype.iadd=function(f){var l;if(this.negative!==0&&f.negative===0)return this.negative=0,l=this.isub(f),this.negative^=1,this._normSign();if(this.negative===0&&f.negative!==0)return f.negative=0,l=this.isub(f),f.negative=1,l._normSign();var h,g;this.length>f.length?(h=this,g=f):(h=f,g=this);for(var b=0,w=0;w<g.length;w++)l=(h.words[w]|0)+(g.words[w]|0)+b,this.words[w]=l&67108863,b=l>>>26;for(;b!==0&&w<h.length;w++)l=(h.words[w]|0)+b,this.words[w]=l&67108863,b=l>>>26;if(this.length=h.length,b!==0)this.words[this.length]=b,this.length++;else if(h!==this)for(;w<h.length;w++)this.words[w]=h.words[w];return this},s.prototype.add=function(f){var l;return f.negative!==0&&this.negative===0?(f.negative=0,l=this.sub(f),f.negative^=1,l):f.negative===0&&this.negative!==0?(this.negative=0,l=f.sub(this),this.negative=1,l):this.length>f.length?this.clone().iadd(f):f.clone().iadd(this)},s.prototype.isub=function(f){if(f.negative!==0){f.negative=0;var l=this.iadd(f);return f.negative=1,l._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(f),this.negative=1,this._normSign();var h=this.cmp(f);if(h===0)return this.negative=0,this.length=1,this.words[0]=0,this;var g,b;h>0?(g=this,b=f):(g=f,b=this);for(var w=0,k=0;k<b.length;k++)l=(g.words[k]|0)-(b.words[k]|0)+w,w=l>>26,this.words[k]=l&67108863;for(;w!==0&&k<g.length;k++)l=(g.words[k]|0)+w,w=l>>26,this.words[k]=l&67108863;if(w===0&&k<g.length&&g!==this)for(;k<g.length;k++)this.words[k]=g.words[k];return this.length=Math.max(this.length,k),g!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(f){return this.clone().isub(f)};function _(m,f,l){l.negative=f.negative^m.negative;var h=m.length+f.length|0;l.length=h,h=h-1|0;var g=m.words[0]|0,b=f.words[0]|0,w=g*b,k=w&67108863,S=w/67108864|0;l.words[0]=k;for(var p=1;p<h;p++){for(var E=S>>>26,R=S&67108863,N=Math.min(p,f.length-1),q=Math.max(0,p-m.length+1);q<=N;q++){var G=p-q|0;g=m.words[G]|0,b=f.words[q]|0,w=g*b+R,E+=w/67108864|0,R=w&67108863}l.words[p]=R|0,S=E|0}return S!==0?l.words[p]=S|0:l.length--,l.strip()}var T=function(f,l,h){var g=f.words,b=l.words,w=h.words,k=0,S,p,E,R=g[0]|0,N=R&8191,q=R>>>13,G=g[1]|0,X=G&8191,ee=G>>>13,ce=g[2]|0,ie=ce&8191,oe=ce>>>13,ve=g[3]|0,Ee=ve&8191,xe=ve>>>13,Pr=g[4]|0,Oe=Pr&8191,Ke=Pr>>>13,vu=g[5]|0,ot=vu&8191,it=vu>>>13,Sy=g[6]|0,ct=Sy&8191,at=Sy>>>13,_y=g[7]|0,ft=_y&8191,ut=_y>>>13,Ty=g[8]|0,lt=Ty&8191,dt=Ty>>>13,Ey=g[9]|0,pt=Ey&8191,ht=Ey>>>13,Ay=b[0]|0,mt=Ay&8191,yt=Ay>>>13,ky=b[1]|0,gt=ky&8191,bt=ky>>>13,Cy=b[2]|0,xt=Cy&8191,wt=Cy>>>13,By=b[3]|0,vt=By&8191,St=By>>>13,Iy=b[4]|0,_t=Iy&8191,Tt=Iy>>>13,Oy=b[5]|0,Et=Oy&8191,At=Oy>>>13,Dy=b[6]|0,kt=Dy&8191,Ct=Dy>>>13,Py=b[7]|0,Bt=Py&8191,It=Py>>>13,My=b[8]|0,Ot=My&8191,Dt=My>>>13,Ry=b[9]|0,Pt=Ry&8191,Mt=Ry>>>13;h.negative=f.negative^l.negative,h.length=19,S=Math.imul(N,mt),p=Math.imul(N,yt),p=p+Math.imul(q,mt)|0,E=Math.imul(q,yt);var b2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(b2>>>26)|0,b2&=67108863,S=Math.imul(X,mt),p=Math.imul(X,yt),p=p+Math.imul(ee,mt)|0,E=Math.imul(ee,yt),S=S+Math.imul(N,gt)|0,p=p+Math.imul(N,bt)|0,p=p+Math.imul(q,gt)|0,E=E+Math.imul(q,bt)|0;var x2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(x2>>>26)|0,x2&=67108863,S=Math.imul(ie,mt),p=Math.imul(ie,yt),p=p+Math.imul(oe,mt)|0,E=Math.imul(oe,yt),S=S+Math.imul(X,gt)|0,p=p+Math.imul(X,bt)|0,p=p+Math.imul(ee,gt)|0,E=E+Math.imul(ee,bt)|0,S=S+Math.imul(N,xt)|0,p=p+Math.imul(N,wt)|0,p=p+Math.imul(q,xt)|0,E=E+Math.imul(q,wt)|0;var w2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(w2>>>26)|0,w2&=67108863,S=Math.imul(Ee,mt),p=Math.imul(Ee,yt),p=p+Math.imul(xe,mt)|0,E=Math.imul(xe,yt),S=S+Math.imul(ie,gt)|0,p=p+Math.imul(ie,bt)|0,p=p+Math.imul(oe,gt)|0,E=E+Math.imul(oe,bt)|0,S=S+Math.imul(X,xt)|0,p=p+Math.imul(X,wt)|0,p=p+Math.imul(ee,xt)|0,E=E+Math.imul(ee,wt)|0,S=S+Math.imul(N,vt)|0,p=p+Math.imul(N,St)|0,p=p+Math.imul(q,vt)|0,E=E+Math.imul(q,St)|0;var v2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(v2>>>26)|0,v2&=67108863,S=Math.imul(Oe,mt),p=Math.imul(Oe,yt),p=p+Math.imul(Ke,mt)|0,E=Math.imul(Ke,yt),S=S+Math.imul(Ee,gt)|0,p=p+Math.imul(Ee,bt)|0,p=p+Math.imul(xe,gt)|0,E=E+Math.imul(xe,bt)|0,S=S+Math.imul(ie,xt)|0,p=p+Math.imul(ie,wt)|0,p=p+Math.imul(oe,xt)|0,E=E+Math.imul(oe,wt)|0,S=S+Math.imul(X,vt)|0,p=p+Math.imul(X,St)|0,p=p+Math.imul(ee,vt)|0,E=E+Math.imul(ee,St)|0,S=S+Math.imul(N,_t)|0,p=p+Math.imul(N,Tt)|0,p=p+Math.imul(q,_t)|0,E=E+Math.imul(q,Tt)|0;var S2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(S2>>>26)|0,S2&=67108863,S=Math.imul(ot,mt),p=Math.imul(ot,yt),p=p+Math.imul(it,mt)|0,E=Math.imul(it,yt),S=S+Math.imul(Oe,gt)|0,p=p+Math.imul(Oe,bt)|0,p=p+Math.imul(Ke,gt)|0,E=E+Math.imul(Ke,bt)|0,S=S+Math.imul(Ee,xt)|0,p=p+Math.imul(Ee,wt)|0,p=p+Math.imul(xe,xt)|0,E=E+Math.imul(xe,wt)|0,S=S+Math.imul(ie,vt)|0,p=p+Math.imul(ie,St)|0,p=p+Math.imul(oe,vt)|0,E=E+Math.imul(oe,St)|0,S=S+Math.imul(X,_t)|0,p=p+Math.imul(X,Tt)|0,p=p+Math.imul(ee,_t)|0,E=E+Math.imul(ee,Tt)|0,S=S+Math.imul(N,Et)|0,p=p+Math.imul(N,At)|0,p=p+Math.imul(q,Et)|0,E=E+Math.imul(q,At)|0;var _2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(_2>>>26)|0,_2&=67108863,S=Math.imul(ct,mt),p=Math.imul(ct,yt),p=p+Math.imul(at,mt)|0,E=Math.imul(at,yt),S=S+Math.imul(ot,gt)|0,p=p+Math.imul(ot,bt)|0,p=p+Math.imul(it,gt)|0,E=E+Math.imul(it,bt)|0,S=S+Math.imul(Oe,xt)|0,p=p+Math.imul(Oe,wt)|0,p=p+Math.imul(Ke,xt)|0,E=E+Math.imul(Ke,wt)|0,S=S+Math.imul(Ee,vt)|0,p=p+Math.imul(Ee,St)|0,p=p+Math.imul(xe,vt)|0,E=E+Math.imul(xe,St)|0,S=S+Math.imul(ie,_t)|0,p=p+Math.imul(ie,Tt)|0,p=p+Math.imul(oe,_t)|0,E=E+Math.imul(oe,Tt)|0,S=S+Math.imul(X,Et)|0,p=p+Math.imul(X,At)|0,p=p+Math.imul(ee,Et)|0,E=E+Math.imul(ee,At)|0,S=S+Math.imul(N,kt)|0,p=p+Math.imul(N,Ct)|0,p=p+Math.imul(q,kt)|0,E=E+Math.imul(q,Ct)|0;var T2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(T2>>>26)|0,T2&=67108863,S=Math.imul(ft,mt),p=Math.imul(ft,yt),p=p+Math.imul(ut,mt)|0,E=Math.imul(ut,yt),S=S+Math.imul(ct,gt)|0,p=p+Math.imul(ct,bt)|0,p=p+Math.imul(at,gt)|0,E=E+Math.imul(at,bt)|0,S=S+Math.imul(ot,xt)|0,p=p+Math.imul(ot,wt)|0,p=p+Math.imul(it,xt)|0,E=E+Math.imul(it,wt)|0,S=S+Math.imul(Oe,vt)|0,p=p+Math.imul(Oe,St)|0,p=p+Math.imul(Ke,vt)|0,E=E+Math.imul(Ke,St)|0,S=S+Math.imul(Ee,_t)|0,p=p+Math.imul(Ee,Tt)|0,p=p+Math.imul(xe,_t)|0,E=E+Math.imul(xe,Tt)|0,S=S+Math.imul(ie,Et)|0,p=p+Math.imul(ie,At)|0,p=p+Math.imul(oe,Et)|0,E=E+Math.imul(oe,At)|0,S=S+Math.imul(X,kt)|0,p=p+Math.imul(X,Ct)|0,p=p+Math.imul(ee,kt)|0,E=E+Math.imul(ee,Ct)|0,S=S+Math.imul(N,Bt)|0,p=p+Math.imul(N,It)|0,p=p+Math.imul(q,Bt)|0,E=E+Math.imul(q,It)|0;var E2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(E2>>>26)|0,E2&=67108863,S=Math.imul(lt,mt),p=Math.imul(lt,yt),p=p+Math.imul(dt,mt)|0,E=Math.imul(dt,yt),S=S+Math.imul(ft,gt)|0,p=p+Math.imul(ft,bt)|0,p=p+Math.imul(ut,gt)|0,E=E+Math.imul(ut,bt)|0,S=S+Math.imul(ct,xt)|0,p=p+Math.imul(ct,wt)|0,p=p+Math.imul(at,xt)|0,E=E+Math.imul(at,wt)|0,S=S+Math.imul(ot,vt)|0,p=p+Math.imul(ot,St)|0,p=p+Math.imul(it,vt)|0,E=E+Math.imul(it,St)|0,S=S+Math.imul(Oe,_t)|0,p=p+Math.imul(Oe,Tt)|0,p=p+Math.imul(Ke,_t)|0,E=E+Math.imul(Ke,Tt)|0,S=S+Math.imul(Ee,Et)|0,p=p+Math.imul(Ee,At)|0,p=p+Math.imul(xe,Et)|0,E=E+Math.imul(xe,At)|0,S=S+Math.imul(ie,kt)|0,p=p+Math.imul(ie,Ct)|0,p=p+Math.imul(oe,kt)|0,E=E+Math.imul(oe,Ct)|0,S=S+Math.imul(X,Bt)|0,p=p+Math.imul(X,It)|0,p=p+Math.imul(ee,Bt)|0,E=E+Math.imul(ee,It)|0,S=S+Math.imul(N,Ot)|0,p=p+Math.imul(N,Dt)|0,p=p+Math.imul(q,Ot)|0,E=E+Math.imul(q,Dt)|0;var A2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(A2>>>26)|0,A2&=67108863,S=Math.imul(pt,mt),p=Math.imul(pt,yt),p=p+Math.imul(ht,mt)|0,E=Math.imul(ht,yt),S=S+Math.imul(lt,gt)|0,p=p+Math.imul(lt,bt)|0,p=p+Math.imul(dt,gt)|0,E=E+Math.imul(dt,bt)|0,S=S+Math.imul(ft,xt)|0,p=p+Math.imul(ft,wt)|0,p=p+Math.imul(ut,xt)|0,E=E+Math.imul(ut,wt)|0,S=S+Math.imul(ct,vt)|0,p=p+Math.imul(ct,St)|0,p=p+Math.imul(at,vt)|0,E=E+Math.imul(at,St)|0,S=S+Math.imul(ot,_t)|0,p=p+Math.imul(ot,Tt)|0,p=p+Math.imul(it,_t)|0,E=E+Math.imul(it,Tt)|0,S=S+Math.imul(Oe,Et)|0,p=p+Math.imul(Oe,At)|0,p=p+Math.imul(Ke,Et)|0,E=E+Math.imul(Ke,At)|0,S=S+Math.imul(Ee,kt)|0,p=p+Math.imul(Ee,Ct)|0,p=p+Math.imul(xe,kt)|0,E=E+Math.imul(xe,Ct)|0,S=S+Math.imul(ie,Bt)|0,p=p+Math.imul(ie,It)|0,p=p+Math.imul(oe,Bt)|0,E=E+Math.imul(oe,It)|0,S=S+Math.imul(X,Ot)|0,p=p+Math.imul(X,Dt)|0,p=p+Math.imul(ee,Ot)|0,E=E+Math.imul(ee,Dt)|0,S=S+Math.imul(N,Pt)|0,p=p+Math.imul(N,Mt)|0,p=p+Math.imul(q,Pt)|0,E=E+Math.imul(q,Mt)|0;var k2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(k2>>>26)|0,k2&=67108863,S=Math.imul(pt,gt),p=Math.imul(pt,bt),p=p+Math.imul(ht,gt)|0,E=Math.imul(ht,bt),S=S+Math.imul(lt,xt)|0,p=p+Math.imul(lt,wt)|0,p=p+Math.imul(dt,xt)|0,E=E+Math.imul(dt,wt)|0,S=S+Math.imul(ft,vt)|0,p=p+Math.imul(ft,St)|0,p=p+Math.imul(ut,vt)|0,E=E+Math.imul(ut,St)|0,S=S+Math.imul(ct,_t)|0,p=p+Math.imul(ct,Tt)|0,p=p+Math.imul(at,_t)|0,E=E+Math.imul(at,Tt)|0,S=S+Math.imul(ot,Et)|0,p=p+Math.imul(ot,At)|0,p=p+Math.imul(it,Et)|0,E=E+Math.imul(it,At)|0,S=S+Math.imul(Oe,kt)|0,p=p+Math.imul(Oe,Ct)|0,p=p+Math.imul(Ke,kt)|0,E=E+Math.imul(Ke,Ct)|0,S=S+Math.imul(Ee,Bt)|0,p=p+Math.imul(Ee,It)|0,p=p+Math.imul(xe,Bt)|0,E=E+Math.imul(xe,It)|0,S=S+Math.imul(ie,Ot)|0,p=p+Math.imul(ie,Dt)|0,p=p+Math.imul(oe,Ot)|0,E=E+Math.imul(oe,Dt)|0,S=S+Math.imul(X,Pt)|0,p=p+Math.imul(X,Mt)|0,p=p+Math.imul(ee,Pt)|0,E=E+Math.imul(ee,Mt)|0;var C2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(C2>>>26)|0,C2&=67108863,S=Math.imul(pt,xt),p=Math.imul(pt,wt),p=p+Math.imul(ht,xt)|0,E=Math.imul(ht,wt),S=S+Math.imul(lt,vt)|0,p=p+Math.imul(lt,St)|0,p=p+Math.imul(dt,vt)|0,E=E+Math.imul(dt,St)|0,S=S+Math.imul(ft,_t)|0,p=p+Math.imul(ft,Tt)|0,p=p+Math.imul(ut,_t)|0,E=E+Math.imul(ut,Tt)|0,S=S+Math.imul(ct,Et)|0,p=p+Math.imul(ct,At)|0,p=p+Math.imul(at,Et)|0,E=E+Math.imul(at,At)|0,S=S+Math.imul(ot,kt)|0,p=p+Math.imul(ot,Ct)|0,p=p+Math.imul(it,kt)|0,E=E+Math.imul(it,Ct)|0,S=S+Math.imul(Oe,Bt)|0,p=p+Math.imul(Oe,It)|0,p=p+Math.imul(Ke,Bt)|0,E=E+Math.imul(Ke,It)|0,S=S+Math.imul(Ee,Ot)|0,p=p+Math.imul(Ee,Dt)|0,p=p+Math.imul(xe,Ot)|0,E=E+Math.imul(xe,Dt)|0,S=S+Math.imul(ie,Pt)|0,p=p+Math.imul(ie,Mt)|0,p=p+Math.imul(oe,Pt)|0,E=E+Math.imul(oe,Mt)|0;var B2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(B2>>>26)|0,B2&=67108863,S=Math.imul(pt,vt),p=Math.imul(pt,St),p=p+Math.imul(ht,vt)|0,E=Math.imul(ht,St),S=S+Math.imul(lt,_t)|0,p=p+Math.imul(lt,Tt)|0,p=p+Math.imul(dt,_t)|0,E=E+Math.imul(dt,Tt)|0,S=S+Math.imul(ft,Et)|0,p=p+Math.imul(ft,At)|0,p=p+Math.imul(ut,Et)|0,E=E+Math.imul(ut,At)|0,S=S+Math.imul(ct,kt)|0,p=p+Math.imul(ct,Ct)|0,p=p+Math.imul(at,kt)|0,E=E+Math.imul(at,Ct)|0,S=S+Math.imul(ot,Bt)|0,p=p+Math.imul(ot,It)|0,p=p+Math.imul(it,Bt)|0,E=E+Math.imul(it,It)|0,S=S+Math.imul(Oe,Ot)|0,p=p+Math.imul(Oe,Dt)|0,p=p+Math.imul(Ke,Ot)|0,E=E+Math.imul(Ke,Dt)|0,S=S+Math.imul(Ee,Pt)|0,p=p+Math.imul(Ee,Mt)|0,p=p+Math.imul(xe,Pt)|0,E=E+Math.imul(xe,Mt)|0;var I2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(I2>>>26)|0,I2&=67108863,S=Math.imul(pt,_t),p=Math.imul(pt,Tt),p=p+Math.imul(ht,_t)|0,E=Math.imul(ht,Tt),S=S+Math.imul(lt,Et)|0,p=p+Math.imul(lt,At)|0,p=p+Math.imul(dt,Et)|0,E=E+Math.imul(dt,At)|0,S=S+Math.imul(ft,kt)|0,p=p+Math.imul(ft,Ct)|0,p=p+Math.imul(ut,kt)|0,E=E+Math.imul(ut,Ct)|0,S=S+Math.imul(ct,Bt)|0,p=p+Math.imul(ct,It)|0,p=p+Math.imul(at,Bt)|0,E=E+Math.imul(at,It)|0,S=S+Math.imul(ot,Ot)|0,p=p+Math.imul(ot,Dt)|0,p=p+Math.imul(it,Ot)|0,E=E+Math.imul(it,Dt)|0,S=S+Math.imul(Oe,Pt)|0,p=p+Math.imul(Oe,Mt)|0,p=p+Math.imul(Ke,Pt)|0,E=E+Math.imul(Ke,Mt)|0;var O2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(O2>>>26)|0,O2&=67108863,S=Math.imul(pt,Et),p=Math.imul(pt,At),p=p+Math.imul(ht,Et)|0,E=Math.imul(ht,At),S=S+Math.imul(lt,kt)|0,p=p+Math.imul(lt,Ct)|0,p=p+Math.imul(dt,kt)|0,E=E+Math.imul(dt,Ct)|0,S=S+Math.imul(ft,Bt)|0,p=p+Math.imul(ft,It)|0,p=p+Math.imul(ut,Bt)|0,E=E+Math.imul(ut,It)|0,S=S+Math.imul(ct,Ot)|0,p=p+Math.imul(ct,Dt)|0,p=p+Math.imul(at,Ot)|0,E=E+Math.imul(at,Dt)|0,S=S+Math.imul(ot,Pt)|0,p=p+Math.imul(ot,Mt)|0,p=p+Math.imul(it,Pt)|0,E=E+Math.imul(it,Mt)|0;var D2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(D2>>>26)|0,D2&=67108863,S=Math.imul(pt,kt),p=Math.imul(pt,Ct),p=p+Math.imul(ht,kt)|0,E=Math.imul(ht,Ct),S=S+Math.imul(lt,Bt)|0,p=p+Math.imul(lt,It)|0,p=p+Math.imul(dt,Bt)|0,E=E+Math.imul(dt,It)|0,S=S+Math.imul(ft,Ot)|0,p=p+Math.imul(ft,Dt)|0,p=p+Math.imul(ut,Ot)|0,E=E+Math.imul(ut,Dt)|0,S=S+Math.imul(ct,Pt)|0,p=p+Math.imul(ct,Mt)|0,p=p+Math.imul(at,Pt)|0,E=E+Math.imul(at,Mt)|0;var P2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(P2>>>26)|0,P2&=67108863,S=Math.imul(pt,Bt),p=Math.imul(pt,It),p=p+Math.imul(ht,Bt)|0,E=Math.imul(ht,It),S=S+Math.imul(lt,Ot)|0,p=p+Math.imul(lt,Dt)|0,p=p+Math.imul(dt,Ot)|0,E=E+Math.imul(dt,Dt)|0,S=S+Math.imul(ft,Pt)|0,p=p+Math.imul(ft,Mt)|0,p=p+Math.imul(ut,Pt)|0,E=E+Math.imul(ut,Mt)|0;var M2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(M2>>>26)|0,M2&=67108863,S=Math.imul(pt,Ot),p=Math.imul(pt,Dt),p=p+Math.imul(ht,Ot)|0,E=Math.imul(ht,Dt),S=S+Math.imul(lt,Pt)|0,p=p+Math.imul(lt,Mt)|0,p=p+Math.imul(dt,Pt)|0,E=E+Math.imul(dt,Mt)|0;var R2=(k+S|0)+((p&8191)<<13)|0;k=(E+(p>>>13)|0)+(R2>>>26)|0,R2&=67108863,S=Math.imul(pt,Pt),p=Math.imul(pt,Mt),p=p+Math.imul(ht,Pt)|0,E=Math.imul(ht,Mt);var N2=(k+S|0)+((p&8191)<<13)|0;return k=(E+(p>>>13)|0)+(N2>>>26)|0,N2&=67108863,w[0]=b2,w[1]=x2,w[2]=w2,w[3]=v2,w[4]=S2,w[5]=_2,w[6]=T2,w[7]=E2,w[8]=A2,w[9]=k2,w[10]=C2,w[11]=B2,w[12]=I2,w[13]=O2,w[14]=D2,w[15]=P2,w[16]=M2,w[17]=R2,w[18]=N2,k!==0&&(w[19]=k,h.length++),h};Math.imul||(T=_);function A(m,f,l){l.negative=f.negative^m.negative,l.length=m.length+f.length;for(var h=0,g=0,b=0;b<l.length-1;b++){var w=g;g=0;for(var k=h&67108863,S=Math.min(b,f.length-1),p=Math.max(0,b-m.length+1);p<=S;p++){var E=b-p,R=m.words[E]|0,N=f.words[p]|0,q=R*N,G=q&67108863;w=w+(q/67108864|0)|0,G=G+k|0,k=G&67108863,w=w+(G>>>26)|0,g+=w>>>26,w&=67108863}l.words[b]=k,h=w,w=g}return h!==0?l.words[b]=h:l.length--,l.strip()}function B(m,f,l){var h=new I;return h.mulp(m,f,l)}s.prototype.mulTo=function(f,l){var h,g=this.length+f.length;return this.length===10&&f.length===10?h=T(this,f,l):g<63?h=_(this,f,l):g<1024?h=A(this,f,l):h=B(this,f,l),h};function I(m,f){this.x=m,this.y=f}I.prototype.makeRBT=function(f){for(var l=new Array(f),h=s.prototype._countBits(f)-1,g=0;g<f;g++)l[g]=this.revBin(g,h,f);return l},I.prototype.revBin=function(f,l,h){if(f===0||f===h-1)return f;for(var g=0,b=0;b<l;b++)g|=(f&1)<<l-b-1,f>>=1;return g},I.prototype.permute=function(f,l,h,g,b,w){for(var k=0;k<w;k++)g[k]=l[f[k]],b[k]=h[f[k]]},I.prototype.transform=function(f,l,h,g,b,w){this.permute(w,f,l,h,g,b);for(var k=1;k<b;k<<=1)for(var S=k<<1,p=Math.cos(2*Math.PI/S),E=Math.sin(2*Math.PI/S),R=0;R<b;R+=S)for(var N=p,q=E,G=0;G<k;G++){var X=h[R+G],ee=g[R+G],ce=h[R+G+k],ie=g[R+G+k],oe=N*ce-q*ie;ie=N*ie+q*ce,ce=oe,h[R+G]=X+ce,g[R+G]=ee+ie,h[R+G+k]=X-ce,g[R+G+k]=ee-ie,G!==S&&(oe=p*N-E*q,q=p*q+E*N,N=oe)}},I.prototype.guessLen13b=function(f,l){var h=Math.max(l,f)|1,g=h&1,b=0;for(h=h/2|0;h;h=h>>>1)b++;return 1<<b+1+g},I.prototype.conjugate=function(f,l,h){if(!(h<=1))for(var g=0;g<h/2;g++){var b=f[g];f[g]=f[h-g-1],f[h-g-1]=b,b=l[g],l[g]=-l[h-g-1],l[h-g-1]=-b}},I.prototype.normalize13b=function(f,l){for(var h=0,g=0;g<l/2;g++){var b=Math.round(f[2*g+1]/l)*8192+Math.round(f[2*g]/l)+h;f[g]=b&67108863,b<67108864?h=0:h=b/67108864|0}return f},I.prototype.convert13b=function(f,l,h,g){for(var b=0,w=0;w<l;w++)b=b+(f[w]|0),h[2*w]=b&8191,b=b>>>13,h[2*w+1]=b&8191,b=b>>>13;for(w=2*l;w<g;++w)h[w]=0;t(b===0),t((b&-8192)===0)},I.prototype.stub=function(f){for(var l=new Array(f),h=0;h<f;h++)l[h]=0;return l},I.prototype.mulp=function(f,l,h){var g=2*this.guessLen13b(f.length,l.length),b=this.makeRBT(g),w=this.stub(g),k=new Array(g),S=new Array(g),p=new Array(g),E=new Array(g),R=new Array(g),N=new Array(g),q=h.words;q.length=g,this.convert13b(f.words,f.length,k,g),this.convert13b(l.words,l.length,E,g),this.transform(k,w,S,p,g,b),this.transform(E,w,R,N,g,b);for(var G=0;G<g;G++){var X=S[G]*R[G]-p[G]*N[G];p[G]=S[G]*N[G]+p[G]*R[G],S[G]=X}return this.conjugate(S,p,g),this.transform(S,p,q,w,g,b),this.conjugate(q,w,g),this.normalize13b(q,g),h.negative=f.negative^l.negative,h.length=f.length+l.length,h.strip()},s.prototype.mul=function(f){var l=new s(null);return l.words=new Array(this.length+f.length),this.mulTo(f,l)},s.prototype.mulf=function(f){var l=new s(null);return l.words=new Array(this.length+f.length),B(this,f,l)},s.prototype.imul=function(f){return this.clone().mulTo(f,this)},s.prototype.imuln=function(f){t(typeof f=="number"),t(f<67108864);for(var l=0,h=0;h<this.length;h++){var g=(this.words[h]|0)*f,b=(g&67108863)+(l&67108863);l>>=26,l+=g/67108864|0,l+=b>>>26,this.words[h]=b&67108863}return l!==0&&(this.words[h]=l,this.length++),this.length=f===0?1:this.length,this},s.prototype.muln=function(f){return this.clone().imuln(f)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(f){var l=v(f);if(l.length===0)return new s(1);for(var h=this,g=0;g<l.length&&l[g]===0;g++,h=h.sqr());if(++g<l.length)for(var b=h.sqr();g<l.length;g++,b=b.sqr())l[g]!==0&&(h=h.mul(b));return h},s.prototype.iushln=function(f){t(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26,g=67108863>>>26-l<<26-l,b;if(l!==0){var w=0;for(b=0;b<this.length;b++){var k=this.words[b]&g,S=(this.words[b]|0)-k<<l;this.words[b]=S|w,w=k>>>26-l}w&&(this.words[b]=w,this.length++)}if(h!==0){for(b=this.length-1;b>=0;b--)this.words[b+h]=this.words[b];for(b=0;b<h;b++)this.words[b]=0;this.length+=h}return this.strip()},s.prototype.ishln=function(f){return t(this.negative===0),this.iushln(f)},s.prototype.iushrn=function(f,l,h){t(typeof f=="number"&&f>=0);var g;l?g=(l-l%26)/26:g=0;var b=f%26,w=Math.min((f-b)/26,this.length),k=67108863^67108863>>>b<<b,S=h;if(g-=w,g=Math.max(0,g),S){for(var p=0;p<w;p++)S.words[p]=this.words[p];S.length=w}if(w!==0)if(this.length>w)for(this.length-=w,p=0;p<this.length;p++)this.words[p]=this.words[p+w];else this.words[0]=0,this.length=1;var E=0;for(p=this.length-1;p>=0&&(E!==0||p>=g);p--){var R=this.words[p]|0;this.words[p]=E<<26-b|R>>>b,E=R&k}return S&&E!==0&&(S.words[S.length++]=E),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(f,l,h){return t(this.negative===0),this.iushrn(f,l,h)},s.prototype.shln=function(f){return this.clone().ishln(f)},s.prototype.ushln=function(f){return this.clone().iushln(f)},s.prototype.shrn=function(f){return this.clone().ishrn(f)},s.prototype.ushrn=function(f){return this.clone().iushrn(f)},s.prototype.testn=function(f){t(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26,g=1<<l;if(this.length<=h)return!1;var b=this.words[h];return!!(b&g)},s.prototype.imaskn=function(f){t(typeof f=="number"&&f>=0);var l=f%26,h=(f-l)/26;if(t(this.negative===0,"imaskn works only with positive numbers"),this.length<=h)return this;if(l!==0&&h++,this.length=Math.min(h,this.length),l!==0){var g=67108863^67108863>>>l<<l;this.words[this.length-1]&=g}return this.strip()},s.prototype.maskn=function(f){return this.clone().imaskn(f)},s.prototype.iaddn=function(f){return t(typeof f=="number"),t(f<67108864),f<0?this.isubn(-f):this.negative!==0?this.length===1&&(this.words[0]|0)<f?(this.words[0]=f-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(f),this.negative=1,this):this._iaddn(f)},s.prototype._iaddn=function(f){this.words[0]+=f;for(var l=0;l<this.length&&this.words[l]>=67108864;l++)this.words[l]-=67108864,l===this.length-1?this.words[l+1]=1:this.words[l+1]++;return this.length=Math.max(this.length,l+1),this},s.prototype.isubn=function(f){if(t(typeof f=="number"),t(f<67108864),f<0)return this.iaddn(-f);if(this.negative!==0)return this.negative=0,this.iaddn(f),this.negative=1,this;if(this.words[0]-=f,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var l=0;l<this.length&&this.words[l]<0;l++)this.words[l]+=67108864,this.words[l+1]-=1;return this.strip()},s.prototype.addn=function(f){return this.clone().iaddn(f)},s.prototype.subn=function(f){return this.clone().isubn(f)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(f,l,h){var g=f.length+h,b;this._expand(g);var w,k=0;for(b=0;b<f.length;b++){w=(this.words[b+h]|0)+k;var S=(f.words[b]|0)*l;w-=S&67108863,k=(w>>26)-(S/67108864|0),this.words[b+h]=w&67108863}for(;b<this.length-h;b++)w=(this.words[b+h]|0)+k,k=w>>26,this.words[b+h]=w&67108863;if(k===0)return this.strip();for(t(k===-1),k=0,b=0;b<this.length;b++)w=-(this.words[b]|0)+k,k=w>>26,this.words[b]=w&67108863;return this.negative=1,this.strip()},s.prototype._wordDiv=function(f,l){var h=this.length-f.length,g=this.clone(),b=f,w=b.words[b.length-1]|0,k=this._countBits(w);h=26-k,h!==0&&(b=b.ushln(h),g.iushln(h),w=b.words[b.length-1]|0);var S=g.length-b.length,p;if(l!=="mod"){p=new s(null),p.length=S+1,p.words=new Array(p.length);for(var E=0;E<p.length;E++)p.words[E]=0}var R=g.clone()._ishlnsubmul(b,1,S);R.negative===0&&(g=R,p&&(p.words[S]=1));for(var N=S-1;N>=0;N--){var q=(g.words[b.length+N]|0)*67108864+(g.words[b.length+N-1]|0);for(q=Math.min(q/w|0,67108863),g._ishlnsubmul(b,q,N);g.negative!==0;)q--,g.negative=0,g._ishlnsubmul(b,1,N),g.isZero()||(g.negative^=1);p&&(p.words[N]=q)}return p&&p.strip(),g.strip(),l!=="div"&&h!==0&&g.iushrn(h),{div:p||null,mod:g}},s.prototype.divmod=function(f,l,h){if(t(!f.isZero()),this.isZero())return{div:new s(0),mod:new s(0)};var g,b,w;return this.negative!==0&&f.negative===0?(w=this.neg().divmod(f,l),l!=="mod"&&(g=w.div.neg()),l!=="div"&&(b=w.mod.neg(),h&&b.negative!==0&&b.iadd(f)),{div:g,mod:b}):this.negative===0&&f.negative!==0?(w=this.divmod(f.neg(),l),l!=="mod"&&(g=w.div.neg()),{div:g,mod:w.mod}):(this.negative&f.negative)!==0?(w=this.neg().divmod(f.neg(),l),l!=="div"&&(b=w.mod.neg(),h&&b.negative!==0&&b.isub(f)),{div:w.div,mod:b}):f.length>this.length||this.cmp(f)<0?{div:new s(0),mod:this}:f.length===1?l==="div"?{div:this.divn(f.words[0]),mod:null}:l==="mod"?{div:null,mod:new s(this.modn(f.words[0]))}:{div:this.divn(f.words[0]),mod:new s(this.modn(f.words[0]))}:this._wordDiv(f,l)},s.prototype.div=function(f){return this.divmod(f,"div",!1).div},s.prototype.mod=function(f){return this.divmod(f,"mod",!1).mod},s.prototype.umod=function(f){return this.divmod(f,"mod",!0).mod},s.prototype.divRound=function(f){var l=this.divmod(f);if(l.mod.isZero())return l.div;var h=l.div.negative!==0?l.mod.isub(f):l.mod,g=f.ushrn(1),b=f.andln(1),w=h.cmp(g);return w<0||b===1&&w===0?l.div:l.div.negative!==0?l.div.isubn(1):l.div.iaddn(1)},s.prototype.modn=function(f){t(f<=67108863);for(var l=(1<<26)%f,h=0,g=this.length-1;g>=0;g--)h=(l*h+(this.words[g]|0))%f;return h},s.prototype.idivn=function(f){t(f<=67108863);for(var l=0,h=this.length-1;h>=0;h--){var g=(this.words[h]|0)+l*67108864;this.words[h]=g/f|0,l=g%f}return this.strip()},s.prototype.divn=function(f){return this.clone().idivn(f)},s.prototype.egcd=function(f){t(f.negative===0),t(!f.isZero());var l=this,h=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var g=new s(1),b=new s(0),w=new s(0),k=new s(1),S=0;l.isEven()&&h.isEven();)l.iushrn(1),h.iushrn(1),++S;for(var p=h.clone(),E=l.clone();!l.isZero();){for(var R=0,N=1;(l.words[0]&N)===0&&R<26;++R,N<<=1);if(R>0)for(l.iushrn(R);R-- >0;)(g.isOdd()||b.isOdd())&&(g.iadd(p),b.isub(E)),g.iushrn(1),b.iushrn(1);for(var q=0,G=1;(h.words[0]&G)===0&&q<26;++q,G<<=1);if(q>0)for(h.iushrn(q);q-- >0;)(w.isOdd()||k.isOdd())&&(w.iadd(p),k.isub(E)),w.iushrn(1),k.iushrn(1);l.cmp(h)>=0?(l.isub(h),g.isub(w),b.isub(k)):(h.isub(l),w.isub(g),k.isub(b))}return{a:w,b:k,gcd:h.iushln(S)}},s.prototype._invmp=function(f){t(f.negative===0),t(!f.isZero());var l=this,h=f.clone();l.negative!==0?l=l.umod(f):l=l.clone();for(var g=new s(1),b=new s(0),w=h.clone();l.cmpn(1)>0&&h.cmpn(1)>0;){for(var k=0,S=1;(l.words[0]&S)===0&&k<26;++k,S<<=1);if(k>0)for(l.iushrn(k);k-- >0;)g.isOdd()&&g.iadd(w),g.iushrn(1);for(var p=0,E=1;(h.words[0]&E)===0&&p<26;++p,E<<=1);if(p>0)for(h.iushrn(p);p-- >0;)b.isOdd()&&b.iadd(w),b.iushrn(1);l.cmp(h)>=0?(l.isub(h),g.isub(b)):(h.isub(l),b.isub(g))}var R;return l.cmpn(1)===0?R=g:R=b,R.cmpn(0)<0&&R.iadd(f),R},s.prototype.gcd=function(f){if(this.isZero())return f.abs();if(f.isZero())return this.abs();var l=this.clone(),h=f.clone();l.negative=0,h.negative=0;for(var g=0;l.isEven()&&h.isEven();g++)l.iushrn(1),h.iushrn(1);do{for(;l.isEven();)l.iushrn(1);for(;h.isEven();)h.iushrn(1);var b=l.cmp(h);if(b<0){var w=l;l=h,h=w}else if(b===0||h.cmpn(1)===0)break;l.isub(h)}while(!0);return h.iushln(g)},s.prototype.invm=function(f){return this.egcd(f).a.umod(f)},s.prototype.isEven=function(){return(this.words[0]&1)===0},s.prototype.isOdd=function(){return(this.words[0]&1)===1},s.prototype.andln=function(f){return this.words[0]&f},s.prototype.bincn=function(f){t(typeof f=="number");var l=f%26,h=(f-l)/26,g=1<<l;if(this.length<=h)return this._expand(h+1),this.words[h]|=g,this;for(var b=g,w=h;b!==0&&w<this.length;w++){var k=this.words[w]|0;k+=b,b=k>>>26,k&=67108863,this.words[w]=k}return b!==0&&(this.words[w]=b,this.length++),this},s.prototype.isZero=function(){return this.length===1&&this.words[0]===0},s.prototype.cmpn=function(f){var l=f<0;if(this.negative!==0&&!l)return-1;if(this.negative===0&&l)return 1;this.strip();var h;if(this.length>1)h=1;else{l&&(f=-f),t(f<=67108863,"Number is too big");var g=this.words[0]|0;h=g===f?0:g<f?-1:1}return this.negative!==0?-h|0:h},s.prototype.cmp=function(f){if(this.negative!==0&&f.negative===0)return-1;if(this.negative===0&&f.negative!==0)return 1;var l=this.ucmp(f);return this.negative!==0?-l|0:l},s.prototype.ucmp=function(f){if(this.length>f.length)return 1;if(this.length<f.length)return-1;for(var l=0,h=this.length-1;h>=0;h--){var g=this.words[h]|0,b=f.words[h]|0;if(g!==b){g<b?l=-1:g>b&&(l=1);break}}return l},s.prototype.gtn=function(f){return this.cmpn(f)===1},s.prototype.gt=function(f){return this.cmp(f)===1},s.prototype.gten=function(f){return this.cmpn(f)>=0},s.prototype.gte=function(f){return this.cmp(f)>=0},s.prototype.ltn=function(f){return this.cmpn(f)===-1},s.prototype.lt=function(f){return this.cmp(f)===-1},s.prototype.lten=function(f){return this.cmpn(f)<=0},s.prototype.lte=function(f){return this.cmp(f)<=0},s.prototype.eqn=function(f){return this.cmpn(f)===0},s.prototype.eq=function(f){return this.cmp(f)===0},s.red=function(f){return new J(f)},s.prototype.toRed=function(f){return t(!this.red,"Already a number in reduction context"),t(this.negative===0,"red works only with positives"),f.convertTo(this)._forceRed(f)},s.prototype.fromRed=function(){return t(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(f){return this.red=f,this},s.prototype.forceRed=function(f){return t(!this.red,"Already a number in reduction context"),this._forceRed(f)},s.prototype.redAdd=function(f){return t(this.red,"redAdd works only with red numbers"),this.red.add(this,f)},s.prototype.redIAdd=function(f){return t(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,f)},s.prototype.redSub=function(f){return t(this.red,"redSub works only with red numbers"),this.red.sub(this,f)},s.prototype.redISub=function(f){return t(this.red,"redISub works only with red numbers"),this.red.isub(this,f)},s.prototype.redShl=function(f){return t(this.red,"redShl works only with red numbers"),this.red.shl(this,f)},s.prototype.redMul=function(f){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.mul(this,f)},s.prototype.redIMul=function(f){return t(this.red,"redMul works only with red numbers"),this.red._verify2(this,f),this.red.imul(this,f)},s.prototype.redSqr=function(){return t(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return t(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return t(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return t(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return t(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(f){return t(this.red&&!f.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,f)};var P={k256:null,p224:null,p192:null,p25519:null};function M(m,f){this.name=m,this.p=new s(f,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}M.prototype._tmp=function(){var f=new s(null);return f.words=new Array(Math.ceil(this.n/13)),f},M.prototype.ireduce=function(f){var l=f,h;do this.split(l,this.tmp),l=this.imulK(l),l=l.iadd(this.tmp),h=l.bitLength();while(h>this.n);var g=h<this.n?-1:l.ucmp(this.p);return g===0?(l.words[0]=0,l.length=1):g>0?l.isub(this.p):l.strip!==void 0?l.strip():l._strip(),l},M.prototype.split=function(f,l){f.iushrn(this.n,0,l)},M.prototype.imulK=function(f){return f.imul(this.k)};function L(){M.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}n(L,M),L.prototype.split=function(f,l){for(var h=4194303,g=Math.min(f.length,9),b=0;b<g;b++)l.words[b]=f.words[b];if(l.length=g,f.length<=9){f.words[0]=0,f.length=1;return}var w=f.words[9];for(l.words[l.length++]=w&h,b=10;b<f.length;b++){var k=f.words[b]|0;f.words[b-10]=(k&h)<<4|w>>>22,w=k}w>>>=22,f.words[b-10]=w,w===0&&f.length>10?f.length-=10:f.length-=9},L.prototype.imulK=function(f){f.words[f.length]=0,f.words[f.length+1]=0,f.length+=2;for(var l=0,h=0;h<f.length;h++){var g=f.words[h]|0;l+=g*977,f.words[h]=l&67108863,l=g*64+(l/67108864|0)}return f.words[f.length-1]===0&&(f.length--,f.words[f.length-1]===0&&f.length--),f};function U(){M.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}n(U,M);function Z(){M.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}n(Z,M);function C(){M.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}n(C,M),C.prototype.imulK=function(f){for(var l=0,h=0;h<f.length;h++){var g=(f.words[h]|0)*19+l,b=g&67108863;g>>>=26,f.words[h]=b,l=g}return l!==0&&(f.words[f.length++]=l),f},s._prime=function(f){if(P[f])return P[f];var l;if(f==="k256")l=new L;else if(f==="p224")l=new U;else if(f==="p192")l=new Z;else if(f==="p25519")l=new C;else throw new Error("Unknown prime "+f);return P[f]=l,l};function J(m){if(typeof m=="string"){var f=s._prime(m);this.m=f.p,this.prime=f}else t(m.gtn(1),"modulus must be greater than 1"),this.m=m,this.prime=null}J.prototype._verify1=function(f){t(f.negative===0,"red works only with positives"),t(f.red,"red works only with red numbers")},J.prototype._verify2=function(f,l){t((f.negative|l.negative)===0,"red works only with positives"),t(f.red&&f.red===l.red,"red works only with red numbers")},J.prototype.imod=function(f){return this.prime?this.prime.ireduce(f)._forceRed(this):f.umod(this.m)._forceRed(this)},J.prototype.neg=function(f){return f.isZero()?f.clone():this.m.sub(f)._forceRed(this)},J.prototype.add=function(f,l){this._verify2(f,l);var h=f.add(l);return h.cmp(this.m)>=0&&h.isub(this.m),h._forceRed(this)},J.prototype.iadd=function(f,l){this._verify2(f,l);var h=f.iadd(l);return h.cmp(this.m)>=0&&h.isub(this.m),h},J.prototype.sub=function(f,l){this._verify2(f,l);var h=f.sub(l);return h.cmpn(0)<0&&h.iadd(this.m),h._forceRed(this)},J.prototype.isub=function(f,l){this._verify2(f,l);var h=f.isub(l);return h.cmpn(0)<0&&h.iadd(this.m),h},J.prototype.shl=function(f,l){return this._verify1(f),this.imod(f.ushln(l))},J.prototype.imul=function(f,l){return this._verify2(f,l),this.imod(f.imul(l))},J.prototype.mul=function(f,l){return this._verify2(f,l),this.imod(f.mul(l))},J.prototype.isqr=function(f){return this.imul(f,f.clone())},J.prototype.sqr=function(f){return this.mul(f,f)},J.prototype.sqrt=function(f){if(f.isZero())return f.clone();var l=this.m.andln(3);if(t(l%2===1),l===3){var h=this.m.add(new s(1)).iushrn(2);return this.pow(f,h)}for(var g=this.m.subn(1),b=0;!g.isZero()&&g.andln(1)===0;)b++,g.iushrn(1);t(!g.isZero());var w=new s(1).toRed(this),k=w.redNeg(),S=this.m.subn(1).iushrn(1),p=this.m.bitLength();for(p=new s(2*p*p).toRed(this);this.pow(p,S).cmp(k)!==0;)p.redIAdd(k);for(var E=this.pow(p,g),R=this.pow(f,g.addn(1).iushrn(1)),N=this.pow(f,g),q=b;N.cmp(w)!==0;){for(var G=N,X=0;G.cmp(w)!==0;X++)G=G.redSqr();t(X<q);var ee=this.pow(E,new s(1).iushln(q-X-1));R=R.redMul(ee),E=ee.redSqr(),N=N.redMul(E),q=X}return R},J.prototype.invm=function(f){var l=f._invmp(this.m);return l.negative!==0?(l.negative=0,this.imod(l).redNeg()):this.imod(l)},J.prototype.pow=function(f,l){if(l.isZero())return new s(1).toRed(this);if(l.cmpn(1)===0)return f.clone();var h=4,g=new Array(1<<h);g[0]=new s(1).toRed(this),g[1]=f;for(var b=2;b<g.length;b++)g[b]=this.mul(g[b-1],f);var w=g[0],k=0,S=0,p=l.bitLength()%26;for(p===0&&(p=26),b=l.length-1;b>=0;b--){for(var E=l.words[b],R=p-1;R>=0;R--){var N=E>>R&1;if(w!==g[0]&&(w=this.sqr(w)),N===0&&k===0){S=0;continue}k<<=1,k|=N,S++,!(S!==h&&(b!==0||R!==0))&&(w=this.mul(w,g[k]),S=0,k=0)}p=26}return w},J.prototype.convertTo=function(f){var l=f.umod(this.m);return l===f?l.clone():l},J.prototype.convertFrom=function(f){var l=f.clone();return l.red=null,l},s.mont=function(f){return new x(f)};function x(m){J.call(this,m),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}n(x,J),x.prototype.convertTo=function(f){return this.imod(f.ushln(this.shift))},x.prototype.convertFrom=function(f){var l=this.imod(f.mul(this.rinv));return l.red=null,l},x.prototype.imul=function(f,l){if(f.isZero()||l.isZero())return f.words[0]=0,f.length=1,f;var h=f.imul(l),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(g).iushrn(this.shift),w=b;return b.cmp(this.m)>=0?w=b.isub(this.m):b.cmpn(0)<0&&(w=b.iadd(this.m)),w._forceRed(this)},x.prototype.mul=function(f,l){if(f.isZero()||l.isZero())return new s(0)._forceRed(this);var h=f.mul(l),g=h.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=h.isub(g).iushrn(this.shift),w=b;return b.cmp(this.m)>=0?w=b.isub(this.m):b.cmpn(0)<0&&(w=b.iadd(this.m)),w._forceRed(this)},x.prototype.invm=function(f){var l=this.imod(f._invmp(this.m).mul(this.r2));return l._forceRed(this)}})(typeof I4>"u"||I4,G7)});var ii=de((xU,X7)=>{X7.exports=J7;function J7(r,e){if(!r)throw new Error(e||"Assertion failed")}J7.equal=function(e,t,n){if(e!=t)throw new Error(n||"Assertion failed: "+e+" != "+t)}});var O4=de(eg=>{"use strict";var eh=eg;function KT(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r!="string"){for(var n=0;n<r.length;n++)t[n]=r[n]|0;return t}if(e==="hex"){r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r);for(var n=0;n<r.length;n+=2)t.push(parseInt(r[n]+r[n+1],16))}else for(var n=0;n<r.length;n++){var s=r.charCodeAt(n),o=s>>8,i=s&255;o?t.push(o,i):t.push(i)}return t}eh.toArray=KT;function Y7(r){return r.length===1?"0"+r:r}eh.zero2=Y7;function Q7(r){for(var e="",t=0;t<r.length;t++)e+=Y7(r[t].toString(16));return e}eh.toHex=Q7;eh.encode=function(e,t){return t==="hex"?Q7(e):e}});var vn=de(tg=>{"use strict";var Zn=tg,WT=ws(),ZT=ii(),th=O4();Zn.assert=ZT;Zn.toArray=th.toArray;Zn.zero2=th.zero2;Zn.toHex=th.toHex;Zn.encode=th.encode;function GT(r,e,t){var n=new Array(Math.max(r.bitLength(),t)+1),s;for(s=0;s<n.length;s+=1)n[s]=0;var o=1<<e+1,i=r.clone();for(s=0;s<n.length;s++){var c,a=i.andln(o-1);i.isOdd()?(a>(o>>1)-1?c=(o>>1)-a:c=a,i.isubn(c)):c=0,n[s]=c,i.iushrn(1)}return n}Zn.getNAF=GT;function JT(r,e){var t=[[],[]];r=r.clone(),e=e.clone();for(var n=0,s=0,o;r.cmpn(-n)>0||e.cmpn(-s)>0;){var i=r.andln(3)+n&3,c=e.andln(3)+s&3;i===3&&(i=-1),c===3&&(c=-1);var a;(i&1)===0?a=0:(o=r.andln(7)+n&7,(o===3||o===5)&&c===2?a=-i:a=i),t[0].push(a);var u;(c&1)===0?u=0:(o=e.andln(7)+s&7,(o===3||o===5)&&i===2?u=-c:u=c),t[1].push(u),2*n===a+1&&(n=1-n),2*s===u+1&&(s=1-s),r.iushrn(1),e.iushrn(1)}return t}Zn.getJSF=JT;function XT(r,e,t){var n="_"+e;r.prototype[e]=function(){return this[n]!==void 0?this[n]:this[n]=t.call(this)}}Zn.cachedProperty=XT;function YT(r){return typeof r=="string"?Zn.toArray(r,"hex"):r}Zn.parseBytes=YT;function QT(r){return new WT(r,"hex","le")}Zn.intFromLE=QT});var rg=de(()=>{});var R4=de((TU,M4)=>{var D4;M4.exports=function(e){return D4||(D4=new ci(null)),D4.generate(e)};function ci(r){this.rand=r}M4.exports.Rand=ci;ci.prototype.generate=function(e){return this._rand(e)};ci.prototype._rand=function(e){if(this.rand.getBytes)return this.rand.getBytes(e);for(var t=new Uint8Array(e),n=0;n<t.length;n++)t[n]=this.rand.getByte();return t};if(typeof self=="object")self.crypto&&self.crypto.getRandomValues?ci.prototype._rand=function(e){var t=new Uint8Array(e);return self.crypto.getRandomValues(t),t}:self.msCrypto&&self.msCrypto.getRandomValues?ci.prototype._rand=function(e){var t=new Uint8Array(e);return self.msCrypto.getRandomValues(t),t}:typeof window=="object"&&(ci.prototype._rand=function(){throw new Error("Not implemented yet")});else try{if(P4=rg(),typeof P4.randomBytes!="function")throw new Error("Not supported");ci.prototype._rand=function(e){return P4.randomBytes(e)}}catch{}var P4});var f0=de((EU,ng)=>{"use strict";var yc=ws(),a0=vn(),rh=a0.getNAF,eE=a0.getJSF,nh=a0.assert;function ai(r,e){this.type=r,this.p=new yc(e.p,16),this.red=e.prime?yc.red(e.prime):yc.mont(this.p),this.zero=new yc(0).toRed(this.red),this.one=new yc(1).toRed(this.red),this.two=new yc(2).toRed(this.red),this.n=e.n&&new yc(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var t=this.n&&this.p.div(this.n);!t||t.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}ng.exports=ai;ai.prototype.point=function(){throw new Error("Not implemented")};ai.prototype.validate=function(){throw new Error("Not implemented")};ai.prototype._fixedNafMul=function(e,t){nh(e.precomputed);var n=e._getDoubles(),s=rh(t,1,this._bitLength),o=(1<<n.step+1)-(n.step%2===0?2:1);o/=3;var i=[],c,a;for(c=0;c<s.length;c+=n.step){a=0;for(var u=c+n.step-1;u>=c;u--)a=(a<<1)+s[u];i.push(a)}for(var d=this.jpoint(null,null,null),y=this.jpoint(null,null,null),v=o;v>0;v--){for(c=0;c<i.length;c++)a=i[c],a===v?y=y.mixedAdd(n.points[c]):a===-v&&(y=y.mixedAdd(n.points[c].neg()));d=d.add(y)}return d.toP()};ai.prototype._wnafMul=function(e,t){var n=4,s=e._getNAFPoints(n);n=s.wnd;for(var o=s.points,i=rh(t,n,this._bitLength),c=this.jpoint(null,null,null),a=i.length-1;a>=0;a--){for(var u=0;a>=0&&i[a]===0;a--)u++;if(a>=0&&u++,c=c.dblp(u),a<0)break;var d=i[a];nh(d!==0),e.type==="affine"?d>0?c=c.mixedAdd(o[d-1>>1]):c=c.mixedAdd(o[-d-1>>1].neg()):d>0?c=c.add(o[d-1>>1]):c=c.add(o[-d-1>>1].neg())}return e.type==="affine"?c.toP():c};ai.prototype._wnafMulAdd=function(e,t,n,s,o){var i=this._wnafT1,c=this._wnafT2,a=this._wnafT3,u=0,d,y,v;for(d=0;d<s;d++){v=t[d];var _=v._getNAFPoints(e);i[d]=_.wnd,c[d]=_.points}for(d=s-1;d>=1;d-=2){var T=d-1,A=d;if(i[T]!==1||i[A]!==1){a[T]=rh(n[T],i[T],this._bitLength),a[A]=rh(n[A],i[A],this._bitLength),u=Math.max(a[T].length,u),u=Math.max(a[A].length,u);continue}var B=[t[T],null,null,t[A]];t[T].y.cmp(t[A].y)===0?(B[1]=t[T].add(t[A]),B[2]=t[T].toJ().mixedAdd(t[A].neg())):t[T].y.cmp(t[A].y.redNeg())===0?(B[1]=t[T].toJ().mixedAdd(t[A]),B[2]=t[T].add(t[A].neg())):(B[1]=t[T].toJ().mixedAdd(t[A]),B[2]=t[T].toJ().mixedAdd(t[A].neg()));var I=[-3,-1,-5,-7,0,7,5,1,3],P=eE(n[T],n[A]);for(u=Math.max(P[0].length,u),a[T]=new Array(u),a[A]=new Array(u),y=0;y<u;y++){var M=P[0][y]|0,L=P[1][y]|0;a[T][y]=I[(M+1)*3+(L+1)],a[A][y]=0,c[T]=B}}var U=this.jpoint(null,null,null),Z=this._wnafT4;for(d=u;d>=0;d--){for(var C=0;d>=0;){var J=!0;for(y=0;y<s;y++)Z[y]=a[y][d]|0,Z[y]!==0&&(J=!1);if(!J)break;C++,d--}if(d>=0&&C++,U=U.dblp(C),d<0)break;for(y=0;y<s;y++){var x=Z[y];x!==0&&(x>0?v=c[y][x-1>>1]:x<0&&(v=c[y][-x-1>>1].neg()),v.type==="affine"?U=U.mixedAdd(v):U=U.add(v))}}for(d=0;d<s;d++)c[d]=null;return o?U:U.toP()};function Nn(r,e){this.curve=r,this.type=e,this.precomputed=null}ai.BasePoint=Nn;Nn.prototype.eq=function(){throw new Error("Not implemented")};Nn.prototype.validate=function(){return this.curve.validate(this)};ai.prototype.decodePoint=function(e,t){e=a0.toArray(e,t);var n=this.p.byteLength();if((e[0]===4||e[0]===6||e[0]===7)&&e.length-1===2*n){e[0]===6?nh(e[e.length-1]%2===0):e[0]===7&&nh(e[e.length-1]%2===1);var s=this.point(e.slice(1,1+n),e.slice(1+n,1+2*n));return s}else if((e[0]===2||e[0]===3)&&e.length-1===n)return this.pointFromX(e.slice(1,1+n),e[0]===3);throw new Error("Unknown point format")};Nn.prototype.encodeCompressed=function(e){return this.encode(e,!0)};Nn.prototype._encode=function(e){var t=this.curve.p.byteLength(),n=this.getX().toArray("be",t);return e?[this.getY().isEven()?2:3].concat(n):[4].concat(n,this.getY().toArray("be",t))};Nn.prototype.encode=function(e,t){return a0.encode(this._encode(t),e)};Nn.prototype.precompute=function(e){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,e),t.beta=this._getBeta(),this.precomputed=t,this};Nn.prototype._hasDoubles=function(e){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((e.bitLength()+1)/t.step):!1};Nn.prototype._getDoubles=function(e,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var n=[this],s=this,o=0;o<t;o+=e){for(var i=0;i<e;i++)s=s.dbl();n.push(s)}return{step:e,points:n}};Nn.prototype._getNAFPoints=function(e){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],n=(1<<e)-1,s=n===1?null:this.dbl(),o=1;o<n;o++)t[o]=t[o-1].add(s);return{wnd:e,points:t}};Nn.prototype._getBeta=function(){return null};Nn.prototype.dblp=function(e){for(var t=this,n=0;n<e;n++)t=t.dbl();return t}});var u0=de((AU,N4)=>{typeof Object.create=="function"?N4.exports=function(e,t){t&&(e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:N4.exports=function(e,t){if(t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}}});var og=de((kU,sg)=>{"use strict";var tE=vn(),Ye=ws(),L4=u0(),nf=f0(),rE=tE.assert;function Ln(r){nf.call(this,"short",r),this.a=new Ye(r.a,16).toRed(this.red),this.b=new Ye(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}L4(Ln,nf);sg.exports=Ln;Ln.prototype._getEndomorphism=function(e){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,n;if(e.beta)t=new Ye(e.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);t=s[0].cmp(s[1])<0?s[0]:s[1],t=t.toRed(this.red)}if(e.lambda)n=new Ye(e.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(t))===0?n=o[0]:(n=o[1],rE(this.g.mul(n).x.cmp(this.g.x.redMul(t))===0))}var i;return e.basis?i=e.basis.map(function(c){return{a:new Ye(c.a,16),b:new Ye(c.b,16)}}):i=this._getEndoBasis(n),{beta:t,lambda:n,basis:i}}};Ln.prototype._getEndoRoots=function(e){var t=e===this.p?this.red:Ye.mont(e),n=new Ye(2).toRed(t).redInvm(),s=n.redNeg(),o=new Ye(3).toRed(t).redNeg().redSqrt().redMul(n),i=s.redAdd(o).fromRed(),c=s.redSub(o).fromRed();return[i,c]};Ln.prototype._getEndoBasis=function(e){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),n=e,s=this.n.clone(),o=new Ye(1),i=new Ye(0),c=new Ye(0),a=new Ye(1),u,d,y,v,_,T,A,B=0,I,P;n.cmpn(0)!==0;){var M=s.div(n);I=s.sub(M.mul(n)),P=c.sub(M.mul(o));var L=a.sub(M.mul(i));if(!y&&I.cmp(t)<0)u=A.neg(),d=o,y=I.neg(),v=P;else if(y&&++B===2)break;A=I,s=n,n=I,c=o,o=P,a=i,i=L}_=I.neg(),T=P;var U=y.sqr().add(v.sqr()),Z=_.sqr().add(T.sqr());return Z.cmp(U)>=0&&(_=u,T=d),y.negative&&(y=y.neg(),v=v.neg()),_.negative&&(_=_.neg(),T=T.neg()),[{a:y,b:v},{a:_,b:T}]};Ln.prototype._endoSplit=function(e){var t=this.endo.basis,n=t[0],s=t[1],o=s.b.mul(e).divRound(this.n),i=n.b.neg().mul(e).divRound(this.n),c=o.mul(n.a),a=i.mul(s.a),u=o.mul(n.b),d=i.mul(s.b),y=e.sub(c).sub(a),v=u.add(d).neg();return{k1:y,k2:v}};Ln.prototype.pointFromX=function(e,t){e=new Ye(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr().redMul(e).redIAdd(e.redMul(this.a)).redIAdd(this.b),s=n.redSqrt();if(s.redSqr().redSub(n).cmp(this.zero)!==0)throw new Error("invalid point");var o=s.fromRed().isOdd();return(t&&!o||!t&&o)&&(s=s.redNeg()),this.point(e,s)};Ln.prototype.validate=function(e){if(e.inf)return!0;var t=e.x,n=e.y,s=this.a.redMul(t),o=t.redSqr().redMul(t).redIAdd(s).redIAdd(this.b);return n.redSqr().redISub(o).cmpn(0)===0};Ln.prototype._endoWnafMulAdd=function(e,t,n){for(var s=this._endoWnafT1,o=this._endoWnafT2,i=0;i<e.length;i++){var c=this._endoSplit(t[i]),a=e[i],u=a._getBeta();c.k1.negative&&(c.k1.ineg(),a=a.neg(!0)),c.k2.negative&&(c.k2.ineg(),u=u.neg(!0)),s[i*2]=a,s[i*2+1]=u,o[i*2]=c.k1,o[i*2+1]=c.k2}for(var d=this._wnafMulAdd(1,s,o,i*2,n),y=0;y<i*2;y++)s[y]=null,o[y]=null;return d};function nr(r,e,t,n){nf.BasePoint.call(this,r,"affine"),e===null&&t===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ye(e,16),this.y=new Ye(t,16),n&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}L4(nr,nf.BasePoint);Ln.prototype.point=function(e,t,n){return new nr(this,e,t,n)};Ln.prototype.pointFromJSON=function(e,t){return nr.fromJSON(this,e,t)};nr.prototype._getBeta=function(){if(this.curve.endo){var e=this.precomputed;if(e&&e.beta)return e.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(e){var n=this.curve,s=function(o){return n.point(o.x.redMul(n.endo.beta),o.y)};e.beta=t,t.precomputed={beta:null,naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(s)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(s)}}}return t}};nr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};nr.fromJSON=function(e,t,n){typeof t=="string"&&(t=JSON.parse(t));var s=e.point(t[0],t[1],n);if(!t[2])return s;function o(c){return e.point(c[0],c[1],n)}var i=t[2];return s.precomputed={beta:null,doubles:i.doubles&&{step:i.doubles.step,points:[s].concat(i.doubles.points.map(o))},naf:i.naf&&{wnd:i.naf.wnd,points:[s].concat(i.naf.points.map(o))}},s};nr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};nr.prototype.isInfinity=function(){return this.inf};nr.prototype.add=function(e){if(this.inf)return e;if(e.inf)return this;if(this.eq(e))return this.dbl();if(this.neg().eq(e))return this.curve.point(null,null);if(this.x.cmp(e.x)===0)return this.curve.point(null,null);var t=this.y.redSub(e.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(e.x).redInvm()));var n=t.redSqr().redISub(this.x).redISub(e.x),s=t.redMul(this.x.redSub(n)).redISub(this.y);return this.curve.point(n,s)};nr.prototype.dbl=function(){if(this.inf)return this;var e=this.y.redAdd(this.y);if(e.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,n=this.x.redSqr(),s=e.redInvm(),o=n.redAdd(n).redIAdd(n).redIAdd(t).redMul(s),i=o.redSqr().redISub(this.x.redAdd(this.x)),c=o.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,c)};nr.prototype.getX=function(){return this.x.fromRed()};nr.prototype.getY=function(){return this.y.fromRed()};nr.prototype.mul=function(e){return e=new Ye(e,16),this.isInfinity()?this:this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve.endo?this.curve._endoWnafMulAdd([this],[e]):this.curve._wnafMul(this,e)};nr.prototype.mulAdd=function(e,t,n){var s=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,o):this.curve._wnafMulAdd(1,s,o,2)};nr.prototype.jmulAdd=function(e,t,n){var s=[this,t],o=[e,n];return this.curve.endo?this.curve._endoWnafMulAdd(s,o,!0):this.curve._wnafMulAdd(1,s,o,2,!0)};nr.prototype.eq=function(e){return this===e||this.inf===e.inf&&(this.inf||this.x.cmp(e.x)===0&&this.y.cmp(e.y)===0)};nr.prototype.neg=function(e){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(e&&this.precomputed){var n=this.precomputed,s=function(o){return o.neg()};t.precomputed={naf:n.naf&&{wnd:n.naf.wnd,points:n.naf.points.map(s)},doubles:n.doubles&&{step:n.doubles.step,points:n.doubles.points.map(s)}}}return t};nr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var e=this.curve.jpoint(this.x,this.y,this.curve.one);return e};function lr(r,e,t,n){nf.BasePoint.call(this,r,"jacobian"),e===null&&t===null&&n===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ye(0)):(this.x=new Ye(e,16),this.y=new Ye(t,16),this.z=new Ye(n,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}L4(lr,nf.BasePoint);Ln.prototype.jpoint=function(e,t,n){return new lr(this,e,t,n)};lr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var e=this.z.redInvm(),t=e.redSqr(),n=this.x.redMul(t),s=this.y.redMul(t).redMul(e);return this.curve.point(n,s)};lr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};lr.prototype.add=function(e){if(this.isInfinity())return e;if(e.isInfinity())return this;var t=e.z.redSqr(),n=this.z.redSqr(),s=this.x.redMul(t),o=e.x.redMul(n),i=this.y.redMul(t.redMul(e.z)),c=e.y.redMul(n.redMul(this.z)),a=s.redSub(o),u=i.redSub(c);if(a.cmpn(0)===0)return u.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var d=a.redSqr(),y=d.redMul(a),v=s.redMul(d),_=u.redSqr().redIAdd(y).redISub(v).redISub(v),T=u.redMul(v.redISub(_)).redISub(i.redMul(y)),A=this.z.redMul(e.z).redMul(a);return this.curve.jpoint(_,T,A)};lr.prototype.mixedAdd=function(e){if(this.isInfinity())return e.toJ();if(e.isInfinity())return this;var t=this.z.redSqr(),n=this.x,s=e.x.redMul(t),o=this.y,i=e.y.redMul(t).redMul(this.z),c=n.redSub(s),a=o.redSub(i);if(c.cmpn(0)===0)return a.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var u=c.redSqr(),d=u.redMul(c),y=n.redMul(u),v=a.redSqr().redIAdd(d).redISub(y).redISub(y),_=a.redMul(y.redISub(v)).redISub(o.redMul(d)),T=this.z.redMul(c);return this.curve.jpoint(v,_,T)};lr.prototype.dblp=function(e){if(e===0)return this;if(this.isInfinity())return this;if(!e)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var n=this;for(t=0;t<e;t++)n=n.dbl();return n}var s=this.curve.a,o=this.curve.tinv,i=this.x,c=this.y,a=this.z,u=a.redSqr().redSqr(),d=c.redAdd(c);for(t=0;t<e;t++){var y=i.redSqr(),v=d.redSqr(),_=v.redSqr(),T=y.redAdd(y).redIAdd(y).redIAdd(s.redMul(u)),A=i.redMul(v),B=T.redSqr().redISub(A.redAdd(A)),I=A.redISub(B),P=T.redMul(I);P=P.redIAdd(P).redISub(_);var M=d.redMul(a);t+1<e&&(u=u.redMul(_)),i=B,a=M,d=P}return this.curve.jpoint(i,d.redMul(o),a)};lr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};lr.prototype._zeroDbl=function(){var e,t,n;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),c=this.x.redAdd(o).redSqr().redISub(s).redISub(i);c=c.redIAdd(c);var a=s.redAdd(s).redIAdd(s),u=a.redSqr().redISub(c).redISub(c),d=i.redIAdd(i);d=d.redIAdd(d),d=d.redIAdd(d),e=u,t=a.redMul(c.redISub(u)).redISub(d),n=this.y.redAdd(this.y)}else{var y=this.x.redSqr(),v=this.y.redSqr(),_=v.redSqr(),T=this.x.redAdd(v).redSqr().redISub(y).redISub(_);T=T.redIAdd(T);var A=y.redAdd(y).redIAdd(y),B=A.redSqr(),I=_.redIAdd(_);I=I.redIAdd(I),I=I.redIAdd(I),e=B.redISub(T).redISub(T),t=A.redMul(T.redISub(e)).redISub(I),n=this.y.redMul(this.z),n=n.redIAdd(n)}return this.curve.jpoint(e,t,n)};lr.prototype._threeDbl=function(){var e,t,n;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),i=o.redSqr(),c=this.x.redAdd(o).redSqr().redISub(s).redISub(i);c=c.redIAdd(c);var a=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),u=a.redSqr().redISub(c).redISub(c);e=u;var d=i.redIAdd(i);d=d.redIAdd(d),d=d.redIAdd(d),t=a.redMul(c.redISub(u)).redISub(d),n=this.y.redAdd(this.y)}else{var y=this.z.redSqr(),v=this.y.redSqr(),_=this.x.redMul(v),T=this.x.redSub(y).redMul(this.x.redAdd(y));T=T.redAdd(T).redIAdd(T);var A=_.redIAdd(_);A=A.redIAdd(A);var B=A.redAdd(A);e=T.redSqr().redISub(B),n=this.y.redAdd(this.z).redSqr().redISub(v).redISub(y);var I=v.redSqr();I=I.redIAdd(I),I=I.redIAdd(I),I=I.redIAdd(I),t=T.redMul(A.redISub(e)).redISub(I)}return this.curve.jpoint(e,t,n)};lr.prototype._dbl=function(){var e=this.curve.a,t=this.x,n=this.y,s=this.z,o=s.redSqr().redSqr(),i=t.redSqr(),c=n.redSqr(),a=i.redAdd(i).redIAdd(i).redIAdd(e.redMul(o)),u=t.redAdd(t);u=u.redIAdd(u);var d=u.redMul(c),y=a.redSqr().redISub(d.redAdd(d)),v=d.redISub(y),_=c.redSqr();_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var T=a.redMul(v).redISub(_),A=n.redAdd(n).redMul(s);return this.curve.jpoint(y,T,A)};lr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr(),s=t.redSqr(),o=e.redAdd(e).redIAdd(e),i=o.redSqr(),c=this.x.redAdd(t).redSqr().redISub(e).redISub(s);c=c.redIAdd(c),c=c.redAdd(c).redIAdd(c),c=c.redISub(i);var a=c.redSqr(),u=s.redIAdd(s);u=u.redIAdd(u),u=u.redIAdd(u),u=u.redIAdd(u);var d=o.redIAdd(c).redSqr().redISub(i).redISub(a).redISub(u),y=t.redMul(d);y=y.redIAdd(y),y=y.redIAdd(y);var v=this.x.redMul(a).redISub(y);v=v.redIAdd(v),v=v.redIAdd(v);var _=this.y.redMul(d.redMul(u.redISub(d)).redISub(c.redMul(a)));_=_.redIAdd(_),_=_.redIAdd(_),_=_.redIAdd(_);var T=this.z.redAdd(c).redSqr().redISub(n).redISub(a);return this.curve.jpoint(v,_,T)};lr.prototype.mul=function(e,t){return e=new Ye(e,t),this.curve._wnafMul(this,e)};lr.prototype.eq=function(e){if(e.type==="affine")return this.eq(e.toJ());if(this===e)return!0;var t=this.z.redSqr(),n=e.z.redSqr();if(this.x.redMul(n).redISub(e.x.redMul(t)).cmpn(0)!==0)return!1;var s=t.redMul(this.z),o=n.redMul(e.z);return this.y.redMul(o).redISub(e.y.redMul(s)).cmpn(0)===0};lr.prototype.eqXToP=function(e){var t=this.z.redSqr(),n=e.toRed(this.curve.red).redMul(t);if(this.x.cmp(n)===0)return!0;for(var s=e.clone(),o=this.curve.redN.redMul(t);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(n.redIAdd(o),this.x.cmp(n)===0)return!0}};lr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};lr.prototype.isInfinity=function(){return this.z.cmpn(0)===0}});var ag=de((CU,cg)=>{"use strict";var sf=ws(),ig=u0(),sh=f0(),nE=vn();function of(r){sh.call(this,"mont",r),this.a=new sf(r.a,16).toRed(this.red),this.b=new sf(r.b,16).toRed(this.red),this.i4=new sf(4).toRed(this.red).redInvm(),this.two=new sf(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}ig(of,sh);cg.exports=of;of.prototype.validate=function(e){var t=e.normalize().x,n=t.redSqr(),s=n.redMul(t).redAdd(n.redMul(this.a)).redAdd(t),o=s.redSqrt();return o.redSqr().cmp(s)===0};function sr(r,e,t){sh.BasePoint.call(this,r,"projective"),e===null&&t===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new sf(e,16),this.z=new sf(t,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}ig(sr,sh.BasePoint);of.prototype.decodePoint=function(e,t){return this.point(nE.toArray(e,t),1)};of.prototype.point=function(e,t){return new sr(this,e,t)};of.prototype.pointFromJSON=function(e){return sr.fromJSON(this,e)};sr.prototype.precompute=function(){};sr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};sr.fromJSON=function(e,t){return new sr(e,t[0],t[1]||e.one)};sr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};sr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};sr.prototype.dbl=function(){var e=this.x.redAdd(this.z),t=e.redSqr(),n=this.x.redSub(this.z),s=n.redSqr(),o=t.redSub(s),i=t.redMul(s),c=o.redMul(s.redAdd(this.curve.a24.redMul(o)));return this.curve.point(i,c)};sr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.diffAdd=function(e,t){var n=this.x.redAdd(this.z),s=this.x.redSub(this.z),o=e.x.redAdd(e.z),i=e.x.redSub(e.z),c=i.redMul(n),a=o.redMul(s),u=t.z.redMul(c.redAdd(a).redSqr()),d=t.x.redMul(c.redISub(a).redSqr());return this.curve.point(u,d)};sr.prototype.mul=function(e){for(var t=e.clone(),n=this,s=this.curve.point(null,null),o=this,i=[];t.cmpn(0)!==0;t.iushrn(1))i.push(t.andln(1));for(var c=i.length-1;c>=0;c--)i[c]===0?(n=n.diffAdd(s,o),s=s.dbl()):(s=n.diffAdd(s,o),n=n.dbl());return s};sr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};sr.prototype.eq=function(e){return this.getX().cmp(e.getX())===0};sr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};sr.prototype.getX=function(){return this.normalize(),this.x.fromRed()}});var lg=de((BU,ug)=>{"use strict";var sE=vn(),uo=ws(),fg=u0(),oh=f0(),oE=sE.assert;function vs(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,oh.call(this,"edwards",r),this.a=new uo(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new uo(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new uo(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),oE(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}fg(vs,oh);ug.exports=vs;vs.prototype._mulA=function(e){return this.mOneA?e.redNeg():this.a.redMul(e)};vs.prototype._mulC=function(e){return this.oneC?e:this.c.redMul(e)};vs.prototype.jpoint=function(e,t,n,s){return this.point(e,t,n,s)};vs.prototype.pointFromX=function(e,t){e=new uo(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),s=this.c2.redSub(this.a.redMul(n)),o=this.one.redSub(this.c2.redMul(this.d).redMul(n)),i=s.redMul(o.redInvm()),c=i.redSqrt();if(c.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var a=c.fromRed().isOdd();return(t&&!a||!t&&a)&&(c=c.redNeg()),this.point(e,c)};vs.prototype.pointFromY=function(e,t){e=new uo(e,16),e.red||(e=e.toRed(this.red));var n=e.redSqr(),s=n.redSub(this.c2),o=n.redMul(this.d).redMul(this.c2).redSub(this.a),i=s.redMul(o.redInvm());if(i.cmp(this.zero)===0){if(t)throw new Error("invalid point");return this.point(this.zero,e)}var c=i.redSqrt();if(c.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");return c.fromRed().isOdd()!==t&&(c=c.redNeg()),this.point(c,e)};vs.prototype.validate=function(e){if(e.isInfinity())return!0;e.normalize();var t=e.x.redSqr(),n=e.y.redSqr(),s=t.redMul(this.a).redAdd(n),o=this.c2.redMul(this.one.redAdd(this.d.redMul(t).redMul(n)));return s.cmp(o)===0};function Fe(r,e,t,n,s){oh.BasePoint.call(this,r,"projective"),e===null&&t===null&&n===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new uo(e,16),this.y=new uo(t,16),this.z=n?new uo(n,16):this.curve.one,this.t=s&&new uo(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}fg(Fe,oh.BasePoint);vs.prototype.pointFromJSON=function(e){return Fe.fromJSON(this,e)};vs.prototype.point=function(e,t,n,s){return new Fe(this,e,t,n,s)};Fe.fromJSON=function(e,t){return new Fe(e,t[0],t[1],t[2])};Fe.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};Fe.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};Fe.prototype._extDbl=function(){var e=this.x.redSqr(),t=this.y.redSqr(),n=this.z.redSqr();n=n.redIAdd(n);var s=this.curve._mulA(e),o=this.x.redAdd(this.y).redSqr().redISub(e).redISub(t),i=s.redAdd(t),c=i.redSub(n),a=s.redSub(t),u=o.redMul(c),d=i.redMul(a),y=o.redMul(a),v=c.redMul(i);return this.curve.point(u,d,v,y)};Fe.prototype._projDbl=function(){var e=this.x.redAdd(this.y).redSqr(),t=this.x.redSqr(),n=this.y.redSqr(),s,o,i,c,a,u;if(this.curve.twisted){c=this.curve._mulA(t);var d=c.redAdd(n);this.zOne?(s=e.redSub(t).redSub(n).redMul(d.redSub(this.curve.two)),o=d.redMul(c.redSub(n)),i=d.redSqr().redSub(d).redSub(d)):(a=this.z.redSqr(),u=d.redSub(a).redISub(a),s=e.redSub(t).redISub(n).redMul(u),o=d.redMul(c.redSub(n)),i=d.redMul(u))}else c=t.redAdd(n),a=this.curve._mulC(this.z).redSqr(),u=c.redSub(a).redSub(a),s=this.curve._mulC(e.redISub(c)).redMul(u),o=this.curve._mulC(c).redMul(t.redISub(n)),i=c.redMul(u);return this.curve.point(s,o,i)};Fe.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};Fe.prototype._extAdd=function(e){var t=this.y.redSub(this.x).redMul(e.y.redSub(e.x)),n=this.y.redAdd(this.x).redMul(e.y.redAdd(e.x)),s=this.t.redMul(this.curve.dd).redMul(e.t),o=this.z.redMul(e.z.redAdd(e.z)),i=n.redSub(t),c=o.redSub(s),a=o.redAdd(s),u=n.redAdd(t),d=i.redMul(c),y=a.redMul(u),v=i.redMul(u),_=c.redMul(a);return this.curve.point(d,y,_,v)};Fe.prototype._projAdd=function(e){var t=this.z.redMul(e.z),n=t.redSqr(),s=this.x.redMul(e.x),o=this.y.redMul(e.y),i=this.curve.d.redMul(s).redMul(o),c=n.redSub(i),a=n.redAdd(i),u=this.x.redAdd(this.y).redMul(e.x.redAdd(e.y)).redISub(s).redISub(o),d=t.redMul(c).redMul(u),y,v;return this.curve.twisted?(y=t.redMul(a).redMul(o.redSub(this.curve._mulA(s))),v=c.redMul(a)):(y=t.redMul(a).redMul(o.redSub(s)),v=this.curve._mulC(c).redMul(a)),this.curve.point(d,y,v)};Fe.prototype.add=function(e){return this.isInfinity()?e:e.isInfinity()?this:this.curve.extended?this._extAdd(e):this._projAdd(e)};Fe.prototype.mul=function(e){return this._hasDoubles(e)?this.curve._fixedNafMul(this,e):this.curve._wnafMul(this,e)};Fe.prototype.mulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!1)};Fe.prototype.jmulAdd=function(e,t,n){return this.curve._wnafMulAdd(1,[this,t],[e,n],2,!0)};Fe.prototype.normalize=function(){if(this.zOne)return this;var e=this.z.redInvm();return this.x=this.x.redMul(e),this.y=this.y.redMul(e),this.t&&(this.t=this.t.redMul(e)),this.z=this.curve.one,this.zOne=!0,this};Fe.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};Fe.prototype.getX=function(){return this.normalize(),this.x.fromRed()};Fe.prototype.getY=function(){return this.normalize(),this.y.fromRed()};Fe.prototype.eq=function(e){return this===e||this.getX().cmp(e.getX())===0&&this.getY().cmp(e.getY())===0};Fe.prototype.eqXToP=function(e){var t=e.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(t)===0)return!0;for(var n=e.clone(),s=this.curve.redN.redMul(this.z);;){if(n.iadd(this.curve.n),n.cmp(this.curve.p)>=0)return!1;if(t.redIAdd(s),this.x.cmp(t)===0)return!0}};Fe.prototype.toP=Fe.prototype.normalize;Fe.prototype.mixedAdd=Fe.prototype.add});var H4=de(dg=>{"use strict";var ih=dg;ih.base=f0();ih.short=og();ih.mont=ag();ih.edwards=lg()});var Gn=de(Me=>{"use strict";var iE=ii(),cE=u0();Me.inherits=cE;function aE(r,e){return(r.charCodeAt(e)&64512)!==55296||e<0||e+1>=r.length?!1:(r.charCodeAt(e+1)&64512)===56320}function fE(r,e){if(Array.isArray(r))return r.slice();if(!r)return[];var t=[];if(typeof r=="string")if(e){if(e==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)t.push(parseInt(r[s]+r[s+1],16))}else for(var n=0,s=0;s<r.length;s++){var o=r.charCodeAt(s);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):aE(r,s)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}else for(s=0;s<r.length;s++)t[s]=r[s]|0;return t}Me.toArray=fE;function uE(r){for(var e="",t=0;t<r.length;t++)e+=hg(r[t].toString(16));return e}Me.toHex=uE;function pg(r){var e=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return e>>>0}Me.htonl=pg;function lE(r,e){for(var t="",n=0;n<r.length;n++){var s=r[n];e==="little"&&(s=pg(s)),t+=mg(s.toString(16))}return t}Me.toHex32=lE;function hg(r){return r.length===1?"0"+r:r}Me.zero2=hg;function mg(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Me.zero8=mg;function dE(r,e,t,n){var s=t-e;iE(s%4===0);for(var o=new Array(s/4),i=0,c=e;i<o.length;i++,c+=4){var a;n==="big"?a=r[c]<<24|r[c+1]<<16|r[c+2]<<8|r[c+3]:a=r[c+3]<<24|r[c+2]<<16|r[c+1]<<8|r[c],o[i]=a>>>0}return o}Me.join32=dE;function pE(r,e){for(var t=new Array(r.length*4),n=0,s=0;n<r.length;n++,s+=4){var o=r[n];e==="big"?(t[s]=o>>>24,t[s+1]=o>>>16&255,t[s+2]=o>>>8&255,t[s+3]=o&255):(t[s+3]=o>>>24,t[s+2]=o>>>16&255,t[s+1]=o>>>8&255,t[s]=o&255)}return t}Me.split32=pE;function hE(r,e){return r>>>e|r<<32-e}Me.rotr32=hE;function mE(r,e){return r<<e|r>>>32-e}Me.rotl32=mE;function yE(r,e){return r+e>>>0}Me.sum32=yE;function gE(r,e,t){return r+e+t>>>0}Me.sum32_3=gE;function bE(r,e,t,n){return r+e+t+n>>>0}Me.sum32_4=bE;function xE(r,e,t,n,s){return r+e+t+n+s>>>0}Me.sum32_5=xE;function wE(r,e,t,n){var s=r[e],o=r[e+1],i=n+o>>>0,c=(i<n?1:0)+t+s;r[e]=c>>>0,r[e+1]=i}Me.sum64=wE;function vE(r,e,t,n){var s=e+n>>>0,o=(s<e?1:0)+r+t;return o>>>0}Me.sum64_hi=vE;function SE(r,e,t,n){var s=e+n;return s>>>0}Me.sum64_lo=SE;function _E(r,e,t,n,s,o,i,c){var a=0,u=e;u=u+n>>>0,a+=u<e?1:0,u=u+o>>>0,a+=u<o?1:0,u=u+c>>>0,a+=u<c?1:0;var d=r+t+s+i+a;return d>>>0}Me.sum64_4_hi=_E;function TE(r,e,t,n,s,o,i,c){var a=e+n+o+c;return a>>>0}Me.sum64_4_lo=TE;function EE(r,e,t,n,s,o,i,c,a,u){var d=0,y=e;y=y+n>>>0,d+=y<e?1:0,y=y+o>>>0,d+=y<o?1:0,y=y+c>>>0,d+=y<c?1:0,y=y+u>>>0,d+=y<u?1:0;var v=r+t+s+i+a+d;return v>>>0}Me.sum64_5_hi=EE;function AE(r,e,t,n,s,o,i,c,a,u){var d=e+n+o+c+u;return d>>>0}Me.sum64_5_lo=AE;function kE(r,e,t){var n=e<<32-t|r>>>t;return n>>>0}Me.rotr64_hi=kE;function CE(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Me.rotr64_lo=CE;function BE(r,e,t){return r>>>t}Me.shr64_hi=BE;function IE(r,e,t){var n=r<<32-t|e>>>t;return n>>>0}Me.shr64_lo=IE});var cf=de(gg=>{"use strict";var yg=Gn(),OE=ii();function ch(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}gg.BlockHash=ch;ch.prototype.update=function(e,t){if(e=yg.toArray(e,t),this.pending?this.pending=this.pending.concat(e):this.pending=e,this.pendingTotal+=e.length,this.pending.length>=this._delta8){e=this.pending;var n=e.length%this._delta8;this.pending=e.slice(e.length-n,e.length),this.pending.length===0&&(this.pending=null),e=yg.join32(e,0,e.length-n,this.endian);for(var s=0;s<e.length;s+=this._delta32)this._update(e,s,s+this._delta32)}return this};ch.prototype.digest=function(e){return this.update(this._pad()),OE(this.pending===null),this._digest(e)};ch.prototype._pad=function(){var e=this.pendingTotal,t=this._delta8,n=t-(e+this.padLength)%t,s=new Array(n+this.padLength);s[0]=128;for(var o=1;o<n;o++)s[o]=0;if(e<<=3,this.endian==="big"){for(var i=8;i<this.padLength;i++)s[o++]=0;s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=e>>>24&255,s[o++]=e>>>16&255,s[o++]=e>>>8&255,s[o++]=e&255}else for(s[o++]=e&255,s[o++]=e>>>8&255,s[o++]=e>>>16&255,s[o++]=e>>>24&255,s[o++]=0,s[o++]=0,s[o++]=0,s[o++]=0,i=8;i<this.padLength;i++)s[o++]=0;return s}});var U4=de(lo=>{"use strict";var DE=Gn(),Ss=DE.rotr32;function PE(r,e,t,n){if(r===0)return bg(e,t,n);if(r===1||r===3)return wg(e,t,n);if(r===2)return xg(e,t,n)}lo.ft_1=PE;function bg(r,e,t){return r&e^~r&t}lo.ch32=bg;function xg(r,e,t){return r&e^r&t^e&t}lo.maj32=xg;function wg(r,e,t){return r^e^t}lo.p32=wg;function ME(r){return Ss(r,2)^Ss(r,13)^Ss(r,22)}lo.s0_256=ME;function RE(r){return Ss(r,6)^Ss(r,11)^Ss(r,25)}lo.s1_256=RE;function NE(r){return Ss(r,7)^Ss(r,18)^r>>>3}lo.g0_256=NE;function LE(r){return Ss(r,17)^Ss(r,19)^r>>>10}lo.g1_256=LE});var _g=de((MU,Sg)=>{"use strict";var af=Gn(),HE=cf(),UE=U4(),F4=af.rotl32,l0=af.sum32,FE=af.sum32_5,$E=UE.ft_1,vg=HE.BlockHash,qE=[1518500249,1859775393,2400959708,3395469782];function _s(){if(!(this instanceof _s))return new _s;vg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}af.inherits(_s,vg);Sg.exports=_s;_s.blockSize=512;_s.outSize=160;_s.hmacStrength=80;_s.padLength=64;_s.prototype._update=function(e,t){for(var n=this.W,s=0;s<16;s++)n[s]=e[t+s];for(;s<n.length;s++)n[s]=F4(n[s-3]^n[s-8]^n[s-14]^n[s-16],1);var o=this.h[0],i=this.h[1],c=this.h[2],a=this.h[3],u=this.h[4];for(s=0;s<n.length;s++){var d=~~(s/20),y=FE(F4(o,5),$E(d,i,c,a),u,n[s],qE[d]);u=a,a=c,c=F4(i,30),i=o,o=y}this.h[0]=l0(this.h[0],o),this.h[1]=l0(this.h[1],i),this.h[2]=l0(this.h[2],c),this.h[3]=l0(this.h[3],a),this.h[4]=l0(this.h[4],u)};_s.prototype._digest=function(e){return e==="hex"?af.toHex32(this.h,"big"):af.split32(this.h,"big")}});var $4=de((RU,Eg)=>{"use strict";var ff=Gn(),jE=cf(),uf=U4(),zE=ii(),Jn=ff.sum32,VE=ff.sum32_4,KE=ff.sum32_5,WE=uf.ch32,ZE=uf.maj32,GE=uf.s0_256,JE=uf.s1_256,XE=uf.g0_256,YE=uf.g1_256,Tg=jE.BlockHash,QE=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function Ts(){if(!(this instanceof Ts))return new Ts;Tg.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=QE,this.W=new Array(64)}ff.inherits(Ts,Tg);Eg.exports=Ts;Ts.blockSize=512;Ts.outSize=256;Ts.hmacStrength=192;Ts.padLength=64;Ts.prototype._update=function(e,t){for(var n=this.W,s=0;s<16;s++)n[s]=e[t+s];for(;s<n.length;s++)n[s]=VE(YE(n[s-2]),n[s-7],XE(n[s-15]),n[s-16]);var o=this.h[0],i=this.h[1],c=this.h[2],a=this.h[3],u=this.h[4],d=this.h[5],y=this.h[6],v=this.h[7];for(zE(this.k.length===n.length),s=0;s<n.length;s++){var _=KE(v,JE(u),WE(u,d,y),this.k[s],n[s]),T=Jn(GE(o),ZE(o,i,c));v=y,y=d,d=u,u=Jn(a,_),a=c,c=i,i=o,o=Jn(_,T)}this.h[0]=Jn(this.h[0],o),this.h[1]=Jn(this.h[1],i),this.h[2]=Jn(this.h[2],c),this.h[3]=Jn(this.h[3],a),this.h[4]=Jn(this.h[4],u),this.h[5]=Jn(this.h[5],d),this.h[6]=Jn(this.h[6],y),this.h[7]=Jn(this.h[7],v)};Ts.prototype._digest=function(e){return e==="hex"?ff.toHex32(this.h,"big"):ff.split32(this.h,"big")}});var Cg=de((NU,kg)=>{"use strict";var q4=Gn(),Ag=$4();function po(){if(!(this instanceof po))return new po;Ag.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}q4.inherits(po,Ag);kg.exports=po;po.blockSize=512;po.outSize=224;po.hmacStrength=192;po.padLength=64;po.prototype._digest=function(e){return e==="hex"?q4.toHex32(this.h.slice(0,7),"big"):q4.split32(this.h.slice(0,7),"big")}});var V4=de((LU,Dg)=>{"use strict";var tn=Gn(),eA=cf(),tA=ii(),Es=tn.rotr64_hi,As=tn.rotr64_lo,Bg=tn.shr64_hi,Ig=tn.shr64_lo,fi=tn.sum64,j4=tn.sum64_hi,z4=tn.sum64_lo,rA=tn.sum64_4_hi,nA=tn.sum64_4_lo,sA=tn.sum64_5_hi,oA=tn.sum64_5_lo,Og=eA.BlockHash,iA=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function Xn(){if(!(this instanceof Xn))return new Xn;Og.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=iA,this.W=new Array(160)}tn.inherits(Xn,Og);Dg.exports=Xn;Xn.blockSize=1024;Xn.outSize=512;Xn.hmacStrength=192;Xn.padLength=128;Xn.prototype._prepareBlock=function(e,t){for(var n=this.W,s=0;s<32;s++)n[s]=e[t+s];for(;s<n.length;s+=2){var o=gA(n[s-4],n[s-3]),i=bA(n[s-4],n[s-3]),c=n[s-14],a=n[s-13],u=mA(n[s-30],n[s-29]),d=yA(n[s-30],n[s-29]),y=n[s-32],v=n[s-31];n[s]=rA(o,i,c,a,u,d,y,v),n[s+1]=nA(o,i,c,a,u,d,y,v)}};Xn.prototype._update=function(e,t){this._prepareBlock(e,t);var n=this.W,s=this.h[0],o=this.h[1],i=this.h[2],c=this.h[3],a=this.h[4],u=this.h[5],d=this.h[6],y=this.h[7],v=this.h[8],_=this.h[9],T=this.h[10],A=this.h[11],B=this.h[12],I=this.h[13],P=this.h[14],M=this.h[15];tA(this.k.length===n.length);for(var L=0;L<n.length;L+=2){var U=P,Z=M,C=pA(v,_),J=hA(v,_),x=cA(v,_,T,A,B,I),m=aA(v,_,T,A,B,I),f=this.k[L],l=this.k[L+1],h=n[L],g=n[L+1],b=sA(U,Z,C,J,x,m,f,l,h,g),w=oA(U,Z,C,J,x,m,f,l,h,g);U=lA(s,o),Z=dA(s,o),C=fA(s,o,i,c,a,u),J=uA(s,o,i,c,a,u);var k=j4(U,Z,C,J),S=z4(U,Z,C,J);P=B,M=I,B=T,I=A,T=v,A=_,v=j4(d,y,b,w),_=z4(y,y,b,w),d=a,y=u,a=i,u=c,i=s,c=o,s=j4(b,w,k,S),o=z4(b,w,k,S)}fi(this.h,0,s,o),fi(this.h,2,i,c),fi(this.h,4,a,u),fi(this.h,6,d,y),fi(this.h,8,v,_),fi(this.h,10,T,A),fi(this.h,12,B,I),fi(this.h,14,P,M)};Xn.prototype._digest=function(e){return e==="hex"?tn.toHex32(this.h,"big"):tn.split32(this.h,"big")};function cA(r,e,t,n,s){var o=r&t^~r&s;return o<0&&(o+=4294967296),o}function aA(r,e,t,n,s,o){var i=e&n^~e&o;return i<0&&(i+=4294967296),i}function fA(r,e,t,n,s){var o=r&t^r&s^t&s;return o<0&&(o+=4294967296),o}function uA(r,e,t,n,s,o){var i=e&n^e&o^n&o;return i<0&&(i+=4294967296),i}function lA(r,e){var t=Es(r,e,28),n=Es(e,r,2),s=Es(e,r,7),o=t^n^s;return o<0&&(o+=4294967296),o}function dA(r,e){var t=As(r,e,28),n=As(e,r,2),s=As(e,r,7),o=t^n^s;return o<0&&(o+=4294967296),o}function pA(r,e){var t=Es(r,e,14),n=Es(r,e,18),s=Es(e,r,9),o=t^n^s;return o<0&&(o+=4294967296),o}function hA(r,e){var t=As(r,e,14),n=As(r,e,18),s=As(e,r,9),o=t^n^s;return o<0&&(o+=4294967296),o}function mA(r,e){var t=Es(r,e,1),n=Es(r,e,8),s=Bg(r,e,7),o=t^n^s;return o<0&&(o+=4294967296),o}function yA(r,e){var t=As(r,e,1),n=As(r,e,8),s=Ig(r,e,7),o=t^n^s;return o<0&&(o+=4294967296),o}function gA(r,e){var t=Es(r,e,19),n=Es(e,r,29),s=Bg(r,e,6),o=t^n^s;return o<0&&(o+=4294967296),o}function bA(r,e){var t=As(r,e,19),n=As(e,r,29),s=Ig(r,e,6),o=t^n^s;return o<0&&(o+=4294967296),o}});var Rg=de((HU,Mg)=>{"use strict";var K4=Gn(),Pg=V4();function ho(){if(!(this instanceof ho))return new ho;Pg.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}K4.inherits(ho,Pg);Mg.exports=ho;ho.blockSize=1024;ho.outSize=384;ho.hmacStrength=192;ho.padLength=128;ho.prototype._digest=function(e){return e==="hex"?K4.toHex32(this.h.slice(0,12),"big"):K4.split32(this.h.slice(0,12),"big")}});var Ng=de(lf=>{"use strict";lf.sha1=_g();lf.sha224=Cg();lf.sha256=$4();lf.sha384=Rg();lf.sha512=V4()});var qg=de($g=>{"use strict";var gc=Gn(),xA=cf(),ah=gc.rotl32,Lg=gc.sum32,d0=gc.sum32_3,Hg=gc.sum32_4,Fg=xA.BlockHash;function ks(){if(!(this instanceof ks))return new ks;Fg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}gc.inherits(ks,Fg);$g.ripemd160=ks;ks.blockSize=512;ks.outSize=160;ks.hmacStrength=192;ks.padLength=64;ks.prototype._update=function(e,t){for(var n=this.h[0],s=this.h[1],o=this.h[2],i=this.h[3],c=this.h[4],a=n,u=s,d=o,y=i,v=c,_=0;_<80;_++){var T=Lg(ah(Hg(n,Ug(_,s,o,i),e[SA[_]+t],wA(_)),TA[_]),c);n=c,c=i,i=ah(o,10),o=s,s=T,T=Lg(ah(Hg(a,Ug(79-_,u,d,y),e[_A[_]+t],vA(_)),EA[_]),v),a=v,v=y,y=ah(d,10),d=u,u=T}T=d0(this.h[1],o,y),this.h[1]=d0(this.h[2],i,v),this.h[2]=d0(this.h[3],c,a),this.h[3]=d0(this.h[4],n,u),this.h[4]=d0(this.h[0],s,d),this.h[0]=T};ks.prototype._digest=function(e){return e==="hex"?gc.toHex32(this.h,"little"):gc.split32(this.h,"little")};function Ug(r,e,t,n){return r<=15?e^t^n:r<=31?e&t|~e&n:r<=47?(e|~t)^n:r<=63?e&n|t&~n:e^(t|~n)}function wA(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function vA(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var SA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_A=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],TA=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],EA=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]});var zg=de(($U,jg)=>{"use strict";var AA=Gn(),kA=ii();function df(r,e,t){if(!(this instanceof df))return new df(r,e,t);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(AA.toArray(e,t))}jg.exports=df;df.prototype._init=function(e){e.length>this.blockSize&&(e=new this.Hash().update(e).digest()),kA(e.length<=this.blockSize);for(var t=e.length;t<this.blockSize;t++)e.push(0);for(t=0;t<e.length;t++)e[t]^=54;for(this.inner=new this.Hash().update(e),t=0;t<e.length;t++)e[t]^=106;this.outer=new this.Hash().update(e)};df.prototype.update=function(e,t){return this.inner.update(e,t),this};df.prototype.digest=function(e){return this.outer.update(this.inner.digest()),this.outer.digest(e)}});var fh=de(Vg=>{var dr=Vg;dr.utils=Gn();dr.common=cf();dr.sha=Ng();dr.ripemd=qg();dr.hmac=zg();dr.sha1=dr.sha.sha1;dr.sha256=dr.sha.sha256;dr.sha224=dr.sha.sha224;dr.sha384=dr.sha.sha384;dr.sha512=dr.sha.sha512;dr.ripemd160=dr.ripemd.ripemd160});var Wg=de((jU,Kg)=>{Kg.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}});var uh=de(Jg=>{"use strict";var Z4=Jg,ui=fh(),W4=H4(),CA=vn(),Zg=CA.assert;function Gg(r){r.type==="short"?this.curve=new W4.short(r):r.type==="edwards"?this.curve=new W4.edwards(r):this.curve=new W4.mont(r),this.g=this.curve.g,this.n=this.curve.n,this.hash=r.hash,Zg(this.g.validate(),"Invalid curve"),Zg(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}Z4.PresetCurve=Gg;function li(r,e){Object.defineProperty(Z4,r,{configurable:!0,enumerable:!0,get:function(){var t=new Gg(e);return Object.defineProperty(Z4,r,{configurable:!0,enumerable:!0,value:t}),t}})}li("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:ui.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]});li("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:ui.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]});li("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:ui.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]});li("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:ui.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]});li("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:ui.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]});li("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ui.sha256,gRed:!1,g:["9"]});li("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:ui.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var G4;try{G4=Wg()}catch{G4=void 0}li("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:ui.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",G4]})});var Qg=de((VU,Yg)=>{"use strict";var BA=fh(),bc=O4(),Xg=ii();function di(r){if(!(this instanceof di))return new di(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=bc.toArray(r.entropy,r.entropyEnc||"hex"),t=bc.toArray(r.nonce,r.nonceEnc||"hex"),n=bc.toArray(r.pers,r.persEnc||"hex");Xg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,t,n)}Yg.exports=di;di.prototype._init=function(e,t,n){var s=e.concat(t).concat(n);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var o=0;o<this.V.length;o++)this.K[o]=0,this.V[o]=1;this._update(s),this._reseed=1,this.reseedInterval=281474976710656};di.prototype._hmac=function(){return new BA.hmac(this.hash,this.K)};di.prototype._update=function(e){var t=this._hmac().update(this.V).update([0]);e&&(t=t.update(e)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),e&&(this.K=this._hmac().update(this.V).update([1]).update(e).digest(),this.V=this._hmac().update(this.V).digest())};di.prototype.reseed=function(e,t,n,s){typeof t!="string"&&(s=n,n=t,t=null),e=bc.toArray(e,t),n=bc.toArray(n,s),Xg(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(e.concat(n||[])),this._reseed=1};di.prototype.generate=function(e,t,n,s){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(s=n,n=t,t=null),n&&(n=bc.toArray(n,s||"hex"),this._update(n));for(var o=[];o.length<e;)this.V=this._hmac().update(this.V).digest(),o=o.concat(this.V);var i=o.slice(0,e);return this._update(n),this._reseed++,bc.encode(i,t)}});var tb=de((KU,eb)=>{"use strict";var IA=ws(),OA=vn(),J4=OA.assert;function Sr(r,e){this.ec=r,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}eb.exports=Sr;Sr.fromPublic=function(e,t,n){return t instanceof Sr?t:new Sr(e,{pub:t,pubEnc:n})};Sr.fromPrivate=function(e,t,n){return t instanceof Sr?t:new Sr(e,{priv:t,privEnc:n})};Sr.prototype.validate=function(){var e=this.getPublic();return e.isInfinity()?{result:!1,reason:"Invalid public key"}:e.validate()?e.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};Sr.prototype.getPublic=function(e,t){return typeof e=="string"&&(t=e,e=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,e):this.pub};Sr.prototype.getPrivate=function(e){return e==="hex"?this.priv.toString(16,2):this.priv};Sr.prototype._importPrivate=function(e,t){this.priv=new IA(e,t||16),this.priv=this.priv.umod(this.ec.curve.n)};Sr.prototype._importPublic=function(e,t){if(e.x||e.y){this.ec.curve.type==="mont"?J4(e.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&J4(e.x&&e.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(e.x,e.y);return}this.pub=this.ec.curve.decodePoint(e,t)};Sr.prototype.derive=function(e){return e.validate()||J4(e.validate(),"public point not validated"),e.mul(this.priv).getX()};Sr.prototype.sign=function(e,t,n){return this.ec.sign(e,this,t,n)};Sr.prototype.verify=function(e,t,n){return this.ec.verify(e,t,this,void 0,n)};Sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}});var sb=de((WU,nb)=>{"use strict";var lh=ws(),Q4=vn(),DA=Q4.assert;function dh(r,e){if(r instanceof dh)return r;this._importDER(r,e)||(DA(r.r&&r.s,"Signature without r or s"),this.r=new lh(r.r,16),this.s=new lh(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}nb.exports=dh;function PA(){this.place=0}function X4(r,e){var t=r[e.place++];if(!(t&128))return t;var n=t&15;if(n===0||n>4||r[e.place]===0)return!1;for(var s=0,o=0,i=e.place;o<n;o++,i++)s<<=8,s|=r[i],s>>>=0;return s<=127?!1:(e.place=i,s)}function rb(r){for(var e=0,t=r.length-1;!r[e]&&!(r[e+1]&128)&&e<t;)e++;return e===0?r:r.slice(e)}dh.prototype._importDER=function(e,t){e=Q4.toArray(e,t);var n=new PA;if(e[n.place++]!==48)return!1;var s=X4(e,n);if(s===!1||s+n.place!==e.length||e[n.place++]!==2)return!1;var o=X4(e,n);if(o===!1||(e[n.place]&128)!==0)return!1;var i=e.slice(n.place,o+n.place);if(n.place+=o,e[n.place++]!==2)return!1;var c=X4(e,n);if(c===!1||e.length!==c+n.place||(e[n.place]&128)!==0)return!1;var a=e.slice(n.place,c+n.place);if(i[0]===0)if(i[1]&128)i=i.slice(1);else return!1;if(a[0]===0)if(a[1]&128)a=a.slice(1);else return!1;return this.r=new lh(i),this.s=new lh(a),this.recoveryParam=null,!0};function Y4(r,e){if(e<128){r.push(e);return}var t=1+(Math.log(e)/Math.LN2>>>3);for(r.push(t|128);--t;)r.push(e>>>(t<<3)&255);r.push(e)}dh.prototype.toDER=function(e){var t=this.r.toArray(),n=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),n[0]&128&&(n=[0].concat(n)),t=rb(t),n=rb(n);!n[0]&&!(n[1]&128);)n=n.slice(1);var s=[2];Y4(s,t.length),s=s.concat(t),s.push(2),Y4(s,n.length);var o=s.concat(n),i=[48];return Y4(i,o.length),i=i.concat(o),Q4.encode(i,e)}});var cb=de((ZU,ib)=>{"use strict";var Yn=ws(),ob=Qg(),MA=vn(),e6=uh(),RA=R4(),xc=MA.assert,t6=tb(),ph=sb();function Hn(r){if(!(this instanceof Hn))return new Hn(r);typeof r=="string"&&(xc(Object.prototype.hasOwnProperty.call(e6,r),"Unknown curve "+r),r=e6[r]),r instanceof e6.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}ib.exports=Hn;Hn.prototype.keyPair=function(e){return new t6(this,e)};Hn.prototype.keyFromPrivate=function(e,t){return t6.fromPrivate(this,e,t)};Hn.prototype.keyFromPublic=function(e,t){return t6.fromPublic(this,e,t)};Hn.prototype.genKeyPair=function(e){e||(e={});for(var t=new ob({hash:this.hash,pers:e.pers,persEnc:e.persEnc||"utf8",entropy:e.entropy||RA(this.hash.hmacStrength),entropyEnc:e.entropy&&e.entropyEnc||"utf8",nonce:this.n.toArray()}),n=this.n.byteLength(),s=this.n.sub(new Yn(2));;){var o=new Yn(t.generate(n));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Hn.prototype._truncateToN=function(e,t,n){var s;if(Yn.isBN(e)||typeof e=="number")e=new Yn(e,16),s=e.byteLength();else if(typeof e=="object")s=e.length,e=new Yn(e,16);else{var o=e.toString();s=o.length+1>>>1,e=new Yn(o,16)}typeof n!="number"&&(n=s*8);var i=n-this.n.bitLength();return i>0&&(e=e.ushrn(i)),!t&&e.cmp(this.n)>=0?e.sub(this.n):e};Hn.prototype.sign=function(e,t,n,s){if(typeof n=="object"&&(s=n,n=null),s||(s={}),typeof e!="string"&&typeof e!="number"&&!Yn.isBN(e)){xc(typeof e=="object"&&e&&typeof e.length=="number","Expected message to be an array-like, a hex string, or a BN instance"),xc(e.length>>>0===e.length);for(var o=0;o<e.length;o++)xc((e[o]&255)===e[o])}t=this.keyFromPrivate(t,n),e=this._truncateToN(e,!1,s.msgBitLength),xc(!e.isNeg(),"Can not sign a negative message");var i=this.n.byteLength(),c=t.getPrivate().toArray("be",i),a=e.toArray("be",i);xc(new Yn(a).eq(e),"Can not sign message");for(var u=new ob({hash:this.hash,entropy:c,nonce:a,pers:s.pers,persEnc:s.persEnc||"utf8"}),d=this.n.sub(new Yn(1)),y=0;;y++){var v=s.k?s.k(y):new Yn(u.generate(this.n.byteLength()));if(v=this._truncateToN(v,!0),!(v.cmpn(1)<=0||v.cmp(d)>=0)){var _=this.g.mul(v);if(!_.isInfinity()){var T=_.getX(),A=T.umod(this.n);if(A.cmpn(0)!==0){var B=v.invm(this.n).mul(A.mul(t.getPrivate()).iadd(e));if(B=B.umod(this.n),B.cmpn(0)!==0){var I=(_.getY().isOdd()?1:0)|(T.cmp(A)!==0?2:0);return s.canonical&&B.cmp(this.nh)>0&&(B=this.n.sub(B),I^=1),new ph({r:A,s:B,recoveryParam:I})}}}}}};Hn.prototype.verify=function(e,t,n,s,o){o||(o={}),e=this._truncateToN(e,!1,o.msgBitLength),n=this.keyFromPublic(n,s),t=new ph(t,"hex");var i=t.r,c=t.s;if(i.cmpn(1)<0||i.cmp(this.n)>=0||c.cmpn(1)<0||c.cmp(this.n)>=0)return!1;var a=c.invm(this.n),u=a.mul(e).umod(this.n),d=a.mul(i).umod(this.n),y;return this.curve._maxwellTrick?(y=this.g.jmulAdd(u,n.getPublic(),d),y.isInfinity()?!1:y.eqXToP(i)):(y=this.g.mulAdd(u,n.getPublic(),d),y.isInfinity()?!1:y.getX().umod(this.n).cmp(i)===0)};Hn.prototype.recoverPubKey=function(r,e,t,n){xc((3&t)===t,"The recovery param is more than two bits"),e=new ph(e,n);var s=this.n,o=new Yn(r),i=e.r,c=e.s,a=t&1,u=t>>1;if(i.cmp(this.curve.p.umod(this.curve.n))>=0&&u)throw new Error("Unable to find sencond key candinate");u?i=this.curve.pointFromX(i.add(this.curve.n),a):i=this.curve.pointFromX(i,a);var d=e.r.invm(s),y=s.sub(o).mul(d).umod(s),v=c.mul(d).umod(s);return this.g.mulAdd(y,i,v)};Hn.prototype.getKeyRecoveryParam=function(r,e,t,n){if(e=new ph(e,n),e.recoveryParam!==null)return e.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,e,s)}catch{continue}if(o.eq(t))return s}throw new Error("Unable to find valid recovery factor")}});var lb=de((GU,ub)=>{"use strict";var p0=vn(),fb=p0.assert,ab=p0.parseBytes,pf=p0.cachedProperty;function or(r,e){this.eddsa=r,this._secret=ab(e.secret),r.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=ab(e.pub)}or.fromPublic=function(e,t){return t instanceof or?t:new or(e,{pub:t})};or.fromSecret=function(e,t){return t instanceof or?t:new or(e,{secret:t})};or.prototype.secret=function(){return this._secret};pf(or,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});pf(or,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});pf(or,"privBytes",function(){var e=this.eddsa,t=this.hash(),n=e.encodingLength-1,s=t.slice(0,e.encodingLength);return s[0]&=248,s[n]&=127,s[n]|=64,s});pf(or,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});pf(or,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});pf(or,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});or.prototype.sign=function(e){return fb(this._secret,"KeyPair can only verify"),this.eddsa.sign(e,this)};or.prototype.verify=function(e,t){return this.eddsa.verify(e,t,this)};or.prototype.getSecret=function(e){return fb(this._secret,"KeyPair is public only"),p0.encode(this.secret(),e)};or.prototype.getPublic=function(e){return p0.encode(this.pubBytes(),e)};ub.exports=or});var hb=de((JU,pb)=>{"use strict";var NA=ws(),hh=vn(),db=hh.assert,mh=hh.cachedProperty,LA=hh.parseBytes;function wc(r,e){this.eddsa=r,typeof e!="object"&&(e=LA(e)),Array.isArray(e)&&(db(e.length===r.encodingLength*2,"Signature has invalid size"),e={R:e.slice(0,r.encodingLength),S:e.slice(r.encodingLength)}),db(e.R&&e.S,"Signature without R or S"),r.isPoint(e.R)&&(this._R=e.R),e.S instanceof NA&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}mh(wc,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});mh(wc,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});mh(wc,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});mh(wc,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});wc.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};wc.prototype.toHex=function(){return hh.encode(this.toBytes(),"hex").toUpperCase()};pb.exports=wc});var xb=de((XU,bb)=>{"use strict";var HA=fh(),UA=uh(),hf=vn(),FA=hf.assert,yb=hf.parseBytes,gb=lb(),mb=hb();function rn(r){if(FA(r==="ed25519","only tested with ed25519 so far"),!(this instanceof rn))return new rn(r);r=UA[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=HA.sha512}bb.exports=rn;rn.prototype.sign=function(e,t){e=yb(e);var n=this.keyFromSecret(t),s=this.hashInt(n.messagePrefix(),e),o=this.g.mul(s),i=this.encodePoint(o),c=this.hashInt(i,n.pubBytes(),e).mul(n.priv()),a=s.add(c).umod(this.curve.n);return this.makeSignature({R:o,S:a,Rencoded:i})};rn.prototype.verify=function(e,t,n){if(e=yb(e),t=this.makeSignature(t),t.S().gte(t.eddsa.curve.n)||t.S().isNeg())return!1;var s=this.keyFromPublic(n),o=this.hashInt(t.Rencoded(),s.pubBytes(),e),i=this.g.mul(t.S()),c=t.R().add(s.pub().mul(o));return c.eq(i)};rn.prototype.hashInt=function(){for(var e=this.hash(),t=0;t<arguments.length;t++)e.update(arguments[t]);return hf.intFromLE(e.digest()).umod(this.curve.n)};rn.prototype.keyFromPublic=function(e){return gb.fromPublic(this,e)};rn.prototype.keyFromSecret=function(e){return gb.fromSecret(this,e)};rn.prototype.makeSignature=function(e){return e instanceof mb?e:new mb(this,e)};rn.prototype.encodePoint=function(e){var t=e.getY().toArray("le",this.encodingLength);return t[this.encodingLength-1]|=e.getX().isOdd()?128:0,t};rn.prototype.decodePoint=function(e){e=hf.parseBytes(e);var t=e.length-1,n=e.slice(0,t).concat(e[t]&-129),s=(e[t]&128)!==0,o=hf.intFromLE(n);return this.curve.pointFromY(o,s)};rn.prototype.encodeInt=function(e){return e.toArray("le",this.encodingLength)};rn.prototype.decodeInt=function(e){return hf.intFromLE(e)};rn.prototype.isPoint=function(e){return e instanceof this.pointClass}});var vb=de(wb=>{"use strict";var vc=wb;vc.version=W7().version;vc.utils=vn();vc.rand=R4();vc.curve=H4();vc.curves=uh();vc.ec=cb();vc.eddsa=xb()});var _6=de((xi,n9)=>{var kh=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global,Ch=(function(){function r(){this.fetch=!1,this.DOMException=kh.DOMException}return r.prototype=kh,new r})();(function(r){var e=(function(t){var n=typeof r<"u"&&r||typeof self<"u"&&self||typeof n<"u"&&n,s={searchParams:"URLSearchParams"in n,iterable:"Symbol"in n&&"iterator"in Symbol,blob:"FileReader"in n&&"Blob"in n&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in n,arrayBuffer:"ArrayBuffer"in n};function o(f){return f&&DataView.prototype.isPrototypeOf(f)}if(s.arrayBuffer)var i=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],c=ArrayBuffer.isView||function(f){return f&&i.indexOf(Object.prototype.toString.call(f))>-1};function a(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(f)||f==="")throw new TypeError('Invalid character in header field name: "'+f+'"');return f.toLowerCase()}function u(f){return typeof f!="string"&&(f=String(f)),f}function d(f){var l={next:function(){var h=f.shift();return{done:h===void 0,value:h}}};return s.iterable&&(l[Symbol.iterator]=function(){return l}),l}function y(f){this.map={},f instanceof y?f.forEach(function(l,h){this.append(h,l)},this):Array.isArray(f)?f.forEach(function(l){this.append(l[0],l[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(l){this.append(l,f[l])},this)}y.prototype.append=function(f,l){f=a(f),l=u(l);var h=this.map[f];this.map[f]=h?h+", "+l:l},y.prototype.delete=function(f){delete this.map[a(f)]},y.prototype.get=function(f){return f=a(f),this.has(f)?this.map[f]:null},y.prototype.has=function(f){return this.map.hasOwnProperty(a(f))},y.prototype.set=function(f,l){this.map[a(f)]=u(l)},y.prototype.forEach=function(f,l){for(var h in this.map)this.map.hasOwnProperty(h)&&f.call(l,this.map[h],h,this)},y.prototype.keys=function(){var f=[];return this.forEach(function(l,h){f.push(h)}),d(f)},y.prototype.values=function(){var f=[];return this.forEach(function(l){f.push(l)}),d(f)},y.prototype.entries=function(){var f=[];return this.forEach(function(l,h){f.push([h,l])}),d(f)},s.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function v(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function _(f){return new Promise(function(l,h){f.onload=function(){l(f.result)},f.onerror=function(){h(f.error)}})}function T(f){var l=new FileReader,h=_(l);return l.readAsArrayBuffer(f),h}function A(f){var l=new FileReader,h=_(l);return l.readAsText(f),h}function B(f){for(var l=new Uint8Array(f),h=new Array(l.length),g=0;g<l.length;g++)h[g]=String.fromCharCode(l[g]);return h.join("")}function I(f){if(f.slice)return f.slice(0);var l=new Uint8Array(f.byteLength);return l.set(new Uint8Array(f)),l.buffer}function P(){return this.bodyUsed=!1,this._initBody=function(f){this.bodyUsed=this.bodyUsed,this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:s.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:s.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:s.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():s.arrayBuffer&&s.blob&&o(f)?(this._bodyArrayBuffer=I(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):s.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||c(f))?this._bodyArrayBuffer=I(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):s.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},s.blob&&(this.blob=function(){var f=v(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var f=v(this);return f||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(T)}),this.text=function(){var f=v(this);if(f)return f;if(this._bodyBlob)return A(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(B(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},s.formData&&(this.formData=function(){return this.text().then(Z)}),this.json=function(){return this.text().then(JSON.parse)},this}var M=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function L(f){var l=f.toUpperCase();return M.indexOf(l)>-1?l:f}function U(f,l){if(!(this instanceof U))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');l=l||{};var h=l.body;if(f instanceof U){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,l.headers||(this.headers=new y(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!h&&f._bodyInit!=null&&(h=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=l.credentials||this.credentials||"same-origin",(l.headers||!this.headers)&&(this.headers=new y(l.headers)),this.method=L(l.method||this.method||"GET"),this.mode=l.mode||this.mode||null,this.signal=l.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&h)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(h),(this.method==="GET"||this.method==="HEAD")&&(l.cache==="no-store"||l.cache==="no-cache")){var g=/([?&])_=[^&]*/;if(g.test(this.url))this.url=this.url.replace(g,"$1_="+new Date().getTime());else{var b=/\?/;this.url+=(b.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}U.prototype.clone=function(){return new U(this,{body:this._bodyInit})};function Z(f){var l=new FormData;return f.trim().split("&").forEach(function(h){if(h){var g=h.split("="),b=g.shift().replace(/\+/g," "),w=g.join("=").replace(/\+/g," ");l.append(decodeURIComponent(b),decodeURIComponent(w))}}),l}function C(f){var l=new y,h=f.replace(/\r?\n[\t ]+/g," ");return h.split("\r").map(function(g){return g.indexOf(`
`)===0?g.substr(1,g.length):g}).forEach(function(g){var b=g.split(":"),w=b.shift().trim();if(w){var k=b.join(":").trim();l.append(w,k)}}),l}P.call(U.prototype);function J(f,l){if(!(this instanceof J))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');l||(l={}),this.type="default",this.status=l.status===void 0?200:l.status,this.ok=this.status>=200&&this.status<300,this.statusText=l.statusText===void 0?"":""+l.statusText,this.headers=new y(l.headers),this.url=l.url||"",this._initBody(f)}P.call(J.prototype),J.prototype.clone=function(){return new J(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new y(this.headers),url:this.url})},J.error=function(){var f=new J(null,{status:0,statusText:""});return f.type="error",f};var x=[301,302,303,307,308];J.redirect=function(f,l){if(x.indexOf(l)===-1)throw new RangeError("Invalid status code");return new J(null,{status:l,headers:{location:f}})},t.DOMException=n.DOMException;try{new t.DOMException}catch{t.DOMException=function(l,h){this.message=l,this.name=h;var g=Error(l);this.stack=g.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function m(f,l){return new Promise(function(h,g){var b=new U(f,l);if(b.signal&&b.signal.aborted)return g(new t.DOMException("Aborted","AbortError"));var w=new XMLHttpRequest;function k(){w.abort()}w.onload=function(){var p={status:w.status,statusText:w.statusText,headers:C(w.getAllResponseHeaders()||"")};p.url="responseURL"in w?w.responseURL:p.headers.get("X-Request-URL");var E="response"in w?w.response:w.responseText;setTimeout(function(){h(new J(E,p))},0)},w.onerror=function(){setTimeout(function(){g(new TypeError("Network request failed"))},0)},w.ontimeout=function(){setTimeout(function(){g(new TypeError("Network request failed"))},0)},w.onabort=function(){setTimeout(function(){g(new t.DOMException("Aborted","AbortError"))},0)};function S(p){try{return p===""&&n.location.href?n.location.href:p}catch{return p}}w.open(b.method,S(b.url),!0),b.credentials==="include"?w.withCredentials=!0:b.credentials==="omit"&&(w.withCredentials=!1),"responseType"in w&&(s.blob?w.responseType="blob":s.arrayBuffer&&b.headers.get("Content-Type")&&b.headers.get("Content-Type").indexOf("application/octet-stream")!==-1&&(w.responseType="arraybuffer")),l&&typeof l.headers=="object"&&!(l.headers instanceof y)?Object.getOwnPropertyNames(l.headers).forEach(function(p){w.setRequestHeader(p,u(l.headers[p]))}):b.headers.forEach(function(p,E){w.setRequestHeader(E,p)}),b.signal&&(b.signal.addEventListener("abort",k),w.onreadystatechange=function(){w.readyState===4&&b.signal.removeEventListener("abort",k)}),w.send(typeof b._bodyInit>"u"?null:b._bodyInit)})}return m.polyfill=!0,n.fetch||(n.fetch=m,n.Headers=y,n.Request=U,n.Response=J),t.Headers=y,t.Request=U,t.Response=J,t.fetch=m,t})({})})(Ch);Ch.fetch.ponyfill=!0;delete Ch.fetch.polyfill;var Tf=kh.fetch?kh:Ch;xi=Tf.fetch;xi.default=Tf.fetch;xi.fetch=Tf.fetch;xi.Headers=Tf.Headers;xi.Request=Tf.Request;xi.Response=Tf.Response;n9.exports=xi});var _1={};be(_1,{Address:()=>Lt,Bytes:()=>J2,Cell:()=>Vt,CellAny:()=>ms,CellDep:()=>Rr,CellDepInfo:()=>Ko,CellDepVec:()=>kp,CellInput:()=>Nr,CellInputVec:()=>Ap,CellOutput:()=>en,CellOutputVec:()=>Ep,Client:()=>rc,ClientBlock:()=>Wi,ClientBlockHeader:()=>Qr,ClientBlockUncle:()=>La,ClientCache:()=>ec,ClientCacheMemory:()=>tc,ClientIndexerSearchKey:()=>Kn,ClientIndexerSearchKeyFilter:()=>Vi,ClientIndexerSearchKeyTransaction:()=>Ki,ClientJsonRpc:()=>so,ClientPublicMainnet:()=>Ru,ClientPublicTestnet:()=>Nu,ClientTransactionResponse:()=>to,DepTypeCodec:()=>Sp,Eip6963:()=>el,ErrorClientBase:()=>gn,ErrorClientDuplicatedTransaction:()=>Ji,ErrorClientMaxFeeRateExceeded:()=>Qi,ErrorClientRBFRejected:()=>Xi,ErrorClientResolveUnknown:()=>Zi,ErrorClientVerification:()=>Gi,ErrorClientWaitTransactionTimeout:()=>Yi,ErrorTransactionInsufficientCapacity:()=>hs,ErrorTransactionInsufficientCoin:()=>fc,HashTypeCodec:()=>xp,HasherCkb:()=>zo,HasherKeecak256:()=>oc,JoyId:()=>sl,KnownScript:()=>te,Nip07:()=>il,Okx:()=>al,One:()=>h3,OutPoint:()=>je,RawTransaction:()=>zu,Rei:()=>ul,RequestorJsonRpc:()=>nc,Script:()=>me,ScriptInfo:()=>eo,ScriptOpt:()=>Uu,ScriptVec:()=>R3,Signature:()=>j0,Signer:()=>Zt,SignerAlwaysError:()=>J0,SignerBtc:()=>Dc,SignerBtcPublicKeyReadonly:()=>V0,SignerCkbPrivateKey:()=>K0,SignerCkbPublicKey:()=>Pc,SignerCkbScriptReadonly:()=>W0,SignerDoge:()=>So,SignerDogeAddressReadonly:()=>Z0,SignerDogePrivateKey:()=>G0,SignerDummy:()=>_o,SignerEvm:()=>Mc,SignerEvmAddressReadonly:()=>Y0,SignerInfo:()=>z0,SignerNostr:()=>Ds,SignerNostrPrivateKey:()=>Q0,SignerNostrPublicKeyReadonly:()=>Rc,SignerOpenLink:()=>X0,SignerSignType:()=>Ne,SignerType:()=>pr,SignersController:()=>G5,Since:()=>Go,Transaction:()=>Se,UniSat:()=>Cl,UtxoGlobal:()=>Ol,WitnessArgs:()=>rr,Xverse:()=>Ll,Zero:()=>Je,apply:()=>fe,btcEcdsaPublicKeyHash:()=>ni,btcP2pkhAddressFromPublicKey:()=>t0,btcPublicKeyFromP2pkhAddress:()=>r0,btcVarLengthBytesFrom:()=>Zp,buildNostrEventFromMessage:()=>Df,bytesConcat:()=>Ae,bytesConcatTo:()=>pn,bytesEq:()=>_u,bytesFrom:()=>Y,bytesTo:()=>Zs,calcDaoClaimEpoch:()=>L3,calcDaoProfit:()=>Cp,depTypeFrom:()=>sc,depTypeFromBytes:()=>Tp,depTypeToBytes:()=>_p,epochFrom:()=>Ha,epochFromHex:()=>Mu,epochToHex:()=>N3,fixedPointFrom:()=>no,fixedPointToString:()=>Iu,hashCkb:()=>br,hashTypeFrom:()=>ro,hashTypeFromBytes:()=>$a,hashTypeId:()=>H3,hashTypeToBytes:()=>Fa,hexFrom:()=>j,isWebview:()=>f3,keystoreDecrypt:()=>r4,keystoreEncrypt:()=>t4,messageHashBtcEcdsa:()=>tf,messageHashCkbSecp256k1:()=>rf,messageHashDogeEcdsa:()=>Af,mol:()=>K,nostrEventHash:()=>Pf,numBeFromBytes:()=>Na,numBeToBytes:()=>ds,numFrom:()=>F,numFromBytes:()=>Ys,numLeFromBytes:()=>Qs,numLeToBytes:()=>Vn,numMax:()=>Au,numMin:()=>Eu,numToBytes:()=>He,numToHex:()=>Rt,reduceAsync:()=>yn,sleep:()=>ku,spore:()=>_l,ssri:()=>Tn,stringify:()=>u3,udt:()=>Al,udtBalanceFrom:()=>lc,verifyMessageBtcEcdsa:()=>n0,verifyMessageCkbSecp256k1:()=>s0,verifyMessageDogeEcdsa:()=>P0,verifyMessageEvmPersonal:()=>$0,verifyMessageJoyId:()=>D0,verifyMessageNostrEvent:()=>q0});var el={};be(el,{Signer:()=>Mf,SignerFactory:()=>r5});var O={};be(O,{Address:()=>Lt,Bytes:()=>J2,Cell:()=>Vt,CellAny:()=>ms,CellDep:()=>Rr,CellDepInfo:()=>Ko,CellDepVec:()=>kp,CellInput:()=>Nr,CellInputVec:()=>Ap,CellOutput:()=>en,CellOutputVec:()=>Ep,Client:()=>rc,ClientBlock:()=>Wi,ClientBlockHeader:()=>Qr,ClientBlockUncle:()=>La,ClientCache:()=>ec,ClientCacheMemory:()=>tc,ClientIndexerSearchKey:()=>Kn,ClientIndexerSearchKeyFilter:()=>Vi,ClientIndexerSearchKeyTransaction:()=>Ki,ClientJsonRpc:()=>so,ClientPublicMainnet:()=>Ru,ClientPublicTestnet:()=>Nu,ClientTransactionResponse:()=>to,DepTypeCodec:()=>Sp,ErrorClientBase:()=>gn,ErrorClientDuplicatedTransaction:()=>Ji,ErrorClientMaxFeeRateExceeded:()=>Qi,ErrorClientRBFRejected:()=>Xi,ErrorClientResolveUnknown:()=>Zi,ErrorClientVerification:()=>Gi,ErrorClientWaitTransactionTimeout:()=>Yi,ErrorTransactionInsufficientCapacity:()=>hs,ErrorTransactionInsufficientCoin:()=>fc,HashTypeCodec:()=>xp,HasherCkb:()=>zo,HasherKeecak256:()=>oc,KnownScript:()=>te,One:()=>h3,OutPoint:()=>je,RawTransaction:()=>zu,RequestorJsonRpc:()=>nc,Script:()=>me,ScriptInfo:()=>eo,ScriptOpt:()=>Uu,ScriptVec:()=>R3,Signature:()=>j0,Signer:()=>Zt,SignerAlwaysError:()=>J0,SignerBtc:()=>Dc,SignerBtcPublicKeyReadonly:()=>V0,SignerCkbPrivateKey:()=>K0,SignerCkbPublicKey:()=>Pc,SignerCkbScriptReadonly:()=>W0,SignerDoge:()=>So,SignerDogeAddressReadonly:()=>Z0,SignerDogePrivateKey:()=>G0,SignerDummy:()=>_o,SignerEvm:()=>Mc,SignerEvmAddressReadonly:()=>Y0,SignerInfo:()=>z0,SignerNostr:()=>Ds,SignerNostrPrivateKey:()=>Q0,SignerNostrPublicKeyReadonly:()=>Rc,SignerOpenLink:()=>X0,SignerSignType:()=>Ne,SignerType:()=>pr,Since:()=>Go,Transaction:()=>Se,WitnessArgs:()=>rr,Zero:()=>Je,apply:()=>fe,btcEcdsaPublicKeyHash:()=>ni,btcP2pkhAddressFromPublicKey:()=>t0,btcPublicKeyFromP2pkhAddress:()=>r0,btcVarLengthBytesFrom:()=>Zp,buildNostrEventFromMessage:()=>Df,bytesConcat:()=>Ae,bytesConcatTo:()=>pn,bytesEq:()=>_u,bytesFrom:()=>Y,bytesTo:()=>Zs,calcDaoClaimEpoch:()=>L3,calcDaoProfit:()=>Cp,depTypeFrom:()=>sc,depTypeFromBytes:()=>Tp,depTypeToBytes:()=>_p,epochFrom:()=>Ha,epochFromHex:()=>Mu,epochToHex:()=>N3,fixedPointFrom:()=>no,fixedPointToString:()=>Iu,hashCkb:()=>br,hashTypeFrom:()=>ro,hashTypeFromBytes:()=>$a,hashTypeId:()=>H3,hashTypeToBytes:()=>Fa,hexFrom:()=>j,isWebview:()=>f3,keystoreDecrypt:()=>r4,keystoreEncrypt:()=>t4,messageHashBtcEcdsa:()=>tf,messageHashCkbSecp256k1:()=>rf,messageHashDogeEcdsa:()=>Af,mol:()=>K,nostrEventHash:()=>Pf,numBeFromBytes:()=>Na,numBeToBytes:()=>ds,numFrom:()=>F,numFromBytes:()=>Ys,numLeFromBytes:()=>Qs,numLeToBytes:()=>Vn,numMax:()=>Au,numMin:()=>Eu,numToBytes:()=>He,numToHex:()=>Rt,reduceAsync:()=>yn,sleep:()=>ku,stringify:()=>u3,udtBalanceFrom:()=>lc,verifyMessageBtcEcdsa:()=>n0,verifyMessageCkbSecp256k1:()=>s0,verifyMessageDogeEcdsa:()=>P0,verifyMessageEvmPersonal:()=>$0,verifyMessageJoyId:()=>D0,verifyMessageNostrEvent:()=>q0});var $3=Ge(Jr(),1);var fp=Ge(G2(),1),J2=Uint8Array;function pn(r,...e){return e.reduce((t,n)=>{let s=Y(n);for(let o of s)r.push(o);return t},r)}function Ae(...r){return new Uint8Array(pn([],...r))}function Zs(r,e){return fp.Buffer.from(Y(r)).toString(e)}function Y(r,e){if(r instanceof Uint8Array)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(typeof r=="string"){if(e!==void 0)return fp.Buffer.from(r,e);let n=r.startsWith("0x")?r.slice(2):r,s=n.length%2===0?n:`0${n}`,o=fp.Buffer.from(s,"hex");if(o.length*2!==s.length)throw new Error(`Invalid bytes ${r}`);return o}if(Array.from(r).some(n=>n<0||255<n))throw new Error(`Invalid bytes ${JSON.stringify(r)}`);return new Uint8Array(r)}function _u(r,e){if(r===e)return!0;let t=Y(r),n=Y(e);if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==n[s])return!1;return!0}var qi=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;function ji(r){return r instanceof Uint8Array||ArrayBuffer.isView(r)&&r.constructor.name==="Uint8Array"}function We(r){if(!Number.isSafeInteger(r)||r<0)throw new Error("positive integer expected, got "+r)}function ur(r,...e){if(!ji(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error("Uint8Array expected of length "+e+", got length="+r.length)}function Oa(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.createHasher");We(r.outputLen),We(r.blockLen)}function Dn(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Da(r,e){ur(r);let t=e.outputLen;if(r.length<t)throw new Error("digestInto() expects output buffer of length at least "+t)}function jn(r){return new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4))}function tt(...r){for(let e=0;e<r.length;e++)r[e].fill(0)}function Pa(r){return new DataView(r.buffer,r.byteOffset,r.byteLength)}function zn(r,e){return r<<32-e|r>>>e}function we(r,e){return r<<e|r>>>32-e>>>0}var i8=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;function c8(r){return r<<24&4278190080|r<<8&16711680|r>>>8&65280|r>>>24&255}var ls=i8?r=>r:r=>c8(r);function MS(r){for(let e=0;e<r.length;e++)r[e]=c8(r[e]);return r}var hn=i8?r=>r:MS,a8=typeof Uint8Array.from([]).toHex=="function"&&typeof Uint8Array.fromHex=="function",RS=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function Js(r){if(ur(r),a8)return r.toHex();let e="";for(let t=0;t<r.length;t++)e+=RS[r[t]];return e}var Gs={_0:48,_9:57,A:65,F:70,a:97,f:102};function o8(r){if(r>=Gs._0&&r<=Gs._9)return r-Gs._0;if(r>=Gs.A&&r<=Gs.F)return r-(Gs.A-10);if(r>=Gs.a&&r<=Gs.f)return r-(Gs.a-10)}function zi(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);if(a8)return Uint8Array.fromHex(r);let e=r.length,t=e/2;if(e%2)throw new Error("hex string expected, got unpadded hex of length "+e);let n=new Uint8Array(t);for(let s=0,o=0;s<t;s++,o+=2){let i=o8(r.charCodeAt(o)),c=o8(r.charCodeAt(o+1));if(i===void 0||c===void 0){let a=r[o]+r[o+1];throw new Error('hex string expected, got non-hex character "'+a+'" at index '+o)}n[s]=i*16+c}return n}var NS=async()=>{};async function up(r,e,t){let n=Date.now();for(let s=0;s<r;s++){t(s);let o=Date.now()-n;o>=0&&o<e||(await NS(),n+=o)}}function Tu(r){if(typeof r!="string")throw new Error("string expected");return new Uint8Array(new TextEncoder().encode(r))}function mn(r){return typeof r=="string"&&(r=Tu(r)),ur(r),r}function X2(r){return typeof r=="string"&&(r=Tu(r)),ur(r),r}function Yr(...r){let e=0;for(let n=0;n<r.length;n++){let s=r[n];ur(s),e+=s.length}let t=new Uint8Array(e);for(let n=0,s=0;n<r.length;n++){let o=r[n];t.set(o,s),s+=o.length}return t}function lp(r,e){if(e!==void 0&&{}.toString.call(e)!=="[object Object]")throw new Error("options should be object or undefined");return Object.assign(r,e)}var us=class{};function Ma(r){let e=n=>r().update(mn(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function f8(r){let e=(n,s)=>r(s).update(mn(n)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}function Mr(r=32){if(qi&&typeof qi.getRandomValues=="function")return qi.getRandomValues(new Uint8Array(r));if(qi&&typeof qi.randomBytes=="function")return Uint8Array.from(qi.randomBytes(r));throw new Error("crypto.getRandomValues must be defined")}var u8=Uint8Array.from([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9]);function LS(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let s=BigInt(32),o=BigInt(4294967295),i=Number(t>>s&o),c=Number(t&o),a=n?4:0,u=n?0:4;r.setUint32(e+a,i,n),r.setUint32(e+u,c,n)}function Y2(r,e,t){return r&e^~r&t}function Q2(r,e,t){return r&e^r&t^e&t}var Ra=class extends us{constructor(e,t,n,s){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.buffer=new Uint8Array(e),this.view=Pa(this.buffer)}update(e){Dn(this),e=mn(e),ur(e);let{view:t,buffer:n,blockLen:s}=this,o=e.length;for(let i=0;i<o;){let c=Math.min(s-this.pos,o-i);if(c===s){let a=Pa(e);for(;s<=o-i;i+=s)this.process(a,i);continue}n.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){Dn(this),Da(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:s,isLE:o}=this,{pos:i}=this;t[i++]=128,tt(this.buffer.subarray(i)),this.padOffset>s-i&&(this.process(n,0),i=0);for(let y=i;y<s;y++)t[y]=0;LS(n,s-8,BigInt(this.length*8),o),this.process(n,0);let c=Pa(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<u;y++)c.setUint32(4*y,d[y],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:s,finished:o,destroyed:i,pos:c}=this;return e.destroyed=i,e.finished=o,e.length=s,e.pos=c,s%t&&e.buffer.set(n),e}clone(){return this._cloneInto()}},Xs=Uint32Array.from([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]);var dp=BigInt(4294967295),l8=BigInt(32);function e3(r,e=!1){return e?{h:Number(r&dp),l:Number(r>>l8&dp)}:{h:Number(r>>l8&dp)|0,l:Number(r&dp)|0}}function d8(r,e=!1){let t=r.length,n=new Uint32Array(t),s=new Uint32Array(t);for(let o=0;o<t;o++){let{h:i,l:c}=e3(r[o],e);[n[o],s[o]]=[i,c]}return[n,s]}var t3=(r,e,t)=>r>>>t|e<<32-t,r3=(r,e,t)=>r<<32-t|e>>>t,p8=(r,e,t)=>r<<64-t|e>>>t-32,h8=(r,e,t)=>r>>>t-32|e<<64-t,m8=(r,e)=>e,y8=(r,e)=>r,g8=(r,e,t)=>r<<t|e>>>32-t,b8=(r,e,t)=>e<<t|r>>>32-t,x8=(r,e,t)=>e<<t-32|r>>>64-t,w8=(r,e,t)=>r<<t-32|e>>>64-t;function n3(r,e,t,n){let s=(e>>>0)+(n>>>0);return{h:r+t+(s/2**32|0)|0,l:s|0}}var s3=(r,e,t)=>(r>>>0)+(e>>>0)+(t>>>0),o3=(r,e,t,n)=>e+t+n+(r/2**32|0)|0;var zt=Uint32Array.from([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),ne=new Uint32Array(32);function qo(r,e,t,n,s,o){let i=s[o],c=s[o+1],a=ne[2*r],u=ne[2*r+1],d=ne[2*e],y=ne[2*e+1],v=ne[2*t],_=ne[2*t+1],T=ne[2*n],A=ne[2*n+1],B=s3(a,d,i);u=o3(B,u,y,c),a=B|0,{Dh:A,Dl:T}={Dh:A^u,Dl:T^a},{Dh:A,Dl:T}={Dh:m8(A,T),Dl:y8(A,T)},{h:_,l:v}=n3(_,v,A,T),{Bh:y,Bl:d}={Bh:y^_,Bl:d^v},{Bh:y,Bl:d}={Bh:t3(y,d,24),Bl:r3(y,d,24)},ne[2*r]=a,ne[2*r+1]=u,ne[2*e]=d,ne[2*e+1]=y,ne[2*t]=v,ne[2*t+1]=_,ne[2*n]=T,ne[2*n+1]=A}function jo(r,e,t,n,s,o){let i=s[o],c=s[o+1],a=ne[2*r],u=ne[2*r+1],d=ne[2*e],y=ne[2*e+1],v=ne[2*t],_=ne[2*t+1],T=ne[2*n],A=ne[2*n+1],B=s3(a,d,i);u=o3(B,u,y,c),a=B|0,{Dh:A,Dl:T}={Dh:A^u,Dl:T^a},{Dh:A,Dl:T}={Dh:t3(A,T,16),Dl:r3(A,T,16)},{h:_,l:v}=n3(_,v,A,T),{Bh:y,Bl:d}={Bh:y^_,Bl:d^v},{Bh:y,Bl:d}={Bh:p8(y,d,63),Bl:h8(y,d,63)},ne[2*r]=a,ne[2*r+1]=u,ne[2*e]=d,ne[2*e+1]=y,ne[2*t]=v,ne[2*t+1]=_,ne[2*n]=T,ne[2*n+1]=A}function US(r,e={},t,n,s){if(We(t),r<0||r>t)throw new Error("outputLen bigger than keyLen");let{key:o,salt:i,personalization:c}=e;if(o!==void 0&&(o.length<1||o.length>t))throw new Error("key length must be undefined or 1.."+t);if(i!==void 0&&i.length!==n)throw new Error("salt must be undefined or "+n);if(c!==void 0&&c.length!==s)throw new Error("personalization must be undefined or "+s)}var i3=class extends us{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,this.length=0,this.pos=0,We(e),We(t),this.blockLen=e,this.outputLen=t,this.buffer=new Uint8Array(e),this.buffer32=jn(this.buffer)}update(e){Dn(this),e=mn(e),ur(e);let{blockLen:t,buffer:n,buffer32:s}=this,o=e.length,i=e.byteOffset,c=e.buffer;for(let a=0;a<o;){this.pos===t&&(hn(s),this.compress(s,0,!1),hn(s),this.pos=0);let u=Math.min(t-this.pos,o-a),d=i+a;if(u===t&&!(d%4)&&a+u<o){let y=new Uint32Array(c,d,Math.floor((o-a)/4));hn(y);for(let v=0;a+t<o;v+=s.length,a+=t)this.length+=t,this.compress(y,v,!1);hn(y);continue}n.set(e.subarray(a,a+u),this.pos),this.pos+=u,this.length+=u,a+=u}return this}digestInto(e){Dn(this),Da(e,this);let{pos:t,buffer32:n}=this;this.finished=!0,tt(this.buffer.subarray(t)),hn(n),this.compress(n,0,!0),hn(n);let s=jn(e);this.get().forEach((o,i)=>s[i]=ls(o))}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){let{buffer:t,length:n,finished:s,destroyed:o,outputLen:i,pos:c}=this;return e||(e=new this.constructor({dkLen:i})),e.set(...this.get()),e.buffer.set(t),e.destroyed=o,e.finished=s,e.length=n,e.pos=c,e.outputLen=i,e}clone(){return this._cloneInto()}},pp=class extends i3{constructor(e={}){let t=e.dkLen===void 0?64:e.dkLen;super(128,t),this.v0l=zt[0]|0,this.v0h=zt[1]|0,this.v1l=zt[2]|0,this.v1h=zt[3]|0,this.v2l=zt[4]|0,this.v2h=zt[5]|0,this.v3l=zt[6]|0,this.v3h=zt[7]|0,this.v4l=zt[8]|0,this.v4h=zt[9]|0,this.v5l=zt[10]|0,this.v5h=zt[11]|0,this.v6l=zt[12]|0,this.v6h=zt[13]|0,this.v7l=zt[14]|0,this.v7h=zt[15]|0,US(t,e,64,16,16);let{key:n,personalization:s,salt:o}=e,i=0;if(n!==void 0&&(n=mn(n),i=n.length),this.v0l^=this.outputLen|i<<8|65536|1<<24,o!==void 0){o=mn(o);let c=jn(o);this.v4l^=ls(c[0]),this.v4h^=ls(c[1]),this.v5l^=ls(c[2]),this.v5h^=ls(c[3])}if(s!==void 0){s=mn(s);let c=jn(s);this.v6l^=ls(c[0]),this.v6h^=ls(c[1]),this.v7l^=ls(c[2]),this.v7h^=ls(c[3])}if(n!==void 0){let c=new Uint8Array(this.blockLen);c.set(n),this.update(c)}}get(){let{v0l:e,v0h:t,v1l:n,v1h:s,v2l:o,v2h:i,v3l:c,v3h:a,v4l:u,v4h:d,v5l:y,v5h:v,v6l:_,v6h:T,v7l:A,v7h:B}=this;return[e,t,n,s,o,i,c,a,u,d,y,v,_,T,A,B]}set(e,t,n,s,o,i,c,a,u,d,y,v,_,T,A,B){this.v0l=e|0,this.v0h=t|0,this.v1l=n|0,this.v1h=s|0,this.v2l=o|0,this.v2h=i|0,this.v3l=c|0,this.v3h=a|0,this.v4l=u|0,this.v4h=d|0,this.v5l=y|0,this.v5h=v|0,this.v6l=_|0,this.v6h=T|0,this.v7l=A|0,this.v7h=B|0}compress(e,t,n){this.get().forEach((a,u)=>ne[u]=a),ne.set(zt,16);let{h:s,l:o}=e3(BigInt(this.length));ne[24]=zt[8]^o,ne[25]=zt[9]^s,n&&(ne[28]=~ne[28],ne[29]=~ne[29]);let i=0,c=u8;for(let a=0;a<12;a++)qo(0,4,8,12,e,t+2*c[i++]),jo(0,4,8,12,e,t+2*c[i++]),qo(1,5,9,13,e,t+2*c[i++]),jo(1,5,9,13,e,t+2*c[i++]),qo(2,6,10,14,e,t+2*c[i++]),jo(2,6,10,14,e,t+2*c[i++]),qo(3,7,11,15,e,t+2*c[i++]),jo(3,7,11,15,e,t+2*c[i++]),qo(0,5,10,15,e,t+2*c[i++]),jo(0,5,10,15,e,t+2*c[i++]),qo(1,6,11,12,e,t+2*c[i++]),jo(1,6,11,12,e,t+2*c[i++]),qo(2,7,8,13,e,t+2*c[i++]),jo(2,7,8,13,e,t+2*c[i++]),qo(3,4,9,14,e,t+2*c[i++]),jo(3,4,9,14,e,t+2*c[i++]);this.v0l^=ne[0]^ne[16],this.v0h^=ne[1]^ne[17],this.v1l^=ne[2]^ne[18],this.v1h^=ne[3]^ne[19],this.v2l^=ne[4]^ne[20],this.v2h^=ne[5]^ne[21],this.v3l^=ne[6]^ne[22],this.v3h^=ne[7]^ne[23],this.v4l^=ne[8]^ne[24],this.v4h^=ne[9]^ne[25],this.v5l^=ne[10]^ne[26],this.v5h^=ne[11]^ne[27],this.v6l^=ne[12]^ne[28],this.v6h^=ne[13]^ne[29],this.v7l^=ne[14]^ne[30],this.v7h^=ne[15]^ne[31],tt(ne)}destroy(){this.destroyed=!0,tt(this.buffer32),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}},v8=f8(r=>new pp(r));var hp=v8;function j(r){return`0x${Zs(Y(r),"hex")}`}var c3="ckb-default-hash";var zo=class{constructor(e=32,t=c3){this.hasher=hp.create({personalization:t,dkLen:e})}update(e){return this.hasher.update(Y(e)),this}digest(){return j(this.hasher.digest())}};function br(...r){let e=new zo;return r.forEach(t=>e.update(t)),e.digest()}function Eu(r,...e){let t=F(r);return e.forEach(n=>{let s=F(n);s<t&&(t=s)}),t}function Au(r,...e){let t=F(r);return e.forEach(n=>{let s=F(n);s>t&&(t=s)}),t}function F(r){if(typeof r=="bigint")return r;if(r==="0x")return BigInt(0);if(typeof r=="string"||typeof r=="number")return BigInt(r);let e=j(r);return BigInt(e)}function Rt(r){return`0x${F(r).toString(16)}`}function He(r,e){return Vn(r,e)}function Vn(r,e){return ds(r,e).reverse()}function ds(r,e){let t=F(r);if(t<F(0)){if(e==null)throw Error("negative number can not be serialized without knowing bytes length");if(t=(F(1)<<F(8)*F(e))+t,t<0)throw Error("negative number underflow")}let n=Y(t.toString(16));if(e==null)return n;if(n.length>e)throw Error("number overflow");return Ae("00".repeat(e-n.length),n)}function Ys(r){return Qs(r)}function Qs(r){return Na(Y(r).map(e=>e).reverse())}function Na(r){return F(Y(r))}var mp=F(1e7),a3=F(1e3);function Vo([r,e]){return[F(r),F(e)]}function fe(r,e){if(e!=null)return r(e)}async function yn(r,e,t){if(t===void 0){if(r.length===0)throw new TypeError("Reduce of empty array with no initial value");t=r[0],r=r.slice(1)}return r.reduce((n,s,o,i)=>n.then(c=>Promise.resolve(e(c,s,o,i)).then(a=>a??c)),Promise.resolve(t))}function ku(r){return new Promise(e=>setTimeout(e,Number(F(r))))}function f3(r){return/webview|wv|ip((?!.*Safari)|(?=.*like Safari))/i.test(r)}function u3(r){return JSON.stringify(r,(e,t)=>typeof t=="bigint"?Rt(t):t)}var Ko=class r{constructor(e,t){this.cellDep=e,this.type=t}static from(e){return e instanceof r?e:new r(Rr.from(e.cellDep),fe(me.from,e.type))}},eo=class r{constructor(e,t,n){this.codeHash=e,this.hashType=t,this.cellDeps=n}static from(e){return e instanceof r?e:new r(j(e.codeHash),ro(e.hashType),e.cellDeps.map(t=>Ko.from(t)))}},to=class r{constructor(e,t,n,s,o,i,c){this.transaction=e,this.status=t,this.cycles=n,this.blockHash=s,this.blockNumber=o,this.txIndex=i,this.reason=c}static from(e){return e instanceof r?e:new r(Se.from(e.transaction),e.status,fe(F,e.cycles),fe(j,e.blockHash),fe(F,e.blockNumber),fe(F,e.txIndex),e.reason)}clone(){return new r(this.transaction.clone(),this.status,this.cycles,this.blockHash,this.blockNumber,this.txIndex,this.reason)}},Vi=class r{constructor(e,t,n,s,o,i,c){this.script=e,this.scriptLenRange=t,this.outputData=n,this.outputDataSearchMode=s,this.outputDataLenRange=o,this.outputCapacityRange=i,this.blockRange=c}static from(e){return e instanceof r?e:new r(fe(me.from,e.script),fe(Vo,e.scriptLenRange),fe(j,e.outputData),e.outputDataSearchMode??void 0,fe(Vo,e.outputDataLenRange),fe(Vo,e.outputCapacityRange),fe(Vo,e.blockRange))}},Kn=class r{constructor(e,t,n,s,o){this.script=e,this.scriptType=t,this.scriptSearchMode=n,this.filter=s,this.withData=o}static from(e){return e instanceof r?e:new r(me.from(e.script),e.scriptType,e.scriptSearchMode,fe(Vi.from,e.filter),e.withData??void 0)}},Ki=class r{constructor(e,t,n,s,o){this.script=e,this.scriptType=t,this.scriptSearchMode=n,this.filter=s,this.groupByTransaction=o}static from(e){return e instanceof r?e:new r(me.from(e.script),e.scriptType,e.scriptSearchMode,fe(Vi.from,e.filter),e.groupByTransaction??void 0)}},Qr=class r{constructor(e,t,n,s,o,i,c,a,u,d,y,v){this.compactTarget=e,this.dao=t,this.epoch=n,this.extraHash=s,this.hash=o,this.nonce=i,this.number=c,this.parentHash=a,this.proposalsHash=u,this.timestamp=d,this.transactionsRoot=y,this.version=v}static from(e){return e instanceof r?e:new r(F(e.compactTarget),{c:F(e.dao.c),ar:F(e.dao.ar),s:F(e.dao.s),u:F(e.dao.u)},Ha(e.epoch),j(e.extraHash),j(e.hash),F(e.nonce),F(e.number),j(e.parentHash),j(e.proposalsHash),F(e.timestamp),j(e.transactionsRoot),F(e.version))}},La=class r{constructor(e,t){this.header=e,this.proposals=t}static from(e){return e instanceof r?e:new r(Qr.from(e.header),e.proposals.map(j))}},Wi=class r{constructor(e,t,n,s){this.header=e,this.proposals=t,this.transactions=n,this.uncles=s}static from(e){return e instanceof r?e:new r(Qr.from(e.header),e.proposals.map(j),e.transactions.map(Se.from),e.uncles.map(La.from))}},gn=class extends Error{constructor(e){super(`Client request error ${e.message}`),this.code=e.code,this.data=e.data}},Zi=class extends gn{constructor(e,t){super(e),this.outPoint=je.from(t)}},Gi=class extends gn{constructor(e,t,n,s,o,i){super(e),this.source=t,this.errorCode=s,this.scriptHashType=o,this.sourceIndex=F(n),this.scriptCodeHash=j(i)}},Ji=class extends gn{constructor(e,t){super(e),this.txHash=j(t)}},Xi=class extends gn{constructor(e,t,n){super(e),this.currentFee=F(t),this.leastFee=F(n)}},Yi=class extends gn{constructor(e){let t=F(e).toString();super({message:`Wait transaction timeout ${t}ms`,data:JSON.stringify({timeout:t})})}},Qi=class extends gn{constructor(e,t){let n=F(e).toString(),s=F(t).toString();super({message:`Max fee rate exceeded limit ${n}, actual ${s}. Developer might forgot to complete transaction fee before sending. See https://api.ckbccc.com/classes/_ckb_ccc_core.index.ccc.Transaction.html#completeFeeBy.`,data:JSON.stringify({limit:n,actual:s})})}};var Bu=F(1e3*10*50);function d3(r,e,t){if(!e)return!0;let n=j(r),s=j(e);return!(t==="exact"&&n!==s||t==="prefix"&&!n.startsWith(s)||t==="partial"&&n.search(s)===-1)}function Cu(r,e,t){if(!e)return!0;if(!r)return!1;let n=me.from(r),s=me.from(e);return n.codeHash!==s.codeHash||n.hashType!==s.hashType?!1:d3(n.args,s?.args,t)}function yp(r,e){if(!e)return!0;let t=F(r),[n,s]=Vo(e);return n<=t&&t<s}function l3(r,e){if(!e)return!0;let t=r?Y(me.from(r).args).length+33:0;return yp(t,e)}function p3(r,e){let t=Kn.from(r),n=Vt.from(e);return!(t.scriptType==="lock"&&(!Cu(n.cellOutput.lock,t.script,t.scriptSearchMode)||!Cu(n.cellOutput.type,t.filter?.script,"prefix")||!l3(n.cellOutput.type,t.filter?.scriptLenRange))||t.scriptType==="type"&&(!Cu(n.cellOutput.type,t.script,t.scriptSearchMode)||!Cu(n.cellOutput.lock,t.filter?.script,"prefix")||!l3(n.cellOutput.lock,t.filter?.scriptLenRange))||!d3(n.outputData,t.filter?.outputData,t.filter?.outputDataSearchMode??"prefix")||!yp(Y(n.outputData).length,t.filter?.outputDataLenRange)||!yp(n.cellOutput.capacity,t.filter?.outputCapacityRange))}var Wo=class extends Map{constructor(e){if(super(),this.capacity=e,this.lru=new Set,!Number.isInteger(e)||e<1)throw new Error("Capacity must be a positive integer")}get(e){if(super.has(e))return this.lru.delete(e),this.lru.add(e),super.get(e)}set(e,t){if(super.set(e,t),this.lru.delete(e),this.lru.add(e),this.lru.size>this.capacity){let n=this.lru.keys().next().value;this.delete(n)}return this}delete(e){return super.delete(e)?(this.lru.delete(e),!0):!1}clear(){super.clear(),this.lru.clear()}};var ec=class{async markUsable(...e){return await this.recordCells(...e),this.markUsableNoCache(...e)}async markTransactions(...e){await Promise.all([this.recordTransactionResponses(e.flat().map(t=>({transaction:t,status:"sent"}))),...e.flat().map(t=>{let n=Se.from(t),s=n.hash();return Promise.all([...n.inputs.map(o=>this.markUnusable(o.previousOutput)),...n.outputs.map((o,i)=>this.markUsable({cellOutput:o,outputData:n.outputsData[i],outPoint:{txHash:s,index:i}}))])})])}async recordCells(...e){}async getCell(e){}async recordTransactionResponses(...e){}async getTransactionResponse(e){}async recordTransactions(...e){return this.recordTransactionResponses(e.flat().map(t=>({transaction:t,status:"unknown"})))}async getTransaction(e){return(await this.getTransactionResponse(e))?.transaction}async recordHeaders(...e){}async getHeaderByHash(e){}async getHeaderByNumber(e){}async recordBlocks(...e){}async getBlockByHash(e){}async getBlockByNumber(e){}hasHeaderConfirmed(e){return F(Date.now())-e.timestamp>=Bu}};var tc=class extends ec{constructor(e=512,t=256,n=128,s=Bu){super(),this.maxCells=e,this.maxTxs=t,this.maxBlocks=n,this.cells=new Wo(this.maxCells),this.knownTransactions=new Wo(this.maxTxs),this.knownBlockHashes=new Wo(this.maxBlocks),this.knownBlocks=new Wo(this.maxBlocks),this.confirmedBlockTime=F(s)}async markUsableNoCache(...e){e.flat().forEach(t=>{let n=Vt.from(t).clone(),s=j(n.outPoint.toBytes());this.cells.set(s,[!0,n])})}async markUnusable(...e){e.flat().forEach(t=>{let n=je.from(t),s=j(n.toBytes()),o=this.cells.get(s);if(o){o[0]=!1;return}this.cells.set(s,[!1,{outPoint:n}])})}async clear(){this.cells.clear(),this.knownTransactions.clear()}async*findCells(e){for(let[t,[n,s]]of this.cells.entries())n&&p3(e,s)&&(this.cells.get(t),yield s.clone())}async isUnusable(e){let t=je.from(e);return!(this.cells.get(j(t.toBytes()))?.[0]??!0)}async recordCells(...e){e.flat().map(t=>{let n=Vt.from(t),s=j(n.outPoint.toBytes());this.cells.get(s)||this.cells.set(s,[void 0,n])})}async getCell(e){let t=je.from(e),n=this.cells.get(j(t.toBytes()))?.[1];if(n&&n.cellOutput&&n.outputData)return Vt.from(n.clone())}async recordTransactionResponses(...e){e.flat().map(t=>{let n=to.from(t);this.knownTransactions.set(n.transaction.hash(),n)})}async getTransactionResponse(e){let t=j(e);return this.knownTransactions.get(t)?.clone()}async recordHeaders(...e){e.flat().map(t=>{let n=Qr.from(t);this.knownBlockHashes.set(n.number,n.hash),!this.knownBlocks.get(n.hash)&&this.knownBlocks.set(n.hash,{header:n})})}async getHeaderByHash(e){let t=j(e),n=this.knownBlocks.get(t);return n&&this.knownBlockHashes.get(n.header.number),n?.header}async getHeaderByNumber(e){let t=F(e),n=this.knownBlockHashes.get(t);if(n)return this.getHeaderByHash(n)}async recordBlocks(...e){e.flat().map(t=>{let n=Wi.from(t);this.knownBlockHashes.set(n.header.number,n.header.hash),this.knownBlocks.set(n.header.hash,n)})}async getBlockByHash(e){let t=j(e),n=this.knownBlocks.get(t);if(n&&(this.knownBlockHashes.get(n.header.number),"transactions"in n))return n}async getBlockByNumber(e){let t=F(e),n=this.knownBlockHashes.get(t);if(n)return this.getBlockByHash(n)}hasHeaderConfirmed(e){return F(Date.now())-e.timestamp>=this.confirmedBlockTime}};function Iu(r,e=8){let t=no(r).toString();if(e===0)return t;let n=t.length<=e?"0":t.slice(0,-e),s=t.slice(-e).padStart(e,"0").replace(/0*$/,"");return s===""?n:`${n}.${s}`}function no(r,e=8){if(typeof r=="bigint")return r;let[t,n]=(typeof r=="number"?r.toFixed(e):r.toString()).split("."),s=BigInt(t.padEnd(t.length+e,"0"));return n===void 0?s:s+BigInt(n.slice(0,e).padEnd(e,"0"))}var Je=0n,h3=no("1");var rc=class{constructor(e){this.cache=e?.cache??new tc}async getFeeRate(e,t){let n=Au((await this.getFeeRateStatistics(e)).median,a3),s=F(t?.maxFeeRate??mp);return s===Je?n:Eu(n,s)}async getBlockByNumber(e,t,n){let s=await this.cache.getBlockByNumber(e);if(s)return s;let o=await this.getBlockByNumberNoCache(e,t,n);return o&&this.cache.hasHeaderConfirmed(o.header)&&await this.cache.recordBlocks(o),o}async getBlockByHash(e,t,n){let s=await this.cache.getBlockByHash(e);if(s)return s;let o=await this.getBlockByHashNoCache(e,t,n);return o&&this.cache.hasHeaderConfirmed(o.header)&&await this.cache.recordBlocks(o),o}async getHeaderByNumber(e,t){let n=await this.cache.getHeaderByNumber(e);if(n)return n;let s=await this.getHeaderByNumberNoCache(e,t);return s&&this.cache.hasHeaderConfirmed(s)&&await this.cache.recordHeaders(s),s}async getHeaderByHash(e,t){let n=await this.cache.getHeaderByHash(e);if(n)return n;let s=await this.getHeaderByHashNoCache(e,t);return s&&this.cache.hasHeaderConfirmed(s)&&await this.cache.recordHeaders(s),s}async getCell(e){let t=je.from(e),n=await this.cache.getCell(t);if(n)return n;let s=await this.getTransaction(t.txHash);if(!s)return;let o=s.transaction.getOutput(t.index);if(!o)return;let i=Vt.from({...o,outPoint:t});return await this.cache.recordCells(i),i}async getCellWithHeader(e){let t=je.from(e),n=await this.getTransactionWithHeader(t.txHash);if(!n)return;let{transaction:s,header:o}=n,i=s.transaction.getOutput(t.index);if(!i)return;let c=Vt.from({...i,outPoint:t});return await this.cache.recordCells(c),{cell:c,header:o}}async getCellLive(e,t,n){let s=await this.getCellLiveNoCache(e,t,n);return t&&s&&await this.cache.recordCells(s),s}async findCellsPaged(e,t,n,s){let o=await this.findCellsPagedNoCache(e,t,n,s);return await this.cache.recordCells(o.cells),o}async*findCellsOnChain(e,t,n=10){let s;for(;;){let{cells:o,lastCursor:i}=await this.findCellsPaged(e,t,n,s);for(let c of o)yield c;if(o.length===0||o.length<n)return;s=i}}async*findCells(e,t,n=10){let s=Kn.from(e),o=[];for await(let i of this.cache.findCells(s))o.push(i.outPoint),yield i;for await(let i of this.findCellsOnChain(s,t,n))await this.cache.isUnusable(i.outPoint)||o.some(c=>c.eq(i.outPoint))||(yield i)}findCellsByLock(e,t,n=!0,s,o=10){return this.findCells({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{script:t},withData:n},s,o)}findCellsByType(e,t=!0,n,s=10){return this.findCells({script:e,scriptType:"type",scriptSearchMode:"exact",withData:t},n,s)}async findSingletonCellByType(e,t=!1){for await(let n of this.findCellsByType(e,t,void 0,1))return n}async getCellDeps(...e){return Promise.all(e.flat().map(async t=>{let{cellDep:n,type:s}=Ko.from(t);if(s===void 0)return n;let o=await this.findSingletonCellByType(s);return o?Rr.from({outPoint:o.outPoint,depType:n.depType}):n}))}async*findTransactions(e,t,n=10){let s;for(;;){let{transactions:o,lastCursor:i}=await this.findTransactionsPaged(e,t,n,s);for(let c of o)yield c;if(o.length===0||o.length<n)return;s=i}}findTransactionsByLock(e,t,n,s,o=10){return this.findTransactions({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{script:t},groupByTransaction:n},s,o)}findTransactionsByType(e,t,n,s=10){return this.findTransactions({script:e,scriptType:"type",scriptSearchMode:"exact",groupByTransaction:t},n,s)}async getBalanceSingle(e){return this.getCellsCapacity({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{scriptLenRange:[0,1],outputDataLenRange:[0,1]}})}async getBalance(e){return yn(e,async(t,n)=>t+await this.getBalanceSingle(n),Je)}async sendTransaction(e,t,n){let s=Se.from(e),o=F(n?.maxFeeRate??mp),i=await s.getFeeRate(this);if(o>Je&&i>o)throw new Qi(o,i);let c=await this.sendTransactionNoCache(s,t);return await this.cache.markTransactions(s),c}async getTransaction(e){let t=j(e),n=await this.getTransactionNoCache(t);return n?(await this.cache.recordTransactionResponses(n),n):this.cache.getTransactionResponse(t)}async getTransactionWithHeader(e){let t=j(e),n=await this.cache.getTransactionResponse(t);if(n?.blockHash){let o=await this.getHeaderByHash(n.blockHash);if(o&&this.cache.hasHeaderConfirmed(o))return{transaction:n,header:o}}let s=await this.getTransactionNoCache(t);if(s)return await this.cache.recordTransactionResponses(s),{transaction:s,header:s.blockHash?await this.getHeaderByHash(s.blockHash):void 0}}async waitTransaction(e,t=0,n=6e4,s=2e3){let o=Date.now(),i,c=async()=>{let a=await this.getTransaction(e);if(!(!a||a.blockNumber==null||["sent","pending","proposed"].includes(a.status)))return i=a,a};for(;;){if(i){if(t===0)return i;if((await this.getTipHeader()).number-i.blockNumber>=t)return i}else if(await c())continue;if(Date.now()-o+s>=n)throw new Yi(n);await ku(s)}}};var Ua=null;typeof WebSocket<"u"?Ua=WebSocket:typeof MozWebSocket<"u"?Ua=MozWebSocket:typeof global<"u"?Ua=global.WebSocket||global.MozWebSocket:typeof window<"u"?Ua=window.WebSocket||window.MozWebSocket:typeof self<"u"&&(Ua=self.WebSocket||self.MozWebSocket);var Pn=Ua;var te;(function(r){r.NervosDao="NervosDao",r.Secp256k1Blake160="Secp256k1Blake160",r.Secp256k1Multisig="Secp256k1Multisig",r.Secp256k1MultisigV2="Secp256k1MultisigV2",r.AnyoneCanPay="AnyoneCanPay",r.TypeId="TypeId",r.XUdt="XUdt",r.JoyId="JoyId",r.COTA="COTA",r.PWLock="PWLock",r.OmniLock="OmniLock",r.NostrLock="NostrLock",r.UniqueType="UniqueType",r.AlwaysSuccess="AlwaysSuccess",r.InputTypeProxyLock="InputTypeProxyLock",r.OutputTypeProxyLock="OutputTypeProxyLock",r.LockProxyLock="LockProxyLock",r.SingleUseLock="SingleUseLock",r.TypeBurnLock="TypeBurnLock",r.EasyToDiscoverType="EasyToDiscoverType",r.TimeLock="TimeLock"})(te||(te={}));var m3=Object.freeze({[te.NervosDao]:{codeHash:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xe2fb199810d49a4d8beec56718ba2593b665db9d52299a0f9e6e75416d73ff5c",index:2},depType:"code"}}]},[te.Secp256k1Blake160]:{codeHash:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}}]},[te.Secp256k1Multisig]:{codeHash:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:1},depType:"depGroup"}}]},[te.Secp256k1MultisigV2]:{codeHash:"0x36c971b8d41fbd94aabca77dc75e826729ac98447b46f91e00796155dddb0d29",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x6888aa39ab30c570c2c30d9d5684d3769bf77265a7973211a3c087fe8efbf738",index:0},depType:"depGroup"}}]},[te.AnyoneCanPay]:{codeHash:"0xd369597ff47f29fbc0d47d2e3775370d1250b85140c670e4718af712983a2354",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x4153a2014952d7cac45f285ce9a7c5c0c0e1b21f2d378b82ac1433cb11c25c4d",index:0},depType:"depGroup"}}]},[te.TypeId]:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",cellDeps:[]},[te.XUdt]:{codeHash:"0x50bd8d6680b8b9cf98b73f3c08faf8b2a21914311954118ad6609be6e78a1b95",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xc07844ce21b38e4b071dd0e1ee3b0e27afd8d7532491327f39b786343f558ab7",index:0},depType:"code"}}]},[te.JoyId]:{codeHash:"0xd00c84f0ec8fd441c38bc3f87a371f547190f2fcff88e642bc5bf54b9e318323",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x2d1f2d4d1514ccc3bb4f04f5437a5ae30d00636ee57cedd2c70ab3ea75b62adc"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xc086090432098835ec542a1b94bdd1b842c5aa1ccd1616873fe77f4a04044417"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:2},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x165b225c6fbed7e655b024384d9083de3243375f9893706f4452858ecd694e96"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:3},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xafb8408d0094ab944e6286aac750b9bb854ac0bcb66dfe5c60559744a700e70c"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:4},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x773bf0647be24b4e18ef44068fd069b9de5549c4b86be227779ceb9179598ec4"}}]},[te.COTA]:{codeHash:"0x1122a4fb54697cf2e6e3a96c9d80fd398a936559b90954c6e88eb7ba0cf652df",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xabaa25237554f0d6c586dc010e7e85e6870bcfd9fb8773257ecacfbe1fd738a0",index:0},depType:"depGroup"}}]},[te.PWLock]:{codeHash:"0xbf43c3602455798c1a61a596e0d95278864c552fafe231c063b3fabf97a8febc",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0x1d60cb8f4666e039f418ea94730b1a8c5aa0bf2f7781474406387462924d15d4",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x42ade2f25eb938b5dbfd3d8f07b8b07aa593d848e7ff14bdfbbea5aeb6175261"}}]},[te.OmniLock]:{codeHash:"0x9b819793a64463aed77c615d6cb226eea5487ccfc0783043a587254cda2b6f26",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0xc76edf469816aa22f416503c38d0b533d2a018e253e379f134c3985b3472c842",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x855508fe0f0ca25b935b070452ecaee48f6c9f1d66cd15f046616b99e948236a"}}]},[te.NostrLock]:{codeHash:"0x641a89ad2f77721b803cd50d01351c1f308444072d5fa20088567196c0574c68",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x99b116dd1e4f1fa903b70112ae672c18bb34241d3d03a9ad555cd2a611be7327",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xfad8cb75eb0bb01718e2336002064568bc05887af107f74ed5dd501829e192f8"}}]},[te.UniqueType]:{codeHash:"0x2c8c11c985da60b0a330c61a85507416d6382c130ba67f0c47ab071e00aec628",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x67524c01c0cb5492e499c7c7e406f2f9d823e162d6b0cf432eacde0c9808c2ad",index:0},depType:"code"}}]},[te.AlwaysSuccess]:{codeHash:"0x3b521cc4b552f109d092d8cc468a8048acb53c5952dbe769d2b2f9cf6e47f7f1",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:0},depType:"code"}}]},[te.InputTypeProxyLock]:{codeHash:"0x5123908965c711b0ffd8aec642f1ede329649bda1ebdca6bd24124d3796f768a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:1},depType:"code"}}]},[te.OutputTypeProxyLock]:{codeHash:"0x2df53b592db3ae3685b7787adcfef0332a611edb83ca3feca435809964c3aff2",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:2},depType:"code"}}]},[te.LockProxyLock]:{codeHash:"0x5d41e32e224c15f152b7e6529100ebeac83b162f5f692a5365774dad2c1a1d02",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:3},depType:"code"}}]},[te.SingleUseLock]:{codeHash:"0x8290467a512e5b9a6b816469b0edabba1f4ac474e28ffdd604c2a7c76446bbaf",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:4},depType:"code"}}]},[te.TypeBurnLock]:{codeHash:"0xff78bae0abf17d7a404c0be0f9ad9c9185b3f88dcc60403453d5ba8e1f22f53a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:5},depType:"code"}}]},[te.EasyToDiscoverType]:{codeHash:"0xaba4430cc7110d699007095430a1faa72973edf2322ddbfd4d1d219cacf237af",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb0ed754fb27d67fd8388c97fed914fb7998eceaa01f3e6f967e498de1ba0ac9b",index:0},depType:"code"}}]},[te.TimeLock]:{codeHash:"0x6fac4b2e89360a1e692efcddcb3a28656d8446549fb83da6d896db8b714f4451",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb0ed754fb27d67fd8388c97fed914fb7998eceaa01f3e6f967e498de1ba0ac9b",index:1},depType:"code"}}]}});var Ou=class{constructor(e,t=3e4){this.url=e,this.timeout=t}async request(e){let t=new AbortController,n=setTimeout(()=>t.abort(),this.timeout),s=await(await fetch(this.url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:t.signal})).json();return clearTimeout(n),s}};var Du=class{constructor(e,t=3e4){this.url=e,this.timeout=t,this.ongoing=new Map}request(e){let t=(()=>{if(this.socket&&this.socket.readyState!==this.socket.CLOSING&&this.socket.readyState!==this.socket.CLOSED&&this.openSocket)return this.openSocket;let n=new Pn(this.url),s=({data:i})=>{let c=JSON.parse(i);if(typeof c!="object"||c===null||typeof c.id!="number")throw new Error(`Unknown response ${i}`);let a=c.id,u=this.ongoing.get(a);if(!u)return;let[d,y,v]=u;clearTimeout(v),this.ongoing.delete(a),d(c)},o=()=>{this.ongoing.forEach(([i,c,a])=>{clearTimeout(a),c(new Error("Connection closed"))}),this.ongoing.clear()};return n.onclose=o,n.onerror=o,n.onmessage=s,this.socket=n,this.openSocket=new Promise(i=>{n.readyState===n.OPEN?i(n):n.onopen=()=>{i(n)}}),this.openSocket})();return new Promise((n,s)=>{let o=[n,s,setTimeout(()=>{this.ongoing.delete(e.id),t.then(i=>i.close()).catch(i=>s(i)),s(new Error("Request timeout"))},this.timeout)];this.ongoing.set(e.id,o),t.then(i=>{i.readyState===i.CLOSED||i.readyState===i.CLOSING?(clearTimeout(o[2]),this.ongoing.delete(e.id),s(new Error("Connection closed"))):i.send(JSON.stringify(e))}).catch(i=>s(i))})}};function y3(r,e){return r.startsWith("wss://")||r.startsWith("ws://")?new Du(r,e?.timeout):new Ou(r,e?.timeout)}var Pu=class{constructor(e){this.transports=e,this.i=0}async request(e){let t=0;for(;;)try{return await this.transports[this.i%this.transports.length].request(e)}catch(n){if(t+=1,this.i+=1,t>=this.transports.length)throw n}}};function S8(r,e){return e?e(r):r}var nc=class{constructor(e,t,n){this.url_=e,this.onError=n,this.concurrent=0,this.pending=[],this.id=0,this.maxConcurrent=t?.maxConcurrent,this.transport=t?.transport??new Pu(Array.from(new Set([e,...t?.fallbacks??[]]).values(),s=>y3(s,t)))}get url(){return this.url_}async request(e,t,n,s){let o=this.buildPayload(e,n?await Promise.all(t.concat(Array.from(new Array(Math.max(n.length-t.length,0)))).map((i,c)=>S8(i,n[c]))):t);try{return await S8(await this.requestPayload(o),s)}catch(i){if(!this.onError)throw i;await this.onError(i)}}async requestPayload(e){this.maxConcurrent!==void 0&&this.concurrent>=this.maxConcurrent&&await new Promise(s=>this.pending.push(s)),this.concurrent+=1;let t=await this.transport.request(e);if(this.concurrent-=1,this.pending.shift()?.(),t.id!==e.id)throw new Error(`Id mismatched, got ${t.id}, expected ${e.id}`);if(t.error!=null)throw t.error;return t.result}buildPayload(e,t){return{id:this.id++,method:e,params:t,jsonrpc:"2.0"}}};var Nt=class r{static hashTypeFrom(e){return ro(e)}static hashTypeTo(e){return e}static depTypeFrom(e){switch(sc(e)){case"code":return"code";case"depGroup":return"dep_group"}}static depTypeTo(e){switch(e){case"code":return"code";case"dep_group":return"depGroup"}}static scriptFrom(e){let t=me.from(e);return{code_hash:t.codeHash,hash_type:r.hashTypeFrom(t.hashType),args:t.args}}static scriptTo(e){return me.from({codeHash:e.code_hash,hashType:r.hashTypeTo(e.hash_type),args:e.args})}static outPointFrom(e){let t=je.from(e);return{index:Rt(t.index),tx_hash:t.txHash}}static outPointTo(e){return je.from({index:e.index,txHash:e.tx_hash})}static cellInputFrom(e){let t=Nr.from(e);return{previous_output:r.outPointFrom(t.previousOutput),since:Rt(t.since)}}static cellInputTo(e){return Nr.from({previousOutput:r.outPointTo(e.previous_output),since:e.since})}static cellOutputFrom(e,t){let n=en.from(e,t);return{capacity:Rt(n.capacity),lock:r.scriptFrom(n.lock),type:fe(r.scriptFrom,n.type)}}static cellOutputTo(e){return en.from({capacity:e.capacity,lock:r.scriptTo(e.lock),type:fe(r.scriptTo,e.type)})}static cellDepFrom(e){return{out_point:r.outPointFrom(e.outPoint),dep_type:r.depTypeFrom(e.depType)}}static cellDepTo(e){return Rr.from({outPoint:r.outPointTo(e.out_point),depType:r.depTypeTo(e.dep_type)})}static transactionFrom(e){let t=Se.from(e);return{version:Rt(t.version),cell_deps:t.cellDeps.map(n=>r.cellDepFrom(n)),header_deps:t.headerDeps,inputs:t.inputs.map(n=>r.cellInputFrom(n)),outputs:t.outputs.map(n=>r.cellOutputFrom(n)),outputs_data:t.outputsData,witnesses:t.witnesses}}static transactionTo(e){return Se.from({version:e.version,cellDeps:e.cell_deps.map(t=>r.cellDepTo(t)),headerDeps:e.header_deps,inputs:e.inputs.map(t=>r.cellInputTo(t)),outputs:e.outputs.map(t=>r.cellOutputTo(t)),outputsData:e.outputs_data,witnesses:e.witnesses})}static transactionResponseTo({cycles:e,tx_status:{status:t,block_number:n,block_hash:s,tx_index:o,reason:i},transaction:c}){if(c!=null)return to.from({transaction:r.transactionTo(c),status:t,cycles:fe(F,e),blockHash:fe(j,s),blockNumber:fe(F,n),txIndex:fe(F,o),reason:i})}static blockHeaderTo(e){let t=Y(e.dao);return{compactTarget:F(e.compact_target),dao:{c:Qs(t.slice(0,8)),ar:Qs(t.slice(8,16)),s:Qs(t.slice(16,24)),u:Qs(t.slice(24,32))},epoch:Mu(e.epoch),extraHash:e.extra_hash,hash:e.hash,nonce:F(e.nonce),number:F(e.number),parentHash:e.parent_hash,proposalsHash:e.proposals_hash,timestamp:F(e.timestamp),transactionsRoot:e.transactions_root,version:F(e.version)}}static blockUncleTo(e){return{header:r.blockHeaderTo(e.header),proposals:e.proposals}}static blockTo(e){return{header:r.blockHeaderTo(e.header),proposals:e.proposals,transactions:e.transactions.map(t=>r.transactionTo(t)),uncles:e.uncles.map(t=>r.blockUncleTo(t))}}static rangeFrom([e,t]){return[Rt(e),Rt(t)]}static indexerSearchKeyFilterFrom(e){return{script:fe(r.scriptFrom,e.script),script_len_range:fe(r.rangeFrom,e.scriptLenRange),output_data:e.outputData,output_data_filter_mode:e.outputDataSearchMode,output_data_len_range:fe(r.rangeFrom,e.outputDataLenRange),output_capacity_range:fe(r.rangeFrom,e.outputCapacityRange),block_range:fe(r.rangeFrom,e.blockRange)}}static indexerSearchKeyFrom(e){let t=Kn.from(e);return{script:r.scriptFrom(t.script),script_type:t.scriptType,script_search_mode:t.scriptSearchMode,filter:fe(r.indexerSearchKeyFilterFrom,t.filter),with_data:t.withData}}static findCellsResponseTo({last_cursor:e,objects:t}){return{lastCursor:e,cells:t.map(n=>Vt.from({outPoint:r.outPointTo(n.out_point),cellOutput:r.cellOutputTo(n.output),outputData:n.output_data??"0x"}))}}static indexerSearchKeyTransactionFrom(e){let t=Ki.from(e);return{script:r.scriptFrom(t.script),script_type:t.scriptType,script_search_mode:t.scriptSearchMode,filter:fe(r.indexerSearchKeyFilterFrom,t.filter),group_by_transaction:t.groupByTransaction}}static findTransactionsResponseTo({last_cursor:e,objects:t}){return t.length===0?{lastCursor:e,transactions:[]}:"io_index"in t[0]?{lastCursor:e,transactions:t.map(n=>({txHash:n.tx_hash,blockNumber:F(n.block_number),txIndex:F(n.tx_index),cellIndex:F(n.io_index),isInput:n.io_type==="input"}))}:{lastCursor:e,transactions:t.map(n=>({txHash:n.tx_hash,blockNumber:F(n.block_number),txIndex:F(n.tx_index),cells:n.cells.map(([s,o])=>({isInput:s==="input",cellIndex:F(o)}))}))}}};var FS=[["Resolve\\(Unknown\\(OutPoint\\((0x.*)\\)\\)\\)",(r,e)=>new Zi(r,je.fromBytes(e[1]))],["Verification\\(Error { kind: Script, inner: TransactionScriptError { source: (Inputs|Outputs)\\[([0-9]*)\\].(Lock|Type), cause: ValidationFailure: see error code (-?[0-9])* on page https://nervosnetwork\\.github\\.io/ckb-script-error-codes/by-(type|data)-hash/(.*)\\.html",(r,e)=>new Gi(r,e[3]==="Lock"?"lock":e[1]==="Inputs"?"inputType":"outputType",e[2],Number(e[4]),e[5]==="data"?"data":"type",e[6])],["Duplicated\\(Byte32\\((0x.*)\\)\\)",(r,e)=>new Ji(r,e[1])],[`RBFRejected\\("Tx's current fee is ([0-9]*), expect it to >= ([0-9]*) to replace old txs"\\)`,(r,e)=>new Xi(r,e[1],e[2])]],so=class extends rc{constructor(e,t){super(t),this.getFeeRateStatistics=this.buildSender("get_fee_rate_statistics",[n=>fe(F,n)],({mean:n,median:s})=>({mean:F(n),median:F(s)})),this.getTip=this.buildSender("get_tip_block_number",[],F),this.getTipHeader=this.buildSender("get_tip_header",[],n=>fe(Nt.blockHeaderTo,n)),this.getBlockByNumberNoCache=this.buildSender("get_block_by_number",[n=>Rt(F(n))],n=>fe(Nt.blockTo,n)),this.getBlockByHashNoCache=this.buildSender("get_block",[j],n=>fe(Nt.blockTo,n)),this.getHeaderByNumberNoCache=this.buildSender("get_header_by_number",[n=>Rt(F(n))],n=>fe(Nt.blockHeaderTo,n)),this.getHeaderByHashNoCache=this.buildSender("get_header",[j],n=>fe(Nt.blockHeaderTo,n)),this.estimateCycles=this.buildSender("estimate_cycles",[Nt.transactionFrom],({cycles:n})=>F(n)),this.sendTransactionDry=this.buildSender("test_tx_pool_accept",[Nt.transactionFrom],({cycles:n})=>F(n)),this.sendTransactionNoCache=this.buildSender("send_transaction",[Nt.transactionFrom,n=>n??void 0],j),this.getTransactionNoCache=this.buildSender("get_transaction",[j],Nt.transactionResponseTo),this.findCellsPagedNoCache=this.buildSender("get_cells",[Nt.indexerSearchKeyFrom,n=>n??"asc",n=>Rt(n??10)],Nt.findCellsResponseTo),this.findTransactionsPaged=this.buildSender("get_transactions",[Nt.indexerSearchKeyTransactionFrom,n=>n??"asc",n=>Rt(n??10)],Nt.findTransactionsResponseTo),this.getCellsCapacity=this.buildSender("get_cells_capacity",[Nt.indexerSearchKeyFrom],({capacity:n})=>F(n)),this.requestor=t?.requestor??new nc(e,t,n=>{if(typeof n!="object"||n===null||!("data"in n)||typeof n.data!="string")throw n;let s=n;for(let[o,i]of FS){let c=s.data.match(o);if(c)throw i(s,c)}throw new gn(s)})}get url(){return this.requestor.url}getCellLiveNoCache(e,t,n){return this.buildSender("get_live_cell",[Nt.outPointFrom],({cell:s})=>fe(({output:o,data:i})=>Vt.from({cellOutput:Nt.cellOutputTo(o),outputData:i?.content??"0x",outPoint:e}),s))(e,t??!0,n)}buildSender(e,t,n){return async(...s)=>this.requestor.request(e,s,t,n)}};var Ru=class extends so{constructor(e){let t=typeof Pn<"u";super(e?.url??(t?"wss://mainnet.ckb.dev/ws":"https://mainnet.ckb.dev/"),{...e,fallbacks:e?.fallbacks??(t?["wss://mainnet.ckb.dev/ws","https://mainnet.ckb.dev/","https://mainnet.ckbapp.dev/"]:["https://mainnet.ckb.dev/","https://mainnet.ckbapp.dev/"])}),this.config=e}get scripts(){return this.config?.scripts??m3}get addressPrefix(){return"ckb"}async getKnownScript(e){let t=this.scripts[e];if(!t)throw new Error(`No script information was found for ${e} on ${this.addressPrefix}`);return eo.from(t)}};var g3=Object.freeze({[te.NervosDao]:{codeHash:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x8f8c79eb6671709633fe6a46de93c0fedc9c1b8a6527a18d3983879542635c9f",index:2},depType:"code"}}]},[te.Secp256k1Blake160]:{codeHash:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}}]},[te.Secp256k1Multisig]:{codeHash:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:1},depType:"depGroup"}}]},[te.Secp256k1MultisigV2]:{codeHash:"0x36c971b8d41fbd94aabca77dc75e826729ac98447b46f91e00796155dddb0d29",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x2eefdeb21f3a3edf697c28a52601b4419806ed60bb427420455cc29a090b26d5",index:0},depType:"depGroup"}}]},[te.AnyoneCanPay]:{codeHash:"0x3419a1c09eb2567f6552ee7a8ecffd64155cffe0f1796e6e61ec088d740c1356",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xec26b0f85ed839ece5f11c4c4e837ec359f5adc4420410f6453b1f6b60fb96a6",index:0},depType:"depGroup"}}]},[te.TypeId]:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",cellDeps:[]},[te.XUdt]:{codeHash:"0x25c29dc317811a6f6f3985a7a9ebc4838bd388d19d0feeecf0bcd60f6c0975bb",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xbf6fb538763efec2a70a6a3dcb7242787087e1030c4e7d86585bc63a9d337f5f",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x44ec8b96663e06cc94c8c468a4d46d7d9af69eaf418f6390c9f11bb763dda0ae"}}]},[te.JoyId]:{codeHash:"0xd23761b364210735c19c60561d213fb3beae2fd6172743719eff6920e020baac",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x4a596d31dc35e88fb1591debbf680b04a44b4a434e3a94453c21ea8950ffb4d9",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x1c9fc299ba0570d077b4d7fb9acff1ccc0de69d369942d82678bae937c44ec30"}},{cellDep:{outPoint:{txHash:"0x4a596d31dc35e88fb1591debbf680b04a44b4a434e3a94453c21ea8950ffb4d9",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x27f0d3ccdc2fcd52ae31fbacad5f86b97bc147d7093e4807cd6e3d21c1fe6841"}},{cellDep:{outPoint:{txHash:"0xf2c9dbfe7438a8c622558da8fa912d36755271ea469d3a25cb8d3373d35c8638",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x0ac15fe5b2d059ec39de03f2d3159d5463abb918a1a07a9fa00d2b9c61d89ef3"}},{cellDep:{outPoint:{txHash:"0x95ecf9b41701b45d431657a67bbfa3f07ef7ceb53bf87097f3674e1a4a19ce62",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xc7bafc5550ccad7cea32c27764f5df6aca4de547da65e3e67fa08477a1af7f5e"}},{cellDep:{outPoint:{txHash:"0x8b3255491f3c4dcc1cfca33d5c6bcaec5409efe4bbda243900f9580c47e0242e",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x71decef9ca8725e64ec99a5521790d16b8d5daadb4989b45dd6ab51806a8c0e4"}}]},[te.COTA]:{codeHash:"0x89cd8003a0eaf8e65e0c31525b7d1d5c1becefd2ea75bb4cff87810ae37764d8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x636a786001f87cb615acfcf408be0f9a1f077001f0bbc75ca54eadfe7e221713",index:0},depType:"depGroup"}}]},[te.PWLock]:{codeHash:"0x58c5f491aba6d61678b7cf7edf4910b1f5e00ec0cde2f42e0abb4fd9aff25a63",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0x57a62003daeab9d54aa29b944fc3b451213a5ebdf2e232216a3cfed0dde61b38",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xf6d90bfe3041d0fd7e01c45770241697f5f837974bd6ae1672a7ec0f9f523268"}}]},[te.OmniLock]:{codeHash:"0xf329effd1c475a2978453c8600e1eaf0bc2087ee093c3ee64cc96ec6847752cb",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0xec18bf0d857c981c3d1f4e17999b9b90c484b303378e94de1a57b0872f5d4602",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x761f51fc9cd6a504c32c6ae64b3746594d1af27629b427c5ccf6c9a725a89144"}}]},[te.NostrLock]:{codeHash:"0x6ae5ee0cb887b2df5a9a18137315b9bdc55be8d52637b2de0624092d5f0c91d5",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xa2a434dcdbe280b9ed75bb7d6c7d68186a842456aba0fc506657dc5ed7c01d68",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x8dc56c6f35f0c535e23ded1629b1f20535477a1b43e59f14617d11e32c50e0aa"}}]},[te.UniqueType]:{codeHash:"0x8e341bcfec6393dcd41e635733ff2dca00a6af546949f70c57a706c0f344df8b",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xff91b063c78ed06f10a1ed436122bd7d671f9a72ef5f5fa28d05252c17cf4cef",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xe04976b67600fd25ac50305f77b33aee2c12e3c18e63ece9119e5b32117884b5"}}]},[te.AlwaysSuccess]:{codeHash:"0x3b521cc4b552f109d092d8cc468a8048acb53c5952dbe769d2b2f9cf6e47f7f1",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:0},depType:"code"}}]},[te.InputTypeProxyLock]:{codeHash:"0x5123908965c711b0ffd8aec642f1ede329649bda1ebdca6bd24124d3796f768a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:1},depType:"code"}}]},[te.OutputTypeProxyLock]:{codeHash:"0x2df53b592db3ae3685b7787adcfef0332a611edb83ca3feca435809964c3aff2",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:2},depType:"code"}}]},[te.LockProxyLock]:{codeHash:"0x5d41e32e224c15f152b7e6529100ebeac83b162f5f692a5365774dad2c1a1d02",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:3},depType:"code"}}]},[te.SingleUseLock]:{codeHash:"0x8290467a512e5b9a6b816469b0edabba1f4ac474e28ffdd604c2a7c76446bbaf",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:4},depType:"code"}}]},[te.TypeBurnLock]:{codeHash:"0xff78bae0abf17d7a404c0be0f9ad9c9185b3f88dcc60403453d5ba8e1f22f53a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:5},depType:"code"}}]},[te.EasyToDiscoverType]:{codeHash:"0xaba4430cc7110d699007095430a1faa72973edf2322ddbfd4d1d219cacf237af",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x1b4ffcad55ecd36ffb2715b6816b83da73851f1a24fe594f263c4f34dad90792",index:0},depType:"code"}}]},[te.TimeLock]:{codeHash:"0x6fac4b2e89360a1e692efcddcb3a28656d8446549fb83da6d896db8b714f4451",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x1b4ffcad55ecd36ffb2715b6816b83da73851f1a24fe594f263c4f34dad90792",index:1},depType:"code"}}]}});var Nu=class extends so{constructor(e){let t=typeof Pn<"u";super(e?.url??(t?"wss://testnet.ckb.dev/ws":"https://testnet.ckb.dev/"),{...e,fallbacks:e?.fallbacks??(t?["wss://testnet.ckb.dev/ws","https://testnet.ckb.dev/","https://testnet.ckbapp.dev/"]:["https://testnet.ckb.dev/","https://testnet.ckbapp.dev/"])}),this.config=e}get scripts(){return this.config?.scripts??g3}get addressPrefix(){return"ckt"}async getKnownScript(e){let t=this.scripts[e];if(!t)throw new Error(`No script information was found for ${e} on ${this.addressPrefix}`);return eo.from(t)}};var $S=BigInt(0),Lu=BigInt(1),qS=BigInt(2),jS=BigInt(7),zS=BigInt(256),VS=BigInt(113),E8=[],A8=[],k8=[];for(let r=0,e=Lu,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],E8.push(2*(5*n+t)),A8.push((r+1)*(r+2)/2%64);let s=$S;for(let o=0;o<7;o++)e=(e<<Lu^(e>>jS)*VS)%zS,e&qS&&(s^=Lu<<(Lu<<BigInt(o))-Lu);k8.push(s)}var C8=d8(k8,!0),KS=C8[0],WS=C8[1],_8=(r,e,t)=>t>32?x8(r,e,t):g8(r,e,t),T8=(r,e,t)=>t>32?w8(r,e,t):b8(r,e,t);function ZS(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let i=0;i<10;i++)t[i]=r[i]^r[i+10]^r[i+20]^r[i+30]^r[i+40];for(let i=0;i<10;i+=2){let c=(i+8)%10,a=(i+2)%10,u=t[a],d=t[a+1],y=_8(u,d,1)^t[c],v=T8(u,d,1)^t[c+1];for(let _=0;_<50;_+=10)r[i+_]^=y,r[i+_+1]^=v}let s=r[2],o=r[3];for(let i=0;i<24;i++){let c=A8[i],a=_8(s,o,c),u=T8(s,o,c),d=E8[i];s=r[d],o=r[d+1],r[d]=a,r[d+1]=u}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)t[c]=r[i+c];for(let c=0;c<10;c++)r[i+c]^=~t[(c+2)%10]&t[(c+4)%10]}r[0]^=KS[n],r[1]^=WS[n]}tt(t)}var b3=class r extends us{constructor(e,t,n,s=!1,o=24){if(super(),this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,this.enableXOF=!1,this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=o,We(n),!(0<e&&e<200))throw new Error("only keccak-f1600 function is supported");this.state=new Uint8Array(200),this.state32=jn(this.state)}clone(){return this._cloneInto()}keccak(){hn(this.state32),ZS(this.state32,this.rounds),hn(this.state32),this.posOut=0,this.pos=0}update(e){Dn(this),e=mn(e),ur(e);let{blockLen:t,state:n}=this,s=e.length;for(let o=0;o<s;){let i=Math.min(t-this.pos,s-o);for(let c=0;c<i;c++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){Dn(this,!1),ur(e),this.finish();let t=this.state,{blockLen:n}=this;for(let s=0,o=e.length;s<o;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return We(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Da(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,tt(this.state)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new r(t,n,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}},GS=(r,e,t)=>Ma(()=>new b3(e,r,t));var Zo=GS(1,136,256/8);var oc=class{constructor(){this.hasher=Zo.create()}update(e){return this.hasher.update(Y(e)),this}digest(){return j(this.hasher.digest())}};var K={};be(K,{Bool:()=>C3,BoolOpt:()=>__,BoolVec:()=>T_,Byte16:()=>O3,Byte16Opt:()=>B_,Byte16Vec:()=>I_,Byte32:()=>D3,Byte32Opt:()=>O_,Byte32Vec:()=>D_,Byte4:()=>B3,Byte4Opt:()=>E_,Byte4Vec:()=>A_,Byte8:()=>I3,Byte8Opt:()=>k_,Byte8Vec:()=>C_,Bytes:()=>k3,BytesOpt:()=>v_,BytesVec:()=>S_,Codec:()=>tr,Entity:()=>x3,String:()=>P3,StringOpt:()=>M_,StringVec:()=>P_,Uint128:()=>T3,Uint128BE:()=>d_,Uint128LE:()=>M8,Uint128Opt:()=>p_,Uint128Vec:()=>h_,Uint16:()=>v3,Uint16BE:()=>n_,Uint16LE:()=>O8,Uint16Opt:()=>s_,Uint16Vec:()=>o_,Uint256:()=>E3,Uint256BE:()=>m_,Uint256LE:()=>R8,Uint256Opt:()=>y_,Uint256Vec:()=>g_,Uint32:()=>S3,Uint32BE:()=>i_,Uint32LE:()=>D8,Uint32Opt:()=>c_,Uint32Vec:()=>a_,Uint512:()=>A3,Uint512BE:()=>b_,Uint512LE:()=>N8,Uint512Opt:()=>x_,Uint512Vec:()=>w_,Uint64:()=>_3,Uint64BE:()=>f_,Uint64LE:()=>P8,Uint64Opt:()=>u_,Uint64Vec:()=>l_,Uint8:()=>w3,Uint8Opt:()=>t_,Uint8Vec:()=>r_,array:()=>QS,byteVec:()=>gp,codec:()=>e_,dynItemVec:()=>I8,fixedItemVec:()=>B8,option:()=>wr,struct:()=>YS,table:()=>JS,uint:()=>Wn,uintNumber:()=>cc,union:()=>XS,vector:()=>xr});var tr=class r{constructor(e,t,n){this.encode=e,this.decode=t,this.byteLength=n}static from({encode:e,decode:t,byteLength:n}){return new r(s=>{let o=e(s);if(n!==void 0&&o.byteLength!==n)throw new Error(`Codec.encode: expected byte length ${n}, got ${o.byteLength}`);return o},(s,o)=>{let i=Y(s);if(n!==void 0&&i.byteLength!==n)throw new Error(`Codec.decode: expected byte length ${n}, got ${i.byteLength}`);return t(s,o)},n)}map({inMap:e,outMap:t}){return new r(n=>this.encode(e?e(n):n),(n,s)=>t?t(this.decode(n,s)):this.decode(n,s),this.byteLength)}mapIn(e){return this.map({inMap:e})}mapOut(e){return this.map({outMap:e})}};function ic(r){return He(r,4)}function ps(r){return Number(Ys(r))}function B8(r){let e=r.byteLength;if(e===void 0)throw new Error("fixedItemVec: itemCodec requires a byte length");return tr.from({encode(t){try{let n=[];pn(n,ic(t.length));for(let s of t)pn(n,r.encode(s));return Y(n)}catch(n){throw new Error(`fixedItemVec(${n?.toString()})`)}},decode(t,n){let s=Y(t);if(s.byteLength<4)throw new Error(`fixedItemVec: too short buffer, expected at least 4 bytes, but got ${s.byteLength}`);let i=4+ps(s.slice(0,4))*e;if(s.byteLength!==i)throw new Error(`fixedItemVec: invalid buffer size, expected ${i}, but got ${s.byteLength}`);try{let c=[];for(let a=4;a<i;a+=e)c.push(r.decode(s.slice(a,a+e),n));return c}catch(c){throw new Error(`fixedItemVec(${c?.toString()})`)}}})}function I8(r){return tr.from({encode(e){try{let t=4+e.length*4,n=[],s=[];for(let i of e){let c=r.encode(i);pn(n,ic(t)),pn(s,c),t+=c.byteLength}let o=ic(n.length+s.length+4);return Ae(o,n,s)}catch(t){throw new Error(`dynItemVec(${t?.toString()})`)}},decode(e,t){let n=Y(e);if(n.byteLength<4)throw new Error(`dynItemVec: too short buffer, expected at least 4 bytes, but got ${n.byteLength}`);let s=ps(n.slice(0,4));if(s!==n.byteLength)throw new Error(`dynItemVec: invalid buffer size, expected ${s}, but got ${n.byteLength}`);if(s===4)return[];let i=(ps(n.slice(4,8))-4)/4,c=Array.from(new Array(i),(a,u)=>ps(n.slice(4+u*4,8+u*4)));c.push(s);try{let a=[];for(let u=0;u<c.length-1;u++){let d=c[u],y=c[u+1],v=n.slice(d,y);a.push(r.decode(v,t))}return a}catch(a){throw new Error(`dynItemVec(${a?.toString()})`)}}})}function xr(r){return r.byteLength!==void 0?B8(r):I8(r)}function wr(r){return tr.from({encode(e){if(e==null)return Y([]);try{return r.encode(e)}catch(t){throw new Error(`option(${t?.toString()})`)}},decode(e,t){if(Y(e).byteLength!==0)try{return r.decode(e,t)}catch(s){throw new Error(`option(${s?.toString()})`)}}})}function gp(r){return tr.from({encode(e){try{let t=Y(r.encode(e)),n=ic(t.byteLength);return Ae(n,t)}catch(t){throw new Error(`byteVec(${t?.toString()})`)}},decode(e,t){let n=Y(e);if(n.byteLength<4)throw new Error(`byteVec: too short buffer, expected at least 4 bytes, but got ${n.byteLength}`);let s=ps(n.slice(0,4));if(s!==n.byteLength-4)throw new Error(`byteVec: invalid buffer size, expected ${s}, but got ${n.byteLength}`);try{return r.decode(n.slice(4),t)}catch(o){throw new Error(`byteVec(${o?.toString()})`)}}})}function JS(r){let e=Object.keys(r);return tr.from({encode(t){let n=4+e.length*4,s=[],o=[];for(let c of e)try{let a=r[c].encode(t[c]);pn(s,ic(n)),pn(o,a),n+=a.byteLength}catch(a){throw new Error(`table.${c}(${a?.toString()})`)}let i=ic(s.length+o.length+4);return Ae(i,s,o)},decode(t,n){let s=Y(t);if(s.byteLength<4)throw new Error(`table: too short buffer, expected at least 4 bytes, but got ${s.byteLength}`);let o=ps(s.slice(0,4)),c=(ps(s.slice(4,8))-4)/4;if(o!==s.byteLength)throw new Error(`table: invalid buffer size, expected ${o}, but got ${s.byteLength}`);if(c<e.length)throw new Error(`table: invalid field count, expected ${e.length}, but got ${c}`);if(c>e.length&&!n?.isExtraFieldIgnored)throw new Error(`table: invalid field count, expected ${e.length}, but got ${c}, and extra fields are not allowed in the current configuration. If you want to ignore extra fields, set isExtraFieldIgnored to true.`);let a=e.map((d,y)=>ps(s.slice(4+y*4,8+y*4)));c>e.length?a.push(ps(s.slice(4+e.length*4,8+e.length*4))):a.push(o);let u={};for(let d=0;d<a.length-1;d++){let y=a[d],v=a[d+1],_=e[d],T=r[_],A=s.slice(y,v);try{Object.assign(u,{[_]:T.decode(A,n)})}catch(B){throw new Error(`table.${_}(${B?.toString()})`)}}return u}})}function XS(r,e){let t=Object.entries(r),n;if(t.length>0){let s=t[0][1].byteLength;s!==void 0&&t.every(([,{byteLength:o}])=>o===s)&&(n=s+4)}return tr.from({byteLength:n,encode({type:s,value:o}){let i=s.toString(),c=r[i];if(!c)throw new Error(`union: invalid type, expected ${t.map(d=>d[0]).toString()}, but got ${i}`);let a=e?e[i]??-1:t.findIndex(d=>d[0]===i);if(a<0)throw new Error(`union: invalid field id ${a} of ${i}`);let u=ic(a);try{let d=c.encode(o);return Ae(u,d)}catch(d){throw new Error(`union.(${i})(${d?.toString()})`)}},decode(s,o){let i=Y(s),c=ps(i.slice(0,4)),a=Object.keys(r),u=e?Object.entries(e).find(([,y])=>y===c)?.[0]:a[c];if(!u){if(!e)throw new Error(`union: unknown union field index ${c}, only ${a.toString()} are allowed`);let d=Object.keys(e);throw new Error(`union: unknown union field index ${c}, only ${d.toString()} and ${a.toString()} are allowed`)}return{type:u,value:r[u].decode(i.slice(4),o)}}})}function YS(r){let e=Object.values(r),t=Object.keys(r);return tr.from({byteLength:e.reduce((n,s)=>{if(s.byteLength===void 0)throw new Error("struct: all fields must be fixed-size");return n+s.byteLength},0),encode(n){let s=[];for(let o of t)try{let i=r[o].encode(n[o]);pn(s,i)}catch(i){throw new Error(`struct.${o}(${i?.toString()})`)}return Y(s)},decode(n,s){let o=Y(n),i={},c=0;return Object.entries(r).forEach(([a,u])=>{let d=o.slice(c,c+u.byteLength);try{Object.assign(i,{[a]:u.decode(d,s)})}catch(y){throw new Error(`struct.${a}(${y.toString()})`)}c=c+u.byteLength}),i}})}function QS(r,e){if(r.byteLength===void 0)throw new Error("array: itemCodec requires a byte length");let t=r.byteLength*e;return tr.from({byteLength:t,encode(n){try{let s=[];for(let o of n)pn(s,r.encode(o));return Y(s)}catch(s){throw new Error(`array(${s?.toString()})`)}},decode(n,s){let o=Y(n);if(o.byteLength!=t)throw new Error(`array: invalid buffer size, expected ${t}, but got ${o.byteLength}`);try{let i=[];for(let c=0;c<o.byteLength;c+=r.byteLength)i.push(r.decode(o.slice(c,c+r.byteLength),s));return i}catch(i){throw new Error(`array(${i?.toString()})`)}}})}function Wn(r,e=!1){return tr.from({byteLength:r,encode:t=>e?He(t,r):ds(t,r),decode:t=>e?Ys(t):Na(t)})}function cc(r,e=!1){if(r>4)throw new Error("uintNumber: byteLength must be less than or equal to 4");return Wn(r,e).map({outMap:t=>Number(t)})}var x3=class{static Base(){class e{static encode(n){throw new Error("encode not implemented, use @ccc.mol.codec to decorate your type")}static decode(n){throw new Error("decode not implemented, use @ccc.mol.codec to decorate your type")}static fromBytes(n){throw new Error("fromBytes not implemented, use @ccc.mol.codec to decorate your type")}static from(n){throw new Error("from not implemented")}toBytes(){return this.constructor.encode(this)}clone(){return this.constructor.fromBytes(this.toBytes())}eq(n){return this===n?!0:_u(this.toBytes(),(this.constructor?.from(n)??n).toBytes())}hash(){return br(this.toBytes())}}return e.encode=void 0,e.decode=void 0,e.fromBytes=void 0,e}};function e_(r){return function(e,...t){return e.byteLength=r.byteLength,e.encode===void 0&&(e.encode=function(n){return r.encode(n)}),e.decode===void 0&&(e.decode=function(n){return e.from(r.decode(n))}),e.fromBytes===void 0&&(e.fromBytes=function(n){return e.from(r.decode(n))}),e}}var w3=cc(1,!0),t_=wr(w3),r_=xr(w3),O8=cc(2,!0),n_=cc(2),v3=O8,s_=wr(v3),o_=xr(v3),D8=cc(4,!0),i_=cc(4),S3=D8,c_=wr(S3),a_=xr(S3),P8=Wn(8,!0),f_=Wn(8),_3=P8,u_=wr(_3),l_=xr(_3),M8=Wn(16,!0),d_=Wn(16),T3=M8,p_=wr(T3),h_=xr(T3),R8=Wn(32,!0),m_=Wn(32),E3=R8,y_=wr(E3),g_=xr(E3),N8=Wn(64,!0),b_=Wn(64),A3=N8,x_=wr(A3),w_=xr(A3),k3=gp({encode:r=>Y(r),decode:r=>j(r)}),v_=wr(k3),S_=xr(k3),C3=tr.from({byteLength:1,encode:r=>Y(r?[1]:[0]),decode:r=>Y(r)[0]!==0}),__=wr(C3),T_=xr(C3),B3=tr.from({byteLength:4,encode:r=>Y(r),decode:r=>j(r)}),E_=wr(B3),A_=xr(B3),I3=tr.from({byteLength:8,encode:r=>Y(r),decode:r=>j(r)}),k_=wr(I3),C_=xr(I3),O3=tr.from({byteLength:16,encode:r=>Y(r),decode:r=>j(r)}),B_=wr(O3),I_=xr(O3),D3=tr.from({byteLength:32,encode:r=>Y(r),decode:r=>j(r)}),O_=wr(D3),D_=xr(D3),P3=gp({encode:r=>Y(r,"utf8"),decode:r=>Zs(r,"utf8")}),P_=xr(P3),M_=wr(P3);var bp={type:1,data:0,data1:2,data2:4},Hu={1:"type",0:"data",2:"data1",4:"data2"},M3=Object.keys(bp);var R_=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ac,xp=K.Codec.from({byteLength:1,encode:Fa,decode:$a});function ro(r){let e=(()=>{if(typeof r=="number")return Hu[r];if(typeof r=="bigint")return Hu[Number(r)];if(M3.includes(r))return r})();if(e===void 0)throw new Error(`Invalid hash type ${r}`);return e}function Fa(r){return Y([bp[ro(r)]])}function $a(r){return Hu[Y(r)[0]]}var me=ac=class extends K.Entity.Base(){constructor(e,t,n){super(),this.codeHash=e,this.hashType=t,this.args=n}get occupiedSize(){return 33+Y(this.args).length}clone(){return new ac(this.codeHash,this.hashType,this.args)}eq(e){return e=ac.from(e),this.args===e.args&&this.codeHash===e.codeHash&&this.hashType===e.hashType}static from(e){return e instanceof ac?e:new ac(j(e.codeHash),ro(e.hashType),j(e.args))}static async fromKnownScript(e,t,n){let s=await e.getKnownScript(t);return new ac(s.codeHash,s.hashType,j(n))}};me=ac=R_([K.codec(K.table({codeHash:K.Byte32,hashType:xp,args:K.Bytes}))],me);var Uu=K.option(me),R3=K.vector(me);var wp={code:0,depGroup:1},Fu={0:"code",1:"depGroup"},N_=Object.keys(wp);var hs=class extends Error{constructor(e,t){let n=F(e),s=t?.isForChange??!1;super(`Insufficient CKB, need ${Iu(n)} extra CKB${s?" for the change cell":""}`),this.amount=n,this.isForChange=s}},fc=class extends Error{constructor(e,t){let n=F(e),s=me.from(t);super(`Insufficient coin, need ${n} extra coin`),this.amount=n,this.type=s}};var dc=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},qa,$u,uc,qu,ju,vp,oo,Sp=K.Codec.from({byteLength:1,encode:_p,decode:Tp});function sc(r){let e=typeof r=="number"?Fu[r]:typeof r=="bigint"?Fu[Number(r)]:r;if(e===void 0)throw new Error(`Invalid dep type ${r}`);return e}function _p(r){return Y([wp[sc(r)]])}function Tp(r){return Fu[Y(r)[0]]}var je=qa=class extends K.Entity.Base(){constructor(e,t){super(),this.txHash=e,this.index=t}static from(e){return e instanceof qa?e:new qa(j(e.txHash),F(e.index))}clone(){return new qa(this.txHash,this.index)}eq(e){return e=qa.from(e),this.txHash===e.txHash&&this.index===e.index}};je=qa=dc([K.codec(K.struct({txHash:K.Byte32,index:K.Uint32}))],je);var en=$u=class extends K.Entity.Base(){constructor(e,t,n){super(),this.capacity=e,this.lock=t,this.type=n}get occupiedSize(){return 8+this.lock.occupiedSize+(this.type?.occupiedSize??0)}static from(e,t){let n=e instanceof $u?e:new $u(F(e.capacity??0),me.from(e.lock),fe(me.from,e.type));return n.capacity===Je&&t!=null&&(n.capacity=no(n.occupiedSize+Y(t).length)),n}clone(){return new $u(this.capacity,this.lock.clone(),this.type?.clone())}};en=$u=dc([K.codec(K.table({capacity:K.Uint64,lock:me,type:Uu}))],en);var Ep=K.vector(en),ms=class r{constructor(e,t,n){this.cellOutput=e,this.outputData=t,this.outPoint=n}static from(e){if(e instanceof r)return e;let t=j(e.outputData??"0x");return new r(en.from(e.cellOutput,t),t,fe(je.from,e.outPoint??e.previousOutput))}get occupiedSize(){return this.cellOutput.occupiedSize+Y(this.outputData).byteLength}get capacityFree(){return this.cellOutput.capacity-no(this.occupiedSize)}async isNervosDao(e,t){let{type:n}=this.cellOutput,s=await e.getKnownScript(te.NervosDao);if(!n||n.codeHash!==s.codeHash||n.hashType!==s.hashType)return!1;let o=F(this.outputData)!==Je;return!t||t==="deposited"&&!o||t==="withdrew"&&o}clone(){return new r(this.cellOutput.clone(),this.outputData,this.outPoint?.clone())}},Vt=class r extends ms{constructor(e,t,n){super(t,n,e),this.outPoint=e}static from(e){return e instanceof r?e:new r(je.from(e.outPoint??e.previousOutput),en.from(e.cellOutput,e.outputData),j(e.outputData??"0x"))}async getDaoProfit(e){if(!await this.isNervosDao(e,"withdrew"))return Je;let{depositHeader:t,withdrawHeader:n}=await this.getNervosDaoInfo(e);if(!n||!t)throw new Error(`Unable to get headers of a Nervos DAO cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return Cp(this.capacityFree,t,n)}async getNervosDaoInfo(e){if(!await this.isNervosDao(e))return{};if(F(this.outputData)===Je){let s=await e.getCellWithHeader(this.outPoint);if(!s?.header)throw new Error(`Unable to get header of a Nervos DAO deposited cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return{depositHeader:s.header}}let[t,n]=await Promise.all([e.getHeaderByNumber(Ys(this.outputData)),e.getCellWithHeader(this.outPoint)]);if(!n?.header||!t)throw new Error(`Unable to get headers of a Nervos DAO withdrew cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return{depositHeader:t,withdrawHeader:n.header}}clone(){return new r(this.outPoint.clone(),this.cellOutput.clone(),this.outputData)}};function Ha(r){return[F(r[0]),F(r[1]),F(r[2])]}function Mu(r){let e=F(j(r));return[e&F("0xffffff"),e>>F(24)&F("0xffff"),e>>F(40)&F("0xffff")]}function N3(r){let e=Ha(r);return Rt(F(e[0])+(F(e[1])<<F(24))+(F(e[2])<<F(40)))}var Go=uc=class extends K.Entity.Base(){constructor(e,t,n){super(),this.relative=e,this.metric=t,this.value=n}clone(){return new uc(this.relative,this.metric,this.value)}static from(e){return e instanceof uc?e:typeof e=="object"&&"relative"in e?new uc(e.relative,e.metric,F(e.value)):uc.fromNum(e)}toNum(){return this.value|(this.relative==="absolute"?Je:F("0x8000000000000000"))|{blockNumber:F("0x0000000000000000"),epoch:F("0x2000000000000000"),timestamp:F("0x4000000000000000")}[this.metric]}static fromNum(e){let t=F(e),n=t>>F(63)===Je?"absolute":"relative",s=["blockNumber","epoch","timestamp"][Number(t>>F(61)&F(3))],o=t&F("0x00ffffffffffffff");return new uc(n,s,o)}};Go=uc=dc([K.codec(K.Uint64.mapIn(r=>Go.from(r).toNum()))],Go);var Nr=qu=class extends K.Entity.Base(){constructor(e,t,n,s){super(),this.previousOutput=e,this.since=t,this.cellOutput=n,this.outputData=s}static from(e){return e instanceof qu?e:new qu(je.from("previousOutput"in e?e.previousOutput:e.outPoint),Go.from(e.since??0).toNum(),fe(en.from,e.cellOutput),fe(j,e.outputData))}async getCell(e){if(await this.completeExtraInfos(e),!this.cellOutput||!this.outputData)throw new Error("Unable to complete input");return Vt.from({outPoint:this.previousOutput,cellOutput:this.cellOutput,outputData:this.outputData})}async completeExtraInfos(e){if(this.cellOutput&&this.outputData)return;let t=await e.getCell(this.previousOutput);t&&(this.cellOutput=t.cellOutput,this.outputData=t.outputData)}async getExtraCapacity(e){return(await this.getCell(e)).getDaoProfit(e)}clone(){return new qu(this.previousOutput.clone(),this.since,this.cellOutput?.clone(),this.outputData)}};Nr=qu=dc([K.codec(K.struct({since:Go,previousOutput:je}).mapIn(r=>Nr.from(r)))],Nr);var Ap=K.vector(Nr),Rr=ju=class extends K.Entity.Base(){constructor(e,t){super(),this.outPoint=e,this.depType=t}static from(e){return e instanceof ju?e:new ju(je.from(e.outPoint),sc(e.depType))}clone(){return new ju(this.outPoint.clone(),this.depType)}};Rr=ju=dc([K.codec(K.struct({outPoint:je,depType:Sp}))],Rr);var kp=K.vector(Rr),rr=vp=class extends K.Entity.Base(){constructor(e,t,n){super(),this.lock=e,this.inputType=t,this.outputType=n}static from(e){return e instanceof vp?e:new vp(fe(j,e.lock),fe(j,e.inputType),fe(j,e.outputType))}};rr=vp=dc([K.codec(K.table({lock:K.BytesOpt,inputType:K.BytesOpt,outputType:K.BytesOpt}))],rr);function lc(r){let e=Y(r).slice(0,16);return e.length===0?Je:Ys(e)}var zu=K.table({version:K.Uint32,cellDeps:kp,headerDeps:K.Byte32Vec,inputs:Ap,outputs:Ep,outputsData:K.BytesVec}),Se=oo=class extends K.Entity.Base(){constructor(e,t,n,s,o,i,c){super(),this.version=e,this.cellDeps=t,this.headerDeps=n,this.inputs=s,this.outputs=o,this.outputsData=i,this.witnesses=c}static default(){return new oo(0n,[],[],[],[],[],[])}copy(e){let t=oo.from(e);this.version=t.version,this.cellDeps=t.cellDeps,this.headerDeps=t.headerDeps,this.inputs=t.inputs,this.outputs=t.outputs,this.outputsData=t.outputsData,this.witnesses=t.witnesses}clone(){return new oo(this.version,this.cellDeps.map(e=>e.clone()),this.headerDeps.map(e=>e),this.inputs.map(e=>e.clone()),this.outputs.map(e=>e.clone()),this.outputsData.map(e=>e),this.witnesses.map(e=>e))}static from(e){if(e instanceof oo)return e;let t=e.outputs?.map((s,o)=>en.from(s,e.outputsData?.[o]??[]))??[],n=t.map((s,o)=>j(e.outputsData?.[o]??"0x"));return e.outputsData!=null&&n.length<e.outputsData.length&&n.push(...e.outputsData.slice(n.length).map(s=>j(s))),new oo(F(e.version??0),e.cellDeps?.map(s=>Rr.from(s))??[],e.headerDeps?.map(j)??[],e.inputs?.map(s=>Nr.from(s))??[],t,n,e.witnesses?.map(j)??[])}static fromLumosSkeleton(e){return oo.from({version:0n,cellDeps:e.cellDeps.toArray(),headerDeps:e.headerDeps.toArray(),inputs:e.inputs.toArray().map((t,n)=>{if(!t.outPoint)throw new Error("outPoint is required in input");return Nr.from({previousOutput:t.outPoint,since:e.inputSinces.get(n,"0x0"),cellOutput:t.cellOutput,outputData:t.data})}),outputs:e.outputs.toArray().map(t=>t.cellOutput),outputsData:e.outputs.toArray().map(t=>t.data),witnesses:e.witnesses.toArray()})}stringify(){return JSON.stringify(this,(e,t)=>typeof t=="bigint"?Rt(t):t)}rawToBytes(){return zu.encode(this)}hash(){return br(this.rawToBytes())}hashFull(){return br(this.toBytes())}static hashWitnessToHasher(e,t){let n=Y(j(e));t.update(He(n.length,8)),t.update(n)}async getSignHashInfo(e,t,n=new zo){let s=me.from(e),o=-1;n.update(this.hash());for(let i=0;i<this.witnesses.length;i+=1){let c=this.inputs[i];if(c){let{cellOutput:a}=await c.getCell(t);if(!s.eq(a.lock))continue;o===-1&&(o=i)}if(o===-1)return;oo.hashWitnessToHasher(this.witnesses[i],n)}if(o!==-1)return{message:n.digest(),position:o}}async findInputIndexByLockId(e,t){let n=me.from({...e,args:"0x"});for(let s=0;s<this.inputs.length;s+=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.codeHash===o.lock.codeHash&&n.hashType===o.lock.hashType)return s}}async findInputIndexByLock(e,t){let n=me.from(e);for(let s=0;s<this.inputs.length;s+=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.eq(o.lock))return s}}async findLastInputIndexByLock(e,t){let n=me.from(e);for(let s=this.inputs.length-1;s>=0;s-=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.eq(o.lock))return s}}addCellDeps(...e){e.flat().forEach(t=>{let n=Rr.from(t);this.cellDeps.some(s=>s.eq(n))||this.cellDeps.push(n)})}addCellDepsAtStart(...e){e.flat().forEach(t=>{let n=Rr.from(t);this.cellDeps.some(s=>s.eq(n))||this.cellDeps.unshift(n)})}async addCellDepInfos(e,...t){this.addCellDeps(await e.getCellDeps(...t))}async addCellDepsOfKnownScripts(e,...t){await Promise.all(t.flat().map(async n=>this.addCellDepInfos(e,(await e.getKnownScript(n)).cellDeps)))}setOutputDataAt(e,t){this.outputsData.length<e&&this.outputsData.push(...Array.from(new Array(e-this.outputsData.length),()=>"0x")),this.outputsData[e]=j(t)}getInput(e){return this.inputs[Number(F(e))]}addInput(e){return this.witnesses.length>this.inputs.length&&this.witnesses.splice(this.inputs.length,0,"0x"),this.inputs.push(Nr.from(e))}getOutput(e){let t=Number(F(e));if(!(t>=this.outputs.length))return ms.from({cellOutput:this.outputs[t],outputData:this.outputsData[t]??"0x"})}get outputCells(){let{outputs:e,outputsData:t}=this;function*n(){for(let s=0;s<e.length;s++)yield ms.from({cellOutput:e[s],outputData:t[s]??"0x"})}return n()}addOutput(e,t){let n="cellOutput"in e?ms.from(e):ms.from({cellOutput:e,outputData:t}),s=this.outputs.push(n.cellOutput);return this.setOutputDataAt(s-1,n.outputData),s}getWitnessArgsAt(e){let t=this.witnesses[e];return(t??"0x")!=="0x"?rr.fromBytes(t):void 0}setWitnessArgsAt(e,t){this.setWitnessAt(e,t.toBytes())}setWitnessAt(e,t){this.witnesses.length<e&&this.witnesses.push(...Array.from(new Array(e-this.witnesses.length),()=>"0x")),this.witnesses[e]=j(t)}async prepareSighashAllWitness(e,t,n){let s=await this.findInputIndexByLock(e,n);if(s===void 0)return;let o=this.getWitnessArgsAt(s)??rr.from({});o.lock=j(Array.from(new Array(t),()=>0)),this.setWitnessArgsAt(s,o)}async getInputsCapacityExtra(e){return yn(this.inputs,async(t,n)=>t+await n.getExtraCapacity(e),F(0))}async getInputsCapacity(e){return await yn(this.inputs,async(t,n)=>{let{cellOutput:{capacity:s}}=await n.getCell(e);return t+s},F(0))+await this.getInputsCapacityExtra(e)}getOutputsCapacity(){return this.outputs.reduce((e,{capacity:t})=>e+t,F(0))}async getInputsUdtBalance(e,t){return yn(this.inputs,async(n,s)=>{let{cellOutput:o,outputData:i}=await s.getCell(e);if(o.type?.eq(t))return n+lc(i)},F(0))}getOutputsUdtBalance(e){return this.outputs.reduce((t,n,s)=>n.type?.eq(e)?t+lc(this.outputsData[s]):t,F(0))}async completeInputs(e,t,n,s){let o=[],i=s,c=!1;for await(let a of e.findCells(t,!0)){if(this.inputs.some(({previousOutput:y})=>y.eq(a.outPoint)))continue;let u=o.push(a),d=await Promise.resolve(n(i,a,u-1,o));if(d===void 0){c=!0;break}i=d}return o.forEach(a=>this.addInput(a)),c?{addedCount:o.length}:{addedCount:o.length,accumulated:i}}async completeInputsByCapacity(e,t,n){let s=this.getOutputsCapacity()+F(t??0),o=await this.getInputsCapacity(e.client);if(o>=s)return 0;let{addedCount:i,accumulated:c}=await this.completeInputs(e,n??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},(a,{cellOutput:{capacity:u}})=>{let d=a+u;return d>=s?void 0:d},o);if(c===void 0)return i;throw new hs(s-c)}async completeInputsAll(e,t){let{addedCount:n}=await this.completeInputs(e,t??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},(s,{cellOutput:{capacity:o}})=>s+o,Je);return n}async completeInputsByUdt(e,t,n){let s=this.getOutputsUdtBalance(t)+F(n??0);if(s===F(0))return 0;let[o,i]=await yn(this.inputs,async([u,d],y)=>{let{cellOutput:v,outputData:_}=await y.getCell(e.client);if(v.type?.eq(t))return[u+lc(_),d+1]},[F(0),0]);if(o===s||o>=s&&i>=2)return 0;let{addedCount:c,accumulated:a}=await this.completeInputs(e,{script:t,outputDataLenRange:[16,F("0xffffffff")]},(u,{outputData:d},y,v)=>{let _=lc(d),T=u+_;return T===s||T>=s&&i+v.length>=2?void 0:T},o);if(a===void 0||a>=s)return c;throw new fc(s-a,t)}async completeInputsAddOne(e,t){let{addedCount:n,accumulated:s}=await this.completeInputs(e,t??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},()=>{},!0);if(s===void 0)return n;throw new Error("Insufficient CKB, need at least one new cell")}async completeInputsAtLeastOne(e,t){return this.inputs.length>0?0:this.completeInputsAddOne(e,t)}async getFee(e){return await this.getInputsCapacity(e)-this.getOutputsCapacity()}async getFeeRate(e){return await this.getFee(e)*F(1e3)/F(this.toBytes().length+4)}estimateFee(e){let t=this.toBytes().length+4;return(F(t)*F(e)+F(999))/F(1e3)}async completeFee(e,t,n,s,o){let i=n??await e.client.getFeeRate(o?.feeRateBlockRange,o);await this.getInputsCapacity(e.client);let c=Je,a=Je,u=0;for(;;){u+=await(async()=>{if(!(o?.shouldAddInputs??!0))return 0;try{return await this.completeInputsByCapacity(e,c+a,s)}catch(T){throw T instanceof hs&&a!==Je?new hs(T.amount,{isForChange:!0}):T}})();let d=await this.getFee(e.client);if(d<c+a)throw new hs(c+a-d,{isForChange:a!==Je});if(await e.prepareTransaction(this),c===Je&&(c=this.estimateFee(i)),d===c)return[u,!1];let y=this.clone(),v=F(await Promise.resolve(t(y,d-c)));if(v>Je){a=v;continue}if(await y.getFee(e.client)!==c)throw new Error("The change function doesn't use all available capacity");await e.prepareTransaction(y);let _=y.estimateFee(i);if(c>_)throw new Error("The change function removed existed transaction data");if(c===_)return this.copy(y),[u,!0];c=_}}completeFeeChangeToLock(e,t,n,s,o){let i=me.from(t);return this.completeFee(e,(c,a)=>{let u=en.from({capacity:0,lock:i}),d=no(u.occupiedSize);return a<d?d:(u.capacity=a,c.addOutput(u),0)},n,s,o)}async completeFeeBy(e,t,n,s){let{script:o}=await e.getRecommendedAddressObj();return this.completeFeeChangeToLock(e,o,t,n,s)}completeFeeChangeToOutput(e,t,n,s,o){let i=Number(F(t));if(!this.outputs[i])throw new Error("Non-existed output to change");return this.completeFee(e,(c,a)=>(c.outputs[i].capacity+=a,0),n,s,o)}};Se=oo=dc([K.codec(K.table({raw:zu,witnesses:K.BytesVec}).mapIn(r=>{let e=Se.from(r);return{raw:e,witnesses:e.witnesses}}).mapOut(r=>Se.from({...r.raw,witnesses:r.witnesses})))],Se);function Cp(r,e,t){let n=Qr.from(e),s=Qr.from(t),o=F(r);return o*s.dao.ar/n.dao.ar-o}function L3(r,e){let t=Qr.from(r).epoch,n=Qr.from(e).epoch,s=n[0]-t[0];return s%F(180)!==F(0)||t[1]*n[2]<=t[2]*n[1]?[t[0]+(s/F(180)+F(1))*F(180),t[1],t[2]]:[t[0]+s/F(180)*F(180),t[1],t[2]]}function H3(r,e){return br(Nr.from(r).toBytes(),Vn(e,8))}var ja=Ge(Jr(),1);function U3(r){try{let{words:e,prefix:t}=ja.bech32m.decode(r,Vu),n=ja.bech32m.fromWords(e),s=n[0],o=n.slice(1);if(s===bn.Full)return{prefix:t,format:bn.Full,payload:o}}catch{}try{let{prefix:e,words:t}=ja.bech32.decode(r,Vu),n=ja.bech32.fromWords(t),s=n[0],o=n.slice(1);if([bn.FullData,bn.FullType,bn.Short].includes(s))return{prefix:e,format:s,payload:o}}catch{}throw Error(`Unknown address format ${r}`)}async function F3(r,e,t,n){if(e===bn.Full){if(t.length<33)throw new Error(`Invalid full address without enough payload ${j(t)}`);return{script:{codeHash:t.slice(0,32),hashType:$a(t.slice(32,33)),args:t.slice(33)},prefix:r}}if(e===bn.FullData){if(t.length<32)throw new Error(`Invalid full data address without enough payload ${j(t)}`);return{script:{codeHash:t.slice(0,32),hashType:"data",args:t.slice(32)},prefix:r}}if(e===bn.FullType){if(t.length<32)throw new Error(`Invalid full type address without enough payload ${j(t)}`);return{script:{codeHash:t.slice(0,32),hashType:"type",args:t.slice(32)},prefix:r}}if(t.length!==21)throw new Error(`Invalid short address without enough payload ${j(t)}`);let s=[te.Secp256k1Blake160,te.Secp256k1Multisig,te.AnyoneCanPay][t[0]];if(s===void 0)throw new Error(`Invalid short address with unknown script ${j(t)}`);return{script:await me.fromKnownScript(n,s,t.slice(1)),prefix:r}}var bn;(function(r){r[r.Full=0]="Full",r[r.Short=1]="Short",r[r.FullData=2]="FullData",r[r.FullType=4]="FullType"})(bn||(bn={}));var Vu=1023;var Lt=class r{constructor(e,t){this.script=e,this.prefix=t}static from(e){return e instanceof r?e:new r(me.from(e.script),e.prefix)}static async fromString(e,t){let{prefix:n,format:s,payload:o}=U3(e),i=t[n]??t;if(!i)throw new Error(`Unknown address prefix ${n}`);let c=i.addressPrefix;if(c!==n)throw new Error(`Unknown address prefix ${n}, expected ${c}`);return r.from(await F3(n,s,o,i))}static fromScript(e,t){return r.from({script:e,prefix:t.addressPrefix})}static async fromKnownScript(e,t,n){return r.from({script:await me.fromKnownScript(e,t,n),prefix:e.addressPrefix})}toString(){let e=Ae([bn.Full],Y(this.script.codeHash),Fa(this.script.hashType),Y(this.script.args));return $3.bech32m.encode(this.prefix,$3.bech32m.toWords(e),Vu)}};function q3(r){return r instanceof Uint8Array||r!=null&&typeof r=="object"&&r.constructor.name==="Uint8Array"}function De(r,...e){if(!q3(r))throw new Error("Uint8Array expected");if(e.length>0&&!e.includes(r.length))throw new Error(`Uint8Array expected of length ${e}, not of length=${r.length}`)}function Ku(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function j3(r,e){De(r);let t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Bp=r=>new Uint8Array(r.buffer,r.byteOffset,r.byteLength);var Ce=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),za=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),L_=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!L_)throw new Error("Non little-endian hardware is not supported");function H_(r){if(typeof r!="string")throw new Error(`string expected, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function Va(r){if(typeof r=="string")r=H_(r);else if(q3(r))r=r.slice();else throw new Error(`Uint8Array expected, got ${typeof r}`);return r}function z3(r,e){if(r.length!==e.length)return!1;let t=0;for(let n=0;n<r.length;n++)t|=r[n]^e[n];return t===0}var pc=(r,e)=>(Object.assign(e,r),e);function Ip(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let s=BigInt(32),o=BigInt(4294967295),i=Number(t>>s&o),c=Number(t&o),a=n?4:0,u=n?0:4;r.setUint32(e+a,i,n),r.setUint32(e+u,c,n)}var io=16,K3=new Uint8Array(16),ys=Ce(K3),U_=225,F_=(r,e,t,n)=>{let s=n&1;return{s3:t<<31|n>>>1,s2:e<<31|t>>>1,s1:r<<31|e>>>1,s0:r>>>1^U_<<24&-(s&1)}},Mn=r=>(r>>>0&255)<<24|(r>>>8&255)<<16|(r>>>16&255)<<8|r>>>24&255|0;function $_(r){r.reverse();let e=r[15]&1,t=0;for(let n=0;n<r.length;n++){let s=r[n];r[n]=s>>>1|t,t=(s&1)<<7}return r[0]^=-e&225,r}var q_=r=>r>64*1024?8:r>1024?4:2,Op=class{constructor(e,t){this.blockLen=io,this.outputLen=io,this.s0=0,this.s1=0,this.s2=0,this.s3=0,this.finished=!1,e=Va(e),De(e,16);let n=za(e),s=n.getUint32(0,!1),o=n.getUint32(4,!1),i=n.getUint32(8,!1),c=n.getUint32(12,!1),a=[];for(let T=0;T<128;T++)a.push({s0:Mn(s),s1:Mn(o),s2:Mn(i),s3:Mn(c)}),{s0:s,s1:o,s2:i,s3:c}=F_(s,o,i,c);let u=q_(t||1024);if(![1,2,4,8].includes(u))throw new Error(`ghash: wrong window size=${u}, should be 2, 4 or 8`);this.W=u;let y=128/u,v=this.windowSize=2**u,_=[];for(let T=0;T<y;T++)for(let A=0;A<v;A++){let B=0,I=0,P=0,M=0;for(let L=0;L<u;L++){if(!(A>>>u-L-1&1))continue;let{s0:Z,s1:C,s2:J,s3:x}=a[u*T+L];B^=Z,I^=C,P^=J,M^=x}_.push({s0:B,s1:I,s2:P,s3:M})}this.t=_}_updateBlock(e,t,n,s){e^=this.s0,t^=this.s1,n^=this.s2,s^=this.s3;let{W:o,t:i,windowSize:c}=this,a=0,u=0,d=0,y=0,v=(1<<o)-1,_=0;for(let T of[e,t,n,s])for(let A=0;A<4;A++){let B=T>>>8*A&255;for(let I=8/o-1;I>=0;I--){let P=B>>>o*I&v,{s0:M,s1:L,s2:U,s3:Z}=i[_*c+P];a^=M,u^=L,d^=U,y^=Z,_+=1}}this.s0=a,this.s1=u,this.s2=d,this.s3=y}update(e){e=Va(e),Ku(this);let t=Ce(e),n=Math.floor(e.length/io),s=e.length%io;for(let o=0;o<n;o++)this._updateBlock(t[o*4+0],t[o*4+1],t[o*4+2],t[o*4+3]);return s&&(K3.set(e.subarray(n*io)),this._updateBlock(ys[0],ys[1],ys[2],ys[3]),ys.fill(0)),this}destroy(){let{t:e}=this;for(let t of e)t.s0=0,t.s1=0,t.s2=0,t.s3=0}digestInto(e){Ku(this),j3(e,this),this.finished=!0;let{s0:t,s1:n,s2:s,s3:o}=this,i=Ce(e);return i[0]=t,i[1]=n,i[2]=s,i[3]=o,e}digest(){let e=new Uint8Array(io);return this.digestInto(e),this.destroy(),e}},V3=class extends Op{constructor(e,t){e=Va(e);let n=$_(e.slice());super(n,t),n.fill(0)}update(e){e=Va(e),Ku(this);let t=Ce(e),n=e.length%io,s=Math.floor(e.length/io);for(let o=0;o<s;o++)this._updateBlock(Mn(t[o*4+3]),Mn(t[o*4+2]),Mn(t[o*4+1]),Mn(t[o*4+0]));return n&&(K3.set(e.subarray(s*io)),this._updateBlock(Mn(ys[3]),Mn(ys[2]),Mn(ys[1]),Mn(ys[0])),ys.fill(0)),this}digestInto(e){Ku(this),j3(e,this),this.finished=!0;let{s0:t,s1:n,s2:s,s3:o}=this,i=Ce(e);return i[0]=t,i[1]=n,i[2]=s,i[3]=o,e.reverse()}};function L8(r){let e=(n,s)=>r(s,n.length).update(Va(n)).digest(),t=r(new Uint8Array(16),0);return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=(n,s)=>r(n,s),e}var W3=L8((r,e)=>new Op(r,e)),H8=L8((r,e)=>new V3(r,e));var Lr=16,J3=4,Dp=new Uint8Array(Lr),j_=283;function X3(r){return r<<1^j_&-(r>>7)}function Ka(r,e){let t=0;for(;e>0;e>>=1)t^=r&-(e&1),r=X3(r);return t}var G3=(()=>{let r=new Uint8Array(256);for(let t=0,n=1;t<256;t++,n^=X3(n))r[t]=n;let e=new Uint8Array(256);e[0]=99;for(let t=0;t<255;t++){let n=r[255-t];n|=n<<8,e[r[t]]=(n^n>>4^n>>5^n>>6^n>>7^99)&255}return e})(),z_=G3.map((r,e)=>G3.indexOf(e)),V_=r=>r<<24|r>>>8,Z3=r=>r<<8|r>>>24;function U8(r,e){if(r.length!==256)throw new Error("Wrong sbox length");let t=new Uint32Array(256).map((u,d)=>e(r[d])),n=t.map(Z3),s=n.map(Z3),o=s.map(Z3),i=new Uint32Array(256*256),c=new Uint32Array(256*256),a=new Uint16Array(256*256);for(let u=0;u<256;u++)for(let d=0;d<256;d++){let y=u*256+d;i[y]=t[u]^n[d],c[y]=s[u]^o[d],a[y]=r[u]<<8|r[d]}return{sbox:r,sbox2:a,T0:t,T1:n,T2:s,T3:o,T01:i,T23:c}}var Y3=U8(G3,r=>Ka(r,3)<<24|r<<16|r<<8|Ka(r,2)),F8=U8(z_,r=>Ka(r,11)<<24|Ka(r,13)<<16|Ka(r,9)<<8|Ka(r,14)),K_=(()=>{let r=new Uint8Array(16);for(let e=0,t=1;e<16;e++,t=X3(t))r[e]=t;return r})();function Xo(r){De(r);let e=r.length;if(![16,24,32].includes(e))throw new Error(`aes: wrong key size: should be 16, 24 or 32, got: ${e}`);let{sbox2:t}=Y3,n=Ce(r),s=n.length,o=c=>gs(t,c,c,c,c),i=new Uint32Array(e+28);i.set(n);for(let c=s;c<i.length;c++){let a=i[c-1];c%s===0?a=o(V_(a))^K_[c/s-1]:s>6&&c%s===4&&(a=o(a)),i[c]=i[c-s]^a}return i}function $8(r){let e=Xo(r),t=e.slice(),n=e.length,{sbox2:s}=Y3,{T0:o,T1:i,T2:c,T3:a}=F8;for(let u=0;u<n;u+=4)for(let d=0;d<4;d++)t[u+d]=e[n-u-4+d];e.fill(0);for(let u=4;u<n-4;u++){let d=t[u],y=gs(s,d,d,d,d);t[u]=o[y&255]^i[y>>>8&255]^c[y>>>16&255]^a[y>>>24]}return t}function Jo(r,e,t,n,s,o){return r[t<<8&65280|n>>>8&255]^e[s>>>8&65280|o>>>24&255]}function gs(r,e,t,n,s){return r[e&255|t&65280]|r[n>>>16&255|s>>>16&65280]<<16}function Rn(r,e,t,n,s){let{sbox2:o,T01:i,T23:c}=Y3,a=0;e^=r[a++],t^=r[a++],n^=r[a++],s^=r[a++];let u=r.length/4-2;for(let T=0;T<u;T++){let A=r[a++]^Jo(i,c,e,t,n,s),B=r[a++]^Jo(i,c,t,n,s,e),I=r[a++]^Jo(i,c,n,s,e,t),P=r[a++]^Jo(i,c,s,e,t,n);e=A,t=B,n=I,s=P}let d=r[a++]^gs(o,e,t,n,s),y=r[a++]^gs(o,t,n,s,e),v=r[a++]^gs(o,n,s,e,t),_=r[a++]^gs(o,s,e,t,n);return{s0:d,s1:y,s2:v,s3:_}}function q8(r,e,t,n,s){let{sbox2:o,T01:i,T23:c}=F8,a=0;e^=r[a++],t^=r[a++],n^=r[a++],s^=r[a++];let u=r.length/4-2;for(let T=0;T<u;T++){let A=r[a++]^Jo(i,c,e,s,n,t),B=r[a++]^Jo(i,c,t,e,s,n),I=r[a++]^Jo(i,c,n,t,e,s),P=r[a++]^Jo(i,c,s,n,t,e);e=A,t=B,n=I,s=P}let d=r[a++]^gs(o,e,s,n,t),y=r[a++]^gs(o,t,e,s,n),v=r[a++]^gs(o,n,t,e,s),_=r[a++]^gs(o,s,n,t,e);return{s0:d,s1:y,s2:v,s3:_}}function Wa(r,e){if(!e)return new Uint8Array(r);if(De(e),e.length<r)throw new Error(`aes: wrong destination length, expected at least ${r}, got: ${e.length}`);return e}function W_(r,e,t,n){De(e,Lr),De(t);let s=t.length;n=Wa(s,n);let o=e,i=Ce(o),{s0:c,s1:a,s2:u,s3:d}=Rn(r,i[0],i[1],i[2],i[3]),y=Ce(t),v=Ce(n);for(let T=0;T+4<=y.length;T+=4){v[T+0]=y[T+0]^c,v[T+1]=y[T+1]^a,v[T+2]=y[T+2]^u,v[T+3]=y[T+3]^d;let A=1;for(let B=o.length-1;B>=0;B--)A=A+(o[B]&255)|0,o[B]=A&255,A>>>=8;({s0:c,s1:a,s2:u,s3:d}=Rn(r,i[0],i[1],i[2],i[3]))}let _=Lr*Math.floor(y.length/J3);if(_<s){let T=new Uint32Array([c,a,u,d]),A=Bp(T);for(let B=_,I=0;B<s;B++,I++)n[B]=t[B]^A[I]}return n}function Wu(r,e,t,n,s){De(t,Lr),De(n),s=Wa(n.length,s);let o=t,i=Ce(o),c=za(o),a=Ce(n),u=Ce(s),d=e?0:12,y=n.length,v=c.getUint32(d,e),{s0:_,s1:T,s2:A,s3:B}=Rn(r,i[0],i[1],i[2],i[3]);for(let P=0;P+4<=a.length;P+=4)u[P+0]=a[P+0]^_,u[P+1]=a[P+1]^T,u[P+2]=a[P+2]^A,u[P+3]=a[P+3]^B,v=v+1>>>0,c.setUint32(d,v,e),{s0:_,s1:T,s2:A,s3:B}=Rn(r,i[0],i[1],i[2],i[3]);let I=Lr*Math.floor(a.length/J3);if(I<y){let P=new Uint32Array([_,T,A,B]),M=Bp(P);for(let L=I,U=0;L<y;L++,U++)s[L]=n[L]^M[U]}return s}var Za=pc({blockSize:16,nonceLength:16},function(e,t){De(e),De(t,Lr);function n(s,o){let i=Xo(e),c=t.slice(),a=W_(i,c,s,o);return i.fill(0),c.fill(0),a}return{encrypt:(s,o)=>n(s,o),decrypt:(s,o)=>n(s,o)}});function j8(r){if(De(r),r.length%Lr!==0)throw new Error(`aes/(cbc-ecb).decrypt ciphertext should consist of blocks with size ${Lr}`)}function z8(r,e,t){let n=r.length,s=n%Lr;if(!e&&s!==0)throw new Error("aec/(cbc-ecb): unpadded plaintext with disabled padding");let o=Ce(r);if(e){let a=Lr-s;a||(a=Lr),n=n+a}let i=Wa(n,t),c=Ce(i);return{b:o,o:c,out:i}}function V8(r,e){if(!e)return r;let t=r.length;if(!t)throw new Error("aes/pcks5: empty ciphertext not allowed");let n=r[t-1];if(n<=0||n>16)throw new Error(`aes/pcks5: wrong padding byte: ${n}`);let s=r.subarray(0,-n);for(let o=0;o<n;o++)if(r[t-o-1]!==n)throw new Error("aes/pcks5: wrong padding");return s}function K8(r){let e=new Uint8Array(16),t=Ce(e);e.set(r);let n=Lr-r.length;for(let s=Lr-n;s<Lr;s++)e[s]=n;return t}var NL=pc({blockSize:16},function(e,t={}){De(e);let n=!t.disablePadding;return{encrypt:(s,o)=>{De(s);let{b:i,o:c,out:a}=z8(s,n,o),u=Xo(e),d=0;for(;d+4<=i.length;){let{s0:y,s1:v,s2:_,s3:T}=Rn(u,i[d+0],i[d+1],i[d+2],i[d+3]);c[d++]=y,c[d++]=v,c[d++]=_,c[d++]=T}if(n){let y=K8(s.subarray(d*4)),{s0:v,s1:_,s2:T,s3:A}=Rn(u,y[0],y[1],y[2],y[3]);c[d++]=v,c[d++]=_,c[d++]=T,c[d++]=A}return u.fill(0),a},decrypt:(s,o)=>{j8(s);let i=$8(e),c=Wa(s.length,o),a=Ce(s),u=Ce(c);for(let d=0;d+4<=a.length;){let{s0:y,s1:v,s2:_,s3:T}=q8(i,a[d+0],a[d+1],a[d+2],a[d+3]);u[d++]=y,u[d++]=v,u[d++]=_,u[d++]=T}return i.fill(0),V8(c,n)}}}),LL=pc({blockSize:16,nonceLength:16},function(e,t,n={}){De(e),De(t,16);let s=!n.disablePadding;return{encrypt:(o,i)=>{let c=Xo(e),{b:a,o:u,out:d}=z8(o,s,i),y=Ce(t),v=y[0],_=y[1],T=y[2],A=y[3],B=0;for(;B+4<=a.length;)v^=a[B+0],_^=a[B+1],T^=a[B+2],A^=a[B+3],{s0:v,s1:_,s2:T,s3:A}=Rn(c,v,_,T,A),u[B++]=v,u[B++]=_,u[B++]=T,u[B++]=A;if(s){let I=K8(o.subarray(B*4));v^=I[0],_^=I[1],T^=I[2],A^=I[3],{s0:v,s1:_,s2:T,s3:A}=Rn(c,v,_,T,A),u[B++]=v,u[B++]=_,u[B++]=T,u[B++]=A}return c.fill(0),d},decrypt:(o,i)=>{j8(o);let c=$8(e),a=Ce(t),u=Wa(o.length,i),d=Ce(o),y=Ce(u),v=a[0],_=a[1],T=a[2],A=a[3];for(let B=0;B+4<=d.length;){let I=v,P=_,M=T,L=A;v=d[B+0],_=d[B+1],T=d[B+2],A=d[B+3];let{s0:U,s1:Z,s2:C,s3:J}=q8(c,v,_,T,A);y[B++]=U^I,y[B++]=Z^P,y[B++]=C^M,y[B++]=J^L}return c.fill(0),V8(u,s)}}}),HL=pc({blockSize:16,nonceLength:16},function(e,t){De(e),De(t,16);function n(s,o,i){let c=Xo(e),a=s.length;i=Wa(a,i);let u=Ce(s),d=Ce(i),y=o?d:u,v=Ce(t),_=v[0],T=v[1],A=v[2],B=v[3];for(let P=0;P+4<=u.length;){let{s0:M,s1:L,s2:U,s3:Z}=Rn(c,_,T,A,B);d[P+0]=u[P+0]^M,d[P+1]=u[P+1]^L,d[P+2]=u[P+2]^U,d[P+3]=u[P+3]^Z,_=y[P++],T=y[P++],A=y[P++],B=y[P++]}let I=Lr*Math.floor(u.length/J3);if(I<a){({s0:_,s1:T,s2:A,s3:B}=Rn(c,_,T,A,B));let P=Bp(new Uint32Array([_,T,A,B]));for(let M=I,L=0;M<a;M++,L++)i[M]=s[M]^P[L];P.fill(0)}return c.fill(0),i}return{encrypt:(s,o)=>n(s,!0,o),decrypt:(s,o)=>n(s,!1,o)}});function W8(r,e,t,n,s){let o=r.create(t,n.length+(s?.length||0));s&&o.update(s),o.update(n);let i=new Uint8Array(16),c=za(i);return s&&Ip(c,0,BigInt(s.length*8),e),Ip(c,8,BigInt(n.length*8),e),o.update(i),o.digest()}var UL=pc({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){if(De(t),t.length===0)throw new Error("aes/gcm: empty nonce");let s=16;function o(c,a,u){let d=W8(W3,!1,c,u,n);for(let y=0;y<a.length;y++)d[y]^=a[y];return d}function i(){let c=Xo(e),a=Dp.slice(),u=Dp.slice();if(Wu(c,!1,u,u,a),t.length===12)u.set(t);else{let y=Dp.slice(),v=za(y);Ip(v,8,BigInt(t.length*8),!1),W3.create(a).update(t).update(y).digestInto(u)}let d=Wu(c,!1,u,Dp);return{xk:c,authKey:a,counter:u,tagMask:d}}return{encrypt:c=>{De(c);let{xk:a,authKey:u,counter:d,tagMask:y}=i(),v=new Uint8Array(c.length+s);Wu(a,!1,d,c,v);let _=o(u,y,v.subarray(0,v.length-s));return v.set(_,c.length),a.fill(0),v},decrypt:c=>{if(De(c),c.length<s)throw new Error(`aes/gcm: ciphertext less than tagLen (${s})`);let{xk:a,authKey:u,counter:d,tagMask:y}=i(),v=c.subarray(0,-s),_=c.subarray(-s),T=o(u,y,v);if(!z3(T,_))throw new Error("aes/gcm: invalid ghash tag");let A=Wu(a,!1,d,v);return u.fill(0),y.fill(0),a.fill(0),A}}}),Pp=(r,e,t)=>n=>{if(!Number.isSafeInteger(n)||e>n||n>t)throw new Error(`${r}: invalid value=${n}, must be [${e}..${t}]`)},FL=pc({blockSize:16,nonceLength:12,tagLength:16},function(e,t,n){let o=Pp("AAD",0,68719476736),i=Pp("plaintext",0,2**36),c=Pp("nonce",12,12),a=Pp("ciphertext",16,2**36+16);De(t),c(t.length),n&&(De(n),o(n.length));function u(){let v=e.length;if(v!==16&&v!==24&&v!==32)throw new Error(`key length must be 16, 24 or 32 bytes, got: ${v} bytes`);let _=Xo(e),T=new Uint8Array(v),A=new Uint8Array(16),B=Ce(t),I=0,P=B[0],M=B[1],L=B[2],U=0;for(let Z of[A,T].map(Ce)){let C=Ce(Z);for(let J=0;J<C.length;J+=2){let{s0:x,s1:m}=Rn(_,I,P,M,L);C[J+0]=x,C[J+1]=m,I=++U}}return _.fill(0),{authKey:A,encKey:Xo(T)}}function d(v,_,T){let A=W8(H8,!0,_,T,n);for(let U=0;U<12;U++)A[U]^=t[U];A[15]&=127;let B=Ce(A),I=B[0],P=B[1],M=B[2],L=B[3];return{s0:I,s1:P,s2:M,s3:L}=Rn(v,I,P,M,L),B[0]=I,B[1]=P,B[2]=M,B[3]=L,A}function y(v,_,T){let A=_.slice();return A[15]|=128,Wu(v,!0,A,T)}return{encrypt:v=>{De(v),i(v.length);let{encKey:_,authKey:T}=u(),A=d(_,T,v),B=new Uint8Array(v.length+16);return B.set(A,v.length),B.set(y(_,A,v)),_.fill(0),T.fill(0),B},decrypt:v=>{De(v),a(v.length);let _=v.subarray(-16),{encKey:T,authKey:A}=u(),B=y(T,_,v.subarray(0,-16)),I=d(T,A,B);if(T.fill(0),A.fill(0),!z3(_,I))throw new Error("invalid polyval tag");return B}}});var Mp=class extends us{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,Oa(e);let n=mn(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),tt(o)}update(e){return Dn(this),this.iHash.update(e),this}digestInto(e){Dn(this),ur(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}clone(){return this._cloneInto()}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},Zu=(r,e,t)=>new Mp(r,e).update(t).digest();Zu.create=(r,e)=>new Mp(r,e);function Z_(r,e,t,n){Oa(r);let s=lp({dkLen:32,asyncTick:10},n),{c:o,dkLen:i,asyncTick:c}=s;if(We(o),We(i),We(c),o<1)throw new Error("iterations (c) should be >= 1");let a=X2(e),u=X2(t),d=new Uint8Array(i),y=Zu.create(r,a),v=y._cloneInto().update(u);return{c:o,dkLen:i,asyncTick:c,DK:d,PRF:y,PRFSalt:v}}function G_(r,e,t,n,s){return r.destroy(),e.destroy(),n&&n.destroy(),tt(s),t}function Q3(r,e,t,n){let{c:s,dkLen:o,DK:i,PRF:c,PRFSalt:a}=Z_(r,e,t,n),u,d=new Uint8Array(4),y=Pa(d),v=new Uint8Array(c.outputLen);for(let _=1,T=0;T<o;_++,T+=c.outputLen){let A=i.subarray(T,T+c.outputLen);y.setInt32(0,_,!1),(u=a._cloneInto(u)).update(d).digestInto(v),A.set(v.subarray(0,A.length));for(let B=1;B<s;B++){c._cloneInto(u).update(v).digestInto(v);for(let I=0;I<A.length;I++)A[I]^=v[I]}}return G_(c,a,i,u,v)}var J_=Uint32Array.from([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Yo=new Uint32Array(64),Rp=class extends Ra{constructor(e=32){super(64,e,8,!1),this.A=Xs[0]|0,this.B=Xs[1]|0,this.C=Xs[2]|0,this.D=Xs[3]|0,this.E=Xs[4]|0,this.F=Xs[5]|0,this.G=Xs[6]|0,this.H=Xs[7]|0}get(){let{A:e,B:t,C:n,D:s,E:o,F:i,G:c,H:a}=this;return[e,t,n,s,o,i,c,a]}set(e,t,n,s,o,i,c,a){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=a|0}process(e,t){for(let y=0;y<16;y++,t+=4)Yo[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){let v=Yo[y-15],_=Yo[y-2],T=zn(v,7)^zn(v,18)^v>>>3,A=zn(_,17)^zn(_,19)^_>>>10;Yo[y]=A+Yo[y-7]+T+Yo[y-16]|0}let{A:n,B:s,C:o,D:i,E:c,F:a,G:u,H:d}=this;for(let y=0;y<64;y++){let v=zn(c,6)^zn(c,11)^zn(c,25),_=d+v+Y2(c,a,u)+J_[y]+Yo[y]|0,A=(zn(n,2)^zn(n,13)^zn(n,22))+Q2(n,s,o)|0;d=u,u=a,a=c,c=i+_|0,i=o,o=s,s=n,n=_+A|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,s,o,i,c,a,u,d)}roundClean(){tt(Yo)}destroy(){this.set(0,0,0,0,0,0,0,0),tt(this.buffer)}};var rt=Ma(()=>new Rp);function Z8(r,e,t,n,s,o){let i=r[e++]^t[n++],c=r[e++]^t[n++],a=r[e++]^t[n++],u=r[e++]^t[n++],d=r[e++]^t[n++],y=r[e++]^t[n++],v=r[e++]^t[n++],_=r[e++]^t[n++],T=r[e++]^t[n++],A=r[e++]^t[n++],B=r[e++]^t[n++],I=r[e++]^t[n++],P=r[e++]^t[n++],M=r[e++]^t[n++],L=r[e++]^t[n++],U=r[e++]^t[n++],Z=i,C=c,J=a,x=u,m=d,f=y,l=v,h=_,g=T,b=A,w=B,k=I,S=P,p=M,E=L,R=U;for(let N=0;N<8;N+=2)m^=we(Z+S|0,7),g^=we(m+Z|0,9),S^=we(g+m|0,13),Z^=we(S+g|0,18),b^=we(f+C|0,7),p^=we(b+f|0,9),C^=we(p+b|0,13),f^=we(C+p|0,18),E^=we(w+l|0,7),J^=we(E+w|0,9),l^=we(J+E|0,13),w^=we(l+J|0,18),x^=we(R+k|0,7),h^=we(x+R|0,9),k^=we(h+x|0,13),R^=we(k+h|0,18),C^=we(Z+x|0,7),J^=we(C+Z|0,9),x^=we(J+C|0,13),Z^=we(x+J|0,18),l^=we(f+m|0,7),h^=we(l+f|0,9),m^=we(h+l|0,13),f^=we(m+h|0,18),k^=we(w+b|0,7),g^=we(k+w|0,9),b^=we(g+k|0,13),w^=we(b+g|0,18),S^=we(R+E|0,7),p^=we(S+R|0,9),E^=we(p+S|0,13),R^=we(E+p|0,18);s[o++]=i+Z|0,s[o++]=c+C|0,s[o++]=a+J|0,s[o++]=u+x|0,s[o++]=d+m|0,s[o++]=y+f|0,s[o++]=v+l|0,s[o++]=_+h|0,s[o++]=T+g|0,s[o++]=A+b|0,s[o++]=B+w|0,s[o++]=I+k|0,s[o++]=P+S|0,s[o++]=M+p|0,s[o++]=L+E|0,s[o++]=U+R|0}function e4(r,e,t,n,s){let o=n+0,i=n+16*s;for(let c=0;c<16;c++)t[i+c]=r[e+(2*s-1)*16+c];for(let c=0;c<s;c++,o+=16,e+=16)Z8(t,i,r,e,t,o),c>0&&(i+=16),Z8(t,o,r,e+=16,t,i)}function X_(r,e,t){let n=lp({dkLen:32,asyncTick:10,maxmem:1073742848},t),{N:s,r:o,p:i,dkLen:c,asyncTick:a,maxmem:u,onProgress:d}=n;if(We(s),We(o),We(i),We(c),We(a),We(u),d!==void 0&&typeof d!="function")throw new Error("progressCb should be function");let y=128*o,v=y/4,_=Math.pow(2,32);if(s<=1||(s&s-1)!==0||s>_)throw new Error("Scrypt: N must be larger than 1, a power of 2, and less than 2^32");if(i<0||i>(_-1)*32/y)throw new Error("Scrypt: p must be a positive integer less than or equal to ((2^32 - 1) * 32) / (128 * r)");if(c<0||c>(_-1)*32)throw new Error("Scrypt: dkLen should be positive integer less than or equal to (2^32 - 1) * 32");if(y*(s+i)>u)throw new Error("Scrypt: memused is bigger than maxMem. Expected 128 * r * (N + p) > maxmem of "+u);let A=Q3(rt,r,e,{c:1,dkLen:y*i}),B=jn(A),I=jn(new Uint8Array(y*s)),P=jn(new Uint8Array(y)),M=()=>{};if(d){let L=2*s*i,U=Math.max(Math.floor(L/1e4),1),Z=0;M=()=>{Z++,d&&(!(Z%U)||Z===L)&&d(Z/L)}}return{N:s,r:o,p:i,dkLen:c,blockSize32:v,V:I,B32:B,B:A,tmp:P,blockMixCb:M,asyncTick:a}}function Y_(r,e,t,n,s){let o=Q3(rt,r,t,{c:1,dkLen:e});return tt(t,n,s),o}async function Ga(r,e,t){let{N:n,r:s,p:o,dkLen:i,blockSize32:c,V:a,B32:u,B:d,tmp:y,blockMixCb:v,asyncTick:_}=X_(r,e,t);hn(u);for(let T=0;T<o;T++){let A=c*T;for(let I=0;I<c;I++)a[I]=u[A+I];let B=0;await up(n-1,_,()=>{e4(a,B,a,B+=c,s),v()}),e4(a,(n-1)*c,u,A,s),v(),await up(n,_,()=>{let I=u[A+c-16]%n;for(let P=0;P<c;P++)y[P]=u[A+P]^a[I*c+P];e4(y,0,u,A,s),v()})}return hn(u),Y_(r,i,d,a,y)}var Q_=8,eT=1,tT=262144;function G8(r,e){return j(Zo(Ae(r.slice(16,32),e))).slice(2)}async function t4(r,e,t){let n=Mr(32),s=Mr(16),o={dklen:32,salt:j(n).slice(2),n:tT,r:Q_,p:eT},i=await Ga(Y(t,"utf8"),n,{N:o.n,r:o.r,p:o.p,dkLen:o.dklen}),a=Za(i.slice(0,16),s.map(u=>u)).encrypt(Ae(Y(r),Y(e)));return{id:j(Mr(16)).slice(2),crypto:{ciphertext:j(a).slice(2),cipherparams:{iv:j(s).slice(2)},cipher:"aes-128-ctr",kdf:"scrypt",kdfparams:o,mac:G8(i,a)}}}async function r4(r,e){if(typeof r!="object"||r===null||!("crypto"in r))throw Error("Invalid keystore");let t=r.crypto;if(typeof t!="object"||t===null||!("kdfparams"in t)||!("ciphertext"in t)||typeof t.ciphertext!="string"||!("mac"in t)||typeof t.mac!="string"||!("cipherparams"in t)||typeof t.cipherparams!="object"||t.cipherparams===null||!("iv"in t.cipherparams)||typeof t.cipherparams.iv!="string")throw Error("Invalid crypto");let n=t.kdfparams;if(typeof n!="object"||n===null||!("n"in n)||typeof n.n!="number"||!("r"in n)||typeof n.r!="number"||!("p"in n)||typeof n.p!="number"||!("dklen"in n)||typeof n.dklen!="number"||!("salt"in n)||typeof n.salt!="string")throw Error("Invalid kdfparams");let s=await Ga(Y(e,"utf8"),Y(n.salt),{N:n.n,r:n.r,p:n.p,dkLen:n.dklen}),o=Y(t.ciphertext);if(G8(s,o)!==t.mac)throw Error("Invalid password");let c=Za(s.slice(0,16),Y(t.cipherparams.iv)).decrypt(o);return{privateKey:c.slice(0,32),chainCode:c.slice(32)}}var o4=BigInt(0),s4=BigInt(1);function Gu(r,e=""){if(typeof r!="boolean"){let t=e&&`"${e}"`;throw new Error(t+"expected boolean, got type="+typeof r)}return r}function Qo(r,e,t=""){let n=ji(r),s=r?.length,o=e!==void 0;if(!n||o&&s!==e){let i=t&&`"${t}" `,c=o?` of length ${e}`:"",a=n?`length=${s}`:`type=${typeof r}`;throw new Error(i+"expected Uint8Array"+c+", got "+a)}return r}function Ju(r){let e=r.toString(16);return e.length&1?"0"+e:e}function J8(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return r===""?o4:BigInt("0x"+r)}function co(r){return J8(Js(r))}function i4(r){return ur(r),J8(Js(Uint8Array.from(r).reverse()))}function Ja(r,e){return zi(r.toString(16).padStart(e*2,"0"))}function c4(r,e){return Ja(r,e).reverse()}function Xe(r,e,t){let n;if(typeof e=="string")try{n=zi(e)}catch(o){throw new Error(r+" must be hex string or Uint8Array, cause: "+o)}else if(ji(e))n=Uint8Array.from(e);else throw new Error(r+" must be hex string or Uint8Array");let s=n.length;if(typeof t=="number"&&s!==t)throw new Error(r+" of length "+t+" expected, got "+s);return n}var n4=r=>typeof r=="bigint"&&o4<=r;function Xu(r,e,t){return n4(r)&&n4(e)&&n4(t)&&e<=r&&r<t}function X8(r,e,t,n){if(!Xu(e,t,n))throw new Error("expected valid "+r+": "+t+" <= n < "+n+", got "+e)}function Np(r){let e;for(e=0;r>o4;r>>=s4,e+=1);return e}var ei=r=>(s4<<BigInt(r))-s4;function Y8(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=_=>new Uint8Array(_),s=_=>Uint8Array.of(_),o=n(r),i=n(r),c=0,a=()=>{o.fill(1),i.fill(0),c=0},u=(..._)=>t(i,o,..._),d=(_=n(0))=>{i=u(s(0),_),o=u(),_.length!==0&&(i=u(s(1),_),o=u())},y=()=>{if(c++>=1e3)throw new Error("drbg: tried 1000 values");let _=0,T=[];for(;_<e;){o=u();let A=o.slice();T.push(A),_+=o.length}return Yr(...T)};return(_,T)=>{a(),d(_);let A;for(;!(A=T(y()));)d();return a(),A}}function Yu(r,e,t={}){if(!r||typeof r!="object")throw new Error("expected valid options object");function n(s,o,i){let c=r[s];if(i&&c===void 0)return;let a=typeof c;if(a!==o||c===null)throw new Error(`param "${s}" is invalid: expected ${o}, got ${a}`)}Object.entries(e).forEach(([s,o])=>n(s,o,!1)),Object.entries(t).forEach(([s,o])=>n(s,o,!0))}function a4(r){let e=new WeakMap;return(t,...n)=>{let s=e.get(t);if(s!==void 0)return s;let o=r(t,...n);return e.set(t,o),o}}var Hr=BigInt(0),vr=BigInt(1),hc=BigInt(2),t7=BigInt(3),r7=BigInt(4),n7=BigInt(5),rT=BigInt(7),s7=BigInt(8),nT=BigInt(9),o7=BigInt(16);function xn(r,e){let t=r%e;return t>=Hr?t:e+t}function wn(r,e,t){let n=r;for(;e-- >Hr;)n*=n,n%=t;return n}function Q8(r,e){if(r===Hr)throw new Error("invert: expected non-zero number");if(e<=Hr)throw new Error("invert: expected positive modulus, got "+e);let t=xn(r,e),n=e,s=Hr,o=vr,i=vr,c=Hr;for(;t!==Hr;){let u=n/t,d=n%t,y=s-i*u,v=o-c*u;n=t,t=d,s=i,o=c,i=y,c=v}if(n!==vr)throw new Error("invert: does not exist");return xn(s,e)}function f4(r,e,t){if(!r.eql(r.sqr(e),t))throw new Error("Cannot find square root")}function i7(r,e){let t=(r.ORDER+vr)/r7,n=r.pow(e,t);return f4(r,n,e),n}function sT(r,e){let t=(r.ORDER-n7)/s7,n=r.mul(e,hc),s=r.pow(n,t),o=r.mul(e,s),i=r.mul(r.mul(o,hc),s),c=r.mul(o,r.sub(i,r.ONE));return f4(r,c,e),c}function oT(r){let e=ti(r),t=c7(r),n=t(e,e.neg(e.ONE)),s=t(e,n),o=t(e,e.neg(n)),i=(r+rT)/o7;return(c,a)=>{let u=c.pow(a,i),d=c.mul(u,n),y=c.mul(u,s),v=c.mul(u,o),_=c.eql(c.sqr(d),a),T=c.eql(c.sqr(y),a);u=c.cmov(u,d,_),d=c.cmov(v,y,T);let A=c.eql(c.sqr(d),a),B=c.cmov(u,d,A);return f4(c,B,a),B}}function c7(r){if(r<t7)throw new Error("sqrt is not defined for small field");let e=r-vr,t=0;for(;e%hc===Hr;)e/=hc,t++;let n=hc,s=ti(r);for(;e7(s,n)===1;)if(n++>1e3)throw new Error("Cannot find square root: probably non-prime P");if(t===1)return i7;let o=s.pow(n,e),i=(e+vr)/hc;return function(a,u){if(a.is0(u))return u;if(e7(a,u)!==1)throw new Error("Cannot find square root");let d=t,y=a.mul(a.ONE,o),v=a.pow(u,e),_=a.pow(u,i);for(;!a.eql(v,a.ONE);){if(a.is0(v))return a.ZERO;let T=1,A=a.sqr(v);for(;!a.eql(A,a.ONE);)if(T++,A=a.sqr(A),T===d)throw new Error("Cannot find square root");let B=vr<<BigInt(d-T-1),I=a.pow(y,B);d=T,y=a.sqr(I),v=a.mul(v,y),_=a.mul(_,I)}return _}}function iT(r){return r%r7===t7?i7:r%s7===n7?sT:r%o7===nT?oT(r):c7(r)}var cT=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function u4(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"number",BITS:"number"},t=cT.reduce((n,s)=>(n[s]="function",n),e);return Yu(r,t),r}function aT(r,e,t){if(t<Hr)throw new Error("invalid exponent, negatives unsupported");if(t===Hr)return r.ONE;if(t===vr)return e;let n=r.ONE,s=e;for(;t>Hr;)t&vr&&(n=r.mul(n,s)),s=r.sqr(s),t>>=vr;return n}function Lp(r,e,t=!1){let n=new Array(e.length).fill(t?r.ZERO:void 0),s=e.reduce((i,c,a)=>r.is0(c)?i:(n[a]=i,r.mul(i,c)),r.ONE),o=r.inv(s);return e.reduceRight((i,c,a)=>r.is0(c)?i:(n[a]=r.mul(i,n[a]),r.mul(i,c)),o),n}function e7(r,e){let t=(r.ORDER-vr)/hc,n=r.pow(e,t),s=r.eql(n,r.ONE),o=r.eql(n,r.ZERO),i=r.eql(n,r.neg(r.ONE));if(!s&&!o&&!i)throw new Error("invalid Legendre symbol result");return s?1:o?0:-1}function Hp(r,e){e!==void 0&&We(e);let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function ti(r,e,t=!1,n={}){if(r<=Hr)throw new Error("invalid field: expected ORDER > 0, got "+r);let s,o,i=!1,c;if(typeof e=="object"&&e!=null){if(n.sqrt||t)throw new Error("cannot specify opts in two arguments");let v=e;v.BITS&&(s=v.BITS),v.sqrt&&(o=v.sqrt),typeof v.isLE=="boolean"&&(t=v.isLE),typeof v.modFromBytes=="boolean"&&(i=v.modFromBytes),c=v.allowedLengths}else typeof e=="number"&&(s=e),n.sqrt&&(o=n.sqrt);let{nBitLength:a,nByteLength:u}=Hp(r,s);if(u>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let d,y=Object.freeze({ORDER:r,isLE:t,BITS:a,BYTES:u,MASK:ei(a),ZERO:Hr,ONE:vr,allowedLengths:c,create:v=>xn(v,r),isValid:v=>{if(typeof v!="bigint")throw new Error("invalid field element: expected bigint, got "+typeof v);return Hr<=v&&v<r},is0:v=>v===Hr,isValidNot0:v=>!y.is0(v)&&y.isValid(v),isOdd:v=>(v&vr)===vr,neg:v=>xn(-v,r),eql:(v,_)=>v===_,sqr:v=>xn(v*v,r),add:(v,_)=>xn(v+_,r),sub:(v,_)=>xn(v-_,r),mul:(v,_)=>xn(v*_,r),pow:(v,_)=>aT(y,v,_),div:(v,_)=>xn(v*Q8(_,r),r),sqrN:v=>v*v,addN:(v,_)=>v+_,subN:(v,_)=>v-_,mulN:(v,_)=>v*_,inv:v=>Q8(v,r),sqrt:o||(v=>(d||(d=iT(r)),d(y,v))),toBytes:v=>t?c4(v,u):Ja(v,u),fromBytes:(v,_=!0)=>{if(c){if(!c.includes(v.length)||v.length>u)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+v.length);let A=new Uint8Array(u);A.set(v,t?0:A.length-v.length),v=A}if(v.length!==u)throw new Error("Field.fromBytes: expected "+u+" bytes, got "+v.length);let T=t?i4(v):co(v);if(i&&(T=xn(T,r)),!_&&!y.isValid(T))throw new Error("invalid field element: outside of range 0..ORDER");return T},invertBatch:v=>Lp(y,v),cmov:(v,_,T)=>T?_:v});return Object.freeze(y)}function a7(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function l4(r){let e=a7(r);return e+Math.ceil(e/2)}function Up(r,e,t=!1){let n=r.length,s=a7(e),o=l4(e);if(n<16||n<o||n>1024)throw new Error("expected "+o+"-1024 bytes of input, got "+n);let i=t?i4(r):co(r),c=xn(i,e-vr)+vr;return t?c4(c,s):Ja(c,s)}var Xa=BigInt(0),mc=BigInt(1);function Qu(r,e){let t=e.negate();return r?t:e}function $p(r,e){let t=Lp(r.Fp,e.map(n=>n.Z));return e.map((n,s)=>r.fromAffine(n.toAffine(t[s])))}function d7(r,e){if(!Number.isSafeInteger(r)||r<=0||r>e)throw new Error("invalid window size, expected [1.."+e+"], got W="+r)}function d4(r,e){d7(r,e);let t=Math.ceil(e/r)+1,n=2**(r-1),s=2**r,o=ei(r),i=BigInt(r);return{windows:t,windowSize:n,mask:o,maxNumber:s,shiftBy:i}}function f7(r,e,t){let{windowSize:n,mask:s,maxNumber:o,shiftBy:i}=t,c=Number(r&s),a=r>>i;c>n&&(c-=o,a+=mc);let u=e*n,d=u+Math.abs(c)-1,y=c===0,v=c<0,_=e%2!==0;return{nextN:a,offset:d,isZero:y,isNeg:v,isNegF:_,offsetF:u}}function fT(r,e){if(!Array.isArray(r))throw new Error("array expected");r.forEach((t,n)=>{if(!(t instanceof e))throw new Error("invalid point at index "+n)})}function uT(r,e){if(!Array.isArray(r))throw new Error("array of scalars expected");r.forEach((t,n)=>{if(!e.isValid(t))throw new Error("invalid scalar at index "+n)})}var p4=new WeakMap,p7=new WeakMap;function h4(r){return p7.get(r)||1}function u7(r){if(r!==Xa)throw new Error("invalid wNAF")}var Fp=class{constructor(e,t){this.BASE=e.BASE,this.ZERO=e.ZERO,this.Fn=e.Fn,this.bits=t}_unsafeLadder(e,t,n=this.ZERO){let s=e;for(;t>Xa;)t&mc&&(n=n.add(s)),s=s.double(),t>>=mc;return n}precomputeWindow(e,t){let{windows:n,windowSize:s}=d4(t,this.bits),o=[],i=e,c=i;for(let a=0;a<n;a++){c=i,o.push(c);for(let u=1;u<s;u++)c=c.add(i),o.push(c);i=c.double()}return o}wNAF(e,t,n){if(!this.Fn.isValid(n))throw new Error("invalid scalar");let s=this.ZERO,o=this.BASE,i=d4(e,this.bits);for(let c=0;c<i.windows;c++){let{nextN:a,offset:u,isZero:d,isNeg:y,isNegF:v,offsetF:_}=f7(n,c,i);n=a,d?o=o.add(Qu(v,t[_])):s=s.add(Qu(y,t[u]))}return u7(n),{p:s,f:o}}wNAFUnsafe(e,t,n,s=this.ZERO){let o=d4(e,this.bits);for(let i=0;i<o.windows&&n!==Xa;i++){let{nextN:c,offset:a,isZero:u,isNeg:d}=f7(n,i,o);if(n=c,!u){let y=t[a];s=s.add(d?y.negate():y)}}return u7(n),s}getPrecomputes(e,t,n){let s=p4.get(t);return s||(s=this.precomputeWindow(t,e),e!==1&&(typeof n=="function"&&(s=n(s)),p4.set(t,s))),s}cached(e,t,n){let s=h4(e);return this.wNAF(s,this.getPrecomputes(s,e,n),t)}unsafe(e,t,n,s){let o=h4(e);return o===1?this._unsafeLadder(e,t,s):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),t,s)}createCache(e,t){d7(t,this.bits),p7.set(e,t),p4.delete(e)}hasCache(e){return h4(e)!==1}};function h7(r,e,t,n){let s=e,o=r.ZERO,i=r.ZERO;for(;t>Xa||n>Xa;)t&mc&&(o=o.add(s)),n&mc&&(i=i.add(s)),s=s.double(),t>>=mc,n>>=mc;return{p1:o,p2:i}}function m7(r,e,t,n){fT(t,r),uT(n,e);let s=t.length,o=n.length;if(s!==o)throw new Error("arrays of points and scalars must have equal length");let i=r.ZERO,c=Np(BigInt(s)),a=1;c>12?a=c-3:c>4?a=c-2:c>0&&(a=2);let u=ei(a),d=new Array(Number(u)+1).fill(i),y=Math.floor((e.BITS-1)/a)*a,v=i;for(let _=y;_>=0;_-=a){d.fill(i);for(let A=0;A<o;A++){let B=n[A],I=Number(B>>BigInt(_)&u);d[I]=d[I].add(t[A])}let T=i;for(let A=d.length-1,B=i;A>0;A--)B=B.add(d[A]),T=T.add(B);if(v=v.add(T),_!==0)for(let A=0;A<a;A++)v=v.double()}return v}function l7(r,e,t){if(e){if(e.ORDER!==r)throw new Error("Field.ORDER must match order: Fp == p, Fn == n");return u4(e),e}else return ti(r,{isLE:t})}function y7(r,e,t={},n){if(n===void 0&&(n=r==="edwards"),!e||typeof e!="object")throw new Error(`expected valid ${r} CURVE object`);for(let a of["p","n","h"]){let u=e[a];if(!(typeof u=="bigint"&&u>Xa))throw new Error(`CURVE.${a} must be positive bigint`)}let s=l7(e.p,t.Fp,n),o=l7(e.n,t.Fn,n),c=["Gx","Gy","a",r==="weierstrass"?"b":"d"];for(let a of c)if(!s.isValid(e[a]))throw new Error(`CURVE.${a} must be valid field element of CURVE.Fp`);return e=Object.freeze(Object.assign({},e)),{CURVE:e,Fp:s,Fn:o}}var g7=(r,e)=>(r+(r>=0?e:-e)/b7)/e;function lT(r,e,t){let[[n,s],[o,i]]=e,c=g7(i*r,t),a=g7(-s*r,t),u=r-c*n-a*o,d=-c*s-a*i,y=u<fo,v=d<fo;y&&(u=-u),v&&(d=-d);let _=ei(Math.ceil(Np(t)/2))+Ya;if(u<fo||u>=_||d<fo||d>=_)throw new Error("splitScalar (endomorphism): failed, k="+r);return{k1neg:y,k1:u,k2neg:v,k2:d}}function y4(r){if(!["compact","recovered","der"].includes(r))throw new Error('Signature format must be "compact", "recovered", or "der"');return r}function m4(r,e){let t={};for(let n of Object.keys(e))t[n]=r[n]===void 0?e[n]:r[n];return Gu(t.lowS,"lowS"),Gu(t.prehash,"prehash"),t.format!==void 0&&y4(t.format),t}var g4=class extends Error{constructor(e=""){super(e)}},ao={Err:g4,_tlv:{encode:(r,e)=>{let{Err:t}=ao;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length&1)throw new t("tlv.encode: unpadded data");let n=e.length/2,s=Ju(n);if(s.length/2&128)throw new t("tlv.encode: long form length too big");let o=n>127?Ju(s.length/2|128):"";return Ju(r)+o+s+e},decode(r,e){let{Err:t}=ao,n=0;if(r<0||r>256)throw new t("tlv.encode: wrong tag");if(e.length<2||e[n++]!==r)throw new t("tlv.decode: wrong tlv");let s=e[n++],o=!!(s&128),i=0;if(!o)i=s;else{let a=s&127;if(!a)throw new t("tlv.decode(long): indefinite length not supported");if(a>4)throw new t("tlv.decode(long): byte length is too big");let u=e.subarray(n,n+a);if(u.length!==a)throw new t("tlv.decode: length bytes not complete");if(u[0]===0)throw new t("tlv.decode(long): zero leftmost byte");for(let d of u)i=i<<8|d;if(n+=a,i<128)throw new t("tlv.decode(long): not minimal encoding")}let c=e.subarray(n,n+i);if(c.length!==i)throw new t("tlv.decode: wrong value length");return{v:c,l:e.subarray(n+i)}}},_int:{encode(r){let{Err:e}=ao;if(r<fo)throw new e("integer: negative integers are not allowed");let t=Ju(r);if(Number.parseInt(t[0],16)&8&&(t="00"+t),t.length&1)throw new e("unexpected DER parsing assertion: unpadded hex");return t},decode(r){let{Err:e}=ao;if(r[0]&128)throw new e("invalid signature integer: negative");if(r[0]===0&&!(r[1]&128))throw new e("invalid signature integer: unnecessary leading zero");return co(r)}},toSig(r){let{Err:e,_int:t,_tlv:n}=ao,s=Xe("signature",r),{v:o,l:i}=n.decode(48,s);if(i.length)throw new e("invalid signature: left bytes after parsing");let{v:c,l:a}=n.decode(2,o),{v:u,l:d}=n.decode(2,a);if(d.length)throw new e("invalid signature: left bytes after parsing");return{r:t.decode(c),s:t.decode(u)}},hexFromSig(r){let{_tlv:e,_int:t}=ao,n=e.encode(2,t.encode(r.r)),s=e.encode(2,t.encode(r.s)),o=n+s;return e.encode(48,o)}},fo=BigInt(0),Ya=BigInt(1),b7=BigInt(2),qp=BigInt(3),dT=BigInt(4);function ri(r,e){let{BYTES:t}=r,n;if(typeof e=="bigint")n=e;else{let s=Xe("private key",e);try{n=r.fromBytes(s)}catch{throw new Error(`invalid private key: expected ui8a of size ${t}, got ${typeof e}`)}}if(!r.isValidNot0(n))throw new Error("invalid private key: out of range [1..N-1]");return n}function pT(r,e={}){let t=y7("weierstrass",r,e),{Fp:n,Fn:s}=t,o=t.CURVE,{h:i,n:c}=o;Yu(e,{},{allowInfinityPoint:"boolean",clearCofactor:"function",isTorsionFree:"function",fromBytes:"function",toBytes:"function",endo:"object",wrapPrivateKey:"boolean"});let{endo:a}=e;if(a&&(!n.is0(o.a)||typeof a.beta!="bigint"||!Array.isArray(a.basises)))throw new Error('invalid endo: expected "beta": bigint and "basises": array');let u=w7(n,s);function d(){if(!n.isOdd)throw new Error("compression is not supported: Field does not have .isOdd()")}function y(l,h,g){let{x:b,y:w}=h.toAffine(),k=n.toBytes(b);if(Gu(g,"isCompressed"),g){d();let S=!n.isOdd(w);return Yr(x7(S),k)}else return Yr(Uint8Array.of(4),k,n.toBytes(w))}function v(l){Qo(l,void 0,"Point");let{publicKey:h,publicKeyUncompressed:g}=u,b=l.length,w=l[0],k=l.subarray(1);if(b===h&&(w===2||w===3)){let S=n.fromBytes(k);if(!n.isValid(S))throw new Error("bad point: is not on curve, wrong x");let p=A(S),E;try{E=n.sqrt(p)}catch(q){let G=q instanceof Error?": "+q.message:"";throw new Error("bad point: is not on curve, sqrt error"+G)}d();let R=n.isOdd(E);return(w&1)===1!==R&&(E=n.neg(E)),{x:S,y:E}}else if(b===g&&w===4){let S=n.BYTES,p=n.fromBytes(k.subarray(0,S)),E=n.fromBytes(k.subarray(S,S*2));if(!B(p,E))throw new Error("bad point: is not on curve");return{x:p,y:E}}else throw new Error(`bad point: got length ${b}, expected compressed=${h} or uncompressed=${g}`)}let _=e.toBytes||y,T=e.fromBytes||v;function A(l){let h=n.sqr(l),g=n.mul(h,l);return n.add(n.add(g,n.mul(l,o.a)),o.b)}function B(l,h){let g=n.sqr(h),b=A(l);return n.eql(g,b)}if(!B(o.Gx,o.Gy))throw new Error("bad curve params: generator point");let I=n.mul(n.pow(o.a,qp),dT),P=n.mul(n.sqr(o.b),BigInt(27));if(n.is0(n.add(I,P)))throw new Error("bad curve params: a or b");function M(l,h,g=!1){if(!n.isValid(h)||g&&n.is0(h))throw new Error(`bad point coordinate ${l}`);return h}function L(l){if(!(l instanceof x))throw new Error("ProjectivePoint expected")}function U(l){if(!a||!a.basises)throw new Error("no endo");return lT(l,a.basises,s.ORDER)}let Z=a4((l,h)=>{let{X:g,Y:b,Z:w}=l;if(n.eql(w,n.ONE))return{x:g,y:b};let k=l.is0();h==null&&(h=k?n.ONE:n.inv(w));let S=n.mul(g,h),p=n.mul(b,h),E=n.mul(w,h);if(k)return{x:n.ZERO,y:n.ZERO};if(!n.eql(E,n.ONE))throw new Error("invZ was invalid");return{x:S,y:p}}),C=a4(l=>{if(l.is0()){if(e.allowInfinityPoint&&!n.is0(l.Y))return;throw new Error("bad point: ZERO")}let{x:h,y:g}=l.toAffine();if(!n.isValid(h)||!n.isValid(g))throw new Error("bad point: x or y not field elements");if(!B(h,g))throw new Error("bad point: equation left != right");if(!l.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0});function J(l,h,g,b,w){return g=new x(n.mul(g.X,l),g.Y,g.Z),h=Qu(b,h),g=Qu(w,g),h.add(g)}class x{constructor(h,g,b){this.X=M("x",h),this.Y=M("y",g,!0),this.Z=M("z",b),Object.freeze(this)}static CURVE(){return o}static fromAffine(h){let{x:g,y:b}=h||{};if(!h||!n.isValid(g)||!n.isValid(b))throw new Error("invalid affine point");if(h instanceof x)throw new Error("projective point not allowed");return n.is0(g)&&n.is0(b)?x.ZERO:new x(g,b,n.ONE)}static fromBytes(h){let g=x.fromAffine(T(Qo(h,void 0,"point")));return g.assertValidity(),g}static fromHex(h){return x.fromBytes(Xe("pointHex",h))}get x(){return this.toAffine().x}get y(){return this.toAffine().y}precompute(h=8,g=!0){return f.createCache(this,h),g||this.multiply(qp),this}assertValidity(){C(this)}hasEvenY(){let{y:h}=this.toAffine();if(!n.isOdd)throw new Error("Field doesn't support isOdd");return!n.isOdd(h)}equals(h){L(h);let{X:g,Y:b,Z:w}=this,{X:k,Y:S,Z:p}=h,E=n.eql(n.mul(g,p),n.mul(k,w)),R=n.eql(n.mul(b,p),n.mul(S,w));return E&&R}negate(){return new x(this.X,n.neg(this.Y),this.Z)}double(){let{a:h,b:g}=o,b=n.mul(g,qp),{X:w,Y:k,Z:S}=this,p=n.ZERO,E=n.ZERO,R=n.ZERO,N=n.mul(w,w),q=n.mul(k,k),G=n.mul(S,S),X=n.mul(w,k);return X=n.add(X,X),R=n.mul(w,S),R=n.add(R,R),p=n.mul(h,R),E=n.mul(b,G),E=n.add(p,E),p=n.sub(q,E),E=n.add(q,E),E=n.mul(p,E),p=n.mul(X,p),R=n.mul(b,R),G=n.mul(h,G),X=n.sub(N,G),X=n.mul(h,X),X=n.add(X,R),R=n.add(N,N),N=n.add(R,N),N=n.add(N,G),N=n.mul(N,X),E=n.add(E,N),G=n.mul(k,S),G=n.add(G,G),N=n.mul(G,X),p=n.sub(p,N),R=n.mul(G,q),R=n.add(R,R),R=n.add(R,R),new x(p,E,R)}add(h){L(h);let{X:g,Y:b,Z:w}=this,{X:k,Y:S,Z:p}=h,E=n.ZERO,R=n.ZERO,N=n.ZERO,q=o.a,G=n.mul(o.b,qp),X=n.mul(g,k),ee=n.mul(b,S),ce=n.mul(w,p),ie=n.add(g,b),oe=n.add(k,S);ie=n.mul(ie,oe),oe=n.add(X,ee),ie=n.sub(ie,oe),oe=n.add(g,w);let ve=n.add(k,p);return oe=n.mul(oe,ve),ve=n.add(X,ce),oe=n.sub(oe,ve),ve=n.add(b,w),E=n.add(S,p),ve=n.mul(ve,E),E=n.add(ee,ce),ve=n.sub(ve,E),N=n.mul(q,oe),E=n.mul(G,ce),N=n.add(E,N),E=n.sub(ee,N),N=n.add(ee,N),R=n.mul(E,N),ee=n.add(X,X),ee=n.add(ee,X),ce=n.mul(q,ce),oe=n.mul(G,oe),ee=n.add(ee,ce),ce=n.sub(X,ce),ce=n.mul(q,ce),oe=n.add(oe,ce),X=n.mul(ee,oe),R=n.add(R,X),X=n.mul(ve,oe),E=n.mul(ie,E),E=n.sub(E,X),X=n.mul(ie,ee),N=n.mul(ve,N),N=n.add(N,X),new x(E,R,N)}subtract(h){return this.add(h.negate())}is0(){return this.equals(x.ZERO)}multiply(h){let{endo:g}=e;if(!s.isValidNot0(h))throw new Error("invalid scalar: out of range");let b,w,k=S=>f.cached(this,S,p=>$p(x,p));if(g){let{k1neg:S,k1:p,k2neg:E,k2:R}=U(h),{p:N,f:q}=k(p),{p:G,f:X}=k(R);w=q.add(X),b=J(g.beta,N,G,S,E)}else{let{p:S,f:p}=k(h);b=S,w=p}return $p(x,[b,w])[0]}multiplyUnsafe(h){let{endo:g}=e,b=this;if(!s.isValid(h))throw new Error("invalid scalar: out of range");if(h===fo||b.is0())return x.ZERO;if(h===Ya)return b;if(f.hasCache(this))return this.multiply(h);if(g){let{k1neg:w,k1:k,k2neg:S,k2:p}=U(h),{p1:E,p2:R}=h7(x,b,k,p);return J(g.beta,E,R,w,S)}else return f.unsafe(b,h)}multiplyAndAddUnsafe(h,g,b){let w=this.multiplyUnsafe(g).add(h.multiplyUnsafe(b));return w.is0()?void 0:w}toAffine(h){return Z(this,h)}isTorsionFree(){let{isTorsionFree:h}=e;return i===Ya?!0:h?h(x,this):f.unsafe(this,c).is0()}clearCofactor(){let{clearCofactor:h}=e;return i===Ya?this:h?h(x,this):this.multiplyUnsafe(i)}isSmallOrder(){return this.multiplyUnsafe(i).is0()}toBytes(h=!0){return Gu(h,"isCompressed"),this.assertValidity(),_(x,this,h)}toHex(h=!0){return Js(this.toBytes(h))}toString(){return`<Point ${this.is0()?"ZERO":this.toHex()}>`}get px(){return this.X}get py(){return this.X}get pz(){return this.Z}toRawBytes(h=!0){return this.toBytes(h)}_setWindowSize(h){this.precompute(h)}static normalizeZ(h){return $p(x,h)}static msm(h,g){return m7(x,s,h,g)}static fromPrivateKey(h){return x.BASE.multiply(ri(s,h))}}x.BASE=new x(o.Gx,o.Gy,n.ONE),x.ZERO=new x(n.ZERO,n.ONE,n.ZERO),x.Fp=n,x.Fn=s;let m=s.BITS,f=new Fp(x,e.endo?Math.ceil(m/2):m);return x.BASE.precompute(8),x}function x7(r){return Uint8Array.of(r?2:3)}function w7(r,e){return{secretKey:e.BYTES,publicKey:1+r.BYTES,publicKeyUncompressed:1+2*r.BYTES,publicKeyHasPrefix:!0,signature:2*e.BYTES}}function hT(r,e={}){let{Fn:t}=r,n=e.randomBytes||Mr,s=Object.assign(w7(r.Fp,t),{seed:l4(t.ORDER)});function o(_){try{return!!ri(t,_)}catch{return!1}}function i(_,T){let{publicKey:A,publicKeyUncompressed:B}=s;try{let I=_.length;return T===!0&&I!==A||T===!1&&I!==B?!1:!!r.fromBytes(_)}catch{return!1}}function c(_=n(s.seed)){return Up(Qo(_,s.seed,"seed"),t.ORDER)}function a(_,T=!0){return r.BASE.multiply(ri(t,_)).toBytes(T)}function u(_){let T=c(_);return{secretKey:T,publicKey:a(T)}}function d(_){if(typeof _=="bigint")return!1;if(_ instanceof r)return!0;let{secretKey:T,publicKey:A,publicKeyUncompressed:B}=s;if(t.allowedLengths||T===A)return;let I=Xe("key",_).length;return I===A||I===B}function y(_,T,A=!0){if(d(_)===!0)throw new Error("first arg must be private key");if(d(T)===!1)throw new Error("second arg must be public key");let B=ri(t,_);return r.fromHex(T).multiply(B).toBytes(A)}return Object.freeze({getPublicKey:a,getSharedSecret:y,keygen:u,Point:r,utils:{isValidSecretKey:o,isValidPublicKey:i,randomSecretKey:c,isValidPrivateKey:o,randomPrivateKey:c,normPrivateKeyToScalar:_=>ri(t,_),precompute(_=8,T=r.BASE){return T.precompute(_,!1)}},lengths:s})}function mT(r,e,t={}){Oa(e),Yu(t,{},{hmac:"function",lowS:"boolean",randomBytes:"function",bits2int:"function",bits2int_modN:"function"});let n=t.randomBytes||Mr,s=t.hmac||((g,...b)=>Zu(e,g,Yr(...b))),{Fp:o,Fn:i}=r,{ORDER:c,BITS:a}=i,{keygen:u,getPublicKey:d,getSharedSecret:y,utils:v,lengths:_}=hT(r,t),T={prehash:!1,lowS:typeof t.lowS=="boolean"?t.lowS:!1,format:void 0,extraEntropy:!1},A="compact";function B(g){let b=c>>Ya;return g>b}function I(g,b){if(!i.isValidNot0(b))throw new Error(`invalid signature ${g}: out of range 1..Point.Fn.ORDER`);return b}function P(g,b){y4(b);let w=_.signature,k=b==="compact"?w:b==="recovered"?w+1:void 0;return Qo(g,k,`${b} signature`)}class M{constructor(b,w,k){this.r=I("r",b),this.s=I("s",w),k!=null&&(this.recovery=k),Object.freeze(this)}static fromBytes(b,w=A){P(b,w);let k;if(w==="der"){let{r:R,s:N}=ao.toSig(Qo(b));return new M(R,N)}w==="recovered"&&(k=b[0],w="compact",b=b.subarray(1));let S=i.BYTES,p=b.subarray(0,S),E=b.subarray(S,S*2);return new M(i.fromBytes(p),i.fromBytes(E),k)}static fromHex(b,w){return this.fromBytes(zi(b),w)}addRecoveryBit(b){return new M(this.r,this.s,b)}recoverPublicKey(b){let w=o.ORDER,{r:k,s:S,recovery:p}=this;if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");if(c*b7<w&&p>1)throw new Error("recovery id is ambiguous for h>1 curve");let R=p===2||p===3?k+c:k;if(!o.isValid(R))throw new Error("recovery id 2 or 3 invalid");let N=o.toBytes(R),q=r.fromBytes(Yr(x7((p&1)===0),N)),G=i.inv(R),X=U(Xe("msgHash",b)),ee=i.create(-X*G),ce=i.create(S*G),ie=r.BASE.multiplyUnsafe(ee).add(q.multiplyUnsafe(ce));if(ie.is0())throw new Error("point at infinify");return ie.assertValidity(),ie}hasHighS(){return B(this.s)}toBytes(b=A){if(y4(b),b==="der")return zi(ao.hexFromSig(this));let w=i.toBytes(this.r),k=i.toBytes(this.s);if(b==="recovered"){if(this.recovery==null)throw new Error("recovery bit must be present");return Yr(Uint8Array.of(this.recovery),w,k)}return Yr(w,k)}toHex(b){return Js(this.toBytes(b))}assertValidity(){}static fromCompact(b){return M.fromBytes(Xe("sig",b),"compact")}static fromDER(b){return M.fromBytes(Xe("sig",b),"der")}normalizeS(){return this.hasHighS()?new M(this.r,i.neg(this.s),this.recovery):this}toDERRawBytes(){return this.toBytes("der")}toDERHex(){return Js(this.toBytes("der"))}toCompactRawBytes(){return this.toBytes("compact")}toCompactHex(){return Js(this.toBytes("compact"))}}let L=t.bits2int||function(b){if(b.length>8192)throw new Error("input is too large");let w=co(b),k=b.length*8-a;return k>0?w>>BigInt(k):w},U=t.bits2int_modN||function(b){return i.create(L(b))},Z=ei(a);function C(g){return X8("num < 2^"+a,g,fo,Z),i.toBytes(g)}function J(g,b){return Qo(g,void 0,"message"),b?Qo(e(g),void 0,"prehashed message"):g}function x(g,b,w){if(["recovered","canonical"].some(ee=>ee in w))throw new Error("sign() legacy options not supported");let{lowS:k,prehash:S,extraEntropy:p}=m4(w,T);g=J(g,S);let E=U(g),R=ri(i,b),N=[C(R),C(E)];if(p!=null&&p!==!1){let ee=p===!0?n(_.secretKey):p;N.push(Xe("extraEntropy",ee))}let q=Yr(...N),G=E;function X(ee){let ce=L(ee);if(!i.isValidNot0(ce))return;let ie=i.inv(ce),oe=r.BASE.multiply(ce).toAffine(),ve=i.create(oe.x);if(ve===fo)return;let Ee=i.create(ie*i.create(G+ve*R));if(Ee===fo)return;let xe=(oe.x===ve?0:2)|Number(oe.y&Ya),Pr=Ee;return k&&B(Ee)&&(Pr=i.neg(Ee),xe^=1),new M(ve,Pr,xe)}return{seed:q,k2sig:X}}function m(g,b,w={}){g=Xe("message",g);let{seed:k,k2sig:S}=x(g,b,w);return Y8(e.outputLen,i.BYTES,s)(k,S)}function f(g){let b,w=typeof g=="string"||ji(g),k=!w&&g!==null&&typeof g=="object"&&typeof g.r=="bigint"&&typeof g.s=="bigint";if(!w&&!k)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");if(k)b=new M(g.r,g.s);else if(w){try{b=M.fromBytes(Xe("sig",g),"der")}catch(S){if(!(S instanceof ao.Err))throw S}if(!b)try{b=M.fromBytes(Xe("sig",g),"compact")}catch{return!1}}return b||!1}function l(g,b,w,k={}){let{lowS:S,prehash:p,format:E}=m4(k,T);if(w=Xe("publicKey",w),b=J(Xe("message",b),p),"strict"in k)throw new Error("options.strict was renamed to lowS");let R=E===void 0?f(g):M.fromBytes(Xe("sig",g),E);if(R===!1)return!1;try{let N=r.fromBytes(w);if(S&&R.hasHighS())return!1;let{r:q,s:G}=R,X=U(b),ee=i.inv(G),ce=i.create(X*ee),ie=i.create(q*ee),oe=r.BASE.multiplyUnsafe(ce).add(N.multiplyUnsafe(ie));return oe.is0()?!1:i.create(oe.x)===q}catch{return!1}}function h(g,b,w={}){let{prehash:k}=m4(w,T);return b=J(b,k),M.fromBytes(g,"recovered").recoverPublicKey(b).toBytes()}return Object.freeze({keygen:u,getPublicKey:d,getSharedSecret:y,utils:v,lengths:_,Point:r,sign:m,verify:l,recoverPublicKey:h,Signature:M,hash:e})}function yT(r){let e={a:r.a,b:r.b,p:r.Fp.ORDER,n:r.n,h:r.h,Gx:r.Gx,Gy:r.Gy},t=r.Fp,n=r.allowedPrivateKeyLengths?Array.from(new Set(r.allowedPrivateKeyLengths.map(i=>Math.ceil(i/2)))):void 0,s=ti(e.n,{BITS:r.nBitLength,allowedLengths:n,modFromBytes:r.wrapPrivateKey}),o={Fp:t,Fn:s,allowInfinityPoint:r.allowInfinityPoint,endo:r.endo,isTorsionFree:r.isTorsionFree,clearCofactor:r.clearCofactor,fromBytes:r.fromBytes,toBytes:r.toBytes};return{CURVE:e,curveOpts:o}}function gT(r){let{CURVE:e,curveOpts:t}=yT(r),n={hmac:r.hmac,randomBytes:r.randomBytes,lowS:r.lowS,bits2int:r.bits2int,bits2int_modN:r.bits2int_modN};return{CURVE:e,curveOpts:t,hash:r.hash,ecdsaOpts:n}}function bT(r,e){let t=e.Point;return Object.assign({},e,{ProjectivePoint:t,CURVE:Object.assign({},r,Hp(t.Fn.ORDER,t.Fn.BITS))})}function v7(r){let{CURVE:e,curveOpts:t,hash:n,ecdsaOpts:s}=gT(r),o=pT(e,t),i=mT(o,n,s);return bT(r,i)}function S7(r,e){let t=n=>v7({...r,hash:n});return{...t(e),create:t}}var Qa={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),n:BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h:BigInt(1),a:BigInt(0),b:BigInt(7),Gx:BigInt("0x79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798"),Gy:BigInt("0x483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8")},xT={beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),basises:[[BigInt("0x3086d221a7d46bcde86c90e49284eb15"),-BigInt("0xe4437ed6010e88286f547fa90abfe4c3")],[BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),BigInt("0x3086d221a7d46bcde86c90e49284eb15")]]},wT=BigInt(0),_7=BigInt(1),b4=BigInt(2);function vT(r){let e=Qa.p,t=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=r*r*r%e,d=u*u*r%e,y=wn(d,t,e)*d%e,v=wn(y,t,e)*d%e,_=wn(v,b4,e)*u%e,T=wn(_,s,e)*_%e,A=wn(T,o,e)*T%e,B=wn(A,c,e)*A%e,I=wn(B,a,e)*B%e,P=wn(I,c,e)*A%e,M=wn(P,t,e)*d%e,L=wn(M,i,e)*T%e,U=wn(L,n,e)*u%e,Z=wn(U,b4,e);if(!jp.eql(jp.sqr(Z),r))throw new Error("Cannot find square root");return Z}var jp=ti(Qa.p,{sqrt:vT}),Ie=S7({...Qa,Fp:jp,lowS:!0,endo:xT},rt),T7={};function zp(r,...e){let t=T7[r];if(t===void 0){let n=rt(Tu(r));t=Yr(n,n),T7[r]=t}return rt(Yr(t,...e))}var w4=r=>r.toBytes(!0).slice(1),ef=Ie.Point,v4=r=>r%b4===wT;function x4(r){let{Fn:e,BASE:t}=ef,n=ri(e,r),s=t.multiply(n);return{scalar:v4(s.y)?n:e.neg(n),bytes:w4(s)}}function A7(r){let e=jp;if(!e.isValidNot0(r))throw new Error("invalid x: Fail if x \u2265 p");let t=e.create(r*r),n=e.create(t*r+BigInt(7)),s=e.sqrt(n);v4(s)||(s=e.neg(s));let o=ef.fromAffine({x:r,y:s});return o.assertValidity(),o}var e0=co;function k7(...r){return ef.Fn.create(e0(zp("BIP0340/challenge",...r)))}function E7(r){return x4(r).bytes}function ST(r,e,t=Mr(32)){let{Fn:n}=ef,s=Xe("message",r),{bytes:o,scalar:i}=x4(e),c=Xe("auxRand",t,32),a=n.toBytes(i^e0(zp("BIP0340/aux",c))),u=zp("BIP0340/nonce",a,o,s),{bytes:d,scalar:y}=x4(u),v=k7(d,o,s),_=new Uint8Array(64);if(_.set(d,0),_.set(n.toBytes(n.create(y+v*i)),32),!C7(_,s,o))throw new Error("sign: Invalid signature produced");return _}function C7(r,e,t){let{Fn:n,BASE:s}=ef,o=Xe("signature",r,64),i=Xe("message",e),c=Xe("publicKey",t,32);try{let a=A7(e0(c)),u=e0(o.subarray(0,32));if(!Xu(u,_7,Qa.p))return!1;let d=e0(o.subarray(32,64));if(!Xu(d,_7,Qa.n))return!1;let y=k7(n.toBytes(u),w4(a),i),v=s.multiplyUnsafe(d).add(a.multiplyUnsafe(n.neg(y))),{x:_,y:T}=v.toAffine();return!(v.is0()||!v4(T)||_!==u)}catch{return!1}}var bs=(()=>{let t=(s=Mr(48))=>Up(s,Qa.n);Ie.utils.randomSecretKey;function n(s){let o=t(s);return{secretKey:o,publicKey:E7(o)}}return{keygen:n,getPublicKey:E7,sign:ST,verify:C7,Point:ef,utils:{randomSecretKey:t,randomPrivateKey:t,taggedHash:zp,lift_x:A7,pointToBytes:w4,numberToBytesBE:Ja,bytesToNumberBE:co,mod:xn},lengths:{secretKey:32,publicKey:32,publicKeyHasPrefix:!1,signature:64,seed:48}}})();var _T=Uint8Array.from([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),I7=Uint8Array.from(new Array(16).fill(0).map((r,e)=>e)),TT=I7.map(r=>(9*r+5)%16),O7=(()=>{let t=[[I7],[TT]];for(let n=0;n<4;n++)for(let s of t)s.push(s[n].map(o=>_T[o]));return t})(),D7=O7[0],P7=O7[1],M7=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(r=>Uint8Array.from(r)),ET=D7.map((r,e)=>r.map(t=>M7[e][t])),AT=P7.map((r,e)=>r.map(t=>M7[e][t])),kT=Uint32Array.from([0,1518500249,1859775393,2400959708,2840853838]),CT=Uint32Array.from([1352829926,1548603684,1836072691,2053994217,0]);function B7(r,e,t,n){return r===0?e^t^n:r===1?e&t|~e&n:r===2?(e|~t)^n:r===3?e&n|t&~n:e^(t|~n)}var Vp=new Uint32Array(16),S4=class extends Ra{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){let{h0:e,h1:t,h2:n,h3:s,h4:o}=this;return[e,t,n,s,o]}set(e,t,n,s,o){this.h0=e|0,this.h1=t|0,this.h2=n|0,this.h3=s|0,this.h4=o|0}process(e,t){for(let _=0;_<16;_++,t+=4)Vp[_]=e.getUint32(t,!0);let n=this.h0|0,s=n,o=this.h1|0,i=o,c=this.h2|0,a=c,u=this.h3|0,d=u,y=this.h4|0,v=y;for(let _=0;_<5;_++){let T=4-_,A=kT[_],B=CT[_],I=D7[_],P=P7[_],M=ET[_],L=AT[_];for(let U=0;U<16;U++){let Z=we(n+B7(_,o,c,u)+Vp[I[U]]+A,M[U])+y|0;n=y,y=u,u=we(c,10)|0,c=o,o=Z}for(let U=0;U<16;U++){let Z=we(s+B7(T,i,a,d)+Vp[P[U]]+B,L[U])+v|0;s=v,v=d,d=we(a,10)|0,a=i,i=Z}}this.set(this.h1+c+d|0,this.h2+u+v|0,this.h3+y+s|0,this.h4+n+i|0,this.h0+o+a|0)}roundClean(){tt(Vp)}destroy(){this.destroyed=!0,tt(this.buffer),this.set(0,0,0,0,0)}},Kp=Ma(()=>new S4);var _4=rt;function BT(r){if(r.length>=255)throw new TypeError("Alphabet too long");let e=new Uint8Array(256);for(let u=0;u<e.length;u++)e[u]=255;for(let u=0;u<r.length;u++){let d=r.charAt(u),y=d.charCodeAt(0);if(e[y]!==255)throw new TypeError(d+" is ambiguous");e[y]=u}let t=r.length,n=r.charAt(0),s=Math.log(t)/Math.log(256),o=Math.log(256)/Math.log(t);function i(u){if(u instanceof Uint8Array||(ArrayBuffer.isView(u)?u=new Uint8Array(u.buffer,u.byteOffset,u.byteLength):Array.isArray(u)&&(u=Uint8Array.from(u))),!(u instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(u.length===0)return"";let d=0,y=0,v=0,_=u.length;for(;v!==_&&u[v]===0;)v++,d++;let T=(_-v)*o+1>>>0,A=new Uint8Array(T);for(;v!==_;){let P=u[v],M=0;for(let L=T-1;(P!==0||M<y)&&L!==-1;L--,M++)P+=256*A[L]>>>0,A[L]=P%t>>>0,P=P/t>>>0;if(P!==0)throw new Error("Non-zero carry");y=M,v++}let B=T-y;for(;B!==T&&A[B]===0;)B++;let I=n.repeat(d);for(;B<T;++B)I+=r.charAt(A[B]);return I}function c(u){if(typeof u!="string")throw new TypeError("Expected String");if(u.length===0)return new Uint8Array;let d=0,y=0,v=0;for(;u[d]===n;)y++,d++;let _=(u.length-d)*s+1>>>0,T=new Uint8Array(_);for(;d<u.length;){let P=u.charCodeAt(d);if(P>255)return;let M=e[P];if(M===255)return;let L=0;for(let U=_-1;(M!==0||L<v)&&U!==-1;U--,L++)M+=t*T[U]>>>0,T[U]=M%256>>>0,M=M/256>>>0;if(M!==0)throw new Error("Non-zero carry");v=L,d++}let A=_-v;for(;A!==_&&T[A]===0;)A++;let B=new Uint8Array(y+(_-A)),I=y;for(;A!==_;)B[I++]=T[A++];return B}function a(u){let d=c(u);if(d)return d;throw new Error("Non-base"+t+" character")}return{encode:i,decodeUnsafe:c,decode:a}}var R7=BT;var IT="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Wp=R7(IT);function N7(r){function e(o){var i=Uint8Array.from(o),c=r(i),a=i.length+4,u=new Uint8Array(a);return u.set(i,0),u.set(c.subarray(0,4),i.length),Wp.encode(u)}function t(o){var i=o.slice(0,-4),c=o.slice(-4),a=r(i);if(!(c[0]^a[0]|c[1]^a[1]|c[2]^a[2]|c[3]^a[3]))return i}function n(o){var i=Wp.decodeUnsafe(o);if(i!=null)return t(i)}function s(o){var i=Wp.decode(o),c=t(i);if(c==null)throw new Error("Invalid checksum");return c}return{encode:e,decode:s,decodeUnsafe:n}}function OT(r){return _4(_4(r))}var xs=N7(OT);function Zp(r){let e=F(r);return e<253?Vn(e,1):e<=65535?Ae([253],Vn(e,2)):e<=4294967295?Ae([254],Vn(e,4)):Ae([255],Vn(e,8))}function tf(r,e){let t=e??`Bitcoin Signed Message:
`,n=typeof t=="string"?Y(t,"utf8"):Y(t),s=typeof r=="string"?Y(r,"utf8"):Y(r);return rt(rt(Ae(n,Zp(s.length),s)))}function ni(r){return Kp(rt(Y(r)))}function t0(r,e){return xs.encode(Ae([e],ni(r)))}function r0(r){return j(xs.decode(r).slice(1))}function n0(r,e,t){let n=typeof r=="string"?r:j(r).slice(2),s=Y(e,"base64").slice(1);return Ie.verify(Y(s),tf(n),Y(t))}function rf(r){let e=typeof r=="string"?r:j(r),t=Y(`Nervos Message:${e}`,"utf8");return br(t)}function s0(r,e,t){let n=Y(e);return Ie.verify(new Ie.Signature(F(n.slice(0,32)),F(n.slice(32,64))).addRecoveryBit(Number(F(n.slice(64,65)))).toBytes(),Y(rf(r)),Y(t))}var DT=class extends Error{constructor(r,e="Invalid Params",t=void 0){super(r),this.name=r==="User Rejected"?r:e,this.rawError=t}};function PT(r,e){let t,n,s,o="";for(t in r)if((s=r[t])!==void 0)if(Array.isArray(s))for(n=0;n<s.length;n++)o&&(o+="&"),o+=`${encodeURIComponent(t)}=${encodeURIComponent(s[n])}`;else o&&(o+="&"),o+=`${encodeURIComponent(t)}=${encodeURIComponent(s)}`;return(e||"")+o}function L7(r){if(!r)return"";let e=decodeURIComponent(r);return e==="false"?!1:e==="true"?!0:+e*0===0&&`${+e}`===e?+e:e}function MT(r){let e,t,n={},s=r.split("&");for(;e=s.shift();)e=e.split("="),t=e.shift(),n[t]!==void 0?n[t]=[].concat(n[t],L7(e.shift())):n[t]=L7(e.shift());return n}function RT(r){return e=>{e.substring(0,1)==="?"&&(e=e.substring(1));let t=MT(e);for(let n in t){let s=t[n];if(typeof s=="string")try{t[n]=r(s)}catch{}}if(Object.keys(t).length===0)throw new DT("Invalid request","Invalid Params");return t}}function NT(r,e){function t(n){if(typeof n=="object"&&n!==null)try{return r(n)}catch{}else if(typeof n=="string"&&typeof e=="function")try{return e(n),r(n)}catch{}return n}return n=>{n={...n},n&&Object.keys(n).forEach(o=>{let i=n[o];typeof i>"u"||i===void 0?delete n[o]:n[o]=t(i)});let s=PT(n).toString();return s?`?${s}`:""}}var dU=RT(JSON.parse),LT=NT(JSON.stringify,JSON.parse);function o0(r){let e=r.replace(/-/g,"+").replace(/_/g,"/"),t=(4-e.length%4)%4,n=e.padEnd(e.length+t,"="),s=atob(n),o=new ArrayBuffer(s.length),i=new Uint8Array(o);for(let c=0;c<s.length;c++)i[c]=s.charCodeAt(c);return o}function si(r){let e=new Uint8Array(r),t="";for(let s=0;s<e.length;s++){let o=e[s];o!=null&&(t+=String.fromCharCode(o))}return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}function T4(r){let e=new Uint8Array(r.length/2);for(let t=0;t<r.length;t+=2)e[t/2]=Number.parseInt(r.substring(t,t+2),16);return e.buffer}function H7(r){return[...new Uint8Array(r)].map(e=>e.toString(16).padStart(2,"0")).join("")}function U7(r,e){let t=new Uint8Array(r.byteLength+e.byteLength);return t.set(new Uint8Array(r),0),t.set(new Uint8Array(e),r.byteLength),t.buffer}function F7(r){return new TextEncoder().encode(r)}function $7(r){let e="";for(let t=0;t<r.length;t+=2)e+=String.fromCharCode(Number.parseInt(r.substr(t,2),16));return e}function oi(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone}var Gp=(r=>(r[r.RS256=-257]="RS256",r[r.ES256=-7]="ES256",r))(Gp||{}),Pe=(r=>(r.Auth="Auth",r.SignMessage="SignMessage",r.SignEvm="SignEvm",r.SignPsbt="SignPsbt",r.BatchSignPsbt="BatchSignPsbt",r.SignCkbTx="SignCkbTx",r.SignCotaNFT="SignCotaNFT",r.SignCkbRawTx="SignCkbRawTx",r.SignNostrEvent="SignNostrEvent",r.EncryptNostrMessage="EncryptNostrMessage",r.EvmWeb2Login="EvmWeb2Login",r.DecryptNostrMessage="DecryptNostrMessage",r.AuthMiniApp="AuthMiniApp",r.SignMiniAppMessage="SignMiniAppMessage",r.SignMiniAppEvm="SignMiniAppEvm",r))(Pe||{});var HT={joyidAppURL:"https://testnet.joyid.dev"};var q7=()=>HT,E4=class j7 extends Error{constructor(e,t){super(t),this.error=e,this.error_description=t,Object.setPrototypeOf(this,j7.prototype)}},UT=class z7 extends E4{constructor(){super("timeout","Timeout"),Object.setPrototypeOf(this,z7.prototype)}},Jp=class V7 extends UT{constructor(e){super(),this.popup=e,Object.setPrototypeOf(this,V7.prototype)}},i0=class K7 extends E4{constructor(e){super("cancelled","Popup closed"),this.popup=e,Object.setPrototypeOf(this,K7.prototype)}},Xp=class extends E4{constructor(r){super("NotSupported","Popup window is blocked by browser. see: https://docs.joy.id/guide/best-practice#popup-window-blocked"),this.popup=r,Object.setPrototypeOf(this,i0.prototype)}};var FT="joyid-redirect";var Ue=(r,e,t)=>{let n=r.joyidAppURL??q7().joyidAppURL,s=new URL(`${n}`);s.pathname=t;let o=r.redirectURL;if(e==="redirect"){let c=new URL(o);c.searchParams.set(FT,"true"),o=c.href}s.searchParams.set("type",e);let i=LT({...r,redirectURL:o});return s.searchParams.set("_data_",i),s.href};var Yp=(r="")=>{let n=window.screenX+(window.innerWidth-400)/2,s=window.screenY+(window.innerHeight-600)/2;return window.open(r,"joyid:authorize:popup",`left=${n},top=${s},width=400,height=600,resizable,scrollbars=yes,status=1`)};var $T="joyid-block-dialog-style",A4="joyid-block-dialog-approve",k4="joyid-block-dialog-reject",qT=`
.joyid-block-dialog {
  position: fixed;
  top: 32px;
  left: 50%;
  width: 340px;
  margin-left: -170px;
  background: white;
  color: #333;
  display: flex;
  flex-flow: row nowrap;
  justify-content: space-between;
  align-items: center;
  height: 110px;
  z-index: 100002;
  box-sizing: border-box;
  border: 1px solid #ffffff;
  border-radius: 8px;
  padding: 16px 20px;
}
.joyid-block-dialog-bg {
  width: 100%;
  height: 100%;
  background-color: rgba(0,0,0,0.5);
  position: fixed;
  top: 0;
  left: 0;
  display: none;
  z-index: 100001;
  display: block;
}
.joyid-block-dialog-title {
  font-weight: bold;
  font-size: 14px;
  margin-bottom: 8px;
}
.joyid-block-dialog-tip {
  font-size: 12px;
  color: #777;
}
.joyid-block-dialog-btn {
  width: 90px;
  height: 35px;
  font-size: 12px;
  text-align: center;
  border-radius: 6px;
  cursor: pointer;
}
.joyid-block-dialog-action {
  text-align: right;
}
#${A4} {
  border: 1px solid #333;
  color: #333;
  background: #D2FF00;
  margin-bottom: 8px;
}

#${k4} {
  background: transparent;
}
`,jT=`
<div class="joyid-block-dialog">
  <div class="joyid-block-dialog-content">
    <div class="joyid-block-dialog-title">
      Request Pop-up
    </div>
    <div class="joyid-block-dialog-tip">
      Click Approve to complete creating or using wallet
    </div>
  </div>
  <div class="joyid-block-dialog-action">
    <button class="joyid-block-dialog-btn" id="${A4}">Approve</button>
    <button class="joyid-block-dialog-btn" id="${k4}">Reject</button>
  </div>
</div>
`,zT=()=>{if(document.getElementById($T)!=null)return;let e=document.createElement("style");e.appendChild(document.createTextNode(qT)),(document.head??document.getElementsByTagName("head")[0]).appendChild(e)},Qp=async r=>{zT();let e=document.createElement("div");e.innerHTML=jT,document.body.appendChild(e);let t=document.createElement("div");t.className="joyid-block-dialog-bg",document.body.appendChild(t);let n=document.getElementById(A4),s=document.getElementById(k4),o=()=>{document.body.removeChild(e),document.body.removeChild(t)};return new Promise((i,c)=>{n?.addEventListener("click",async()=>{try{let a=await r();o(),i(a)}catch(a){o(),c(a)}}),s?.addEventListener("click",()=>{o(),c(new Error("User Rejected"))})})};var S6={};be(S6,{AddressException:()=>y0,AddressFormatTypeAndEncodeMethodNotMatchException:()=>pi,AddressFormatTypeException:()=>yf,AddressPayloadException:()=>mo,AddressPrefix:()=>Tc,AddressType:()=>Ve,Bech32Type:()=>mi,CodeHashException:()=>Sc,ECPair:()=>n6,EMPTY_SECP_SIG:()=>nk,EMPTY_WITNESS_ARGS:()=>rk,ErrorCode:()=>yh,HashTypeException:()=>mf,HexStringException:()=>m0,HexStringWithout0xException:()=>nn,InputTypeException:()=>T0,JSBI:()=>Tr.default,KeyLenTooLargeException:()=>w0,KeyLenTooSmallException:()=>x0,KeyTypeException:()=>E0,OutLenTooLargeException:()=>b0,OutLenTooSmallException:()=>g0,OutTypeException:()=>v0,PERSONAL:()=>Sf,ParameterRequiredException:()=>Un,PersonalLenException:()=>k0,PersonalTypeException:()=>A0,PrivateKeyLenException:()=>gf,ReconciliationException:()=>C0,SaltLenException:()=>_0,SaltTypeException:()=>S0,SignMessageException:()=>h0,addressToScript:()=>JA,assertToBeHexString:()=>_c,assertToBeHexStringOrBigint:()=>hi,bech32:()=>wf,bech32Address:()=>a6,bech32m:()=>vf,blake160:()=>u6,blake2b:()=>v6,bytesToHex:()=>Cs,calculateMaximumWithdraw:()=>uk,calculateTransactionFee:()=>e9,cellOccupied:()=>y6,extractDAOData:()=>w6,fullLengthSize:()=>_h,fullPayloadToAddress:()=>WA,getOffsets:()=>d6,getTransactionSize:()=>b6,getWithdrawEpoch:()=>ok,hexToBytes:()=>nt,offsetSize:()=>Sh,parseAddress:()=>Eb,parseEpoch:()=>g6,privateKeyToAddress:()=>fk,privateKeyToPublicKey:()=>r9,pubkeyToAddress:()=>f6,rawTransactionToHash:()=>ak,reconcilers:()=>x6,scriptOccupied:()=>m6,scriptToAddress:()=>KA,scriptToHash:()=>ck,serializeArgs:()=>$b,serializeArray:()=>yo,serializeCellDep:()=>zb,serializeCellDeps:()=>Vb,serializeCodeHash:()=>Ub,serializeDepType:()=>jb,serializeDynVec:()=>O0,serializeEpoch:()=>Qb,serializeFixVec:()=>Bs,serializeHashType:()=>Fb,serializeHeaderDeps:()=>Kb,serializeInput:()=>Wb,serializeInputs:()=>Zb,serializeOption:()=>p6,serializeOutPoint:()=>h6,serializeOutput:()=>Gb,serializeOutputs:()=>Jb,serializeOutputsData:()=>Xb,serializeRawTransaction:()=>Eh,serializeScript:()=>_f,serializeStruct:()=>I0,serializeTable:()=>bi,serializeTransaction:()=>Ah,serializeVersion:()=>qb,serializeWitnessArgs:()=>Th,serializeWitnesses:()=>Yb,systemScripts:()=>c6,toAddressPayload:()=>Tb,toBigEndian:()=>bf,toUint16Le:()=>$A,toUint32Le:()=>Fn,toUint64Le:()=>gh});var Tr=Ge(c0(),1);var Sb=Ge(vb(),1);var yh;(function(r){r[r.ParameterInvalid=101]="ParameterInvalid",r[r.ParameterRequired=102]="ParameterRequired",r[r.SignMessageFailed=103]="SignMessageFailed",r[r.AddressInvalid=104]="AddressInvalid",r[r.ReconciliationFailed=105]="ReconciliationFailed"})(yh||(yh={}));var Be=yh;var Un=class extends Error{constructor(e){super(`${e} is required`),this.code=Be.ParameterRequired}},h0=class extends Error{constructor(){super("Fail to sign the message"),this.code=Be.SignMessageFailed}};var m0=class extends Error{constructor(e){super(`${e} is an invalid hex string`),this.code=Be.ParameterInvalid}},nn=class extends Error{constructor(e){super(`Hex string ${e} should start with 0x`),this.code=Be.ParameterInvalid}};var mo=class extends Error{constructor(e,t){super(`'${e}' is not a valid ${t?`${t} version `:""}address payload`),this.code=Be.AddressInvalid,this.type=t}},y0=class extends Error{constructor(e,t,n){super(`'${e}' is not a valid ${n?`${n} version `:""}address`),this.code=Be.AddressInvalid,this.type=n,this.stack=t}},Sc=class extends Error{constructor(e){super(`'${e}' is not a valid code hash`),this.code=Be.AddressInvalid}},mf=class extends Error{constructor(e){super(`'${e}' is not a valid hash type`),this.code=Be.AddressInvalid}},yf=class extends Error{constructor(e){super(`0x${e.toString(16).padStart(2,"0")} is not a valid address format type`),this.code=Be.AddressInvalid}},pi=class extends Error{constructor(e,t="unknown"){super(`Address format type 0x${e.toString(16).padStart(2,"0")} doesn't match encode method ${t}`),this.code=Be.AddressInvalid}};var g0=class extends Error{constructor(e,t){super(`Expect outlen to be at least ${t}, but ${e} received`),this.code=Be.ParameterInvalid}},b0=class extends Error{constructor(e,t){super(`Expect outlen to be at most ${t}, but ${e} received`),this.code=Be.ParameterInvalid}},x0=class extends Error{constructor(e,t){super(`Expect key length to be at least ${t}, but ${e} received`),this.code=Be.ParameterInvalid}},w0=class extends Error{constructor(e,t){super(`Expect key length to be at most ${t}, but ${e} received`),this.code=Be.ParameterInvalid}},v0=class extends TypeError{constructor(){super('Expect out to be "binary", "hex", Uint8Array, or Buffer'),this.code=Be.ParameterInvalid}},S0=class extends TypeError{constructor(){super("Expect salt to be Uint8Array or Buffer"),this.code=Be.ParameterInvalid}},_0=class extends Error{constructor(e,t){super(`Expect salt length to be ${t}, but ${e} received`),this.code=Be.ParameterInvalid}},T0=class extends TypeError{constructor(){super("Expect input to be Uint8Array or Buffer"),this.code=Be.ParameterInvalid}},E0=class extends TypeError{constructor(){super("Expect key to be Uint8Array or Buffer"),this.code=Be.ParameterInvalid}},A0=class extends TypeError{constructor(){super("Expect PERSONAL to be Uint8Array or Buffer"),this.code=Be.ParameterInvalid}},k0=class extends Error{constructor(e,t){super(`Expect PERSONAL length to be ${t}, but ${e} received`),this.code=Be.ParameterInvalid}};var gf=class extends Error{constructor(){super("Private key has invalid length"),this.code=Be.ParameterInvalid}};var C0=class extends Error{constructor(){super("Fail to reconcile transaction, try to increase extra count or check the transaction"),this.code=Be.ReconciliationFailed}};var _c=r=>{if(typeof r!="string"||!r.startsWith("0x")||Number.isNaN(+r))throw new m0(r);return!0},hi=r=>{if(typeof r=="bigint")return!0;if(typeof r=="string"){if(!r.startsWith("0x"))throw new nn(r);return!0}throw new TypeError(`${r} should be type of string or bigint`)};var $A=r=>{hi(r);let e=new DataView(new ArrayBuffer(2));return e.setUint16(0,Number(r),!0),`0x${e.getUint16(0,!1).toString(16).padStart(4,"0")}`},Fn=r=>{hi(r);let e=new DataView(new ArrayBuffer(4));return e.setUint32(0,Number(r),!0),`0x${e.getUint32(0,!1).toString(16).padStart(8,"0")}`},gh=r=>{hi(r);let e=(typeof r=="bigint"?r.toString(16):r.slice(2)).padStart(16,"0"),t=Fn(`0x${e.slice(0,8)}`).slice(2);return`0x${Fn(`0x${e.slice(8)}`).slice(2)}${t}`},nt=r=>{if(r==="")return new Uint8Array;if(typeof r=="string"&&!r.startsWith("0x"))throw new nn(r);let e=r.toString(16).replace(/^0x/i,"");e=e.length%2?`0${e}`:e;let t=[];for(let n=0;n<e.length;n+=2)t.push(parseInt(e.substr(n,2),16));return new Uint8Array(t)},bf=r=>(_c(r),`0x${nt(r).reduceRight((t,n)=>t+n.toString(16).padStart(2,"0"),"")}`),Cs=r=>`0x${[...r].map(e=>e.toString(16).padStart(2,"0")).join("")}`;var qA=new Sb.default.ec("secp256k1"),r6=class{constructor(e,{compressed:t=!0}={compressed:!0}){if(this.compressed=!1,this.getPrivateKey=(n="hex")=>n==="hex"?this.privateKey:this.key.getPrivate(n),this.getPublicKey=n=>n==="hex"?this.publicKey:this.key.getPublic(this.compressed,n),this.sign=n=>{let s=typeof n=="string"?nt(n):n;return`0x${this.key.sign(s,{canonical:!0}).toDER("hex")}`},this.verify=(n,s)=>{let o=typeof n=="string"?nt(n):n,i=typeof s=="string"?nt(s):s;return this.key.verify(o,i)},this.signRecoverable=n=>{let s=typeof n=="string"?nt(n):n,{r:o,s:i,recoveryParam:c}=this.key.sign(s,{canonical:!0});if(c===null)throw new h0;let a=o.toString(16).padStart(64,"0"),u=i.toString(16).padStart(64,"0");return`0x${a}${u}0${c}`},e===void 0)throw new Un("Private key");if(typeof e=="string"&&!e.startsWith("0x"))throw new nn(e);if(typeof e=="string"&&e.length!==66)throw new gf;if(typeof e=="object"&&e.byteLength!==32)throw new gf;this.key=qA.keyFromPrivate(typeof e=="string"?e.replace(/^0x/,""):e),this.compressed=t}get privateKey(){return`0x${this.key.getPrivate("hex").padStart(64,"0")}`}get publicKey(){return`0x${this.key.getPublic(this.compressed,"hex")}`}},n6=r6;var c6={};be(c6,{ANYONE_CAN_PAY_MAINNET:()=>o6,ANYONE_CAN_PAY_TESTNET:()=>i6,NERVOS_DAO:()=>jA,SECP256K1_BLAKE160:()=>xf,SECP256K1_MULTISIG:()=>s6,SIMPLE_UDT:()=>zA});var xf={codeHash:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",hashType:"type",depType:"depGroup",mainnetOutPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:"0x0"},testnetOutPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:"0x0"}},s6={codeHash:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",hashType:"type",depType:"depGroup",mainnetOutPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:"0x1"},testnetOutPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:"0x1"}},o6={codeHash:"0xd369597ff47f29fbc0d47d2e3775370d1250b85140c670e4718af712983a2354",hashType:"type",depType:"depGroup",mainnetOutPoint:{txHash:"0x4153a2014952d7cac45f285ce9a7c5c0c0e1b21f2d378b82ac1433cb11c25c4d",index:"0x0"}},i6={codeHash:"0x3419a1c09eb2567f6552ee7a8ecffd64155cffe0f1796e6e61ec088d740c1356",hashType:"type",depType:"depGroup",testnetOutPoint:{txHash:"0xec26b0f85ed839ece5f11c4c4e837ec359f5adc4420410f6453b1f6b60fb96a6",index:"0x0"}},jA={codeHash:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",hashType:"type",depType:"code",mainnetOutPoint:{txHash:"0xe2fb199810d49a4d8beec56718ba2593b665db9d52299a0f9e6e75416d73ff5c",index:"0x2"},testnetOutPoint:{txHash:"0x8f8c79eb6671709633fe6a46de93c0fedc9c1b8a6527a18d3983879542635c9f",index:"0x2"}},zA={codeHash:"0x48dbf59b4c7ee1547238021b4869bceedf4eea6b43772e5d66ef8865b6ae7212",hashType:"data",depType:"code",testnetOutPoint:{txHash:"0xc1b2ae129fad7465aaa9acc9785f842ba3e6e8b8051d899defa89f5508a77958",index:"0x0"}};var bh=1023,Tc;(function(r){r.Mainnet="ckb",r.Testnet="ckt"})(Tc||(Tc={}));var Ve;(function(r){r.FullVersion="0x00",r.HashIdx="0x01",r.DataCodeHash="0x02",r.TypeCodeHash="0x04"})(Ve||(Ve={}));var mi;(function(r){r.Bech32="bech32",r.Bech32m="bech32m"})(mi||(mi={}));var VA=(r,e=!0)=>vf.encode(e?Tc.Mainnet:Tc.Testnet,vf.toWords(r),bh),_b=({codeHash:r,hashType:e,args:t})=>{if(!t.startsWith("0x"))throw new nn(t);if(!r.startsWith("0x")||r.length!==66)throw new Sc(r);let n;if((function(s){s.data="00",s.type="01",s.data1="02",s.data2="04"})(n||(n={})),!n[e])throw new mf(e);return nt(`0x00${r.slice(2)}${n[e]}${t.slice(2)}`)},KA=(r,e=!0)=>VA(_b(r),e),Tb=(r,e=Ve.HashIdx,t,n)=>{if(typeof r=="string"&&!r.startsWith("0x"))throw new nn(r);if(![Ve.HashIdx,Ve.DataCodeHash,Ve.TypeCodeHash,Ve.FullVersion].includes(e))throw new yf(+e);if([Ve.DataCodeHash,Ve.TypeCodeHash].includes(e)&&console.warn("Address of 'AddressType.DataCodeHash' or 'AddressType.TypeCodeHash' is deprecated, please use address of AddressPrefix.FullVersion"),t||(t=e===Ve.HashIdx?"0x00":xf.codeHash),e!==Ve.FullVersion)return new Uint8Array([...nt(e),...nt(t),...typeof r=="string"?nt(r):r]);if(!n&&t===xf.codeHash&&(n=xf.hashType),!t.startsWith("0x")||t.length!==66)throw new Sc(t);if(!n)throw new Un("hashType");return _b({codeHash:t,hashType:n,args:typeof r=="string"?r:Cs(r)})},a6=(r,{prefix:e=Tc.Mainnet,type:t=Ve.HashIdx,codeHashOrCodeHashIndex:n=""}={})=>wf.encode(e,wf.toWords(Tb(r,t,n)),bh),WA=({args:r,prefix:e,type:t=Ve.DataCodeHash,codeHash:n})=>a6(r,{prefix:e,type:t,codeHashOrCodeHashIndex:n}),f6=(r,e={})=>{let t=u6(r);return a6(t,e)},ZA=(r,e)=>{let[t,n,...s]=r;if(e!==mi.Bech32)throw new pi(t,e);switch(n){case 0:case 1:{if(s.length!==20)throw new mo(r,"short");break}case 2:{if(s.length===20||s.length===22||s.length===24)break;throw new mo(r,"short")}default:throw new mo(r,"short")}},GA=(r,e)=>{let t=r[0],n=r.slice(1);switch(t){case+Ve.HashIdx:{ZA(r,e);break}case+Ve.DataCodeHash:case+Ve.TypeCodeHash:{if(e!==mi.Bech32)throw new pi(t,e);if(n.length<32)throw new mo(r,"full");break}case+Ve.FullVersion:{if(e!==mi.Bech32m)throw new pi(t,e);let s=n.slice(0,32);if(s.length<32)throw new Sc(Cs(s));let o=parseInt(n[32].toString(),16);if(!Object.values(Ve).map(i=>+i).includes(o))throw new mf(`0x${o.toString(16)}`);break}default:throw new mo(r)}},Eb=(r,e="binary")=>{let t,n=new Uint8Array;try{let s=wf.decode(r,bh);t=mi.Bech32,n=new Uint8Array(wf.fromWords(new Uint8Array(s.words)))}catch{let o=vf.decode(r,bh);t=mi.Bech32m,n=new Uint8Array(vf.fromWords(new Uint8Array(o.words)))}try{GA(n,t)}catch(s){throw s instanceof pi?s:new y0(r,s.stack,s.type)}return e==="binary"?n:Cs(n)},JA=r=>{let e=Eb(r),t=e[0];switch(t){case+Ve.FullVersion:{let n={"00":"data","01":"type","02":"data1","04":"data2"},s=Cs(e),o=`0x${s.substr(4,64)}`,i=n[s.substr(68,2)],c=`0x${s.substr(70)}`;return{codeHash:o,hashType:i,args:c}}case+Ve.HashIdx:{let n=[xf,s6,r.startsWith(Tc.Mainnet)?o6:i6],s=e[1],o=e.slice(2),i=n[s];return{codeHash:i.codeHash,hashType:i.hashType,args:Cs(o)}}case+Ve.DataCodeHash:case+Ve.TypeCodeHash:{let n=Cs(e.slice(1)),s=t===+Ve.DataCodeHash?"data":"type";return{codeHash:n.substr(0,66),hashType:s,args:`0x${n.substr(66)}`}}default:throw new yf(t)}};var vh=Ge(Jr(),1);var Ab=16,kb=64,Cb=16,Bb=64,Ib=16,Ob=16,ye=new Uint32Array(32),B0=new Uint32Array(32),xh=(r,e,t)=>{let n=r[e]+r[t],s=r[e+1]+r[t+1];n>=4294967296&&s++,r[e]=n,r[e+1]=s},Db=(r,e,t,n)=>{let s=r[e]+t;t<0&&(s+=4294967296);let o=r[e+1]+n;s>=4294967296&&o++,r[e]=s,r[e+1]=o},Mb=(r,e)=>r[e]^r[e+1]<<8^r[e+2]<<16^r[e+3]<<24,yi=(r,e,t,n,s,o)=>{let i=B0[s],c=B0[s+1],a=B0[o],u=B0[o+1];xh(ye,r,e),Db(ye,r,i,c);let d=ye[n]^ye[r],y=ye[n+1]^ye[r+1];ye[n]=y,ye[n+1]=d,xh(ye,t,n),d=ye[e]^ye[t],y=ye[e+1]^ye[t+1],ye[e]=d>>>24^y<<8,ye[e+1]=y>>>24^d<<8,xh(ye,r,e),Db(ye,r,a,u),d=ye[n]^ye[r],y=ye[n+1]^ye[r+1],ye[n]=d>>>16^y<<16,ye[n+1]=y>>>16^d<<16,xh(ye,t,n),d=ye[e]^ye[t],y=ye[e+1]^ye[t+1],ye[e]=y>>>31^d<<1,ye[e+1]=d>>>31^y<<1},Rb=new Uint32Array([4089235720,1779033703,2227873595,3144134277,4271175723,1013904242,1595750129,2773480762,2917565137,1359893119,725511199,2600822924,4215389547,528734635,327033209,1541459225]),XA=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3,11,8,12,0,5,2,15,13,10,14,3,6,7,1,9,4,7,9,3,1,13,12,11,14,2,6,5,10,4,0,15,8,9,0,5,7,2,4,10,15,14,1,11,12,6,8,3,13,2,12,6,10,0,11,8,3,4,13,7,5,15,14,1,9,12,5,1,15,14,13,4,10,0,7,6,3,9,2,8,11,13,11,7,14,12,1,3,9,5,0,15,4,8,6,2,10,6,15,14,9,11,3,0,8,12,2,13,7,1,4,10,5,10,2,8,4,7,6,1,5,15,11,9,14,3,12,13,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,14,10,4,8,9,15,13,6,1,12,0,2,11,7,5,3],_r=new Uint8Array(XA.map(r=>r*2)),Nb=(r,e)=>{let t=0;for(t=0;t<16;t++)ye[t]=r.h[t],ye[t+16]=Rb[t];for(ye[24]^=r.t,ye[25]^=r.t/4294967296,e&&(ye[28]=~ye[28],ye[29]=~ye[29]),t=0;t<32;t++)B0[t]=Mb(r.b,4*t);for(t=0;t<12;t++)yi(0,8,16,24,_r[t*16+0],_r[t*16+1]),yi(2,10,18,26,_r[t*16+2],_r[t*16+3]),yi(4,12,20,28,_r[t*16+4],_r[t*16+5]),yi(6,14,22,30,_r[t*16+6],_r[t*16+7]),yi(0,10,20,30,_r[t*16+8],_r[t*16+9]),yi(2,12,22,24,_r[t*16+10],_r[t*16+11]),yi(4,14,16,26,_r[t*16+12],_r[t*16+13]),yi(6,8,18,28,_r[t*16+14],_r[t*16+15]);for(t=0;t<16;t++)r.h[t]=r.h[t]^ye[t]^ye[t+16]},Pb=(r,e)=>{for(let t=0;t<e.length;t++)r.c===128&&(r.t+=r.c,Nb(r,!1),r.c=0),r.b[r.c++]=+e[t]},YA=(r,e)=>{for(r.t+=r.c;r.c<128;)r.b[r.c++]=0;Nb(r,!0);for(let t=0;t<r.outlen;t++)e[t]=r.h[t>>2]>>8*(t&3);return e},QA=r=>r<16?`0${r.toString(16)}`:r.toString(16),ek=r=>{let e="";for(let t=0;t<r.length;t++)e+=QA(+r[t]);return e},gi=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),l6=class{constructor(e,t,n,s){this.update=o=>{if(!(o instanceof Uint8Array))throw new T0;return Pb(this,o),this},this.digest=o=>{let i=!o||o==="binary"||o==="hex"?new Uint8Array(this.outlen):o;if(!(i instanceof Uint8Array))throw new v0;if(i.length<this.outlen)throw new Error("out must have at least outlen bytes of space");return YA(this,i),o==="hex"?ek(i):i},this.final=this.digest,gi.fill(0),this.b=new Uint8Array(128),this.h=new Uint32Array(16),this.t=0,this.c=0,this.outlen=e,gi[0]=e,t&&(gi[1]=t.length),gi[2]=1,gi[3]=1,n&&gi.set(n,32),s&&gi.set(s,48);for(let o=0;o<16;o++)this.h[o]=Rb[o]^Mb(gi,o*4);t&&(Pb(this,t),this.c=128)}},tk=(r,e,t,n,s)=>{if(s!==!0){if(r<Ab)throw new g0(r,Ab);if(r>kb)throw new b0(r,kb);if(e!==null){if(!(e instanceof Uint8Array))throw new E0;if(e.length<Cb)throw new x0(e.length,Cb);if(e.length>Bb)throw new w0(e.length,Bb)}if(t!==null){if(!(t instanceof Uint8Array))throw new S0;if(t.length!==Ib)throw new _0(t.length,Ib)}if(n!==null){if(!(n instanceof Uint8Array))throw new A0;if(n.length!==Ob)throw new k0(n.length,Ob)}}return new l6(r,e,t,n)},wh=tk;var Sf=new Uint8Array([99,107,98,45,100,101,102,97,117,108,116,45,104,97,115,104]),rk={lock:"",inputType:"",outputType:""},nk=`0x${"0".repeat(130)}`;var sk=(r,e="binary")=>{let t=typeof r=="string"?nt(r):r,n=wh(32,null,null,Sf);return n.update(t),n.digest(e).slice(0,e==="binary"?20:40)},Lb=sk;var Hb={blake2b:wh,blake160:Lb,bech32:vh.bech32,bech32m:vh.bech32m};var Sh=4,_h=4,d6=r=>{let t=[_h+Sh*r.length];return r.forEach((n,s)=>{s&&t.push(t[t.length-1]+r[s-1])}),t},yo=r=>{if(typeof r!="string"&&!Array.isArray(r))throw new TypeError("The array to be serialized should by type of string or bytes");let e=typeof r=="string"?nt(r):r;return Cs(e)},I0=r=>{let e="";return r.forEach(t=>{e+=yo(t).slice(2)}),`0x${e}`},Bs=r=>{if(typeof r!="string"&&!Array.isArray(r))throw new TypeError("The fixed vector to be serialized should be a string or an array of bytes");let t=(typeof r=="string"?[...nt(r)].map(s=>`0x${s.toString(16)}`):r).map(s=>yo(s).slice(2));return`0x${Fn(`0x${t.length.toString(16)}`).slice(2)}${t.join("")}`},O0=r=>{if(!Array.isArray(r))throw new TypeError("The dynamic vector to be serialized should be an array of bytes");let e=r.map(i=>yo(i).slice(2)),t=e.join(""),n="";e.length&&(n=d6(e.map(i=>i.length/2)).map(i=>Fn(`0x${i.toString(16)}`).slice(2)).join(""));let s=_h+Sh*e.length;return`0x${Fn(`0x${(s+t.length/2).toString(16)}`).slice(2)}${n}${t}`},bi=r=>{let e=[];r.forEach(i=>{e.push(yo(i).slice(2))});let t=e.join(""),n=_h+Sh*r.size,s=Fn(`0x${(n+t.length/2).toString(16)}`).slice(2),o=d6(e.map(i=>i.length/2)).map(i=>Fn(`0x${i.toString(16)}`).slice(2)).join("");return`0x${s}${o}${t}`},p6=r=>r||"0x";var Ub=r=>yo(r),Fb=r=>{if(r==="data")return"0x00";if(r==="type")return"0x01";if(r==="data1")return"0x02";if(r==="data2")return"0x04";throw new TypeError("Hash type must be either of 'data' or 'type'")},$b=r=>Bs(r),_f=r=>{if(!r)throw new Un("Script");let{codeHash:e="",hashType:t,args:n=""}=r,s=Ub(e),o=Fb(t),i=$b(n);return bi(new Map([["codeHash",s],["hashType",o],["args",i]]))};var qb=r=>Fn(r),h6=r=>{if(!r)return"";let e=new Map([["txHash",r.txHash],["index",Fn(r.index)]]);return I0(e)},jb=r=>{if(r==="code")return"0x00";if(r==="depGroup")return"0x01";throw new TypeError("Dep type must be either of 'code' or 'depGroup'")},zb=r=>{let e=h6(r.outPoint),t=jb(r.depType);return I0(new Map([["outPoint",e],["depType",t]]))},Vb=r=>{let e=r.map(t=>zb(t));return Bs(e)},Kb=r=>{let e=r.map(t=>yo(t));return Bs(e)},Wb=r=>{let e=h6(r.previousOutput),t=gh(r.since);return I0(new Map([["since",t],["previousOutput",e]]))},Zb=r=>{let e=r.map(t=>Wb(t));return Bs(e)},Gb=r=>{let e=gh(r.capacity),t=_f(r.lock),n=r.type?_f(r.type):"";return bi(new Map([["capacity",e],["lock",t],["type",n]]))},Jb=r=>{let e=r.map(t=>Gb(t));return O0(e)},Xb=r=>{let e=r.map(t=>Bs(t));return O0(e)},Th=r=>{let[e,t,n]=[r.lock,r.inputType,r.outputType].map(o=>p6(o)==="0x"?"0x":Bs(o));return bi(new Map([["lock",e],["inputType",t],["outputType",n]]))},Yb=r=>{let e=r.map(t=>Bs(t));return O0(e)},Eh=r=>{let e=qb(r.version),t=Vb(r.cellDeps),n=Kb(r.headerDeps),s=Zb(r.inputs),o=Jb(r.outputs),i=Xb(r.outputsData);return bi(new Map([["version",e],["cellDeps",t],["headerDeps",n],["inputs",s],["outputs",o],["outputsData",i]]))},Ah=r=>{let e=Eh(r),t=Yb(r.witnesses||[]);return bi(new Map([["raw",e],["witnesses",t]]))};var m6=r=>r.args.slice(2).length/2+32+1,y6=r=>8+m6(r.lock)+(r.type?m6(r.type):0);var Re=Ge(c0(),1);var Qb=({length:r,index:e,number:t})=>(_c(r),_c(e),_c(t),`0x${Re.default.add(Re.default.add(Re.default.add(Re.default.leftShift(Re.default.BigInt(32),Re.default.BigInt(56)),Re.default.leftShift(Re.default.BigInt(r),Re.default.BigInt(40))),Re.default.leftShift(Re.default.BigInt(e),Re.default.BigInt(24))),Re.default.BigInt(t)).toString(16)}`),g6=r=>({length:`0x${Re.default.bitwiseAnd(Re.default.signedRightShift(Re.default.BigInt(r),Re.default.BigInt(40)),Re.default.BigInt(65535)).toString(16)}`,index:`0x${Re.default.bitwiseAnd(Re.default.signedRightShift(Re.default.BigInt(r),Re.default.BigInt(24)),Re.default.BigInt(65535)).toString(16)}`,number:`0x${Re.default.bitwiseAnd(Re.default.BigInt(r),Re.default.BigInt(16777215)).toString(16)}`}),ok=(r,e)=>{let n=g6(r),s=g6(e),o=+s.number-+n.number;+s.index*+n.length>+n.index*+s.length&&(o+=1);let i=o<=180?180:(Math.floor((o-1)/180)+1)*180;return Qb({index:n.index,length:n.length,number:`0x${(+n.number+i).toString(16)}`})};var b6=r=>{let e=Object.assign(Object.assign({},r),{witnesses:r.witnesses.map(s=>typeof s=="string"?s:Th(s))});return Ah(e).slice(2).length/2+4};var Is=Ge(c0(),1);var e9=(r,e)=>{hi(r),hi(e);let t=Is.default.BigInt(1e3),n=Is.default.multiply(Is.default.BigInt(`${r}`),Is.default.BigInt(`${e}`)),s=Is.default.divide(n,t);return Is.default.lessThan(Is.default.multiply(s,t),n)?`0x${Is.default.add(s,Is.default.BigInt(1)).toString(16)}`:`0x${s.toString(16)}`},t9=e9;var x6={};be(x6,{extraInputs:()=>ik});var $e=Ge(c0(),1);var ik=r=>{let e=$e.default.BigInt(`${r.changeThreshold}`),t=$e.default.BigInt(`${r.feeRate}`),n=r.tx.outputs[r.tx.outputs.length-1],s=$e.default.BigInt(n.capacity),o=$e.default.BigInt(t9(`0x${b6(r.tx).toString(16)}`,`0x${t.toString(16)}`)),i=$e.default.subtract($e.default.add(o,e),s);if($e.default.LE(i,$e.default.BigInt(0)))return Object.assign(Object.assign({},r.tx),{outputs:[...r.tx.outputs.slice(0,-1),Object.assign(Object.assign({},n),{capacity:`0x${$e.default.subtract(s,o).toString(16)}`})]});r.cells.sort((u,d)=>+$e.default.subtract($e.default.BigInt(u.capacity),$e.default.BigInt(d.capacity)));let c=$e.default.BigInt(44),a=$e.default.divide($e.default.multiply(c,t),$e.default.BigInt(1e3));for(let u=1;u<=Math.min(r.extraCount,r.cells.length);u++){let d=$e.default.multiply($e.default.BigInt(u),a),y=$e.default.add(i,d),v=r.cells.slice(0,u).reduce((_,T)=>$e.default.add(_,$e.default.BigInt(T.capacity)),$e.default.BigInt(0));if($e.default.GE(v,y)){let _=[...r.tx.inputs,...r.cells.slice(0,u).map(P=>({previousOutput:P.outPoint,since:"0x0"}))],T=$e.default.add(e,$e.default.subtract(v,y)),A=Object.assign(Object.assign({},n),{capacity:`0x${T.toString(16)}`}),B=[...r.tx.outputs.slice(0,-1),A];return Object.assign(Object.assign({},r.tx),{inputs:_,outputs:B})}}throw new C0};var{blake2b:v6,bech32:wf,bech32m:vf,blake160:u6}=Hb,ck=r=>{if(!r)throw new Un("Script");let e=_f(r),t=v6(32,null,null,Sf);return t.update(nt(e)),`0x${t.digest("hex")}`},ak=r=>{if(!r)throw new Un("Raw transaction");let e=Eh(r),t=v6(32,null,null,Sf);return t.update(nt(e)),`0x${t.digest("hex")}`},r9=r=>new n6(r).publicKey,fk=(r,e)=>f6(r9(r),e),w6=r=>{if(!r.startsWith("0x"))throw new nn(r);let e=r.replace("0x","");return{c:bf(`0x${e.slice(0,16)}`),ar:bf(`0x${e.slice(16,32)}`),s:bf(`0x${e.slice(32,48)}`),u:bf(`0x${e.slice(48,64)}`)}},uk=(r,e,t,n)=>{let s=y6(r)+e.slice(2).length/2,o=Tr.default.asUintN(128,Tr.default.multiply(Tr.default.BigInt(1e8),Tr.default.BigInt(s)));return`0x${Tr.default.add(Tr.default.divide(Tr.default.multiply(Tr.default.subtract(Tr.default.asUintN(128,Tr.default.BigInt(r.capacity)),o),Tr.default.asUintN(128,Tr.default.BigInt(w6(n).ar))),Tr.default.asUintN(128,Tr.default.BigInt(w6(t).ar))),o).toString(16)}`};var s9=Ge(_6(),1);var hk=Ge(_6(),1);var lk=globalThis.crypto,Ef=lk.subtle;var dk=()=>Date.now(),Bh=class{constructor(r){this.url=r}async baseRPC(r,e,t=this.url){let n={id:dk(),jsonrpc:"2.0",method:r,params:e??null},s=JSON.stringify(n,null,""),o=await(0,s9.default)(t,{method:"post",headers:{"Content-Type":"application/json"},body:s}).then(async i=>i.json());if(o.error!=null)throw new Error(`RPC error: ${JSON.stringify(o.error)}`);return o.result}async generateSubkeyUnlockSmt(r){return await this.baseRPC("generate_subkey_unlock_smt",r)}};function pk(r){let e=Array.from(new Uint8Array(r),i=>`00${i.toString(16)}`.slice(-2)).join(""),t=Number.parseInt(e.substr(6,2),16)*2,n=e.substr(8,t),s=e.substr(12+t);n=n.length>64?n.substr(-64):n.padStart(64,"0"),s=s.length>64?s.substr(-64):s.padStart(64,"0");let o=`${n}${s}`;return new Uint8Array(o.match(/[\da-f]{2}/gi).map(i=>Number.parseInt(i,16)))}var mk=(r,e)=>{try{let t=$7(H7(e));return JSON.parse(t).challenge===si(F7(r))}catch{return!1}},yk=async(r,e,t)=>{try{let n="RSASSA-PKCS1-v1_5",s=T4(t),o=o0(r),i=o0(e),c=new Uint8Array(s.slice(0,3)).reverse(),a=new Uint8Array(s.slice(4)).reverse(),u={alg:"RS256",ext:!0,key_ops:["verify"],kty:"RSA",e:si(c),n:si(a)},d=await Ef.importKey("jwk",u,{name:n,hash:"SHA-256"},!1,["verify"]);return await Ef.verify(n,d,i,o)}catch(n){return console.error(n),!1}},gk=async({message:r,signature:e,pubkey:t,challenge:n,alg:s})=>{try{let o=T4(`${t}`),i=o0(r),c=o0(e),a=i.slice(0,37),u=i.slice(37);if(!mk(n,u))return!1;let d=await Ef.digest("SHA-256",u),y=U7(a,d),v=s===Gp.ES256,_=v?{kty:"EC",crv:"P-256",x:si(o.slice(0,32)),y:si(o.slice(32))}:{alg:"RS256",ext:!0,key_ops:["verify"],kty:"RSA",e:si(new Uint8Array(o.slice(0,3)).reverse()),n:si(new Uint8Array(o.slice(4)).reverse())},T=v?{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}}:{name:"RSASSA-PKCS1-v1_5",hash:"SHA-256"},A=await Ef.importKey("jwk",_,T,!1,["verify"]);return await Ef.verify(T,A,s===Gp.RS256?c:pk(c),y)}catch(o){return console.error(o),!1}},Ih=async r=>{let{message:e,signature:t,pubkey:n,keyType:s}=r;return s==="main_key"||s==="sub_key"?gk(r):yk(e,t,n)};var{PERSONAL:L$,addressToScript:H$,blake160:U$,blake2b:F$,hexToBytes:$$,toUint64Le:q$,serializeScript:j$,rawTransactionToHash:z$,serializeWitnessArgs:V$}=S6;function D0(r,e,t){let n=typeof r=="string"?r:j(r).slice(2),{publicKey:s,keyType:o}=JSON.parse(t);return Ih({challenge:n,pubkey:s,keyType:o,...JSON.parse(e)})}function Af(r,e){return tf(r,e??`Dogecoin Signed Message:
`)}function P0(r,e,t){let n=typeof r=="string"?r:j(r).slice(2),s=Y(e,"base64"),o=s[0],i=s.slice(1),c=Ie.Signature.fromCompact(j(i).slice(2)).addRecoveryBit(o-31);return r0(t)===j(ni(c.recoverPublicKey(Af(n)).toHex()))}var o9="6.16.0";function bk(r,e,t){let n=e.split("|").map(o=>o.trim());for(let o=0;o<n.length;o++)switch(e){case"any":return;case"bigint":case"boolean":case"number":case"string":if(typeof r===e)return}let s=new Error(`invalid value for type ${e}`);throw s.code="INVALID_ARGUMENT",s.argument=`value.${t}`,s.value=r,s}function T6(r,e,t){for(let n in e){let s=e[n],o=t?t[n]:null;o&&bk(s,o,n),Object.defineProperty(r,n,{enumerable:!0,value:s,writable:!1})}}function kf(r,e){if(r==null)return"null";if(e==null&&(e=new Set),typeof r=="object"){if(e.has(r))return"[Circular]";e.add(r)}if(Array.isArray(r))return"[ "+r.map(t=>kf(t,e)).join(", ")+" ]";if(r instanceof Uint8Array){let t="0123456789abcdef",n="0x";for(let s=0;s<r.length;s++)n+=t[r[s]>>4],n+=t[r[s]&15];return n}if(typeof r=="object"&&typeof r.toJSON=="function")return kf(r.toJSON(),e);switch(typeof r){case"boolean":case"number":case"symbol":return r.toString();case"bigint":return BigInt(r).toString();case"string":return JSON.stringify(r);case"object":{let t=Object.keys(r);return t.sort(),"{ "+t.map(n=>`${kf(n,e)}: ${kf(r[n],e)}`).join(", ")+" }"}}return"[ COULD NOT SERIALIZE ]"}function i9(r,e,t){let n=r;{let o=[];if(t){if("message"in t||"code"in t||"name"in t)throw new Error(`value will overwrite populated values: ${kf(t)}`);for(let i in t){if(i==="shortMessage")continue;let c=t[i];o.push(i+"="+kf(c))}}o.push(`code=${e}`),o.push(`version=${o9}`),o.length&&(r+=" ("+o.join(", ")+")")}let s;switch(e){case"INVALID_ARGUMENT":s=new TypeError(r);break;case"NUMERIC_FAULT":case"BUFFER_OVERRUN":s=new RangeError(r);break;default:s=new Error(r)}return T6(s,{code:e}),t&&Object.assign(s,t),s.shortMessage==null&&T6(s,{shortMessage:n}),s}function Os(r,e,t,n){if(!r)throw i9(e,t,n)}function _e(r,e,t,n){Os(r,e,"INVALID_ARGUMENT",{argument:t,value:n})}var xk=["NFD","NFC","NFKD","NFKC"].reduce((r,e)=>{try{if("test".normalize(e)!=="test")throw new Error("bad");if(e==="NFD"&&"\xE9".normalize("NFD")!=="e\u0301")throw new Error("broken");r.push(e)}catch{}return r},[]);function E6(r){Os(xk.indexOf(r)>=0,"platform missing String.prototype.normalize","UNSUPPORTED_OPERATION",{operation:"String.prototype.normalize",info:{form:r}})}function A6(r,e,t){if(t==null&&(t=""),r!==e){let n=t,s="new";t&&(n+=".",s+=" "+t),Os(!1,`private constructor; use ${n}from* methods`,"UNSUPPORTED_OPERATION",{operation:s})}}function a9(r,e,t){if(r instanceof Uint8Array)return t?new Uint8Array(r):r;if(typeof r=="string"&&r.length%2===0&&r.match(/^0x[0-9a-f]*$/i)){let n=new Uint8Array((r.length-2)/2),s=2;for(let o=0;o<n.length;o++)n[o]=parseInt(r.substring(s,s+2),16),s+=2;return n}_e(!1,"invalid BytesLike value",e||"value",r)}function Er(r,e){return a9(r,e,!1)}function Ec(r,e){return a9(r,e,!0)}function M0(r,e){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||typeof e=="number"&&r.length!==2+2*e||e===!0&&r.length%2!==0)}var c9="0123456789abcdef";function Kt(r){let e=Er(r),t="0x";for(let n=0;n<e.length;n++){let s=e[n];t+=c9[(s&240)>>4]+c9[s&15]}return t}function wi(r){return"0x"+r.map(e=>Kt(e).substring(2)).join("")}function vi(r){return M0(r,!0)?(r.length-2)/2:Er(r).length}function wk(r,e,t){let n=Er(r);Os(e>=n.length,"padding exceeds data length","BUFFER_OVERRUN",{buffer:new Uint8Array(n),length:e,offset:e+1});let s=new Uint8Array(e);return s.fill(0),t?s.set(n,e-n.length):s.set(n,0),Kt(s)}function k6(r,e){return wk(r,e,!0)}var C6=BigInt(0),uq=BigInt(1),Cf=9007199254740991;function Ac(r,e){switch(typeof r){case"bigint":return r;case"number":return _e(Number.isInteger(r),"underflow",e||"value",r),_e(r>=-Cf&&r<=Cf,"overflow",e||"value",r),BigInt(r);case"string":try{if(r==="")throw new Error("empty string");return r[0]==="-"&&r[1]!=="-"?-BigInt(r.substring(1)):BigInt(r)}catch(t){_e(!1,`invalid BigNumberish string: ${t.message}`,e||"value",r)}}_e(!1,"invalid BigNumberish value",e||"value",r)}function B6(r,e){let t=Ac(r,e);return Os(t>=C6,"unsigned value cannot be negative","NUMERIC_FAULT",{fault:"overflow",operation:"getUint",value:r}),t}function go(r,e){switch(typeof r){case"bigint":return _e(r>=-Cf&&r<=Cf,"overflow",e||"value",r),Number(r);case"number":return _e(Number.isInteger(r),"underflow",e||"value",r),_e(r>=-Cf&&r<=Cf,"overflow",e||"value",r),r;case"string":try{if(r==="")throw new Error("empty string");return go(BigInt(r),e)}catch(t){_e(!1,`invalid numeric string: ${t.message}`,e||"value",r)}}_e(!1,"invalid numeric value",e||"value",r)}function Oh(r,e){let t=B6(r,"value"),n=t.toString(16);if(e==null)n.length%2&&(n="0"+n);else{let s=go(e,"width");if(s===0&&t===C6)return"0x";for(Os(s*2>=n.length,`value exceeds width (${s} bytes)`,"NUMERIC_FAULT",{operation:"toBeHex",fault:"overflow",value:r});n.length<s*2;)n="0"+n}return"0x"+n}function I6(r,e){let t=B6(r,"value");if(t===C6){let o=e!=null?go(e,"width"):0;return new Uint8Array(o)}let n=t.toString(16);if(n.length%2&&(n="0"+n),e!=null){let o=go(e,"width");for(;n.length<o*2;)n="00"+n;Os(o*2===n.length,`value exceeds width (${o} bytes)`,"NUMERIC_FAULT",{operation:"toBeArray",fault:"overflow",value:r})}let s=new Uint8Array(n.length/2);for(let o=0;o<s.length;o++){let i=o*2;s[o]=parseInt(n.substring(i,i+2),16)}return s}function vk(r,e,t,n,s){_e(!1,`invalid codepoint at offset ${e}; ${r}`,"bytes",t)}function f9(r,e,t,n,s){if(r==="BAD_PREFIX"||r==="UNEXPECTED_CONTINUE"){let o=0;for(let i=e+1;i<t.length&&t[i]>>6===2;i++)o++;return o}return r==="OVERRUN"?t.length-e-1:0}function Sk(r,e,t,n,s){return r==="OVERLONG"?(_e(typeof s=="number","invalid bad code point for replacement","badCodepoint",s),n.push(s),0):(n.push(65533),f9(r,e,t,n,s))}var _k=Object.freeze({error:vk,ignore:f9,replace:Sk});function R0(r,e){_e(typeof r=="string","invalid string value","str",r),e!=null&&(E6(e),r=r.normalize(e));let t=[];for(let n=0;n<r.length;n++){let s=r.charCodeAt(n);if(s<128)t.push(s);else if(s<2048)t.push(s>>6|192),t.push(s&63|128);else if((s&64512)==55296){n++;let o=r.charCodeAt(n);_e(n<r.length&&(o&64512)===56320,"invalid surrogate pair","str",r);let i=65536+((s&1023)<<10)+(o&1023);t.push(i>>18|240),t.push(i>>12&63|128),t.push(i>>6&63|128),t.push(i&63|128)}else t.push(s>>12|224),t.push(s>>6&63|128),t.push(s&63|128)}return new Uint8Array(t)}function N0(r){if(!Number.isSafeInteger(r)||r<0)throw new Error(`Wrong positive integer: ${r}`)}function L0(r,...e){if(!(r instanceof Uint8Array))throw new Error("Expected Uint8Array");if(e.length>0&&!e.includes(r.length))throw new Error(`Expected Uint8Array of length ${e}, not of length=${r.length}`)}function u9(r){if(typeof r!="function"||typeof r.create!="function")throw new Error("Hash should be wrapped by utils.wrapConstructor");N0(r.outputLen),N0(r.blockLen)}function bo(r,e=!0){if(r.destroyed)throw new Error("Hash instance has been destroyed");if(e&&r.finished)throw new Error("Hash#digest() has already been called")}function Dh(r,e){L0(r);let t=e.outputLen;if(r.length<t)throw new Error(`digestInto() expects output buffer of length at least ${t}`)}var Ph=typeof globalThis=="object"&&"crypto"in globalThis?globalThis.crypto:void 0;var l9=r=>r instanceof Uint8Array;var d9=r=>new Uint32Array(r.buffer,r.byteOffset,Math.floor(r.byteLength/4)),Mh=r=>new DataView(r.buffer,r.byteOffset,r.byteLength),Qn=(r,e)=>r<<32-e|r>>>e,Tk=new Uint8Array(new Uint32Array([287454020]).buffer)[0]===68;if(!Tk)throw new Error("Non little-endian hardware is not supported");function Ek(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function _i(r){if(typeof r=="string"&&(r=Ek(r)),!l9(r))throw new Error(`expected Uint8Array, got ${typeof r}`);return r}function p9(...r){let e=new Uint8Array(r.reduce((n,s)=>n+s.length,0)),t=0;return r.forEach(n=>{if(!l9(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}var Si=class{clone(){return this._cloneInto()}},Lq={}.toString;function Rh(r){let e=n=>r().update(_i(n)).digest(),t=r();return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=()=>r(),e}function h9(r){let e=(n,s)=>r(s).update(_i(n)).digest(),t=r({});return e.outputLen=t.outputLen,e.blockLen=t.blockLen,e.create=n=>r(n),e}function m9(r=32){if(Ph&&typeof Ph.getRandomValues=="function")return Ph.getRandomValues(new Uint8Array(r));throw new Error("crypto.getRandomValues must be defined")}var Nh=class extends Si{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,u9(e);let n=_i(t);if(this.iHash=e.create(),typeof this.iHash.update!="function")throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let s=this.blockLen,o=new Uint8Array(s);o.set(n.length>s?e.create().update(n).digest():n);for(let i=0;i<o.length;i++)o[i]^=54;this.iHash.update(o),this.oHash=e.create();for(let i=0;i<o.length;i++)o[i]^=106;this.oHash.update(o),o.fill(0)}update(e){return bo(this),this.iHash.update(e),this}digestInto(e){bo(this),L0(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:s,destroyed:o,blockLen:i,outputLen:c}=this;return e=e,e.finished=s,e.destroyed=o,e.blockLen=i,e.outputLen=c,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}},O6=(r,e,t)=>new Nh(r,e).update(t).digest();O6.create=(r,e)=>new Nh(r,e);function Ak(r,e,t,n){if(typeof r.setBigUint64=="function")return r.setBigUint64(e,t,n);let s=BigInt(32),o=BigInt(4294967295),i=Number(t>>s&o),c=Number(t&o),a=n?4:0,u=n?0:4;r.setUint32(e+a,i,n),r.setUint32(e+u,c,n)}var Lh=class extends Si{constructor(e,t,n,s){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=Mh(this.buffer)}update(e){bo(this);let{view:t,buffer:n,blockLen:s}=this;e=_i(e);let o=e.length;for(let i=0;i<o;){let c=Math.min(s-this.pos,o-i);if(c===s){let a=Mh(e);for(;s<=o-i;i+=s)this.process(a,i);continue}n.set(e.subarray(i,i+c),this.pos),this.pos+=c,i+=c,this.pos===s&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){bo(this),Dh(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:s,isLE:o}=this,{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>s-i&&(this.process(n,0),i=0);for(let y=i;y<s;y++)t[y]=0;Ak(n,s-8,BigInt(this.length*8),o),this.process(n,0);let c=Mh(e),a=this.outputLen;if(a%4)throw new Error("_sha2: outputLen should be aligned to 32bit");let u=a/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let y=0;y<u;y++)c.setUint32(4*y,d[y],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:s,finished:o,destroyed:i,pos:c}=this;return e.length=s,e.pos=c,e.finished=o,e.destroyed=i,s%t&&e.buffer.set(n),e}};var kk=(r,e,t)=>r&e^~r&t,Ck=(r,e,t)=>r&e^r&t^e&t,Bk=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),Ti=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),Ei=new Uint32Array(64),D6=class extends Lh{constructor(){super(64,32,8,!1),this.A=Ti[0]|0,this.B=Ti[1]|0,this.C=Ti[2]|0,this.D=Ti[3]|0,this.E=Ti[4]|0,this.F=Ti[5]|0,this.G=Ti[6]|0,this.H=Ti[7]|0}get(){let{A:e,B:t,C:n,D:s,E:o,F:i,G:c,H:a}=this;return[e,t,n,s,o,i,c,a]}set(e,t,n,s,o,i,c,a){this.A=e|0,this.B=t|0,this.C=n|0,this.D=s|0,this.E=o|0,this.F=i|0,this.G=c|0,this.H=a|0}process(e,t){for(let y=0;y<16;y++,t+=4)Ei[y]=e.getUint32(t,!1);for(let y=16;y<64;y++){let v=Ei[y-15],_=Ei[y-2],T=Qn(v,7)^Qn(v,18)^v>>>3,A=Qn(_,17)^Qn(_,19)^_>>>10;Ei[y]=A+Ei[y-7]+T+Ei[y-16]|0}let{A:n,B:s,C:o,D:i,E:c,F:a,G:u,H:d}=this;for(let y=0;y<64;y++){let v=Qn(c,6)^Qn(c,11)^Qn(c,25),_=d+v+kk(c,a,u)+Bk[y]+Ei[y]|0,A=(Qn(n,2)^Qn(n,13)^Qn(n,22))+Ck(n,s,o)|0;d=u,u=a,a=c,c=i+_|0,i=o,o=s,s=n,n=_+A|0}n=n+this.A|0,s=s+this.B|0,o=o+this.C|0,i=i+this.D|0,c=c+this.E|0,a=a+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(n,s,o,i,c,a,u,d)}roundClean(){Ei.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}};var y9=Rh(()=>new D6);var Hh=BigInt(4294967295),g9=BigInt(32);function Ik(r,e=!1){return e?{h:Number(r&Hh),l:Number(r>>g9&Hh)}:{h:Number(r>>g9&Hh)|0,l:Number(r&Hh)|0}}function b9(r,e=!1){let t=new Uint32Array(r.length),n=new Uint32Array(r.length);for(let s=0;s<r.length;s++){let{h:o,l:i}=Ik(r[s],e);[t[s],n[s]]=[o,i]}return[t,n]}var x9=(r,e,t)=>r<<t|e>>>32-t,w9=(r,e,t)=>e<<t|r>>>32-t,v9=(r,e,t)=>e<<t-32|r>>>64-t,S9=(r,e,t)=>r<<t-32|e>>>64-t;var[E9,A9,k9]=[[],[],[]],Ok=BigInt(0),H0=BigInt(1),Dk=BigInt(2),Pk=BigInt(7),Mk=BigInt(256),Rk=BigInt(113);for(let r=0,e=H0,t=1,n=0;r<24;r++){[t,n]=[n,(2*t+3*n)%5],E9.push(2*(5*n+t)),A9.push((r+1)*(r+2)/2%64);let s=Ok;for(let o=0;o<7;o++)e=(e<<H0^(e>>Pk)*Rk)%Mk,e&Dk&&(s^=H0<<(H0<<BigInt(o))-H0);k9.push(s)}var[Nk,Lk]=b9(k9,!0),_9=(r,e,t)=>t>32?v9(r,e,t):x9(r,e,t),T9=(r,e,t)=>t>32?S9(r,e,t):w9(r,e,t);function Hk(r,e=24){let t=new Uint32Array(10);for(let n=24-e;n<24;n++){for(let i=0;i<10;i++)t[i]=r[i]^r[i+10]^r[i+20]^r[i+30]^r[i+40];for(let i=0;i<10;i+=2){let c=(i+8)%10,a=(i+2)%10,u=t[a],d=t[a+1],y=_9(u,d,1)^t[c],v=T9(u,d,1)^t[c+1];for(let _=0;_<50;_+=10)r[i+_]^=y,r[i+_+1]^=v}let s=r[2],o=r[3];for(let i=0;i<24;i++){let c=A9[i],a=_9(s,o,c),u=T9(s,o,c),d=E9[i];s=r[d],o=r[d+1],r[d]=a,r[d+1]=u}for(let i=0;i<50;i+=10){for(let c=0;c<10;c++)t[c]=r[i+c];for(let c=0;c<10;c++)r[i+c]^=~t[(c+2)%10]&t[(c+4)%10]}r[0]^=Nk[n],r[1]^=Lk[n]}t.fill(0)}var Uh=class r extends Si{constructor(e,t,n,s=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=s,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,N0(n),0>=this.blockLen||this.blockLen>=200)throw new Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=d9(this.state)}keccak(){Hk(this.state32,this.rounds),this.posOut=0,this.pos=0}update(e){bo(this);let{blockLen:t,state:n}=this;e=_i(e);let s=e.length;for(let o=0;o<s;){let i=Math.min(t-this.pos,s-o);for(let c=0;c<i;c++)n[this.pos++]^=e[o++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:s}=this;e[n]^=t,(t&128)!==0&&n===s-1&&this.keccak(),e[s-1]^=128,this.keccak()}writeInto(e){bo(this,!1),L0(e),this.finish();let t=this.state,{blockLen:n}=this;for(let s=0,o=e.length;s<o;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,o-s);e.set(t.subarray(this.posOut,this.posOut+i),s),this.posOut+=i,s+=i}return e}xofInto(e){if(!this.enableXOF)throw new Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return N0(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(Dh(e,this),this.finished)throw new Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:s,rounds:o,enableXOF:i}=this;return e||(e=new r(t,n,s,i,o)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=o,e.suffix=n,e.outputLen=s,e.enableXOF=i,e.destroyed=this.destroyed,e}},Ai=(r,e,t)=>Rh(()=>new Uh(e,r,t)),Yq=Ai(6,144,224/8),Qq=Ai(6,136,256/8),ej=Ai(6,104,384/8),tj=Ai(6,72,512/8),rj=Ai(1,144,224/8),C9=Ai(1,136,256/8),nj=Ai(1,104,384/8),sj=Ai(1,72,512/8),B9=(r,e,t)=>h9((n={})=>new Uh(e,r,n.dkLen===void 0?t:n.dkLen,!0)),oj=B9(31,168,128/8),ij=B9(31,136,256/8);var I9=!1,O9=function(r){return C9(r)},D9=O9;function es(r){let e=Er(r,"data");return Kt(D9(e))}es._=O9;es.lock=function(){I9=!0};es.register=function(r){if(I9)throw new TypeError("keccak256 is locked");D9=r};Object.freeze(es);var N6={};be(N6,{bitGet:()=>Vk,bitLen:()=>zk,bitMask:()=>U0,bitSet:()=>Kk,bytesToHex:()=>kc,bytesToNumberBE:()=>xo,bytesToNumberLE:()=>qh,concatBytes:()=>Bf,createHmacDrbg:()=>R6,ensureBytes:()=>Sn,equalBytes:()=>qk,hexToBytes:()=>Cc,hexToNumber:()=>M6,numberToBytesBE:()=>ki,numberToBytesLE:()=>jh,numberToHexUnpadded:()=>R9,numberToVarBytesBE:()=>$k,utf8ToBytes:()=>jk,validateObject:()=>Ci});var M9=BigInt(0),Fh=BigInt(1),Uk=BigInt(2),$h=r=>r instanceof Uint8Array,Fk=Array.from({length:256},(r,e)=>e.toString(16).padStart(2,"0"));function kc(r){if(!$h(r))throw new Error("Uint8Array expected");let e="";for(let t=0;t<r.length;t++)e+=Fk[r[t]];return e}function R9(r){let e=r.toString(16);return e.length&1?`0${e}`:e}function M6(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);return BigInt(r===""?"0":`0x${r}`)}function Cc(r){if(typeof r!="string")throw new Error("hex string expected, got "+typeof r);let e=r.length;if(e%2)throw new Error("padded hex string expected, got unpadded hex of length "+e);let t=new Uint8Array(e/2);for(let n=0;n<t.length;n++){let s=n*2,o=r.slice(s,s+2),i=Number.parseInt(o,16);if(Number.isNaN(i)||i<0)throw new Error("Invalid byte sequence");t[n]=i}return t}function xo(r){return M6(kc(r))}function qh(r){if(!$h(r))throw new Error("Uint8Array expected");return M6(kc(Uint8Array.from(r).reverse()))}function ki(r,e){return Cc(r.toString(16).padStart(e*2,"0"))}function jh(r,e){return ki(r,e).reverse()}function $k(r){return Cc(R9(r))}function Sn(r,e,t){let n;if(typeof e=="string")try{n=Cc(e)}catch(o){throw new Error(`${r} must be valid hex string, got "${e}". Cause: ${o}`)}else if($h(e))n=Uint8Array.from(e);else throw new Error(`${r} must be hex string or Uint8Array`);let s=n.length;if(typeof t=="number"&&s!==t)throw new Error(`${r} expected ${t} bytes, got ${s}`);return n}function Bf(...r){let e=new Uint8Array(r.reduce((n,s)=>n+s.length,0)),t=0;return r.forEach(n=>{if(!$h(n))throw new Error("Uint8Array expected");e.set(n,t),t+=n.length}),e}function qk(r,e){if(r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(r[t]!==e[t])return!1;return!0}function jk(r){if(typeof r!="string")throw new Error(`utf8ToBytes expected string, got ${typeof r}`);return new Uint8Array(new TextEncoder().encode(r))}function zk(r){let e;for(e=0;r>M9;r>>=Fh,e+=1);return e}function Vk(r,e){return r>>BigInt(e)&Fh}var Kk=(r,e,t)=>r|(t?Fh:M9)<<BigInt(e),U0=r=>(Uk<<BigInt(r-1))-Fh,P6=r=>new Uint8Array(r),P9=r=>Uint8Array.from(r);function R6(r,e,t){if(typeof r!="number"||r<2)throw new Error("hashLen must be a number");if(typeof e!="number"||e<2)throw new Error("qByteLen must be a number");if(typeof t!="function")throw new Error("hmacFn must be a function");let n=P6(r),s=P6(r),o=0,i=()=>{n.fill(1),s.fill(0),o=0},c=(...y)=>t(s,n,...y),a=(y=P6())=>{s=c(P9([0]),y),n=c(),y.length!==0&&(s=c(P9([1]),y),n=c())},u=()=>{if(o++>=1e3)throw new Error("drbg: tried 1000 values");let y=0,v=[];for(;y<e;){n=c();let _=n.slice();v.push(_),y+=n.length}return Bf(...v)};return(y,v)=>{i(),a(y);let _;for(;!(_=v(u()));)a();return i(),_}}var Wk={bigint:r=>typeof r=="bigint",function:r=>typeof r=="function",boolean:r=>typeof r=="boolean",string:r=>typeof r=="string",stringOrUint8Array:r=>typeof r=="string"||r instanceof Uint8Array,isSafeInteger:r=>Number.isSafeInteger(r),array:r=>Array.isArray(r),field:(r,e)=>e.Fp.isValid(r),hash:r=>typeof r=="function"&&Number.isSafeInteger(r.outputLen)};function Ci(r,e,t={}){let n=(s,o,i)=>{let c=Wk[o];if(typeof c!="function")throw new Error(`Invalid validator "${o}", expected function`);let a=r[s];if(!(i&&a===void 0)&&!c(a,r))throw new Error(`Invalid param ${String(s)}=${a} (${typeof a}), expected ${o}`)};for(let[s,o]of Object.entries(e))n(s,o,!1);for(let[s,o]of Object.entries(t))n(s,o,!0);return r}var Wt=BigInt(0),Qe=BigInt(1),Bc=BigInt(2),Zk=BigInt(3),L6=BigInt(4),N9=BigInt(5),L9=BigInt(8),Gk=BigInt(9),Jk=BigInt(16);function Ar(r,e){let t=r%e;return t>=Wt?t:e+t}function Xk(r,e,t){if(t<=Wt||e<Wt)throw new Error("Expected power/modulo > 0");if(t===Qe)return Wt;let n=Qe;for(;e>Wt;)e&Qe&&(n=n*r%t),r=r*r%t,e>>=Qe;return n}function _n(r,e,t){let n=r;for(;e-- >Wt;)n*=n,n%=t;return n}function zh(r,e){if(r===Wt||e<=Wt)throw new Error(`invert: expected positive integers, got n=${r} mod=${e}`);let t=Ar(r,e),n=e,s=Wt,o=Qe,i=Qe,c=Wt;for(;t!==Wt;){let u=n/t,d=n%t,y=s-i*u,v=o-c*u;n=t,t=d,s=i,o=c,i=y,c=v}if(n!==Qe)throw new Error("invert: does not exist");return Ar(s,e)}function Yk(r){let e=(r-Qe)/Bc,t,n,s;for(t=r-Qe,n=0;t%Bc===Wt;t/=Bc,n++);for(s=Bc;s<r&&Xk(s,e,r)!==r-Qe;s++);if(n===1){let i=(r+Qe)/L6;return function(a,u){let d=a.pow(u,i);if(!a.eql(a.sqr(d),u))throw new Error("Cannot find square root");return d}}let o=(t+Qe)/Bc;return function(c,a){if(c.pow(a,e)===c.neg(c.ONE))throw new Error("Cannot find square root");let u=n,d=c.pow(c.mul(c.ONE,s),t),y=c.pow(a,o),v=c.pow(a,t);for(;!c.eql(v,c.ONE);){if(c.eql(v,c.ZERO))return c.ZERO;let _=1;for(let A=c.sqr(v);_<u&&!c.eql(A,c.ONE);_++)A=c.sqr(A);let T=c.pow(d,Qe<<BigInt(u-_-1));d=c.sqr(T),y=c.mul(y,T),v=c.mul(v,d),u=_}return y}}function Qk(r){if(r%L6===Zk){let e=(r+Qe)/L6;return function(n,s){let o=n.pow(s,e);if(!n.eql(n.sqr(o),s))throw new Error("Cannot find square root");return o}}if(r%L9===N9){let e=(r-N9)/L9;return function(n,s){let o=n.mul(s,Bc),i=n.pow(o,e),c=n.mul(s,i),a=n.mul(n.mul(c,Bc),i),u=n.mul(c,n.sub(a,n.ONE));if(!n.eql(n.sqr(u),s))throw new Error("Cannot find square root");return u}}return r%Jk,Yk(r)}var eC=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function H6(r){let e={ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"},t=eC.reduce((n,s)=>(n[s]="function",n),e);return Ci(r,t)}function tC(r,e,t){if(t<Wt)throw new Error("Expected power > 0");if(t===Wt)return r.ONE;if(t===Qe)return e;let n=r.ONE,s=e;for(;t>Wt;)t&Qe&&(n=r.mul(n,s)),s=r.sqr(s),t>>=Qe;return n}function rC(r,e){let t=new Array(e.length),n=e.reduce((o,i,c)=>r.is0(i)?o:(t[c]=o,r.mul(o,i)),r.ONE),s=r.inv(n);return e.reduceRight((o,i,c)=>r.is0(i)?o:(t[c]=r.mul(o,t[c]),r.mul(o,i)),s),t}function U6(r,e){let t=e!==void 0?e:r.toString(2).length,n=Math.ceil(t/8);return{nBitLength:t,nByteLength:n}}function H9(r,e,t=!1,n={}){if(r<=Wt)throw new Error(`Expected Field ORDER > 0, got ${r}`);let{nBitLength:s,nByteLength:o}=U6(r,e);if(o>2048)throw new Error("Field lengths over 2048 bytes are not supported");let i=Qk(r),c=Object.freeze({ORDER:r,BITS:s,BYTES:o,MASK:U0(s),ZERO:Wt,ONE:Qe,create:a=>Ar(a,r),isValid:a=>{if(typeof a!="bigint")throw new Error(`Invalid field element: expected bigint, got ${typeof a}`);return Wt<=a&&a<r},is0:a=>a===Wt,isOdd:a=>(a&Qe)===Qe,neg:a=>Ar(-a,r),eql:(a,u)=>a===u,sqr:a=>Ar(a*a,r),add:(a,u)=>Ar(a+u,r),sub:(a,u)=>Ar(a-u,r),mul:(a,u)=>Ar(a*u,r),pow:(a,u)=>tC(c,a,u),div:(a,u)=>Ar(a*zh(u,r),r),sqrN:a=>a*a,addN:(a,u)=>a+u,subN:(a,u)=>a-u,mulN:(a,u)=>a*u,inv:a=>zh(a,r),sqrt:n.sqrt||(a=>i(c,a)),invertBatch:a=>rC(c,a),cmov:(a,u,d)=>d?u:a,toBytes:a=>t?jh(a,o):ki(a,o),fromBytes:a=>{if(a.length!==o)throw new Error(`Fp.fromBytes: expected ${o}, got ${a.length}`);return t?qh(a):xo(a)}});return Object.freeze(c)}function U9(r){if(typeof r!="bigint")throw new Error("field order must be bigint");let e=r.toString(2).length;return Math.ceil(e/8)}function F6(r){let e=U9(r);return e+Math.ceil(e/2)}function F9(r,e,t=!1){let n=r.length,s=U9(e),o=F6(e);if(n<16||n<o||n>1024)throw new Error(`expected ${o}-1024 bytes of input, got ${n}`);let i=t?xo(r):qh(r),c=Ar(i,e-Qe)+Qe;return t?jh(c,s):ki(c,s)}var sC=BigInt(0),$6=BigInt(1);function $9(r,e){let t=(s,o)=>{let i=o.negate();return s?i:o},n=s=>{let o=Math.ceil(e/s)+1,i=2**(s-1);return{windows:o,windowSize:i}};return{constTimeNegate:t,unsafeLadder(s,o){let i=r.ZERO,c=s;for(;o>sC;)o&$6&&(i=i.add(c)),c=c.double(),o>>=$6;return i},precomputeWindow(s,o){let{windows:i,windowSize:c}=n(o),a=[],u=s,d=u;for(let y=0;y<i;y++){d=u,a.push(d);for(let v=1;v<c;v++)d=d.add(u),a.push(d);u=d.double()}return a},wNAF(s,o,i){let{windows:c,windowSize:a}=n(s),u=r.ZERO,d=r.BASE,y=BigInt(2**s-1),v=2**s,_=BigInt(s);for(let T=0;T<c;T++){let A=T*a,B=Number(i&y);i>>=_,B>a&&(B-=v,i+=$6);let I=A,P=A+Math.abs(B)-1,M=T%2!==0,L=B<0;B===0?d=d.add(t(M,o[I])):u=u.add(t(L,o[P]))}return{p:u,f:d}},wNAFCached(s,o,i,c){let a=s._WINDOW_SIZE||1,u=o.get(s);return u||(u=this.precomputeWindow(s,a),a!==1&&o.set(s,c(u))),this.wNAF(a,u,i)}}}function q6(r){return H6(r.Fp),Ci(r,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...U6(r.n,r.nBitLength),...r,p:r.Fp.ORDER})}function oC(r){let e=q6(r);Ci(e,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:t,Fp:n,a:s}=e;if(t){if(!n.eql(s,n.ZERO))throw new Error("Endomorphism can only be defined for Koblitz curves that have a=0");if(typeof t!="object"||typeof t.beta!="bigint"||typeof t.splitScalar!="function")throw new Error("Expected endomorphism with beta: bigint and splitScalar: function")}return Object.freeze({...e})}var{bytesToNumberBE:iC,hexToBytes:cC}=N6,Ic={Err:class extends Error{constructor(e=""){super(e)}},_parseInt(r){let{Err:e}=Ic;if(r.length<2||r[0]!==2)throw new e("Invalid signature integer tag");let t=r[1],n=r.subarray(2,t+2);if(!t||n.length!==t)throw new e("Invalid signature integer: wrong length");if(n[0]&128)throw new e("Invalid signature integer: negative");if(n[0]===0&&!(n[1]&128))throw new e("Invalid signature integer: unnecessary leading zero");return{d:iC(n),l:r.subarray(t+2)}},toSig(r){let{Err:e}=Ic,t=typeof r=="string"?cC(r):r;if(!(t instanceof Uint8Array))throw new Error("ui8a expected");let n=t.length;if(n<2||t[0]!=48)throw new e("Invalid signature tag");if(t[1]!==n-2)throw new e("Invalid signature: incorrect length");let{d:s,l:o}=Ic._parseInt(t.subarray(2)),{d:i,l:c}=Ic._parseInt(o);if(c.length)throw new e("Invalid signature: left bytes after parsing");return{r:s,s:i}},hexFromSig(r){let e=u=>Number.parseInt(u[0],16)&8?"00"+u:u,t=u=>{let d=u.toString(16);return d.length&1?`0${d}`:d},n=e(t(r.s)),s=e(t(r.r)),o=n.length/2,i=s.length/2,c=t(o),a=t(i);return`30${t(i+o+4)}02${a}${s}02${c}${n}`}},wo=BigInt(0),$n=BigInt(1),bj=BigInt(2),q9=BigInt(3),xj=BigInt(4);function aC(r){let e=oC(r),{Fp:t}=e,n=e.toBytes||((T,A,B)=>{let I=A.toAffine();return Bf(Uint8Array.from([4]),t.toBytes(I.x),t.toBytes(I.y))}),s=e.fromBytes||(T=>{let A=T.subarray(1),B=t.fromBytes(A.subarray(0,t.BYTES)),I=t.fromBytes(A.subarray(t.BYTES,2*t.BYTES));return{x:B,y:I}});function o(T){let{a:A,b:B}=e,I=t.sqr(T),P=t.mul(I,T);return t.add(t.add(P,t.mul(T,A)),B)}if(!t.eql(t.sqr(e.Gy),o(e.Gx)))throw new Error("bad generator point: equation left != right");function i(T){return typeof T=="bigint"&&wo<T&&T<e.n}function c(T){if(!i(T))throw new Error("Expected valid bigint: 0 < bigint < curve.n")}function a(T){let{allowedPrivateKeyLengths:A,nByteLength:B,wrapPrivateKey:I,n:P}=e;if(A&&typeof T!="bigint"){if(T instanceof Uint8Array&&(T=kc(T)),typeof T!="string"||!A.includes(T.length))throw new Error("Invalid key");T=T.padStart(B*2,"0")}let M;try{M=typeof T=="bigint"?T:xo(Sn("private key",T,B))}catch{throw new Error(`private key must be ${B} bytes, hex or bigint, not ${typeof T}`)}return I&&(M=Ar(M,P)),c(M),M}let u=new Map;function d(T){if(!(T instanceof y))throw new Error("ProjectivePoint expected")}class y{constructor(A,B,I){if(this.px=A,this.py=B,this.pz=I,A==null||!t.isValid(A))throw new Error("x required");if(B==null||!t.isValid(B))throw new Error("y required");if(I==null||!t.isValid(I))throw new Error("z required")}static fromAffine(A){let{x:B,y:I}=A||{};if(!A||!t.isValid(B)||!t.isValid(I))throw new Error("invalid affine point");if(A instanceof y)throw new Error("projective point not allowed");let P=M=>t.eql(M,t.ZERO);return P(B)&&P(I)?y.ZERO:new y(B,I,t.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(A){let B=t.invertBatch(A.map(I=>I.pz));return A.map((I,P)=>I.toAffine(B[P])).map(y.fromAffine)}static fromHex(A){let B=y.fromAffine(s(Sn("pointHex",A)));return B.assertValidity(),B}static fromPrivateKey(A){return y.BASE.multiply(a(A))}_setWindowSize(A){this._WINDOW_SIZE=A,u.delete(this)}assertValidity(){if(this.is0()){if(e.allowInfinityPoint&&!t.is0(this.py))return;throw new Error("bad point: ZERO")}let{x:A,y:B}=this.toAffine();if(!t.isValid(A)||!t.isValid(B))throw new Error("bad point: x or y not FE");let I=t.sqr(B),P=o(A);if(!t.eql(I,P))throw new Error("bad point: equation left != right");if(!this.isTorsionFree())throw new Error("bad point: not in prime-order subgroup")}hasEvenY(){let{y:A}=this.toAffine();if(t.isOdd)return!t.isOdd(A);throw new Error("Field doesn't support isOdd")}equals(A){d(A);let{px:B,py:I,pz:P}=this,{px:M,py:L,pz:U}=A,Z=t.eql(t.mul(B,U),t.mul(M,P)),C=t.eql(t.mul(I,U),t.mul(L,P));return Z&&C}negate(){return new y(this.px,t.neg(this.py),this.pz)}double(){let{a:A,b:B}=e,I=t.mul(B,q9),{px:P,py:M,pz:L}=this,U=t.ZERO,Z=t.ZERO,C=t.ZERO,J=t.mul(P,P),x=t.mul(M,M),m=t.mul(L,L),f=t.mul(P,M);return f=t.add(f,f),C=t.mul(P,L),C=t.add(C,C),U=t.mul(A,C),Z=t.mul(I,m),Z=t.add(U,Z),U=t.sub(x,Z),Z=t.add(x,Z),Z=t.mul(U,Z),U=t.mul(f,U),C=t.mul(I,C),m=t.mul(A,m),f=t.sub(J,m),f=t.mul(A,f),f=t.add(f,C),C=t.add(J,J),J=t.add(C,J),J=t.add(J,m),J=t.mul(J,f),Z=t.add(Z,J),m=t.mul(M,L),m=t.add(m,m),J=t.mul(m,f),U=t.sub(U,J),C=t.mul(m,x),C=t.add(C,C),C=t.add(C,C),new y(U,Z,C)}add(A){d(A);let{px:B,py:I,pz:P}=this,{px:M,py:L,pz:U}=A,Z=t.ZERO,C=t.ZERO,J=t.ZERO,x=e.a,m=t.mul(e.b,q9),f=t.mul(B,M),l=t.mul(I,L),h=t.mul(P,U),g=t.add(B,I),b=t.add(M,L);g=t.mul(g,b),b=t.add(f,l),g=t.sub(g,b),b=t.add(B,P);let w=t.add(M,U);return b=t.mul(b,w),w=t.add(f,h),b=t.sub(b,w),w=t.add(I,P),Z=t.add(L,U),w=t.mul(w,Z),Z=t.add(l,h),w=t.sub(w,Z),J=t.mul(x,b),Z=t.mul(m,h),J=t.add(Z,J),Z=t.sub(l,J),J=t.add(l,J),C=t.mul(Z,J),l=t.add(f,f),l=t.add(l,f),h=t.mul(x,h),b=t.mul(m,b),l=t.add(l,h),h=t.sub(f,h),h=t.mul(x,h),b=t.add(b,h),f=t.mul(l,b),C=t.add(C,f),f=t.mul(w,b),Z=t.mul(g,Z),Z=t.sub(Z,f),f=t.mul(g,l),J=t.mul(w,J),J=t.add(J,f),new y(Z,C,J)}subtract(A){return this.add(A.negate())}is0(){return this.equals(y.ZERO)}wNAF(A){return _.wNAFCached(this,u,A,B=>{let I=t.invertBatch(B.map(P=>P.pz));return B.map((P,M)=>P.toAffine(I[M])).map(y.fromAffine)})}multiplyUnsafe(A){let B=y.ZERO;if(A===wo)return B;if(c(A),A===$n)return this;let{endo:I}=e;if(!I)return _.unsafeLadder(this,A);let{k1neg:P,k1:M,k2neg:L,k2:U}=I.splitScalar(A),Z=B,C=B,J=this;for(;M>wo||U>wo;)M&$n&&(Z=Z.add(J)),U&$n&&(C=C.add(J)),J=J.double(),M>>=$n,U>>=$n;return P&&(Z=Z.negate()),L&&(C=C.negate()),C=new y(t.mul(C.px,I.beta),C.py,C.pz),Z.add(C)}multiply(A){c(A);let B=A,I,P,{endo:M}=e;if(M){let{k1neg:L,k1:U,k2neg:Z,k2:C}=M.splitScalar(B),{p:J,f:x}=this.wNAF(U),{p:m,f}=this.wNAF(C);J=_.constTimeNegate(L,J),m=_.constTimeNegate(Z,m),m=new y(t.mul(m.px,M.beta),m.py,m.pz),I=J.add(m),P=x.add(f)}else{let{p:L,f:U}=this.wNAF(B);I=L,P=U}return y.normalizeZ([I,P])[0]}multiplyAndAddUnsafe(A,B,I){let P=y.BASE,M=(U,Z)=>Z===wo||Z===$n||!U.equals(P)?U.multiplyUnsafe(Z):U.multiply(Z),L=M(this,B).add(M(A,I));return L.is0()?void 0:L}toAffine(A){let{px:B,py:I,pz:P}=this,M=this.is0();A==null&&(A=M?t.ONE:t.inv(P));let L=t.mul(B,A),U=t.mul(I,A),Z=t.mul(P,A);if(M)return{x:t.ZERO,y:t.ZERO};if(!t.eql(Z,t.ONE))throw new Error("invZ was invalid");return{x:L,y:U}}isTorsionFree(){let{h:A,isTorsionFree:B}=e;if(A===$n)return!0;if(B)return B(y,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:A,clearCofactor:B}=e;return A===$n?this:B?B(y,this):this.multiplyUnsafe(e.h)}toRawBytes(A=!0){return this.assertValidity(),n(y,this,A)}toHex(A=!0){return kc(this.toRawBytes(A))}}y.BASE=new y(e.Gx,e.Gy,t.ONE),y.ZERO=new y(t.ZERO,t.ONE,t.ZERO);let v=e.nBitLength,_=$9(y,e.endo?Math.ceil(v/2):v);return{CURVE:e,ProjectivePoint:y,normPrivateKeyToScalar:a,weierstrassEquation:o,isWithinCurveOrder:i}}function fC(r){let e=q6(r);return Ci(e,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...e})}function j9(r){let e=fC(r),{Fp:t,n}=e,s=t.BYTES+1,o=2*t.BYTES+1;function i(b){return wo<b&&b<t.ORDER}function c(b){return Ar(b,n)}function a(b){return zh(b,n)}let{ProjectivePoint:u,normPrivateKeyToScalar:d,weierstrassEquation:y,isWithinCurveOrder:v}=aC({...e,toBytes(b,w,k){let S=w.toAffine(),p=t.toBytes(S.x),E=Bf;return k?E(Uint8Array.from([w.hasEvenY()?2:3]),p):E(Uint8Array.from([4]),p,t.toBytes(S.y))},fromBytes(b){let w=b.length,k=b[0],S=b.subarray(1);if(w===s&&(k===2||k===3)){let p=xo(S);if(!i(p))throw new Error("Point is not on curve");let E=y(p),R=t.sqrt(E),N=(R&$n)===$n;return(k&1)===1!==N&&(R=t.neg(R)),{x:p,y:R}}else if(w===o&&k===4){let p=t.fromBytes(S.subarray(0,t.BYTES)),E=t.fromBytes(S.subarray(t.BYTES,2*t.BYTES));return{x:p,y:E}}else throw new Error(`Point of length ${w} was invalid. Expected ${s} compressed bytes or ${o} uncompressed bytes`)}}),_=b=>kc(ki(b,e.nByteLength));function T(b){let w=n>>$n;return b>w}function A(b){return T(b)?c(-b):b}let B=(b,w,k)=>xo(b.slice(w,k));class I{constructor(w,k,S){this.r=w,this.s=k,this.recovery=S,this.assertValidity()}static fromCompact(w){let k=e.nByteLength;return w=Sn("compactSignature",w,k*2),new I(B(w,0,k),B(w,k,2*k))}static fromDER(w){let{r:k,s:S}=Ic.toSig(Sn("DER",w));return new I(k,S)}assertValidity(){if(!v(this.r))throw new Error("r must be 0 < r < CURVE.n");if(!v(this.s))throw new Error("s must be 0 < s < CURVE.n")}addRecoveryBit(w){return new I(this.r,this.s,w)}recoverPublicKey(w){let{r:k,s:S,recovery:p}=this,E=C(Sn("msgHash",w));if(p==null||![0,1,2,3].includes(p))throw new Error("recovery id invalid");let R=p===2||p===3?k+e.n:k;if(R>=t.ORDER)throw new Error("recovery id 2 or 3 invalid");let N=(p&1)===0?"02":"03",q=u.fromHex(N+_(R)),G=a(R),X=c(-E*G),ee=c(S*G),ce=u.BASE.multiplyAndAddUnsafe(q,X,ee);if(!ce)throw new Error("point at infinify");return ce.assertValidity(),ce}hasHighS(){return T(this.s)}normalizeS(){return this.hasHighS()?new I(this.r,c(-this.s),this.recovery):this}toDERRawBytes(){return Cc(this.toDERHex())}toDERHex(){return Ic.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return Cc(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}}let P={isValidPrivateKey(b){try{return d(b),!0}catch{return!1}},normPrivateKeyToScalar:d,randomPrivateKey:()=>{let b=F6(e.n);return F9(e.randomBytes(b),e.n)},precompute(b=8,w=u.BASE){return w._setWindowSize(b),w.multiply(BigInt(3)),w}};function M(b,w=!0){return u.fromPrivateKey(b).toRawBytes(w)}function L(b){let w=b instanceof Uint8Array,k=typeof b=="string",S=(w||k)&&b.length;return w?S===s||S===o:k?S===2*s||S===2*o:b instanceof u}function U(b,w,k=!0){if(L(b))throw new Error("first arg must be private key");if(!L(w))throw new Error("second arg must be public key");return u.fromHex(w).multiply(d(b)).toRawBytes(k)}let Z=e.bits2int||function(b){let w=xo(b),k=b.length*8-e.nBitLength;return k>0?w>>BigInt(k):w},C=e.bits2int_modN||function(b){return c(Z(b))},J=U0(e.nBitLength);function x(b){if(typeof b!="bigint")throw new Error("bigint expected");if(!(wo<=b&&b<J))throw new Error(`bigint expected < 2^${e.nBitLength}`);return ki(b,e.nByteLength)}function m(b,w,k=f){if(["recovered","canonical"].some(oe=>oe in k))throw new Error("sign() legacy options not supported");let{hash:S,randomBytes:p}=e,{lowS:E,prehash:R,extraEntropy:N}=k;E==null&&(E=!0),b=Sn("msgHash",b),R&&(b=Sn("prehashed msgHash",S(b)));let q=C(b),G=d(w),X=[x(G),x(q)];if(N!=null){let oe=N===!0?p(t.BYTES):N;X.push(Sn("extraEntropy",oe))}let ee=Bf(...X),ce=q;function ie(oe){let ve=Z(oe);if(!v(ve))return;let Ee=a(ve),xe=u.BASE.multiply(ve).toAffine(),Pr=c(xe.x);if(Pr===wo)return;let Oe=c(Ee*c(ce+Pr*G));if(Oe===wo)return;let Ke=(xe.x===Pr?0:2)|Number(xe.y&$n),vu=Oe;return E&&T(Oe)&&(vu=A(Oe),Ke^=1),new I(Pr,vu,Ke)}return{seed:ee,k2sig:ie}}let f={lowS:e.lowS,prehash:!1},l={lowS:e.lowS,prehash:!1};function h(b,w,k=f){let{seed:S,k2sig:p}=m(b,w,k),E=e;return R6(E.hash.outputLen,E.nByteLength,E.hmac)(S,p)}u.BASE._setWindowSize(8);function g(b,w,k,S=l){let p=b;if(w=Sn("msgHash",w),k=Sn("publicKey",k),"strict"in S)throw new Error("options.strict was renamed to lowS");let{lowS:E,prehash:R}=S,N,q;try{if(typeof p=="string"||p instanceof Uint8Array)try{N=I.fromDER(p)}catch(xe){if(!(xe instanceof Ic.Err))throw xe;N=I.fromCompact(p)}else if(typeof p=="object"&&typeof p.r=="bigint"&&typeof p.s=="bigint"){let{r:xe,s:Pr}=p;N=new I(xe,Pr)}else throw new Error("PARSE");q=u.fromHex(k)}catch(xe){if(xe.message==="PARSE")throw new Error("signature must be Signature instance, Uint8Array or hex string");return!1}if(E&&N.hasHighS())return!1;R&&(w=e.hash(w));let{r:G,s:X}=N,ee=C(w),ce=a(X),ie=c(ee*ce),oe=c(G*ce),ve=u.BASE.multiplyAndAddUnsafe(q,ie,oe)?.toAffine();return ve?c(ve.x)===G:!1}return{CURVE:e,getPublicKey:M,getSharedSecret:U,sign:h,verify:g,ProjectivePoint:u,Signature:I,utils:P}}function uC(r){return{hash:r,hmac:(e,...t)=>O6(r,e,p9(...t)),randomBytes:m9}}function z9(r,e){let t=n=>j9({...r,...uC(n)});return Object.freeze({...t(e),create:t})}var W9=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),V9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),lC=BigInt(1),j6=BigInt(2),K9=(r,e)=>(r+e/j6)/e;function dC(r){let e=W9,t=BigInt(3),n=BigInt(6),s=BigInt(11),o=BigInt(22),i=BigInt(23),c=BigInt(44),a=BigInt(88),u=r*r*r%e,d=u*u*r%e,y=_n(d,t,e)*d%e,v=_n(y,t,e)*d%e,_=_n(v,j6,e)*u%e,T=_n(_,s,e)*_%e,A=_n(T,o,e)*T%e,B=_n(A,c,e)*A%e,I=_n(B,a,e)*B%e,P=_n(I,c,e)*A%e,M=_n(P,t,e)*d%e,L=_n(M,i,e)*T%e,U=_n(L,n,e)*u%e,Z=_n(U,j6,e);if(!z6.eql(z6.sqr(Z),r))throw new Error("Cannot find square root");return Z}var z6=H9(W9,void 0,void 0,{sqrt:dC}),vo=z9({a:BigInt(0),b:BigInt(7),Fp:z6,n:V9,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:r=>{let e=V9,t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-lC*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),s=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),o=t,i=BigInt("0x100000000000000000000000000000000"),c=K9(o*r,e),a=K9(-n*r,e),u=Ar(r-c*t-a*s,e),d=Ar(-c*n-a*o,e),y=u>i,v=d>i;if(y&&(u=e-u),v&&(d=e-d),u>i||d>i)throw new Error("splitScalar: Endomorphism failed, k="+r);return{k1neg:y,k1:u,k2neg:v,k2:d}}}},y9),Cj=BigInt(0);var Bj=vo.ProjectivePoint;var Vh="0x0000000000000000000000000000000000000000000000000000000000000000";var V6=`Ethereum Signed Message:
`;var Z9=BigInt(0),G9=BigInt(1),W6=BigInt(2),J9=BigInt(27),X9=BigInt(28),Kh=BigInt(35),Y9=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),pC=Y9/W6,hC=Symbol.for("nodejs.util.inspect.custom"),Oc={};function K6(r){return k6(I6(r),32)}var F0=class r{#e;#t;#n;#r;get r(){return this.#e}set r(e){_e(vi(e)===32,"invalid r","value",e),this.#e=Kt(e)}get s(){return _e(parseInt(this.#t.substring(0,3))<8,"non-canonical s; use ._s","s",this.#t),this.#t}set s(e){_e(vi(e)===32,"invalid s","value",e),this.#t=Kt(e)}get _s(){return this.#t}isValid(){return BigInt(this.#t)<=pC}get v(){return this.#n}set v(e){let t=go(e,"value");_e(t===27||t===28,"invalid v","v",e),this.#n=t}get networkV(){return this.#r}get legacyChainId(){let e=this.networkV;return e==null?null:r.getChainId(e)}get yParity(){return this.v===27?0:1}get yParityAndS(){let e=Er(this.s);return this.yParity&&(e[0]|=128),Kt(e)}get compactSerialized(){return wi([this.r,this.yParityAndS])}get serialized(){return wi([this.r,this.s,this.yParity?"0x1c":"0x1b"])}constructor(e,t,n,s){A6(e,Oc,"Signature"),this.#e=t,this.#t=n,this.#n=s,this.#r=null}getCanonical(){if(this.isValid())return this;let e=Y9-BigInt(this._s),t=55-this.v,n=new r(Oc,this.r,K6(e),t);return this.networkV&&(n.#r=this.networkV),n}clone(){let e=new r(Oc,this.r,this._s,this.v);return this.networkV&&(e.#r=this.networkV),e}toJSON(){let e=this.networkV;return{_type:"signature",networkV:e!=null?e.toString():null,r:this.r,s:this._s,v:this.v}}[hC](){return this.toString()}toString(){return this.isValid()?`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v} }`:`Signature { r: ${this.r}, s: ${this._s}, v: ${this.v}, valid: false }`}static getChainId(e){let t=Ac(e,"v");return t==J9||t==X9?Z9:(_e(t>=Kh,"invalid EIP-155 v","v",e),(t-Kh)/W6)}static getChainIdV(e,t){return Ac(e)*W6+BigInt(35+t-27)}static getNormalizedV(e){let t=Ac(e);return t===Z9||t===J9?27:t===G9||t===X9?28:(_e(t>=Kh,"invalid v","v",e),t&G9?27:28)}static from(e){function t(u,d){_e(u,d,"signature",e)}if(e==null)return new r(Oc,Vh,Vh,27);if(typeof e=="string"){let u=Er(e,"signature");if(u.length===64){let d=Kt(u.slice(0,32)),y=u.slice(32,64),v=y[0]&128?28:27;return y[0]&=127,new r(Oc,d,Kt(y),v)}if(u.length===65){let d=Kt(u.slice(0,32)),y=Kt(u.slice(32,64)),v=r.getNormalizedV(u[64]);return new r(Oc,d,y,v)}t(!1,"invalid raw signature length")}if(e instanceof r)return e.clone();let n=e.r;t(n!=null,"missing r");let s=K6(n),o=(function(u,d){if(u!=null)return K6(u);if(d!=null){t(M0(d,32),"invalid yParityAndS");let y=Er(d);return y[0]&=127,Kt(y)}t(!1,"missing s")})(e.s,e.yParityAndS),{networkV:i,v:c}=(function(u,d,y){if(u!=null){let v=Ac(u);return{networkV:v>=Kh?v:void 0,v:r.getNormalizedV(v)}}if(d!=null)return t(M0(d,32),"invalid yParityAndS"),{v:Er(d)[0]&128?28:27};if(y!=null){switch(go(y,"sig.yParity")){case 0:return{v:27};case 1:return{v:28}}t(!1,"invalid yParity")}t(!1,"missing v")})(e.v,e.yParityAndS,e.yParity),a=new r(Oc,s,o,c);return i&&(a.#r=i),t(e.yParity==null||go(e.yParity,"sig.yParity")===a.yParity,"yParity mismatch"),t(e.yParityAndS==null||e.yParityAndS===a.yParityAndS,"yParityAndS mismatch"),a}};var If=class r{#e;constructor(e){_e(vi(e)===32,"invalid private key","privateKey","[REDACTED]"),this.#e=Kt(e)}get privateKey(){return this.#e}get publicKey(){return r.computePublicKey(this.#e)}get compressedPublicKey(){return r.computePublicKey(this.#e,!0)}sign(e){_e(vi(e)===32,"invalid digest length","digest",e);let t=vo.sign(Ec(e),Ec(this.#e),{lowS:!0});return F0.from({r:Oh(t.r,32),s:Oh(t.s,32),v:t.recovery?28:27})}computeSharedSecret(e){let t=r.computePublicKey(e);return Kt(vo.getSharedSecret(Ec(this.#e),Er(t),!1))}static computePublicKey(e,t){let n=Er(e,"key");if(n.length===32){let o=vo.getPublicKey(n,!!t);return Kt(o)}if(n.length===64){let o=new Uint8Array(65);o[0]=4,o.set(n,1),n=o}let s=vo.ProjectivePoint.fromHex(n);return Kt(s.toRawBytes(t))}static recoverPublicKey(e,t){_e(vi(e)===32,"invalid digest length","digest",e);let n=F0.from(t),s=vo.Signature.fromCompact(Ec(wi([n.r,n.s])));s=s.addRecoveryBit(n.yParity);let o=s.recoverPublicKey(Ec(e));return _e(o!=null,"invalid signature for digest","signature",t),"0x"+o.toHex(!1)}static addPoints(e,t,n){let s=vo.ProjectivePoint.fromHex(r.computePublicKey(e).substring(2)),o=vo.ProjectivePoint.fromHex(r.computePublicKey(t).substring(2));return"0x"+s.add(o).toHex(!!n)}};var mC=BigInt(0),yC=BigInt(36);function Q9(r){r=r.toLowerCase();let e=r.substring(2).split(""),t=new Uint8Array(40);for(let s=0;s<40;s++)t[s]=e[s].charCodeAt(0);let n=Er(es(t));for(let s=0;s<40;s+=2)n[s>>1]>>4>=8&&(e[s]=e[s].toUpperCase()),(n[s>>1]&15)>=8&&(e[s+1]=e[s+1].toUpperCase());return"0x"+e.join("")}var Z6={};for(let r=0;r<10;r++)Z6[String(r)]=String(r);for(let r=0;r<26;r++)Z6[String.fromCharCode(65+r)]=String(10+r);var ex=15;function gC(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let e=r.split("").map(n=>Z6[n]).join("");for(;e.length>=ex;){let n=e.substring(0,ex);e=parseInt(n,10)%97+e.substring(n.length)}let t=String(98-parseInt(e,10)%97);for(;t.length<2;)t="0"+t;return t}var bC=(function(){let r={};for(let e=0;e<36;e++){let t="0123456789abcdefghijklmnopqrstuvwxyz"[e];r[t]=BigInt(e)}return r})();function xC(r){r=r.toLowerCase();let e=mC;for(let t=0;t<r.length;t++)e=e*yC+bC[r[t]];return e}function G6(r){if(_e(typeof r=="string","invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/)){r.startsWith("0x")||(r="0x"+r);let e=Q9(r);return _e(!r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||e===r,"bad address checksum","address",r),e}if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){_e(r.substring(2,4)===gC(r),"bad icap checksum","address",r);let e=xC(r.substring(4)).toString(16);for(;e.length<40;)e="0"+e;return Q9("0x"+e)}_e(!1,"invalid address","address",r)}function tx(r){let e;return typeof r=="string"?e=If.computePublicKey(r,!1):e=r.publicKey,G6(es("0x"+e.substring(4)).substring(26))}function J6(r,e){return tx(If.recoverPublicKey(r,e))}function X6(r){return typeof r=="string"&&(r=R0(r)),es(wi([R0(V6),R0(String(r.length)),r]))}function Of(r,e){let t=X6(r);return J6(t,e)}function $0(r,e,t){return t.toLowerCase()===Of(typeof r=="string"?r:Y(r),e).toLowerCase()}var Y6=Ge(Jr(),1);function Df(r){if(typeof r=="string")try{let e=JSON.parse(r);if(typeof e=="object"&&typeof e.created_at=="number"&&typeof e.kind=="number"&&typeof e.content=="string"&&Array.isArray(e.tags)&&e.tags.every(t=>Array.isArray(t)&&t.every(n=>typeof n=="string")))return e}catch{}return{kind:23335,created_at:0,content:typeof r=="string"?r:j(r),tags:[]}}function Pf(r){let e=JSON.stringify([0,r.pubkey,r.created_at,r.kind,r.tags,r.content]);return rt(Y(e,"utf8"))}function q0(r,e,t){let{words:n}=Y6.bech32.decode(t),s=j(Y6.bech32.fromWords(n)).slice(2),o=Df(r),i=Pf({...o,pubkey:s});try{return bs.verify(j(e).slice(2),i,s)}catch{return!1}}var Ne;(function(r){r.Unknown="Unknown",r.BtcEcdsa="BtcEcdsa",r.EvmPersonal="EvmPersonal",r.JoyId="JoyId",r.NostrEvent="NostrEvent",r.CkbSecp256k1="CkbSecp256k1",r.DogeEcdsa="DogeEcdsa"})(Ne||(Ne={}));var pr;(function(r){r.EVM="EVM",r.BTC="BTC",r.CKB="CKB",r.Nostr="Nostr",r.Doge="Doge"})(pr||(pr={}));var j0=class{constructor(e,t,n){this.signature=e,this.identity=t,this.signType=n}},Zt=class r{constructor(e){this.client_=e}get client(){return this.client_}matchNetworkPreference(e,t){if(!(t!==void 0&&e.some(({signerType:n,addressPrefix:s,network:o})=>n===this.type&&s===this.client.addressPrefix&&o===t)))return e.find(({signerType:n,addressPrefix:s})=>n===this.type&&s===this.client.addressPrefix)}static async verifyMessage(e,t){switch(t.signType){case Ne.EvmPersonal:return $0(e,t.signature,t.identity);case Ne.BtcEcdsa:return n0(e,t.signature,t.identity);case Ne.JoyId:return D0(e,t.signature,t.identity);case Ne.NostrEvent:return q0(e,t.signature,t.identity);case Ne.CkbSecp256k1:return s0(e,t.signature,t.identity);case Ne.DogeEcdsa:return P0(e,t.signature,t.identity);case Ne.Unknown:throw new Error("Unknown signer sign type")}}onReplaced(e){return()=>{}}async disconnect(){}async getIdentity(){return this.getInternalAddress()}async getRecommendedAddressObj(e){return(await this.getAddressObjs())[0]}async getRecommendedAddress(e){return(await this.getRecommendedAddressObj(e)).toString()}async getAddresses(){return this.getAddressObjs().then(e=>e.map(t=>t.toString()))}async*findCellsOnChain(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findCellsOnChain({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",withData:t},n,s))yield c}async*findCells(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findCells({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",withData:t},n,s))yield c}async*findTransactions(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findTransactions({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",groupByTransaction:t},n,s))yield c}async getBalance(){return this.client.getBalance((await this.getAddressObjs()).map(({script:e})=>e))}async signMessage(e){return{signature:await this.signMessageRaw(e),identity:await this.getIdentity(),signType:this.signType}}signMessageRaw(e){throw Error("Signer.signMessageRaw not implemented")}async verifyMessage(e,t){return typeof t=="string"?r.verifyMessage(e,{signType:this.signType,signature:t,identity:await this.getIdentity()}):t.identity!==await this.getIdentity()||![Ne.Unknown,this.signType].includes(t.signType)?!1:r.verifyMessage(e,t)}async sendTransaction(e){return this.client.sendTransaction(await this.signTransaction(e))}async signTransaction(e){let t=await this.prepareTransaction(e);return this.signOnlyTransaction(t)}async prepareTransaction(e){return Se.from(e)}signOnlyTransaction(e){throw Error("Signer.signOnlyTransaction not implemented")}},z0=class{constructor(e,t){this.name=e,this.signer=t}};var Dc=class extends Zt{get type(){return pr.BTC}get signType(){return Ne.BtcEcdsa}async getInternalAddress(){return this.getBtcAccount()}async getIdentity(){return j(await this.getBtcPublicKey()).slice(2)}async getAddressObjs(){let e=await this.getBtcPublicKey(),t=ni(e);return[await Lt.fromKnownScript(this.client,te.OmniLock,j([4,...t,0]))]}async prepareTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,te.OmniLock),await t.prepareSighashAllWitness(n,85,this.client),t}async signOnlyTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Y(await this.signMessageRaw(`CKB (Bitcoin Layer) transaction: ${s.message}`),"base64");o[0]=31+(o[0]-27)%4;let i=rr.fromBytes(t.witnesses[s.position]);return i.lock=j(Ae(He(20+o.length,4),He(16,4),He(20+o.length,4),He(20+o.length,4),He(o.length,4),o)),t.setWitnessArgsAt(s.position,i),t}};var V0=class extends Dc{constructor(e,t,n){super(e),this.account=t,this.publicKey=j(n)}async connect(){}async isConnected(){return!0}async getBtcAccount(){return this.account}async getBtcPublicKey(){return this.publicKey}};var Pc=class extends Zt{get type(){return pr.CKB}get signType(){return Ne.CkbSecp256k1}constructor(e,t){if(super(e),this.publicKey=j(t),Y(this.publicKey).length!==33)throw new Error("Public key must be 33 bytes!")}async connect(){}async isConnected(){return!0}async getInternalAddress(){return this.getRecommendedAddress()}async getIdentity(){return this.publicKey}async getAddressObjSecp256k1(){return Lt.fromKnownScript(this.client,te.Secp256k1Blake160,Y(br(this.publicKey)).slice(0,20))}async getRecommendedAddressObj(e){return this.getAddressObjSecp256k1()}async getAddressObjs(){let e=await this.getAddressObjSecp256k1(),t=[],n=0;for await(let s of this.client.findCells({script:await me.fromKnownScript(this.client,te.AnyoneCanPay,e.script.args),scriptType:"lock",scriptSearchMode:"prefix",withData:!1})){if(n>=10)break;n+=1,!t.some(({script:o})=>o.eq(s.cellOutput.lock))&&t.push(Lt.from({prefix:this.client.addressPrefix,script:s.cellOutput.lock}))}return[e,...t]}async getRelatedScripts(e){let t=Se.from(e),n=await this.getAddressObjSecp256k1(),s=await me.fromKnownScript(this.client,te.AnyoneCanPay,n.script.args),o=[];for(let i of t.inputs){let{cellOutput:{lock:c}}=await i.getCell(this.client);o.some(({script:a})=>a.eq(c))||(c.eq(n.script)?o.push({script:c,cellDeps:(await this.client.getKnownScript(te.Secp256k1Blake160)).cellDeps}):c.codeHash===s.codeHash&&c.hashType===s.hashType&&c.args.startsWith(s.args)&&o.push({script:c,cellDeps:(await this.client.getKnownScript(te.AnyoneCanPay)).cellDeps}))}return o}async prepareTransaction(e){let t=Se.from(e);return await Promise.all((await this.getRelatedScripts(t)).map(async({script:n,cellDeps:s})=>{await t.prepareSighashAllWitness(n,65,this.client),await t.addCellDepInfos(this.client,s)})),t}};var K0=class extends Pc{constructor(e,t){let n=j(t);if(Y(n).length!==32)throw new Error("Private key must be 32 bytes!");super(e,Ie.getPublicKey(Y(n),!0)),this.privateKey=n}async _signMessage(e){let t=Ie.sign(Y(e),Y(this.privateKey)),{r:n,s,recovery:o}=t;return j(Ae(ds(n,32),ds(s,32),ds(o,1)))}async signMessageRaw(e){return this._signMessage(rf(e))}async signOnlyTransaction(e){let t=Se.from(e);for(let{script:n}of await this.getRelatedScripts(t)){let s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=await this._signMessage(s.message),i=t.getWitnessArgsAt(s.position)??rr.from({});i.lock=o,t.setWitnessArgsAt(s.position,i)}return t}};var W0=class extends Zt{get type(){return pr.CKB}get signType(){return Ne.Unknown}constructor(e,...t){if(super(e),this.scripts=t.flat().map(me.from),this.scripts.length===0)throw new Error("SignerCkbScriptReadonly requires at least one script.")}async connect(){}async isConnected(){return!0}async getInternalAddress(){return this.getRecommendedAddress()}async getAddressObjs(){return this.scripts.map(e=>Lt.fromScript(e,this.client))}};var So=class extends Zt{get type(){return pr.Doge}get signType(){return Ne.DogeEcdsa}async getInternalAddress(){return this.getDogeAddress()}async getIdentity(){return this.getDogeAddress()}async getAddressObjs(){let e=xs.decode(await this.getDogeAddress()).slice(1);return[await Lt.fromKnownScript(this.client,te.OmniLock,j([5,...e,0]))]}async prepareTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,te.OmniLock),await t.prepareSighashAllWitness(n,85,this.client),t}async signOnlyTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Y(await this.signMessageRaw(s.message.slice(2)),"base64");o[0]=31+(o[0]-27)%4;let i=rr.fromBytes(t.witnesses[s.position]);return i.lock=j(Ae(He(20+o.length,4),He(16,4),He(20+o.length,4),He(20+o.length,4),He(o.length,4),o)),t.setWitnessArgsAt(s.position,i),t}};var Z0=class extends So{constructor(e,t){super(e),this.address=t}async connect(){}async isConnected(){return!0}async getDogeAddress(){return this.address}};var G0=class extends So{constructor(e,t,n=30){if(super(e),this.dogeNetwork=n,this.privateKey=Y(t),this.privateKey.length!==32)throw new Error("Private key must be 32 bytes!")}async connect(){}async isConnected(){return!0}async getDogePublicKey(){return j(Ie.getPublicKey(this.privateKey,!0))}async getDogeAddress(){return t0(await this.getDogePublicKey(),this.dogeNetwork)}async signMessageRaw(e){let t=typeof e=="string"?e:j(e).slice(2),n=Ie.sign(Af(t),this.privateKey);return Zs(Ae([31+n.recovery],n.toCompactRawBytes()),"base64")}};var _o=class extends Zt{get signType(){return Ne.Unknown}constructor(e,t){super(e),this.type=t}async isConnected(){return!1}async getInternalAddress(){throw new Error("Can't get address from SignerDummy")}async getAddressObjs(){throw new Error("Can't get addresses from SignerDummy")}};var J0=class extends _o{constructor(e,t,n){super(e,t),this.message=n}async connect(){throw new Error(this.message)}};var X0=class extends _o{constructor(e,t,n){super(e,t),this.link=n}async connect(){window.open(this.link,"_blank")?.focus()}};var Mc=class extends Zt{get type(){return pr.EVM}get signType(){return Ne.EvmPersonal}async getInternalAddress(){return this.getEvmAccount()}async getAddressObjs(){let e=await this.getEvmAccount();return(await Promise.all([this._getOmniLockAddresses(e),this._getPWLockAddresses(e)])).flat()}_getOmniLockAddresses(e){return Promise.all([this._getOmniLockEvmAddressObj(e),this._getOmniLockOldEvmAddressObj(e)])}async _getPWLockAddresses(e){let t=await this._getPWLockEvmAddressObj(e);return t?[t]:[]}async _getOmniLockEvmAddressObj(e){return Lt.fromKnownScript(this.client,te.OmniLock,j([18,...Y(e),0]))}async _getOmniLockOldEvmAddressObj(e){return Lt.fromKnownScript(this.client,te.OmniLock,j([1,...Y(e),0]))}async _getPWLockEvmAddressObj(e){try{return Lt.fromKnownScript(this.client,te.PWLock,j(Y(e)))}catch{}}async prepareTransaction(e){let t=Se.from(e);await t.findInputIndexByLockId(await this.client.getKnownScript(te.OmniLock),this.client)!==void 0&&await t.addCellDepsOfKnownScripts(this.client,te.OmniLock),await t.findInputIndexByLockId(await this.client.getKnownScript(te.PWLock),this.client)!==void 0&&await t.addCellDepsOfKnownScripts(this.client,te.PWLock);let n=await this.getEvmAccount(),s=await this._getOmniLockAddresses(n),o=await this._getPWLockAddresses(n),i=yn(s,(c,{script:a})=>c.prepareSighashAllWitness(a,85,this.client),t);return yn(o,(c,{script:a})=>c.prepareSighashAllWitness(a,65,this.client),i)}async signOnlyTransaction(e){let t=Se.from(e),n=await this.getEvmAccount(),{script:s}=await this._getOmniLockEvmAddressObj(n),{script:o}=await this._getOmniLockOldEvmAddressObj(n);t=await this._signOmniLockScriptForTransaction(t,s,c=>`CKB transaction: ${c}`),t=await this._signOmniLockScriptForTransaction(t,o,c=>Y(c));let i=await this._getPWLockEvmAddressObj(n);return i&&(t=await this._signPWLockScriptForTransaction(t,i.script,c=>Y(c))),t}async _signOmniLockScriptForTransaction(e,t,n){let s=await this._signPersonalEvmForTransaction(e,t,n);if(!s)return e;let o=rr.fromBytes(e.witnesses[s.position]);return o.lock=j(Ae(He(20+s.signature.length,4),He(16,4),He(20+s.signature.length,4),He(20+s.signature.length,4),He(s.signature.length,4),s.signature)),e.setWitnessArgsAt(s.position,o),e}async _signPWLockScriptForTransaction(e,t,n){let s=await this._signPersonalEvmForTransaction(e,t,n,new oc);if(!s)return e;let o=rr.fromBytes(e.witnesses[s.position]);return o.lock=j(s.signature),e.setWitnessArgsAt(s.position,o),e}async _signPersonalEvmForTransaction(e,t,n,s){let o=await e.getSignHashInfo(t,this.client,s);if(!o)return;let i=Y(await this.signMessageRaw(n(o.message)));return i[i.length-1]>=27&&(i[i.length-1]-=27),{signature:i,position:o.position}}};var Y0=class extends Mc{constructor(e,t){super(e),this.address=j(t)}async connect(){}async isConnected(){return!0}async getEvmAccount(){return this.address}};var Q6=Ge(Jr(),1);var Ds=class r extends Zt{get type(){return pr.Nostr}get signType(){return Ne.NostrEvent}async signNostrEvent(e){throw Error("SignerNostr.signNostrEvent not implemented")}async signMessageRaw(e){return j((await this.signNostrEvent(Df(e))).sig)}async getInternalAddress(){return Q6.bech32.encode("npub",Q6.bech32.toWords(Y(await this.getNostrPublicKey())))}async getAddressObjs(){let e=await this.getNostrPublicKey();return[await Lt.fromKnownScript(this.client,te.NostrLock,j(Ae([0],br(e).slice(0,42))))]}async prepareTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,te.NostrLock),await t.prepareSighashAllWitness(n,572,this.client),t}async signOnlyTransaction(e){let t=Se.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Y(JSON.stringify(await this.signNostrEvent({pubkey:(await this.getNostrPublicKey()).slice(2),tags:[[r.CKB_SIG_HASH_ALL_TAG,s.message.slice(2)]],created_at:Math.floor(Date.now()/1e3),kind:r.CKB_UNLOCK_EVENT_KIND,content:r.CKB_UNLOCK_EVENT_CONTENT})),"utf8"),i=rr.fromBytes(t.witnesses[s.position]);return i.lock=j(o),t.setWitnessArgsAt(s.position,i),t}};Ds.CKB_SIG_HASH_ALL_TAG="ckb_sighash_all";Ds.CKB_UNLOCK_EVENT_KIND=23334;Ds.CKB_UNLOCK_EVENT_CONTENT=`Signing a CKB transaction

IMPORTANT: Please verify the integrity and authenticity of connected Nostr client before signing this message
`;var t5=Ge(Jr(),1);var e5=Ge(Jr(),1);var Rc=class extends Ds{constructor(e,t){if(super(e),typeof t=="string"&&t.startsWith("npub")){let{words:n}=e5.bech32.decode(t);this.publicKey=j(e5.bech32.fromWords(n))}else this.publicKey=j(t)}async connect(){}async isConnected(){return!0}async getNostrPublicKey(){return this.publicKey}};var Q0=class extends Rc{constructor(e,t){let n=(()=>{if(typeof t=="string"&&t.startsWith("nsec")){let{words:s}=t5.bech32.decode(t);return j(t5.bech32.fromWords(s))}return j(t)})();super(e,bs.getPublicKey(n.slice(2))),this.privateKey=n}async signNostrEvent(e){let t=(await this.getNostrPublicKey()).slice(2),n=Pf({...e,pubkey:t}),s=bs.sign(n,this.privateKey.slice(2));return{...e,id:j(n).slice(2),pubkey:t,sig:j(s).slice(2)}}};var Mf=class extends O.SignerEvm{constructor(e,t){super(e),this.provider=t,this.accountCache=void 0}async getEvmAccount(){return this.accountCache=(await this.provider.request({method:"eth_accounts"}))[0],this.accountCache}async connect(){await this.provider.request({method:"eth_requestAccounts"})}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("disconnect",n)}),this.provider.on("accountsChanged",n),this.provider.on("disconnect",n),t[0]}async isConnected(){return(await this.provider.request({method:"eth_accounts"})).length!==0}async signMessageRaw(e){let t=typeof e=="string"?O.bytesFrom(e,"utf8"):e,n=this.accountCache??await this.getEvmAccount();return this.provider.request({method:"personal_sign",params:[O.hexFrom(t),n]})}};var r5=class{constructor(e){this.client=e,this.existedUuids=[]}subscribeSigners(e){let t=s=>{let{detail:o}=s,{uuid:i}=o.info;if(this.existedUuids.includes(i))return;this.existedUuids.push(i);let c=new Mf(this.client,o.provider);e(c,o)};window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new Event("eip6963:requestProvider"));let n=window;return typeof n.ethereum<"u"&&e(new Mf(this.client,n.ethereum)),()=>window.removeEventListener("eip6963:announceProvider",t)}};var sl={};be(sl,{BitcoinSigner:()=>Nc,CkbSigner:()=>tl,EvmSigner:()=>rl,NostrSigner:()=>nl,getJoyIdSigners:()=>wC});async function sn(r,e){return e.popup==null&&(e.popup=Yp(""),e.popup==null)?Qp(async()=>sn(r,e)):(e.popup.location.href=r,new Promise((t,n)=>{oi()&&n(new Xp(e.popup));let s,o,i=setInterval(()=>{e.popup?.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",s,!1),n(new i0(e.popup)))},1e3);o=setTimeout(()=>{clearInterval(i),n(new Jp(e.popup)),window.removeEventListener("message",s,!1)},(e.timeoutInSeconds??3e3)*1e3),s=c=>{let{joyidAppURL:a}=e,u=new URL(a);c.origin===u.origin&&(!c.data||c.data?.type!==e.type||(clearTimeout(o),clearInterval(i),window.removeEventListener("message",s,!1),e.popup.close(),c.data.error&&n(new Error(c.data.error)),t(c.data.data)))},window.addEventListener("message",s)}))}function n5(r,e){return r.uri===e.uri&&r.addressType.startsWith(e.addressType)}var Ps=class{constructor(e="ccc-joy-id-signer"){this.storageKey=e,this.operationLock=Promise.resolve()}async readConnections(){return JSON.parse(window.localStorage.getItem(this.storageKey)??"[]")}async get(e){return(await this.readConnections()).find(([t])=>n5(e,t))?.[1]}async set(e,t){let n=this.operationLock.catch(()=>{}).then(async()=>{let s=await this.readConnections();if(t){let o=s.find(([i])=>n5(i,e));o?o[1]=t:s.push([e,t]),window.localStorage.setItem(this.storageKey,JSON.stringify(s))}else window.localStorage.setItem(this.storageKey,JSON.stringify(s.filter(([o])=>!n5(o,e))))});this.operationLock=n,await n}};var Nc=class extends O.SignerBtc{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s=[{addressPrefix:"ckb",signerType:O.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:O.SignerType.BTC,network:"btcTestnet"}],o="auto",i,c=new Ps){super(e),this.name=t,this.icon=n,this.preferredNetworks=s,this.addressType=o,this._appUri=i,this.connectionsRepo=c,this.network="btcTestnet"}getConfig(){let{network:e}=this.matchNetworkPreference(this.preferredNetworks,this.network)??{network:this.network};this.network!==e&&(this.connection=void 0),this.network=e;let t={btc:"https://app.joy.id",btcTestnet:"https://testnet.joyid.dev"}[e];if(!t)throw new Error(`JoyID wallet doesn't support the requested chain ${this.network}`);return{redirectURL:location.href,joyidAppURL:this._appUri??t,requestNetwork:`btc-${this.addressType}`,name:this.name,logo:this.icon}}async disconnect(){await super.disconnect(),await this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"btc"},void 0)}async getBtcAccount(){let{address:e}=await this.assertConnection();return e}async getBtcPublicKey(){let{publicKey:e}=await this.assertConnection();return e}async connect(){let e=this.getConfig(),t=await sn(Ue(e,"popup","/auth"),{...e,type:Pe.Auth}),{address:n,pubkey:s}=this.addressType==="auto"?t.btcAddressType==="p2wpkh"?t.nativeSegwit:t.taproot:this.addressType==="p2wpkh"?t.nativeSegwit:t.taproot;this.connection={address:n,publicKey:O.hexFrom(s),keyType:t.keyType},await Promise.all([this.connectionsRepo.set({uri:e.joyidAppURL,addressType:`btc-${this.addressType}`},this.connection),this.connectionsRepo.set({uri:e.joyidAppURL,addressType:"btc-auto"},this.connection)])}async isConnected(){return this.connection?!0:(this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:`btc-${this.addressType}`}),this.connection!==void 0)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:O.hexFrom(e).slice(2),s=this.getConfig(),{signature:o}=await sn(Ue({...s,challenge:n,address:t,signMessageType:"ecdsa"},"popup","/sign-message"),{...s,type:Pe.SignMessage});return o}};var tl=class extends O.Signer{get type(){return O.SignerType.CKB}get signType(){return O.SignerSignType.JoyId}async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o,i=new Ps){super(e),this.name=t,this.icon=n,this._appUri=s,this._aggregatorUri=o,this.connectionsRepo=i}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),name:this.name,logo:this.icon}}getAggregatorUri(){return this._aggregatorUri??(this.client.addressPrefix==="ckb"?"https://cota.nervina.dev/mainnet-aggregator":"https://cota.nervina.dev/aggregator")}async connect(){let e=this.getConfig(),t=await sn(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:t.address,publicKey:O.hexFrom(t.pubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async getInternalAddress(){return(await this.assertConnection()).address}async getIdentity(){let e=await this.assertConnection();return JSON.stringify({keyType:e.keyType,publicKey:e.publicKey.slice(2)})}async getAddressObj(){return await O.Address.fromString(await this.getInternalAddress(),this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async prepareTransaction(e){let t=O.Transaction.from(e);await t.addCellDepsOfKnownScripts(this.client,O.KnownScript.JoyId);let n=await t.findInputIndexByLock((await this.getAddressObj()).script,this.client);if(n===void 0)return t;let s=t.getWitnessArgsAt(n)??O.WitnessArgs.from({});return s.lock=O.hexFrom("00".repeat(1e3)),await this.prepareTransactionForSubKey(t,s),t.setWitnessArgsAt(n,s),t}async prepareTransactionForSubKey(e,t){if(this.connection?.keyType!=="sub_key"||(t.outputType??"0x")!=="0x")return;let n=O.hashCkb(this.connection.publicKey).substring(0,42),s=(await this.getAddressObj()).script,o=new Bh(this.getAggregatorUri()),{unlock_entry:i}=await o.generateSubkeyUnlockSmt({alg_index:1,pubkey_hash:n,lock_script:O.hexFrom(s.toBytes())});t.outputType=O.hexFrom(i);let c=[];for await(let a of this.client.findCellsByLock(s,await O.Script.fromKnownScript(this.client,O.KnownScript.COTA,"0x")))c.push(O.CellDep.from({depType:"code",outPoint:a.outPoint}));if(c.length===0)throw new Error("No COTA cells for sub key wallet");e.addCellDepsAtStart(c)}async signOnlyTransaction(e){let t=O.Transaction.from(e),{script:n}=await this.getAddressObj(),s=await O.reduceAsync(t.inputs,async(c,a,u)=>{let{cellOutput:d}=await a.getCell(this.client);d.lock.eq(n)&&c.push(u)},[]);await t.prepareSighashAllWitness(n,0,this.client),t.inputs.forEach(c=>{c.cellOutput=void 0,c.outputData=void 0});let o=this.getConfig(),i=await sn(Ue({...o,tx:JSON.parse(t.stringify()),signerAddress:(await this.assertConnection()).address,witnessIndexes:s},"popup","/sign-ckb-raw-tx"),{...o,type:Pe.SignCkbRawTx});return O.Transaction.from(i.tx)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:O.hexFrom(e).slice(2),s=this.getConfig(),o=await sn(Ue({...s,challenge:n,isData:typeof e!="string",address:t},"popup","/sign-message"),{...s,type:Pe.SignMessage});return JSON.stringify({signature:o.signature,alg:o.alg,message:o.message})}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"ckb"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"ckb"})}};var rl=class extends O.SignerEvm{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o=new Ps){super(e),this.name=t,this.icon=n,this._appUri=s,this.connectionsRepo=o}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),requestNetwork:"ethereum",name:this.name,logo:this.icon}}async getEvmAccount(){return(await this.assertConnection()).address}async connect(){let e=this.getConfig(),t=await sn(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:t.ethAddress,publicKey:O.hexFrom(t.pubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:O.hexFrom(e).slice(2),s=this.getConfig(),{signature:o}=await sn(Ue({...s,challenge:n,isData:typeof e!="string",address:t},"popup","/sign-message"),{...s,type:Pe.SignMessage});return O.hexFrom(o)}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"ethereum"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"ethereum"})}};var nl=class extends O.SignerNostr{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o=new Ps){super(e),this.name=t,this.icon=n,this._appUri=s,this.connectionsRepo=o}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),requestNetwork:"nostr",name:this.name,logo:this.icon}}async connect(){let e=this.getConfig(),t=await sn(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:"",publicKey:O.hexFrom(t.nostrPubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async getNostrPublicKey(){return(await this.assertConnection()).publicKey}async signNostrEvent(e){let t=this.getConfig();return(await sn(Ue({...t,event:e},"popup","/sign-nostr-event"),{...t,type:Pe.SignNostrEvent})).event}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"nostr"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"nostr"})}};function wC(r,e,t,n){return oi()||O.isWebview(window.navigator.userAgent)?[O.SignerType.CKB,O.SignerType.EVM,O.SignerType.BTC].map(s=>({name:s,signer:new O.SignerAlwaysError(r,s,"JoyID can only be used with standard browsers")})):[{name:"CKB",signer:new tl(r,e,t)},{name:"BTC",signer:new Nc(r,e,t,n)},{name:"Nostr",signer:new nl(r,e,t)},{name:"EVM",signer:new rl(r,e,t)},{name:"BTC (P2WPKH)",signer:new Nc(r,e,t,n,"p2wpkh")},{name:"BTC (P2TR)",signer:new Nc(r,e,t,n,"p2tr")}]}var il={};be(il,{Signer:()=>ol,getNip07Signer:()=>vC});var ol=class extends O.SignerNostr{constructor(e,t){super(e),this.provider=t,this.publicKeyCache=void 0}async getNostrPublicKey(){return this.publicKeyCache||(this.publicKeyCache=this.provider.getPublicKey().catch(e=>{throw this.publicKeyCache=void 0,e})),O.hexFrom(await this.publicKeyCache)}async signNostrEvent(e){return this.provider.signEvent({...e,pubkey:await this.publicKeyCache})}async connect(){await this.getNostrPublicKey()}async isConnected(){return!0}};function vC(r){let e=window;if(!(typeof e.nostr>"u"))return new ol(r,e.nostr)}var al={};be(al,{BitcoinSigner:()=>cl,getOKXSigners:()=>SC});var cl=class extends O.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:O.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:O.SignerType.BTC,network:"btcTestnet"}]){super(e),this.providers=t,this.preferredNetworks=n,this.network="btcTestnet"}get provider(){let{network:e}=this.matchNetworkPreference(this.preferredNetworks,this.network)??{network:this.network};this.network=e;let t={btc:"bitcoin",btcTestnet:"bitcoinTestnet",btcSignet:"bitcoinSignet"}[e];if(!t)throw new Error(`OKX wallet doesn't support the requested chain ${this.network}`);let n=this.providers[t];if(!n)throw new Error(`OKX wallet doesn't support the requested chain ${this.network}`);return n}async getBtcAccount(){if(this.provider.getAccounts){let e=(await this.provider.getAccounts())[0];if(!e)throw Error("Not connected");return e}if(this.provider.getSelectedAccount){let e=await this.provider.getSelectedAccount();if(!e)throw Error("Not connected");return e.address}throw Error("Unsupported OKX provider")}async getBtcPublicKey(){if(this.provider.getPublicKey){let e=await this.provider.getPublicKey();if(e==="")throw Error("The OKX Wallet returned wrong public key");return O.hexFrom(e)}if(this.provider.getSelectedAccount){let e=await this.provider.getSelectedAccount();if(!e)throw Error("Not connected");return O.hexFrom(e.compressedPublicKey)}throw Error("Unsupported OKX provider")}async connect(){if(this.provider.requestAccounts){await this.provider.requestAccounts();return}if(this.provider.connect){await this.provider.connect();return}throw Error("Unsupported OKX provider")}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountChanged",n)}),this.provider.on("accountChanged",n),t[0]}async isConnected(){try{this.provider}catch{return!1}if(this.provider.getAccounts){if((await this.provider.getAccounts()).length===0)return!1}else if(this.provider.getSelectedAccount&&await this.provider.getSelectedAccount()===null)return!1;return await this.connect(),!0}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return this.provider.signMessage(t,"ecdsa")}};var Wh=class extends O.SignerNostr{constructor(e,t){super(e),this.provider=t,this.publicKeyCache=void 0}async getNostrPublicKey(){return this.publicKeyCache||(this.publicKeyCache=this.provider.getPublicKey().then(e=>{if(e)return e;throw Error("This OKX Wallet account does not support Nostr")}).catch(e=>{throw this.publicKeyCache=void 0,e})),O.hexFrom(await this.publicKeyCache)}async signNostrEvent(e){return this.provider.signEvent({...e,pubkey:await this.publicKeyCache})}async connect(){await this.provider.connect?.(),await this.getNostrPublicKey()}onReplaced(e){let t=[],n=()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountChanged",n)}),this.provider.on("accountChanged",n),t[0]}async isConnected(){return!0}};function SC(r,e){let t=window;return typeof t.okxwallet>"u"?[]:[{signer:new cl(r,t.okxwallet,e),name:"BTC"},{signer:new Wh(r,t.okxwallet.nostr),name:"Nostr"}]}var ul={};be(ul,{ReiSigner:()=>fl,getReiSigners:()=>_C});var Ms={};be(Ms,{ADDRESS_BECH32_LIMIT:()=>Vu,AddressFormat:()=>bn,CKB_BLAKE2B_PERSONAL:()=>c3,DEFAULT_CONFIRMED_BLOCK_TIME:()=>Bu,DEFAULT_MAX_FEE_RATE:()=>mp,DEFAULT_MIN_FEE_RATE:()=>a3,DEP_TYPES:()=>N_,DEP_TYPE_TO_NUM:()=>wp,HASH_TYPES:()=>M3,HASH_TYPE_TO_NUM:()=>bp,JsonRpcTransformers:()=>Nt,MAINNET_SCRIPTS:()=>m3,MapLru:()=>Wo,NUM_TO_DEP_TYPE:()=>Fu,NUM_TO_HASH_TYPE:()=>Hu,TESTNET_SCRIPTS:()=>g3,TransportFallback:()=>Pu,TransportHttp:()=>Ou,TransportWebSocket:()=>Du,addressFromPayload:()=>F3,addressPayloadFromString:()=>U3,clientSearchKeyRangeFrom:()=>Vo,filterCell:()=>p3,filterData:()=>d3,filterNumByRange:()=>yp,filterScript:()=>Cu,filterScriptByLenRange:()=>l3,transportFromUri:()=>y3});var fl=class extends O.Signer{constructor(e,t){super(e),this.provider=t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.off("accountsChanged",n),this.provider.off("chainChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("chainChanged",n),t[0]}get type(){return O.SignerType.CKB}get signType(){return O.SignerSignType.CkbSecp256k1}async connect(){let e=this.client.addressPrefix;if(await this._getNetworkChanged()){let n=e==="ckb"?"mainnet":"testnet";await this.provider.request({method:"ckb_switchNetwork",data:n})}}async isConnected(){let e=await this.provider.isConnected();return!e||await this._getNetworkChanged()?!1:e}async _getNetworkChanged(){let e=this.client.addressPrefix,t=await this.getInternalAddress(),{prefix:n}=Ms.addressPayloadFromString(t);return e!==n}async getInternalAddress(){return this.provider.request({method:"ckb_requestAccounts"})}async getAddressObj(){return O.Address.fromString(await this.getInternalAddress(),this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async getIdentity(){return this.provider.request({method:"ckb_getPublicKey"})}async signMessageRaw(e){return this.provider.request({method:"ckb_signMessage",data:{message:e}})}async prepareTransaction(e){let t=O.Transaction.from(e);return await t.addCellDepsOfKnownScripts(this.client,O.KnownScript.Secp256k1Blake160),O.reduceAsync(await this.getAddressObjs(),(n,{script:s})=>n.prepareSighashAllWitness(s,65,this.client),t)}async signOnlyTransaction(e){let t=Ms.JsonRpcTransformers.transactionFrom(e);return this.provider.request({method:"ckb_signTransaction",data:{txSkeleton:t}})}};function _C(r){let e=window;return typeof e?.rei?.ckb>"u"?[]:[{signer:new fl(r,e.rei.ckb),name:"CKB"}]}var $r={};be($r,{Address:()=>Lt,Bytes:()=>J2,Cell:()=>Vt,CellAny:()=>ms,CellDep:()=>Rr,CellDepInfo:()=>Ko,CellDepVec:()=>kp,CellInput:()=>Nr,CellInputVec:()=>Ap,CellOutput:()=>en,CellOutputVec:()=>Ep,Client:()=>rc,ClientBlock:()=>Wi,ClientBlockHeader:()=>Qr,ClientBlockUncle:()=>La,ClientCache:()=>ec,ClientCacheMemory:()=>tc,ClientIndexerSearchKey:()=>Kn,ClientIndexerSearchKeyFilter:()=>Vi,ClientIndexerSearchKeyTransaction:()=>Ki,ClientJsonRpc:()=>so,ClientPublicMainnet:()=>Ru,ClientPublicTestnet:()=>Nu,ClientTransactionResponse:()=>to,DepTypeCodec:()=>Sp,ErrorClientBase:()=>gn,ErrorClientDuplicatedTransaction:()=>Ji,ErrorClientMaxFeeRateExceeded:()=>Qi,ErrorClientRBFRejected:()=>Xi,ErrorClientResolveUnknown:()=>Zi,ErrorClientVerification:()=>Gi,ErrorClientWaitTransactionTimeout:()=>Yi,ErrorTransactionInsufficientCapacity:()=>hs,ErrorTransactionInsufficientCoin:()=>fc,HashTypeCodec:()=>xp,HasherCkb:()=>zo,HasherKeecak256:()=>oc,KnownScript:()=>te,One:()=>h3,OutPoint:()=>je,RawTransaction:()=>zu,RequestorJsonRpc:()=>nc,Script:()=>me,ScriptInfo:()=>eo,ScriptOpt:()=>Uu,ScriptVec:()=>R3,Signature:()=>j0,Signer:()=>Zt,SignerAlwaysError:()=>J0,SignerBtc:()=>Dc,SignerBtcPublicKeyReadonly:()=>V0,SignerCkbPrivateKey:()=>K0,SignerCkbPublicKey:()=>Pc,SignerCkbScriptReadonly:()=>W0,SignerDoge:()=>So,SignerDogeAddressReadonly:()=>Z0,SignerDogePrivateKey:()=>G0,SignerDummy:()=>_o,SignerEvm:()=>Mc,SignerEvmAddressReadonly:()=>Y0,SignerInfo:()=>z0,SignerNostr:()=>Ds,SignerNostrPrivateKey:()=>Q0,SignerNostrPublicKeyReadonly:()=>Rc,SignerOpenLink:()=>X0,SignerSignType:()=>Ne,SignerType:()=>pr,Since:()=>Go,Transaction:()=>Se,WitnessArgs:()=>rr,Zero:()=>Je,apply:()=>fe,btcEcdsaPublicKeyHash:()=>ni,btcP2pkhAddressFromPublicKey:()=>t0,btcPublicKeyFromP2pkhAddress:()=>r0,btcVarLengthBytesFrom:()=>Zp,buildNostrEventFromMessage:()=>Df,bytesConcat:()=>Ae,bytesConcatTo:()=>pn,bytesEq:()=>_u,bytesFrom:()=>Y,bytesTo:()=>Zs,calcDaoClaimEpoch:()=>L3,calcDaoProfit:()=>Cp,depTypeFrom:()=>sc,depTypeFromBytes:()=>Tp,depTypeToBytes:()=>_p,epochFrom:()=>Ha,epochFromHex:()=>Mu,epochToHex:()=>N3,fixedPointFrom:()=>no,fixedPointToString:()=>Iu,hashCkb:()=>br,hashTypeFrom:()=>ro,hashTypeFromBytes:()=>$a,hashTypeId:()=>H3,hashTypeToBytes:()=>Fa,hexFrom:()=>j,isWebview:()=>f3,keystoreDecrypt:()=>r4,keystoreEncrypt:()=>t4,messageHashBtcEcdsa:()=>tf,messageHashCkbSecp256k1:()=>rf,messageHashDogeEcdsa:()=>Af,mol:()=>K,nostrEventHash:()=>Pf,numBeFromBytes:()=>Na,numBeToBytes:()=>ds,numFrom:()=>F,numFromBytes:()=>Ys,numLeFromBytes:()=>Qs,numLeToBytes:()=>Vn,numMax:()=>Au,numMin:()=>Eu,numToBytes:()=>He,numToHex:()=>Rt,reduceAsync:()=>yn,sleep:()=>ku,spore:()=>_l,ssri:()=>Tn,stringify:()=>u3,udt:()=>Al,udtBalanceFrom:()=>lc,verifyMessageBtcEcdsa:()=>n0,verifyMessageCkbSecp256k1:()=>s0,verifyMessageDogeEcdsa:()=>P0,verifyMessageEvmPersonal:()=>$0,verifyMessageJoyId:()=>D0,verifyMessageNostrEvent:()=>q0});var _l={};be(_l,{DEFAULT_COBUILD_INFO_HASH:()=>Lc,SPORE_VERSION_DEFAULT:()=>Jh,SporeScriptInfo:()=>on,SporeVersion:()=>ir,assertCluster:()=>Yh,assertSpore:()=>L5,createSpore:()=>vI,createSporeCluster:()=>JC,dob:()=>N5,findCluster:()=>wx,findSpore:()=>aw,findSporeClusters:()=>QC,findSporeClustersBySigner:()=>YC,findSpores:()=>EI,findSporesBySigner:()=>TI,getClusterScriptInfo:()=>c5,getClusterScriptInfos:()=>Lf,getSporeScriptInfo:()=>i5,getSporeScriptInfos:()=>Nf,meltSpore:()=>_I,transferSpore:()=>SI,transferSporeCluster:()=>XC});var ox=K.table({name:K.String,description:K.String}),ix=K.table({name:K.String,description:K.String,mutantId:K.BytesOpt});function cx(r,e){if(!e)return rx(r);switch(e){case"v1":return TC(r);case"v2":return rx(r)}}function TC(r){return O.bytesFrom(ox.encode({name:r.name,description:r.description}))}function rx(r){return O.bytesFrom(ix.encode({name:r.name,description:r.description,mutantId:r.mutantId}))}function Zh(r,e){if(e)switch(e){case"v1":return nx(r);case"v2":return sx(r)}try{return sx(r)}catch{try{return nx(r)}catch{throw new Error(`Cannot unpack ClusterData, no matching molecule: ${O.hexFrom(r)}`)}}}function nx(r){return ox.decode(r)}function sx(r){return ix.decode(r)}var EC=K.table({scriptInfoHash:K.Byte32,scriptHash:K.Byte32,data:K.Bytes}),ax=K.vector(EC),s5=K.table({actions:ax}),AC=K.table({outputs:O.CellOutputVec,outputsData:K.BytesVec}),kC=K.table({name:K.String,url:K.String,scriptHash:K.Byte32,schema:K.String,messageType:K.String}),CC=K.vector(kC),BC=K.table({message:s5,payload:O.Transaction,resolvedInputs:AC,changeOutput:K.Uint32Opt,scriptInfos:CC,lockActions:ax}),sG=K.union({BuildingPacketV1:BC});var Ur=K.union({Script:O.Script}),IC=K.table({sporeId:K.Byte32,to:Ur,dataHash:K.Byte32}),OC=K.table({sporeId:K.Byte32,from:Ur,to:Ur}),DC=K.table({sporeId:K.Byte32,from:Ur}),PC=K.table({clusterId:K.Byte32,to:Ur,dataHash:K.Byte32}),MC=K.table({clusterId:K.Byte32,from:Ur,to:Ur}),RC=K.table({clusterId:K.Byte32,clusterProxyId:K.Byte32,to:Ur}),NC=K.table({clusterId:K.Byte32,clusterProxyId:K.Byte32,from:Ur,to:Ur}),LC=K.table({clusterId:K.Byte32,clusterProxyId:K.Byte32,from:Ur}),HC=K.table({clusterId:K.Byte32,clusterProxyId:K.Byte32,to:Ur}),UC=K.table({clusterId:K.Byte32,from:Ur,to:Ur}),FC=K.table({clusterId:K.Byte32,from:Ur}),Rf=K.union({CreateSpore:IC,TransferSpore:OC,MeltSpore:DC,CreateCluster:PC,TransferCluster:MC,CreateClusterProxy:RC,TransferClusterProxy:NC,MeltClusterProxy:LC,CreateClusterAgent:HC,TransferClusterAgent:UC,MeltClusterAgent:FC});var $C=K.table({seal:K.Bytes,message:s5}),qC=K.table({seal:K.Bytes}),jC=K.table({}),zC=K.table({}),VC={SighashAll:4278190081,SighashAllOnly:4278190082,Otx:4278190083,OtxStart:4278190084},o5=K.union({SighashAll:$C,SighashAllOnly:qC,Otx:jC,OtxStart:zC},VC);var fx=K.table({contentType:K.String,content:K.Bytes,clusterId:K.BytesOpt});function ux(r){return O.bytesFrom(fx.encode({contentType:r.contentType,content:r.content,clusterId:r.clusterId}))}function Gh(r){return fx.decode(r)}var Lc=O.hashCkb(O.bytesFrom("CCC_DEFAULT_COBUILD_INFO","utf8")),ir;(function(r){r.V1="V1",r.V2="V2",r.DID="DID"})(ir||(ir={}));var Jh=ir.V2,on=class r extends O.ScriptInfo{constructor(e,t,n,s){super(e,t,n),this.cobuild=s}static from(e){return new r(O.hexFrom(e.codeHash),O.hashTypeFrom(e.hashType),e.cellDeps.map(t=>O.CellDepInfo.from(t)),e.cobuild)}};var lx=Object.freeze({[ir.DID]:{codeHash:"0xcfba73b58b6f30e70caed8a999748781b164ef9a1e218424a6fb55ebf641cb33",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x37c80ba8124780920bc8fe06b49e3535b43ca339bb9a97fb462b16d575bfa9a6",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x62312cd846659e188b05da11dc3f080b083c27371ea701d6026e11e713e0e3de"}}],cobuild:!0},[ir.V2]:{codeHash:"0x4a4dce1df3dffff7f8b2cd7dff7303df3b6150c9788cb75dcf6747247132b9f5",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x96b198fb5ddbd1eed57ed667068f1f1e55d07907b4c0dbd38675a69ea1b69824",index:0},depType:"code"}}],cobuild:!0},[ir.V1]:void 0}),dx=Object.freeze({[ir.V2]:{codeHash:"0x7366a61534fa7c7e6225ecc0d828ea3b5366adec2b58206f2ee84995fe030075",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xe464b7fb9311c5e2820e61c99afc615d6b98bdefbe318c34868c010cbd0dc938",index:0},depType:"code"}}],cobuild:!0},[ir.V1]:void 0,[ir.DID]:void 0});var px=Object.freeze({[ir.DID]:{codeHash:"0x0b1f412fbae26853ff7d082d422c2bdd9e2ff94ee8aaec11240a5b34cc6e890f",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x306961e0eb04ed972c60cb89a0aed1b0ef065d96d2fc0000c62db5275e32dc6f",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x80f0d4bf6b3951911aa6b98cc609d477a8a10b903b35cfd528d098e95c36f680"}}]},[ir.V2]:{codeHash:"0x685a60219309029d01310311dba953d67029170ca4848a4ff638e57002130a0d",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x5e8d2a517d50fd4bb4d01737a7952a1f1d35c8afc77240695bb569cd7d9d5a1f",index:0},depType:"code"}}],cobuild:!0},[ir.V1]:{codeHash:"0xbbad126377d45f90a8ee120da988a2d7332c78ba8fd679aab478a19d6c133494",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xfd694382e621f175ddf81ce91ce2ecf8bfc027d53d7d31b8438f7d26fc37fd19",index:0},depType:"code"}}]}}),hx=Object.freeze({[ir.V2]:{codeHash:"0x0bbe768b519d8ea7b96d58f1182eb7e6ef96c541fbd9526975077ee09f049058",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xcebb174d6e300e26074aea2f5dbd7f694bb4fe3de52b6dfe205e54f90164510a",index:0},depType:"code"}}],cobuild:!0},[ir.V1]:{codeHash:"0x598d793defef36e2eeba54a9b45130e4ca92822e1d193671f490950c3b856080",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x49551a20dfe39231e7db49431d26c9c08ceec96a29024eef3acc936deeb2ca76",index:0},depType:"code"}}]},[ir.DID]:void 0});function Nf(r){return r.addressPrefix==="ckb"?lx:px}function Lf(r){return r.addressPrefix==="ckb"?dx:hx}function i5(r,e){let t=Nf(r)[e??Jh];if(!t)throw new Error(`Spore script info not found of for version ${e} on ${r.addressPrefix}`);return on.from(t)}function c5(r,e){let t=Lf(r)[e??Jh];if(!t)throw new Error(`Cluster script info not found of for version ${e} on ${r.addressPrefix}`);return on.from(t)}function mx(r,e,t=Lc){if(!r.type)throw new Error("Spore cell must have a type script");let n=O.Script.from(r.type),s=n.hash(),o=Rf.encode({type:"CreateSpore",value:{sporeId:n.args,to:{type:"Script",value:r.lock},dataHash:O.hashCkb(e)}});return{scriptInfoHash:O.hexFrom(t),scriptHash:s,data:O.hexFrom(o)}}function yx(r,e,t=Lc){if(!r.type||!e.type)throw new Error("Spore cell must have a type script");let n=O.Script.from(e.type),s=n.hash(),o=Rf.encode({type:"TransferSpore",value:{sporeId:n.args,from:{type:"Script",value:r.lock},to:{type:"Script",value:e.lock}}});return{scriptInfoHash:O.hexFrom(t),scriptHash:s,data:O.hexFrom(o)}}function gx(r,e=Lc){if(!r.type)throw new Error("Spore cell must have a type script");let t=O.Script.from(r.type),n=t.hash(),s=Rf.encode({type:"MeltSpore",value:{sporeId:t.args,from:{type:"Script",value:r.lock}}});return{scriptInfoHash:O.hexFrom(e),scriptHash:n,data:O.hexFrom(s)}}function bx(r,e,t=Lc){if(!r.type)throw new Error("Cluster cell must have a type script");let n=O.Script.from(r.type),s=n.hash(),o=Rf.encode({type:"CreateCluster",value:{clusterId:n.args,to:{type:"Script",value:r.lock},dataHash:O.hashCkb(e)}});return{scriptInfoHash:O.hexFrom(t),scriptHash:s,data:O.hexFrom(o)}}function Xh(r,e,t=Lc){if(!r.type||!e.type)throw new Error("Cluster cell must have a type script");let n=O.Script.from(e.type),s=n.hash(),o=Rf.encode({type:"TransferCluster",value:{clusterId:n.args,from:{type:"Script",value:r.lock},to:{type:"Script",value:e.lock}}});return{scriptInfoHash:O.hexFrom(t),scriptHash:s,data:O.hexFrom(o)}}async function Hc(r,e,t){let n=O.Transaction.from(e);if(t.length===0)return r.prepareTransaction(n);let s=WC(n);return n=await r.prepareTransaction(n),ZC(n,[s,t].flat()),n}function KC(r){try{return o5.decode(O.bytesFrom(r))}catch{return}}function WC(r){if(r.witnesses.length===0)return[];let e=KC(r.witnesses[r.witnesses.length-1]);if(!e)return[];if(e.type!=="SighashAll")throw new Error("Invalid cobuild proof type: SighashAll");return r.witnesses.pop(),e.value.message.actions}function ZC(r,e){r.setWitnessAt(Math.max(r.witnesses.length,r.inputs.length),o5.encode({type:"SighashAll",value:{seal:"0x",message:{actions:e}}}))}async function xx(r,e,t,n,s){if(!t.clusterId||n==="skip")return;if(!n)throw Error("clusterMode is undefined but the spore has a cluster");let{cell:o,scriptInfo:i}=await Yh(r.client,t.clusterId);switch(n){case"lockProxy":{let c=o.cellOutput.lock,a=await e.findInputIndexByLock(c,r.client);if(a===void 0&&(await e.completeInputsAddOne(new O.SignerCkbScriptReadonly(r.client,c)),a=await e.findInputIndexByLock(c,r.client),a===void 0))throw new Error("Lock proxy input not found");e.outputs.some(u=>u.lock===c)||e.addOutput(await e.getInput(a).getCell(r.client)),e.addCellDeps({outPoint:o.outPoint,depType:"code"});return}case"clusterCell":return e.inputs.some(c=>c.previousOutput.eq(o.outPoint))?void 0:(e.addInput(o),e.addOutput(o.cellOutput,o.outputData),await e.addCellDepInfos(r.client,i.cellDeps),e.addCellDeps({outPoint:o.outPoint,depType:"code"}),i.cobuild?Xh(o.cellOutput,o.cellOutput,s):void 0)}}async function Qh(r,e,t){for(let n of t){if(!n)continue;let s=await r.findSingletonCellByType({...n,args:e},!0);if(s)return{cell:s,scriptInfo:on.from(n)}}}async function wx(r,e,t){let n=await Qh(r,e,t??Object.values(Lf(r)));if(n)return{cell:n.cell,cluster:n.cell,clusterData:Zh(n.cell.outputData),scriptInfo:n.scriptInfo}}async function Yh(r,e,t){let n=await wx(r,e,t);if(!n)throw new Error(`Cluster ${O.hexFrom(e)} not found`);return n}async function JC(r){let{signer:e,data:t,to:n,scriptInfoHash:s}=r,o=r.scriptInfo??c5(e.client),i=O.Transaction.from(r.tx??{});await i.completeInputsAtLeastOne(e);let c=O.hashTypeId(i.inputs[0],i.outputs.length),a=cx(t);i.addOutput({lock:n??(await e.getRecommendedAddressObj()).script,type:{...o,args:c}},a),await i.addCellDepInfos(e.client,o.cellDeps);let u=o.cobuild?[bx(i.outputs[i.outputs.length-1],a,s)]:[];return{tx:await Hc(e,i,u),id:c}}async function XC(r){let{signer:e,id:t,to:n,scripts:s,scriptInfoHash:o}=r,i=O.Transaction.from(r.tx??{}),{cell:c,scriptInfo:a}=await Yh(e.client,t,s);i.addInput(c),i.addOutput({lock:n,type:c.cellOutput.type},c.outputData),await i.addCellDepInfos(e.client,a.cellDeps);let u=a.cobuild?[Xh(c.cellOutput,i.outputs[i.outputs.length-1],o)]:[];return{tx:await Hc(e,i,u)}}async function*YC(r){let{signer:e,order:t,limit:n,scriptInfos:s}=r;for(let o of s??Object.values(Lf(e.client)))if(o)for await(let i of e.findCells({script:{...o,args:""}},!0,t,n))yield{cell:i,cluster:i,clusterData:Zh(i.outputData),scriptInfo:on.from(o)}}async function*QC(r){let{client:e,lock:t,order:n,limit:s,scriptInfos:o}=r;for(let i of o??Object.values(Lf(e)))if(i)for await(let c of e.findCells({script:{...i,args:""},scriptType:"type",scriptSearchMode:"prefix",withData:!0,filter:t?{script:t}:void 0},n,s))yield{cell:c,cluster:c,clusterData:Zh(c.outputData),scriptInfo:on.from(i)}}var N5={};be(N5,{DOB_MAINNET_DECODERS:()=>cw,DOB_TESTNET_DECODERS:()=>iw,checkDecoder:()=>h1,checkPatternDob0:()=>m1,checkPatternDob1:()=>R5,decodeDobByRawData:()=>yI,decodeDobBySporeCell:()=>ow,decodeDobBySporeId:()=>sw,decodeDobBySporeOutpoint:()=>mI,encodeClusterDescriptionForDob0:()=>bI,encodeClusterDescriptionForDob1:()=>xI,encodeDna:()=>gI,extractDobFromDecoderResult:()=>M5,getDecoder:()=>wI,getErrorByCode:()=>P5});function ll(r,e){return function(){return r.apply(e,arguments)}}var{toString:eB}=Object.prototype,{getPrototypeOf:f5}=Object,{iterator:t1,toStringTag:Sx}=Symbol,r1=(r=>e=>{let t=eB.call(e);return r[t]||(r[t]=t.slice(8,-1).toLowerCase())})(Object.create(null)),ts=r=>(r=r.toLowerCase(),e=>r1(e)===r),n1=r=>e=>typeof e===r,{isArray:Uf}=Array,Hf=n1("undefined");function dl(r){return r!==null&&!Hf(r)&&r.constructor!==null&&!Hf(r.constructor)&&cn(r.constructor.isBuffer)&&r.constructor.isBuffer(r)}var _x=ts("ArrayBuffer");function tB(r){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(r):e=r&&r.buffer&&_x(r.buffer),e}var rB=n1("string"),cn=n1("function"),Tx=n1("number"),pl=r=>r!==null&&typeof r=="object",nB=r=>r===!0||r===!1,e1=r=>{if(r1(r)!=="object")return!1;let e=f5(r);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Sx in r)&&!(t1 in r)},sB=r=>{if(!pl(r)||dl(r))return!1;try{return Object.keys(r).length===0&&Object.getPrototypeOf(r)===Object.prototype}catch{return!1}},oB=ts("Date"),iB=ts("File"),cB=ts("Blob"),aB=ts("FileList"),fB=r=>pl(r)&&cn(r.pipe),uB=r=>{let e;return r&&(typeof FormData=="function"&&r instanceof FormData||cn(r.append)&&((e=r1(r))==="formdata"||e==="object"&&cn(r.toString)&&r.toString()==="[object FormData]"))},lB=ts("URLSearchParams"),[dB,pB,hB,mB]=["ReadableStream","Request","Response","Headers"].map(ts),yB=r=>r.trim?r.trim():r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function hl(r,e,{allOwnKeys:t=!1}={}){if(r===null||typeof r>"u")return;let n,s;if(typeof r!="object"&&(r=[r]),Uf(r))for(n=0,s=r.length;n<s;n++)e.call(null,r[n],n,r);else{if(dl(r))return;let o=t?Object.getOwnPropertyNames(r):Object.keys(r),i=o.length,c;for(n=0;n<i;n++)c=o[n],e.call(null,r[c],c,r)}}function Ex(r,e){if(dl(r))return null;e=e.toLowerCase();let t=Object.keys(r),n=t.length,s;for(;n-- >0;)if(s=t[n],e===s.toLowerCase())return s;return null}var Uc=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Ax=r=>!Hf(r)&&r!==Uc;function a5(){let{caseless:r,skipUndefined:e}=Ax(this)&&this||{},t={},n=(s,o)=>{if(o==="__proto__"||o==="constructor"||o==="prototype")return;let i=r&&Ex(t,o)||o;e1(t[i])&&e1(s)?t[i]=a5(t[i],s):e1(s)?t[i]=a5({},s):Uf(s)?t[i]=s.slice():(!e||!Hf(s))&&(t[i]=s)};for(let s=0,o=arguments.length;s<o;s++)arguments[s]&&hl(arguments[s],n);return t}var gB=(r,e,t,{allOwnKeys:n}={})=>(hl(e,(s,o)=>{t&&cn(s)?Object.defineProperty(r,o,{value:ll(s,t),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(r,o,{value:s,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:n}),r),bB=r=>(r.charCodeAt(0)===65279&&(r=r.slice(1)),r),xB=(r,e,t,n)=>{r.prototype=Object.create(e.prototype,n),Object.defineProperty(r.prototype,"constructor",{value:r,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(r,"super",{value:e.prototype}),t&&Object.assign(r.prototype,t)},wB=(r,e,t,n)=>{let s,o,i,c={};if(e=e||{},r==null)return e;do{for(s=Object.getOwnPropertyNames(r),o=s.length;o-- >0;)i=s[o],(!n||n(i,r,e))&&!c[i]&&(e[i]=r[i],c[i]=!0);r=t!==!1&&f5(r)}while(r&&(!t||t(r,e))&&r!==Object.prototype);return e},vB=(r,e,t)=>{r=String(r),(t===void 0||t>r.length)&&(t=r.length),t-=e.length;let n=r.indexOf(e,t);return n!==-1&&n===t},SB=r=>{if(!r)return null;if(Uf(r))return r;let e=r.length;if(!Tx(e))return null;let t=new Array(e);for(;e-- >0;)t[e]=r[e];return t},_B=(r=>e=>r&&e instanceof r)(typeof Uint8Array<"u"&&f5(Uint8Array)),TB=(r,e)=>{let n=(r&&r[t1]).call(r),s;for(;(s=n.next())&&!s.done;){let o=s.value;e.call(r,o[0],o[1])}},EB=(r,e)=>{let t,n=[];for(;(t=r.exec(e))!==null;)n.push(t);return n},AB=ts("HTMLFormElement"),kB=r=>r.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(t,n,s){return n.toUpperCase()+s}),vx=(({hasOwnProperty:r})=>(e,t)=>r.call(e,t))(Object.prototype),CB=ts("RegExp"),kx=(r,e)=>{let t=Object.getOwnPropertyDescriptors(r),n={};hl(t,(s,o)=>{let i;(i=e(s,o,r))!==!1&&(n[o]=i||s)}),Object.defineProperties(r,n)},BB=r=>{kx(r,(e,t)=>{if(cn(r)&&["arguments","caller","callee"].indexOf(t)!==-1)return!1;let n=r[t];if(cn(n)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+t+"'")})}})},IB=(r,e)=>{let t={},n=s=>{s.forEach(o=>{t[o]=!0})};return Uf(r)?n(r):n(String(r).split(e)),t},OB=()=>{},DB=(r,e)=>r!=null&&Number.isFinite(r=+r)?r:e;function PB(r){return!!(r&&cn(r.append)&&r[Sx]==="FormData"&&r[t1])}var MB=r=>{let e=new Array(10),t=(n,s)=>{if(pl(n)){if(e.indexOf(n)>=0)return;if(dl(n))return n;if(!("toJSON"in n)){e[s]=n;let o=Uf(n)?[]:{};return hl(n,(i,c)=>{let a=t(i,s+1);!Hf(a)&&(o[c]=a)}),e[s]=void 0,o}}return n};return t(r,0)},RB=ts("AsyncFunction"),NB=r=>r&&(pl(r)||cn(r))&&cn(r.then)&&cn(r.catch),Cx=((r,e)=>r?setImmediate:e?((t,n)=>(Uc.addEventListener("message",({source:s,data:o})=>{s===Uc&&o===t&&n.length&&n.shift()()},!1),s=>{n.push(s),Uc.postMessage(t,"*")}))(`axios@${Math.random()}`,[]):t=>setTimeout(t))(typeof setImmediate=="function",cn(Uc.postMessage)),LB=typeof queueMicrotask<"u"?queueMicrotask.bind(Uc):typeof process<"u"&&process.nextTick||Cx,HB=r=>r!=null&&cn(r[t1]),H={isArray:Uf,isArrayBuffer:_x,isBuffer:dl,isFormData:uB,isArrayBufferView:tB,isString:rB,isNumber:Tx,isBoolean:nB,isObject:pl,isPlainObject:e1,isEmptyObject:sB,isReadableStream:dB,isRequest:pB,isResponse:hB,isHeaders:mB,isUndefined:Hf,isDate:oB,isFile:iB,isBlob:cB,isRegExp:CB,isFunction:cn,isStream:fB,isURLSearchParams:lB,isTypedArray:_B,isFileList:aB,forEach:hl,merge:a5,extend:gB,trim:yB,stripBOM:bB,inherits:xB,toFlatObject:wB,kindOf:r1,kindOfTest:ts,endsWith:vB,toArray:SB,forEachEntry:TB,matchAll:EB,isHTMLForm:AB,hasOwnProperty:vx,hasOwnProp:vx,reduceDescriptors:kx,freezeMethods:BB,toObjectSet:IB,toCamelCase:kB,noop:OB,toFiniteNumber:DB,findKey:Ex,global:Uc,isContextDefined:Ax,isSpecCompliantForm:PB,toJSONObject:MB,isAsyncFn:RB,isThenable:NB,setImmediate:Cx,asap:LB,isIterable:HB};var Fr=class r extends Error{static from(e,t,n,s,o,i){let c=new r(e.message,t||e.code,n,s,o);return c.cause=e,c.name=e.name,i&&Object.assign(c,i),c}constructor(e,t,n,s,o){super(e),this.name="AxiosError",this.isAxiosError=!0,t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),o&&(this.response=o,this.status=o.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}};Fr.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Fr.ERR_BAD_OPTION="ERR_BAD_OPTION";Fr.ECONNABORTED="ECONNABORTED";Fr.ETIMEDOUT="ETIMEDOUT";Fr.ERR_NETWORK="ERR_NETWORK";Fr.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Fr.ERR_DEPRECATED="ERR_DEPRECATED";Fr.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Fr.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Fr.ERR_CANCELED="ERR_CANCELED";Fr.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Fr.ERR_INVALID_URL="ERR_INVALID_URL";var le=Fr;var s1=null;function u5(r){return H.isPlainObject(r)||H.isArray(r)}function Ix(r){return H.endsWith(r,"[]")?r.slice(0,-2):r}function Bx(r,e,t){return r?r.concat(e).map(function(s,o){return s=Ix(s),!t&&o?"["+s+"]":s}).join(t?".":""):e}function UB(r){return H.isArray(r)&&!r.some(u5)}var FB=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});function $B(r,e,t){if(!H.isObject(r))throw new TypeError("target must be an object");e=e||new(s1||FormData),t=H.toFlatObject(t,{metaTokens:!0,dots:!1,indexes:!1},!1,function(A,B){return!H.isUndefined(B[A])});let n=t.metaTokens,s=t.visitor||d,o=t.dots,i=t.indexes,a=(t.Blob||typeof Blob<"u"&&Blob)&&H.isSpecCompliantForm(e);if(!H.isFunction(s))throw new TypeError("visitor must be a function");function u(T){if(T===null)return"";if(H.isDate(T))return T.toISOString();if(H.isBoolean(T))return T.toString();if(!a&&H.isBlob(T))throw new le("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(T)||H.isTypedArray(T)?a&&typeof Blob=="function"?new Blob([T]):Buffer.from(T):T}function d(T,A,B){let I=T;if(T&&!B&&typeof T=="object"){if(H.endsWith(A,"{}"))A=n?A:A.slice(0,-2),T=JSON.stringify(T);else if(H.isArray(T)&&UB(T)||(H.isFileList(T)||H.endsWith(A,"[]"))&&(I=H.toArray(T)))return A=Ix(A),I.forEach(function(M,L){!(H.isUndefined(M)||M===null)&&e.append(i===!0?Bx([A],L,o):i===null?A:A+"[]",u(M))}),!1}return u5(T)?!0:(e.append(Bx(B,A,o),u(T)),!1)}let y=[],v=Object.assign(FB,{defaultVisitor:d,convertValue:u,isVisitable:u5});function _(T,A){if(!H.isUndefined(T)){if(y.indexOf(T)!==-1)throw Error("Circular reference detected in "+A.join("."));y.push(T),H.forEach(T,function(I,P){(!(H.isUndefined(I)||I===null)&&s.call(e,I,H.isString(P)?P.trim():P,A,v))===!0&&_(I,A?A.concat(P):[P])}),y.pop()}}if(!H.isObject(r))throw new TypeError("data must be an object");return _(r),e}var Bi=$B;function Ox(r){let e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(r).replace(/[!'()~]|%20|%00/g,function(n){return e[n]})}function Dx(r,e){this._pairs=[],r&&Bi(r,this,e)}var Px=Dx.prototype;Px.append=function(e,t){this._pairs.push([e,t])};Px.toString=function(e){let t=e?function(n){return e.call(this,n,Ox)}:Ox;return this._pairs.map(function(s){return t(s[0])+"="+t(s[1])},"").join("&")};var o1=Dx;function qB(r){return encodeURIComponent(r).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function ml(r,e,t){if(!e)return r;let n=t&&t.encode||qB,s=H.isFunction(t)?{serialize:t}:t,o=s&&s.serialize,i;if(o?i=o(e,s):i=H.isURLSearchParams(e)?e.toString():new o1(e,s).toString(n),i){let c=r.indexOf("#");c!==-1&&(r=r.slice(0,c)),r+=(r.indexOf("?")===-1?"?":"&")+i}return r}var l5=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:n?n.synchronous:!1,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(n){n!==null&&e(n)})}},d5=l5;var Ff={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1,legacyInterceptorReqResOrdering:!0};var Mx=typeof URLSearchParams<"u"?URLSearchParams:o1;var Rx=typeof FormData<"u"?FormData:null;var Nx=typeof Blob<"u"?Blob:null;var Lx={isBrowser:!0,classes:{URLSearchParams:Mx,FormData:Rx,Blob:Nx},protocols:["http","https","file","blob","url","data"]};var m5={};be(m5,{hasBrowserEnv:()=>h5,hasStandardBrowserEnv:()=>jB,hasStandardBrowserWebWorkerEnv:()=>zB,navigator:()=>p5,origin:()=>VB});var h5=typeof window<"u"&&typeof document<"u",p5=typeof navigator=="object"&&navigator||void 0,jB=h5&&(!p5||["ReactNative","NativeScript","NS"].indexOf(p5.product)<0),zB=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",VB=h5&&window.location.href||"http://localhost";var Ze={...m5,...Lx};function y5(r,e){return Bi(r,new Ze.classes.URLSearchParams,{visitor:function(t,n,s,o){return Ze.isNode&&H.isBuffer(t)?(this.append(n,t.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)},...e})}function KB(r){return H.matchAll(/\w+|\[(\w*)]/g,r).map(e=>e[0]==="[]"?"":e[1]||e[0])}function WB(r){let e={},t=Object.keys(r),n,s=t.length,o;for(n=0;n<s;n++)o=t[n],e[o]=r[o];return e}function ZB(r){function e(t,n,s,o){let i=t[o++];if(i==="__proto__")return!0;let c=Number.isFinite(+i),a=o>=t.length;return i=!i&&H.isArray(s)?s.length:i,a?(H.hasOwnProp(s,i)?s[i]=[s[i],n]:s[i]=n,!c):((!s[i]||!H.isObject(s[i]))&&(s[i]=[]),e(t,n,s[i],o)&&H.isArray(s[i])&&(s[i]=WB(s[i])),!c)}if(H.isFormData(r)&&H.isFunction(r.entries)){let t={};return H.forEachEntry(r,(n,s)=>{e(KB(n),s,t,0)}),t}return null}var i1=ZB;function GB(r,e,t){if(H.isString(r))try{return(e||JSON.parse)(r),H.trim(r)}catch(n){if(n.name!=="SyntaxError")throw n}return(t||JSON.stringify)(r)}var g5={transitional:Ff,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){let n=t.getContentType()||"",s=n.indexOf("application/json")>-1,o=H.isObject(e);if(o&&H.isHTMLForm(e)&&(e=new FormData(e)),H.isFormData(e))return s?JSON.stringify(i1(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let c;if(o){if(n.indexOf("application/x-www-form-urlencoded")>-1)return y5(e,this.formSerializer).toString();if((c=H.isFileList(e))||n.indexOf("multipart/form-data")>-1){let a=this.env&&this.env.FormData;return Bi(c?{"files[]":e}:e,a&&new a,this.formSerializer)}}return o||s?(t.setContentType("application/json",!1),GB(e)):e}],transformResponse:[function(e){let t=this.transitional||g5.transitional,n=t&&t.forcedJSONParsing,s=this.responseType==="json";if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(n&&!this.responseType||s)){let i=!(t&&t.silentJSONParsing)&&s;try{return JSON.parse(e,this.parseReviver)}catch(c){if(i)throw c.name==="SyntaxError"?le.from(c,le.ERR_BAD_RESPONSE,this,null,this.response):c}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ze.classes.FormData,Blob:Ze.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],r=>{g5.headers[r]={}});var $f=g5;var JB=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Hx=r=>{let e={},t,n,s;return r&&r.split(`
`).forEach(function(i){s=i.indexOf(":"),t=i.substring(0,s).trim().toLowerCase(),n=i.substring(s+1).trim(),!(!t||e[t]&&JB[t])&&(t==="set-cookie"?e[t]?e[t].push(n):e[t]=[n]:e[t]=e[t]?e[t]+", "+n:n)}),e};var Ux=Symbol("internals");function yl(r){return r&&String(r).trim().toLowerCase()}function c1(r){return r===!1||r==null?r:H.isArray(r)?r.map(c1):String(r)}function XB(r){let e=Object.create(null),t=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g,n;for(;n=t.exec(r);)e[n[1]]=n[2];return e}var YB=r=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(r.trim());function b5(r,e,t,n,s){if(H.isFunction(n))return n.call(this,e,t);if(s&&(e=t),!!H.isString(e)){if(H.isString(n))return e.indexOf(n)!==-1;if(H.isRegExp(n))return n.test(e)}}function QB(r){return r.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}function eI(r,e){let t=H.toCamelCase(" "+e);["get","set","has"].forEach(n=>{Object.defineProperty(r,n+t,{value:function(s,o,i){return this[n].call(this,e,s,o,i)},configurable:!0})})}var qf=class{constructor(e){e&&this.set(e)}set(e,t,n){let s=this;function o(c,a,u){let d=yl(a);if(!d)throw new Error("header name must be a non-empty string");let y=H.findKey(s,d);(!y||s[y]===void 0||u===!0||u===void 0&&s[y]!==!1)&&(s[y||a]=c1(c))}let i=(c,a)=>H.forEach(c,(u,d)=>o(u,d,a));if(H.isPlainObject(e)||e instanceof this.constructor)i(e,t);else if(H.isString(e)&&(e=e.trim())&&!YB(e))i(Hx(e),t);else if(H.isObject(e)&&H.isIterable(e)){let c={},a,u;for(let d of e){if(!H.isArray(d))throw TypeError("Object iterator must return a key-value pair");c[u=d[0]]=(a=c[u])?H.isArray(a)?[...a,d[1]]:[a,d[1]]:d[1]}i(c,t)}else e!=null&&o(t,e,n);return this}get(e,t){if(e=yl(e),e){let n=H.findKey(this,e);if(n){let s=this[n];if(!t)return s;if(t===!0)return XB(s);if(H.isFunction(t))return t.call(this,s,n);if(H.isRegExp(t))return t.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=yl(e),e){let n=H.findKey(this,e);return!!(n&&this[n]!==void 0&&(!t||b5(this,this[n],n,t)))}return!1}delete(e,t){let n=this,s=!1;function o(i){if(i=yl(i),i){let c=H.findKey(n,i);c&&(!t||b5(n,n[c],c,t))&&(delete n[c],s=!0)}}return H.isArray(e)?e.forEach(o):o(e),s}clear(e){let t=Object.keys(this),n=t.length,s=!1;for(;n--;){let o=t[n];(!e||b5(this,this[o],o,e,!0))&&(delete this[o],s=!0)}return s}normalize(e){let t=this,n={};return H.forEach(this,(s,o)=>{let i=H.findKey(n,o);if(i){t[i]=c1(s),delete t[o];return}let c=e?QB(o):String(o).trim();c!==o&&delete t[o],t[c]=c1(s),n[c]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){let t=Object.create(null);return H.forEach(this,(n,s)=>{n!=null&&n!==!1&&(t[s]=e&&H.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,t])=>e+": "+t).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...t){let n=new this(e);return t.forEach(s=>n.set(s)),n}static accessor(e){let n=(this[Ux]=this[Ux]={accessors:{}}).accessors,s=this.prototype;function o(i){let c=yl(i);n[c]||(eI(s,i),n[c]=!0)}return H.isArray(e)?e.forEach(o):o(e),this}};qf.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);H.reduceDescriptors(qf.prototype,({value:r},e)=>{let t=e[0].toUpperCase()+e.slice(1);return{get:()=>r,set(n){this[t]=n}}});H.freezeMethods(qf);var Gt=qf;function gl(r,e){let t=this||$f,n=e||t,s=Gt.from(n.headers),o=n.data;return H.forEach(r,function(c){o=c.call(t,o,s.normalize(),e?e.status:void 0)}),s.normalize(),o}function bl(r){return!!(r&&r.__CANCEL__)}var x5=class extends le{constructor(e,t,n){super(e??"canceled",le.ERR_CANCELED,t,n),this.name="CanceledError",this.__CANCEL__=!0}},Rs=x5;function xl(r,e,t){let n=t.config.validateStatus;!t.status||!n||n(t.status)?r(t):e(new le("Request failed with status code "+t.status,[le.ERR_BAD_REQUEST,le.ERR_BAD_RESPONSE][Math.floor(t.status/100)-4],t.config,t.request,t))}function w5(r){let e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(r);return e&&e[1]||""}function tI(r,e){r=r||10;let t=new Array(r),n=new Array(r),s=0,o=0,i;return e=e!==void 0?e:1e3,function(a){let u=Date.now(),d=n[o];i||(i=u),t[s]=a,n[s]=u;let y=o,v=0;for(;y!==s;)v+=t[y++],y=y%r;if(s=(s+1)%r,s===o&&(o=(o+1)%r),u-i<e)return;let _=d&&u-d;return _?Math.round(v*1e3/_):void 0}}var Fx=tI;function rI(r,e){let t=0,n=1e3/e,s,o,i=(u,d=Date.now())=>{t=d,s=null,o&&(clearTimeout(o),o=null),r(...u)};return[(...u)=>{let d=Date.now(),y=d-t;y>=n?i(u,d):(s=u,o||(o=setTimeout(()=>{o=null,i(s)},n-y)))},()=>s&&i(s)]}var $x=rI;var jf=(r,e,t=3)=>{let n=0,s=Fx(50,250);return $x(o=>{let i=o.loaded,c=o.lengthComputable?o.total:void 0,a=i-n,u=s(a),d=i<=c;n=i;let y={loaded:i,total:c,progress:c?i/c:void 0,bytes:a,rate:u||void 0,estimated:u&&c&&d?(c-i)/u:void 0,event:o,lengthComputable:c!=null,[e?"download":"upload"]:!0};r(y)},t)},v5=(r,e)=>{let t=r!=null;return[n=>e[0]({lengthComputable:t,total:r,loaded:n}),e[1]]},S5=r=>(...e)=>H.asap(()=>r(...e));var qx=Ze.hasStandardBrowserEnv?((r,e)=>t=>(t=new URL(t,Ze.origin),r.protocol===t.protocol&&r.host===t.host&&(e||r.port===t.port)))(new URL(Ze.origin),Ze.navigator&&/(msie|trident)/i.test(Ze.navigator.userAgent)):()=>!0;var jx=Ze.hasStandardBrowserEnv?{write(r,e,t,n,s,o,i){if(typeof document>"u")return;let c=[`${r}=${encodeURIComponent(e)}`];H.isNumber(t)&&c.push(`expires=${new Date(t).toUTCString()}`),H.isString(n)&&c.push(`path=${n}`),H.isString(s)&&c.push(`domain=${s}`),o===!0&&c.push("secure"),H.isString(i)&&c.push(`SameSite=${i}`),document.cookie=c.join("; ")},read(r){if(typeof document>"u")return null;let e=document.cookie.match(new RegExp("(?:^|; )"+r+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(r){this.write(r,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function _5(r){return typeof r!="string"?!1:/^([a-z][a-z\d+\-.]*:)?\/\//i.test(r)}function T5(r,e){return e?r.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):r}function wl(r,e,t){let n=!_5(e);return r&&(n||t==!1)?T5(r,e):e}var zx=r=>r instanceof Gt?{...r}:r;function rs(r,e){e=e||{};let t={};function n(u,d,y,v){return H.isPlainObject(u)&&H.isPlainObject(d)?H.merge.call({caseless:v},u,d):H.isPlainObject(d)?H.merge({},d):H.isArray(d)?d.slice():d}function s(u,d,y,v){if(H.isUndefined(d)){if(!H.isUndefined(u))return n(void 0,u,y,v)}else return n(u,d,y,v)}function o(u,d){if(!H.isUndefined(d))return n(void 0,d)}function i(u,d){if(H.isUndefined(d)){if(!H.isUndefined(u))return n(void 0,u)}else return n(void 0,d)}function c(u,d,y){if(y in e)return n(u,d);if(y in r)return n(void 0,u)}let a={url:o,method:o,data:o,baseURL:i,transformRequest:i,transformResponse:i,paramsSerializer:i,timeout:i,timeoutMessage:i,withCredentials:i,withXSRFToken:i,adapter:i,responseType:i,xsrfCookieName:i,xsrfHeaderName:i,onUploadProgress:i,onDownloadProgress:i,decompress:i,maxContentLength:i,maxBodyLength:i,beforeRedirect:i,transport:i,httpAgent:i,httpsAgent:i,cancelToken:i,socketPath:i,responseEncoding:i,validateStatus:c,headers:(u,d,y)=>s(zx(u),zx(d),y,!0)};return H.forEach(Object.keys({...r,...e}),function(d){if(d==="__proto__"||d==="constructor"||d==="prototype")return;let y=H.hasOwnProp(a,d)?a[d]:s,v=y(r[d],e[d],d);H.isUndefined(v)&&y!==c||(t[d]=v)}),t}var a1=r=>{let e=rs({},r),{data:t,withXSRFToken:n,xsrfHeaderName:s,xsrfCookieName:o,headers:i,auth:c}=e;if(e.headers=i=Gt.from(i),e.url=ml(wl(e.baseURL,e.url,e.allowAbsoluteUrls),r.params,r.paramsSerializer),c&&i.set("Authorization","Basic "+btoa((c.username||"")+":"+(c.password?unescape(encodeURIComponent(c.password)):""))),H.isFormData(t)){if(Ze.hasStandardBrowserEnv||Ze.hasStandardBrowserWebWorkerEnv)i.setContentType(void 0);else if(H.isFunction(t.getHeaders)){let a=t.getHeaders(),u=["content-type","content-length"];Object.entries(a).forEach(([d,y])=>{u.includes(d.toLowerCase())&&i.set(d,y)})}}if(Ze.hasStandardBrowserEnv&&(n&&H.isFunction(n)&&(n=n(e)),n||n!==!1&&qx(e.url))){let a=s&&o&&jx.read(o);a&&i.set(s,a)}return e};var nI=typeof XMLHttpRequest<"u",Vx=nI&&function(r){return new Promise(function(t,n){let s=a1(r),o=s.data,i=Gt.from(s.headers).normalize(),{responseType:c,onUploadProgress:a,onDownloadProgress:u}=s,d,y,v,_,T;function A(){_&&_(),T&&T(),s.cancelToken&&s.cancelToken.unsubscribe(d),s.signal&&s.signal.removeEventListener("abort",d)}let B=new XMLHttpRequest;B.open(s.method.toUpperCase(),s.url,!0),B.timeout=s.timeout;function I(){if(!B)return;let M=Gt.from("getAllResponseHeaders"in B&&B.getAllResponseHeaders()),U={data:!c||c==="text"||c==="json"?B.responseText:B.response,status:B.status,statusText:B.statusText,headers:M,config:r,request:B};xl(function(C){t(C),A()},function(C){n(C),A()},U),B=null}"onloadend"in B?B.onloadend=I:B.onreadystatechange=function(){!B||B.readyState!==4||B.status===0&&!(B.responseURL&&B.responseURL.indexOf("file:")===0)||setTimeout(I)},B.onabort=function(){B&&(n(new le("Request aborted",le.ECONNABORTED,r,B)),B=null)},B.onerror=function(L){let U=L&&L.message?L.message:"Network Error",Z=new le(U,le.ERR_NETWORK,r,B);Z.event=L||null,n(Z),B=null},B.ontimeout=function(){let L=s.timeout?"timeout of "+s.timeout+"ms exceeded":"timeout exceeded",U=s.transitional||Ff;s.timeoutErrorMessage&&(L=s.timeoutErrorMessage),n(new le(L,U.clarifyTimeoutError?le.ETIMEDOUT:le.ECONNABORTED,r,B)),B=null},o===void 0&&i.setContentType(null),"setRequestHeader"in B&&H.forEach(i.toJSON(),function(L,U){B.setRequestHeader(U,L)}),H.isUndefined(s.withCredentials)||(B.withCredentials=!!s.withCredentials),c&&c!=="json"&&(B.responseType=s.responseType),u&&([v,T]=jf(u,!0),B.addEventListener("progress",v)),a&&B.upload&&([y,_]=jf(a),B.upload.addEventListener("progress",y),B.upload.addEventListener("loadend",_)),(s.cancelToken||s.signal)&&(d=M=>{B&&(n(!M||M.type?new Rs(null,r,B):M),B.abort(),B=null)},s.cancelToken&&s.cancelToken.subscribe(d),s.signal&&(s.signal.aborted?d():s.signal.addEventListener("abort",d)));let P=w5(s.url);if(P&&Ze.protocols.indexOf(P)===-1){n(new le("Unsupported protocol "+P+":",le.ERR_BAD_REQUEST,r));return}B.send(o||null)})};var sI=(r,e)=>{let{length:t}=r=r?r.filter(Boolean):[];if(e||t){let n=new AbortController,s,o=function(u){if(!s){s=!0,c();let d=u instanceof Error?u:this.reason;n.abort(d instanceof le?d:new Rs(d instanceof Error?d.message:d))}},i=e&&setTimeout(()=>{i=null,o(new le(`timeout of ${e}ms exceeded`,le.ETIMEDOUT))},e),c=()=>{r&&(i&&clearTimeout(i),i=null,r.forEach(u=>{u.unsubscribe?u.unsubscribe(o):u.removeEventListener("abort",o)}),r=null)};r.forEach(u=>u.addEventListener("abort",o));let{signal:a}=n;return a.unsubscribe=()=>H.asap(c),a}},Kx=sI;var oI=function*(r,e){let t=r.byteLength;if(!e||t<e){yield r;return}let n=0,s;for(;n<t;)s=n+e,yield r.slice(n,s),n=s},iI=async function*(r,e){for await(let t of cI(r))yield*oI(t,e)},cI=async function*(r){if(r[Symbol.asyncIterator]){yield*r;return}let e=r.getReader();try{for(;;){let{done:t,value:n}=await e.read();if(t)break;yield n}}finally{await e.cancel()}},E5=(r,e,t,n)=>{let s=iI(r,e),o=0,i,c=a=>{i||(i=!0,n&&n(a))};return new ReadableStream({async pull(a){try{let{done:u,value:d}=await s.next();if(u){c(),a.close();return}let y=d.byteLength;if(t){let v=o+=y;t(v)}a.enqueue(new Uint8Array(d))}catch(u){throw c(u),u}},cancel(a){return c(a),s.return()}},{highWaterMark:2})};var Wx=64*1024,{isFunction:f1}=H,aI=(({Request:r,Response:e})=>({Request:r,Response:e}))(H.global),{ReadableStream:Zx,TextEncoder:Gx}=H.global,Jx=(r,...e)=>{try{return!!r(...e)}catch{return!1}},fI=r=>{r=H.merge.call({skipUndefined:!0},aI,r);let{fetch:e,Request:t,Response:n}=r,s=e?f1(e):typeof fetch=="function",o=f1(t),i=f1(n);if(!s)return!1;let c=s&&f1(Zx),a=s&&(typeof Gx=="function"?(T=>A=>T.encode(A))(new Gx):async T=>new Uint8Array(await new t(T).arrayBuffer())),u=o&&c&&Jx(()=>{let T=!1,A=new t(Ze.origin,{body:new Zx,method:"POST",get duplex(){return T=!0,"half"}}).headers.has("Content-Type");return T&&!A}),d=i&&c&&Jx(()=>H.isReadableStream(new n("").body)),y={stream:d&&(T=>T.body)};s&&["text","arrayBuffer","blob","formData","stream"].forEach(T=>{!y[T]&&(y[T]=(A,B)=>{let I=A&&A[T];if(I)return I.call(A);throw new le(`Response type '${T}' is not supported`,le.ERR_NOT_SUPPORT,B)})});let v=async T=>{if(T==null)return 0;if(H.isBlob(T))return T.size;if(H.isSpecCompliantForm(T))return(await new t(Ze.origin,{method:"POST",body:T}).arrayBuffer()).byteLength;if(H.isArrayBufferView(T)||H.isArrayBuffer(T))return T.byteLength;if(H.isURLSearchParams(T)&&(T=T+""),H.isString(T))return(await a(T)).byteLength},_=async(T,A)=>{let B=H.toFiniteNumber(T.getContentLength());return B??v(A)};return async T=>{let{url:A,method:B,data:I,signal:P,cancelToken:M,timeout:L,onDownloadProgress:U,onUploadProgress:Z,responseType:C,headers:J,withCredentials:x="same-origin",fetchOptions:m}=a1(T),f=e||fetch;C=C?(C+"").toLowerCase():"text";let l=Kx([P,M&&M.toAbortSignal()],L),h=null,g=l&&l.unsubscribe&&(()=>{l.unsubscribe()}),b;try{if(Z&&u&&B!=="get"&&B!=="head"&&(b=await _(J,I))!==0){let R=new t(A,{method:"POST",body:I,duplex:"half"}),N;if(H.isFormData(I)&&(N=R.headers.get("content-type"))&&J.setContentType(N),R.body){let[q,G]=v5(b,jf(S5(Z)));I=E5(R.body,Wx,q,G)}}H.isString(x)||(x=x?"include":"omit");let w=o&&"credentials"in t.prototype,k={...m,signal:l,method:B.toUpperCase(),headers:J.normalize().toJSON(),body:I,duplex:"half",credentials:w?x:void 0};h=o&&new t(A,k);let S=await(o?f(h,m):f(A,k)),p=d&&(C==="stream"||C==="response");if(d&&(U||p&&g)){let R={};["status","statusText","headers"].forEach(X=>{R[X]=S[X]});let N=H.toFiniteNumber(S.headers.get("content-length")),[q,G]=U&&v5(N,jf(S5(U),!0))||[];S=new n(E5(S.body,Wx,q,()=>{G&&G(),g&&g()}),R)}C=C||"text";let E=await y[H.findKey(y,C)||"text"](S,T);return!p&&g&&g(),await new Promise((R,N)=>{xl(R,N,{data:E,headers:Gt.from(S.headers),status:S.status,statusText:S.statusText,config:T,request:h})})}catch(w){throw g&&g(),w&&w.name==="TypeError"&&/Load failed|fetch/i.test(w.message)?Object.assign(new le("Network Error",le.ERR_NETWORK,T,h,w&&w.response),{cause:w.cause||w}):le.from(w,w&&w.code,T,h,w&&w.response)}}},uI=new Map,A5=r=>{let e=r&&r.env||{},{fetch:t,Request:n,Response:s}=e,o=[n,s,t],i=o.length,c=i,a,u,d=uI;for(;c--;)a=o[c],u=d.get(a),u===void 0&&d.set(a,u=c?new Map:fI(e)),d=u;return u},iY=A5();var k5={http:s1,xhr:Vx,fetch:{get:A5}};H.forEach(k5,(r,e)=>{if(r){try{Object.defineProperty(r,"name",{value:e})}catch{}Object.defineProperty(r,"adapterName",{value:e})}});var Xx=r=>`- ${r}`,dI=r=>H.isFunction(r)||r===null||r===!1;function pI(r,e){r=H.isArray(r)?r:[r];let{length:t}=r,n,s,o={};for(let i=0;i<t;i++){n=r[i];let c;if(s=n,!dI(n)&&(s=k5[(c=String(n)).toLowerCase()],s===void 0))throw new le(`Unknown adapter '${c}'`);if(s&&(H.isFunction(s)||(s=s.get(e))))break;o[c||"#"+i]=s}if(!s){let i=Object.entries(o).map(([a,u])=>`adapter ${a} `+(u===!1?"is not supported by the environment":"is not available in the build")),c=t?i.length>1?`since :
`+i.map(Xx).join(`
`):" "+Xx(i[0]):"as no adapter specified";throw new le("There is no suitable adapter to dispatch the request "+c,"ERR_NOT_SUPPORT")}return s}var u1={getAdapter:pI,adapters:k5};function C5(r){if(r.cancelToken&&r.cancelToken.throwIfRequested(),r.signal&&r.signal.aborted)throw new Rs(null,r)}function l1(r){return C5(r),r.headers=Gt.from(r.headers),r.data=gl.call(r,r.transformRequest),["post","put","patch"].indexOf(r.method)!==-1&&r.headers.setContentType("application/x-www-form-urlencoded",!1),u1.getAdapter(r.adapter||$f.adapter,r)(r).then(function(n){return C5(r),n.data=gl.call(r,r.transformResponse,n),n.headers=Gt.from(n.headers),n},function(n){return bl(n)||(C5(r),n&&n.response&&(n.response.data=gl.call(r,r.transformResponse,n.response),n.response.headers=Gt.from(n.response.headers))),Promise.reject(n)})}var d1="1.13.5";var p1={};["object","boolean","number","function","string","symbol"].forEach((r,e)=>{p1[r]=function(n){return typeof n===r||"a"+(e<1?"n ":" ")+r}});var Yx={};p1.transitional=function(e,t,n){function s(o,i){return"[Axios v"+d1+"] Transitional option '"+o+"'"+i+(n?". "+n:"")}return(o,i,c)=>{if(e===!1)throw new le(s(i," has been removed"+(t?" in "+t:"")),le.ERR_DEPRECATED);return t&&!Yx[i]&&(Yx[i]=!0,console.warn(s(i," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(o,i,c):!0}};p1.spelling=function(e){return(t,n)=>(console.warn(`${n} is likely a misspelling of ${e}`),!0)};function hI(r,e,t){if(typeof r!="object")throw new le("options must be an object",le.ERR_BAD_OPTION_VALUE);let n=Object.keys(r),s=n.length;for(;s-- >0;){let o=n[s],i=e[o];if(i){let c=r[o],a=c===void 0||i(c,o,r);if(a!==!0)throw new le("option "+o+" must be "+a,le.ERR_BAD_OPTION_VALUE);continue}if(t!==!0)throw new le("Unknown option "+o,le.ERR_BAD_OPTION)}}var vl={assertOptions:hI,validators:p1};var qn=vl.validators,zf=class{constructor(e){this.defaults=e||{},this.interceptors={request:new d5,response:new d5}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let s={};Error.captureStackTrace?Error.captureStackTrace(s):s=new Error;let o=s.stack?s.stack.replace(/^.+\n/,""):"";try{n.stack?o&&!String(n.stack).endsWith(o.replace(/^.+\n.+\n/,""))&&(n.stack+=`
`+o):n.stack=o}catch{}}throw n}}_request(e,t){typeof e=="string"?(t=t||{},t.url=e):t=e||{},t=rs(this.defaults,t);let{transitional:n,paramsSerializer:s,headers:o}=t;n!==void 0&&vl.assertOptions(n,{silentJSONParsing:qn.transitional(qn.boolean),forcedJSONParsing:qn.transitional(qn.boolean),clarifyTimeoutError:qn.transitional(qn.boolean),legacyInterceptorReqResOrdering:qn.transitional(qn.boolean)},!1),s!=null&&(H.isFunction(s)?t.paramsSerializer={serialize:s}:vl.assertOptions(s,{encode:qn.function,serialize:qn.function},!0)),t.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vl.assertOptions(t,{baseUrl:qn.spelling("baseURL"),withXsrfToken:qn.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let i=o&&H.merge(o.common,o[t.method]);o&&H.forEach(["delete","get","head","post","put","patch","common"],T=>{delete o[T]}),t.headers=Gt.concat(i,o);let c=[],a=!0;this.interceptors.request.forEach(function(A){if(typeof A.runWhen=="function"&&A.runWhen(t)===!1)return;a=a&&A.synchronous;let B=t.transitional||Ff;B&&B.legacyInterceptorReqResOrdering?c.unshift(A.fulfilled,A.rejected):c.push(A.fulfilled,A.rejected)});let u=[];this.interceptors.response.forEach(function(A){u.push(A.fulfilled,A.rejected)});let d,y=0,v;if(!a){let T=[l1.bind(this),void 0];for(T.unshift(...c),T.push(...u),v=T.length,d=Promise.resolve(t);y<v;)d=d.then(T[y++],T[y++]);return d}v=c.length;let _=t;for(;y<v;){let T=c[y++],A=c[y++];try{_=T(_)}catch(B){A.call(this,B);break}}try{d=l1.call(this,_)}catch(T){return Promise.reject(T)}for(y=0,v=u.length;y<v;)d=d.then(u[y++],u[y++]);return d}getUri(e){e=rs(this.defaults,e);let t=wl(e.baseURL,e.url,e.allowAbsoluteUrls);return ml(t,e.params,e.paramsSerializer)}};H.forEach(["delete","get","head","options"],function(e){zf.prototype[e]=function(t,n){return this.request(rs(n||{},{method:e,url:t,data:(n||{}).data}))}});H.forEach(["post","put","patch"],function(e){function t(n){return function(o,i,c){return this.request(rs(c||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:o,data:i}))}}zf.prototype[e]=t(),zf.prototype[e+"Form"]=t(!0)});var Sl=zf;var B5=class r{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(o){t=o});let n=this;this.promise.then(s=>{if(!n._listeners)return;let o=n._listeners.length;for(;o-- >0;)n._listeners[o](s);n._listeners=null}),this.promise.then=s=>{let o,i=new Promise(c=>{n.subscribe(c),o=c}).then(s);return i.cancel=function(){n.unsubscribe(o)},i},e(function(o,i,c){n.reason||(n.reason=new Rs(o,i,c),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;let t=this._listeners.indexOf(e);t!==-1&&this._listeners.splice(t,1)}toAbortSignal(){let e=new AbortController,t=n=>{e.abort(n)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new r(function(s){e=s}),cancel:e}}},Qx=B5;function I5(r){return function(t){return r.apply(null,t)}}function O5(r){return H.isObject(r)&&r.isAxiosError===!0}var D5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(D5).forEach(([r,e])=>{D5[e]=r});var ew=D5;function tw(r){let e=new Sl(r),t=ll(Sl.prototype.request,e);return H.extend(t,Sl.prototype,e,{allOwnKeys:!0}),H.extend(t,e,null,{allOwnKeys:!0}),t.create=function(s){return tw(rs(r,s))},t}var Ht=tw($f);Ht.Axios=Sl;Ht.CanceledError=Rs;Ht.CancelToken=Qx;Ht.isCancel=bl;Ht.VERSION=d1;Ht.toFormData=Bi;Ht.AxiosError=le;Ht.Cancel=Ht.CanceledError;Ht.all=function(e){return Promise.all(e)};Ht.spread=I5;Ht.isAxiosError=O5;Ht.mergeConfig=rs;Ht.AxiosHeaders=Gt;Ht.formToJSON=r=>i1(H.isHTMLForm(r)?new FormData(r):r);Ht.getAdapter=u1.getAdapter;Ht.HttpStatusCode=ew;Ht.default=Ht;var rw=Ht;var{Axios:Vf,AxiosError:sQ,CanceledError:oQ,isCancel:iQ,CancelToken:cQ,VERSION:aQ,all:fQ,Cancel:uQ,isAxiosError:lQ,spread:dQ,toFormData:pQ,AxiosHeaders:hQ,HttpStatusCode:mQ,formToJSON:yQ,getAdapter:gQ,mergeConfig:bQ}=rw;var nw={1001:"DnaLengthNotMatch",1002:"SporeIdLengthInvalid",1003:"NativeDecoderNotFound",1004:"SporeIdNotFound",1005:"SporeDataUncompatible",1006:"SporeDataContentTypeUncompatible",1007:"DOBVersionUnexpected",1008:"ClusterIdNotSet",1009:"ClusterIdNotFound",1010:"ClusterDataUncompatible",1011:"DecoderIdNotFound",1012:"DecoderOutputInvalid",1013:"HexedDNAParseError",1014:"HexedSporeIdParseError",1015:"DecoderBinaryPathInvalid",1016:"DecoderExecutionError",1017:"DecoderExecutionInternalError",1018:"FetchLiveCellsError",1019:"FetchTransactionError",1020:"NoOutputCellInTransaction",1021:"DOBContentUnexpected",1022:"DOBMetadataUnexpected",1023:"DOBRenderCacheNotFound",1024:"DOBRenderCacheModified",1025:"DecoderBinaryHashInvalid",1026:"DecoderBinaryNotFoundInCell",1027:"JsonRpcRequestError",1028:"SystemTimeError",1029:"DecoderHashNotFound",1030:"DecoderScriptNotFound",1031:"DecoderChainIsEmpty"};function P5(r){let e=Object.keys(nw).indexOf(r.toString());if(e<0)throw new Error(`Error code ${r} not found`);return Object.values(nw)[e]}function M5(r){let e=JSON.parse(r);if("error"in e){let s=P5(e.error.code);throw new Error(`Decode DOB failed: ${s}`)}let t=JSON.parse(e.result);return JSON.parse(t.render_output)}async function sw(r,e){let n=await new Vf({baseURL:e,method:"POST",headers:{"Content-Type":"application/json"}}).post("/",JSON.stringify({id:0,jsonrpc:"2.0",method:"dob_decode",params:[O.hexFrom(r).replace(/^0x/,"")]}));return M5(n.data)}async function ow(r,e){let t=r.type?.args;if(t===void 0)throw new Error("Invalid spore cell: missing spore id");return sw(O.hexFrom(t),e)}async function mI(r,e,t){let n=await r.getCell(e);if(!n)throw new Error("Invalid spore outpoint: missing spore cell");return ow(n.cellOutput,t)}async function yI(r,e,t){let s=await new Vf({baseURL:t,method:"POST",headers:{"Content-Type":"application/json"}}).post("/",JSON.stringify({id:0,jsonrpc:"2.0",method:"dob_raw_decode",params:[O.hexFrom(r),O.hexFrom(e)]}));return M5(s.data)}function h1(r){if((r.type==="code_hash"||r.type==="type_id")&&r.hash===void 0)throw new Error("Invalid decoder: 'hash' is required for 'code_hash' and 'type_id'");if(r.type==="type_script"&&r.script===void 0)throw new Error("Invalid decoder: 'script' is required for 'type_script'")}function m1(r){switch(r.patternType){case"options":{if(r.traitArgs===void 0)throw new Error("Invalid pattern: 'traitArgs' is required for 'options'");if(r.traitArgs.length===0)throw new Error("Invalid pattern: 'traitArgs' should not be empty for 'options'");break}case"range":{if(r.traitArgs===void 0)throw new Error("Invalid pattern: 'traitArgs' is required for 'range'");if(r.traitArgs.length!==2||r.traitArgs.filter(e=>typeof e=="number").length!==2)throw new Error("Invalid pattern: 'traitArgs' should contain exactly 2 numbers for 'range'");break}}if(r.dnaLength===0)throw new Error("Invalid pattern: 'dnaLength' should be greater than 0")}function R5(r){switch(r.patternType){case"options":{if(!Array.isArray(r.traitArgs))throw new Error("Invalid pattern: 'traitArgs' should be an array for 'options'");for(let e of r.traitArgs){if(e.length!==2)throw new Error("Invalid pattern: 'traitArgs' should contain exactly 2 elements for 'options'");if(typeof e[0]!="string"){if(!Array.isArray(e[0]))throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===1&&e[0][0]!=="*")throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===2&&(typeof e[0][0]!="number"||typeof e[0][1]!="number"))throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===0||e[0].length>2)throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'")}if(typeof e[1]!="string")throw new Error("Invalid pattern: 'traitArgs[1]' should be a string for 'options'")}break}case"raw":{if(r.traitName!==""||typeof r.traitArgs!="string")throw new Error("Invalid pattern: 'traitName' should be empty and 'traitArgs' should be a string for 'raw'");break}}}function gI(r){let e=O.bytesFrom(JSON.stringify(r),"utf8"),t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(e),t}function bI(r){return h1(r.dob.decoder),r.dob.pattern.forEach(e=>{m1(e),e.toJSON=function(){return e.traitArgs?[e.traitName,e.dobType,e.dnaOffset,e.dnaLength,e.patternType,e.traitArgs]:[e.traitName,e.dobType,e.dnaOffset,e.dnaLength,e.patternType]}}),JSON.stringify(r)}function xI(r){return r.dob.decoders.forEach(e=>{h1(e.decoder),e.pattern.forEach(t=>{"dnaOffset"in t?(m1(t),t.toJSON=function(){return t.traitArgs?[t.traitName,t.dobType,t.dnaOffset,t.dnaLength,t.patternType,t.traitArgs]:[t.traitName,t.dobType,t.dnaOffset,t.dnaLength,t.patternType]}):(R5(t),t.toJSON=()=>[t.imageName,t.svgFields,t.traitName,t.patternType,t.traitArgs])})}),JSON.stringify(r)}var iw=Object.freeze({dob0:{type:"code_hash",hash:"0x13cac78ad8482202f18f9df4ea707611c35f994375fa03ae79121312dda9925c"},dob1:{type:"code_hash",hash:"0xda3525549b72970b4c95f5b5749357f20d1293d335710b674f09c32f7d54b6dc"}}),cw=Object.freeze({dob0:{type:"code_hash",hash:"0x13cac78ad8482202f18f9df4ea707611c35f994375fa03ae79121312dda9925c"},dob1:{type:"code_hash",hash:"0xda3525549b72970b4c95f5b5749357f20d1293d335710b674f09c32f7d54b6dc"}});function wI(r,e,t){return t?t[e]:r.addressPrefix==="ckb"?cw[e]:iw[e]}async function aw(r,e,t){let n=await Qh(r,e,t??Object.values(Nf(r)));if(n)return{cell:n.cell,spore:n.cell,sporeData:Gh(n.cell.outputData),scriptInfo:n.scriptInfo}}async function L5(r,e,t){let n=await aw(r,e,t);if(!n)throw new Error(`Spore ${O.hexFrom(e)} not found`);return n}async function vI(r){let{signer:e,data:t,to:n,clusterMode:s,scriptInfoHash:o}=r,i=r.scriptInfo??i5(e.client),c=[],a=[],u=O.Transaction.from(r.tx??{});await u.completeInputsAtLeastOne(e);let{script:d}=await e.getRecommendedAddressObj(),y=O.hashTypeId(u.inputs[0],u.outputs.length);a.push(y);let v=ux(t);if(u.addOutput({lock:n??d,type:{...i,args:y}},v),i.cobuild){let T=u.outputs[u.outputs.length-1],A=mx(T,v,o);c.push(A)}await u.addCellDepInfos(e.client,i.cellDeps);let _=await xx(e,u,t,s);return _&&c.push(_),{tx:await Hc(e,u,c),id:y}}async function SI(r){let{signer:e,id:t,to:n,scripts:s,scriptInfoHash:o}=r,i=O.Transaction.from(r.tx??{}),{cell:c,scriptInfo:a}=await L5(e.client,t,s);await i.addCellDepInfos(e.client,a.cellDeps),i.addInput(c),i.addOutput({lock:n,type:c.cellOutput.type},c.outputData);let u=a.cobuild?[yx(c.cellOutput,i.outputs[i.outputs.length-1],o)]:[];return{tx:await Hc(e,i,u)}}async function _I(r){let{signer:e,id:t,scripts:n,scriptInfoHash:s}=r,o=O.Transaction.from(r.tx??{}),{cell:i,scriptInfo:c}=await L5(e.client,t,n);await o.addCellDepInfos(e.client,c.cellDeps),o.addInput(i);let a=c.cobuild?[gx(i.cellOutput,s)]:[];return{tx:await Hc(e,o,a)}}async function*TI(r){let{signer:e,clusterId:t,scriptInfos:n,limit:s,order:o}=r;for(let i of n??Object.values(Nf(e.client)))if(i)for await(let c of e.findCells({script:{...i,args:[]}},!0,o,s)){let a=Gh(c.outputData);(!t||t===""&&!a.clusterId||a.clusterId===O.hexFrom(t))&&(yield{cell:c,spore:c,sporeData:a,scriptInfo:on.from(i)})}}async function*EI(r){let{client:e,lock:t,clusterId:n,scriptInfos:s,limit:o,order:i}=r;for(let c of s??Object.values(Nf(e)))if(c)for await(let a of e.findCells({script:{...c,args:[]},scriptType:"type",scriptSearchMode:"prefix",withData:!0,filter:t?{script:t}:void 0},i,o)){let u=Gh(a.outputData);(!n||n===""&&!u.clusterId||u.clusterId===O.hexFrom(n))&&(yield{cell:a,spore:a,sporeData:u,scriptInfo:on.from(c)})}}var Tn={};be(Tn,{Executor:()=>y1,ExecutorErrorDecode:()=>Wf,ExecutorErrorExecutionFailed:()=>Ii,ExecutorErrorUnknown:()=>Kf,ExecutorJsonRpc:()=>H5,ExecutorResponse:()=>Zf,Trait:()=>U5,getMethodPath:()=>Tl});function Tl(r){return O.hashCkb(O.bytesFrom(r,"utf8")).slice(0,18)}var Kf=class extends Error{constructor(e){super(e)}},Ii=class extends Error{constructor(e){super(e)}},Wf=class extends Error{constructor(e){super(e)}},Zf=class r{constructor(e,t){this.res=e,this.cellDeps=t}static new(e,t){return new r(e,t?.map(O.OutPoint.from)??[])}map(e){try{return new r(e(this.res),this.cellDeps)}catch(t){throw new Wf(JSON.stringify(t))}}},y1=class{async runScriptTry(e,t,n,s){try{return await this.runScript(e,t,n,s)}catch(o){if(o instanceof Ii)return;throw o}}},H5=class extends y1{constructor(e,t){super(),this.requestor=t?.requestor??new O.RequestorJsonRpc(e,t,n=>{throw typeof n!="object"||n===null||!("code"in n)||typeof n.code!="number"?new Kf(JSON.stringify(n)):n.code===1003||n.code===1004?"message"in n&&typeof n.message=="string"?new Ii(n.message):new Ii:"message"in n&&typeof n.message=="string"?new Kf(n.message):new Kf})}get url(){return this.requestor.url}async runScript(e,t,n,s){let o=O.OutPoint.from(e),[i,c]=(()=>{if(s?.tx){let d=O.Transaction.from(s.tx);return["run_script_level_transaction",[{inner:Ms.JsonRpcTransformers.transactionFrom(d),hash:d.hash()}]]}if(s?.cell){let d=O.CellAny.from(s.cell);return["run_script_level_cell",[{cell_output:Ms.JsonRpcTransformers.cellOutputFrom(d.cellOutput,d.outputData),hex_data:O.hexFrom(d.outputData)}]]}return s?.script?["run_script_level_script",[Ms.JsonRpcTransformers.scriptFrom(s.script)]]:["run_script_level_code",[]]})(),{content:a,cell_deps:u}=await this.requestor.request(i,[o.txHash,Number(o.index),[Tl(t),...n.map(O.hexFrom)],...c]);return Zf.new(a,u.map(Ms.JsonRpcTransformers.outPointTo))}};var U5=class r{constructor(e,t){this.code=O.OutPoint.from(e),this.executor=t??void 0}static async tryRun(e){try{return await e}catch(t){if(t instanceof Ii||t instanceof Wf)return Zf.new(void 0);throw t}}async tryRun(e){return r.tryRun(e)}assertExecutor(){if(!this.executor)throw new Error("SSRI executor is not set");return this.executor}async getMethods(e=0,t=0){return(await this.assertExecutor().runScript(this.code,"SSRI.get_methods",[O.numToBytes(e??0,8),O.numToBytes(t??0,8)])).map(s=>O.mol.Byte8Vec.decode(s))}async hasMethods(e,t){let n=O.mol.Byte8Vec.encode(e.map(Tl).concat(t?.map(O.hexFrom)??[]));return(await this.assertExecutor().runScript(this.code,"SSRI.has_methods",[n])).map(o=>O.mol.BoolVec.decode(o))}async version(){return(await this.assertExecutor().runScript(this.code,"SSRI.version",[])).map(t=>{if(t.length!==4)throw new Error("Invalid U8");return O.numFrom(t)})}};var Al={};be(Al,{Udt:()=>El,UdtPausable:()=>F5});var El=class extends Tn.Trait{constructor(e,t,n){super(e,n?.executor),this.script=O.Script.from(t)}async name(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.name",[],{script:this.script,...e});if(t)return t.map(n=>O.bytesTo(n,"utf8"))}return Tn.ExecutorResponse.new(void 0)}async symbol(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.symbol",[],{script:this.script,...e});if(t)return t.map(n=>O.bytesTo(n,"utf8"))}return Tn.ExecutorResponse.new(void 0)}async decimals(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.decimals",[],{script:this.script,...e});if(t)return t.map(n=>O.numFromBytes(n))}return Tn.ExecutorResponse.new(void 0)}async icon(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.icon",[],{script:this.script,...e});if(t)return t.map(n=>O.bytesTo(n,"utf8"))}return Tn.ExecutorResponse.new(void 0)}async transfer(e,t,n){let s;if(this.executor){let o=O.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let i=await this.executor.runScriptTry(this.code,"UDT.transfer",[o.toBytes(),O.ScriptVec.encode(t.map(({to:c})=>c)),O.mol.Uint128Vec.encode(t.map(({amount:c})=>c))],{script:this.script});i&&(s=i.map(c=>O.Transaction.fromBytes(c)))}if(!s){let o=O.Transaction.from(n??{});for(let{to:i,amount:c}of t)o.addOutput({lock:i,type:this.script},O.numLeToBytes(c,16));s=Tn.ExecutorResponse.new(o)}return s.res.addCellDeps({outPoint:this.code,depType:"code"}),s}async mint(e,t,n){let s;if(this.executor){let o=O.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let i=await this.executor.runScriptTry(this.code,"UDT.mint",[o.toBytes(),O.ScriptVec.encode(t.map(({to:c})=>c)),O.mol.Uint128Vec.encode(t.map(({amount:c})=>c))],{script:this.script});i&&(s=i.map(c=>O.Transaction.fromBytes(c)))}if(!s){let o=O.Transaction.from(n??{});for(let{to:i,amount:c}of t)o.addOutput({lock:i,type:this.script},O.numLeToBytes(c,16));s=Tn.ExecutorResponse.new(o)}return s.res.addCellDeps({outPoint:this.code,depType:"code"}),s}async completeChangeToLock(e,t,n){let s=O.Transaction.from(e);await s.completeInputsByUdt(t,this.script);let o=await s.getInputsUdtBalance(t.client,this.script)-s.getOutputsUdtBalance(this.script);return o>O.Zero&&s.addOutput({lock:n,type:this.script},O.numLeToBytes(o,16)),s}async completeBy(e,t){let{script:n}=await t.getRecommendedAddressObj();return this.completeChangeToLock(e,t,n)}};var F5=class extends El{constructor(e,t,n){super(e,t,n)}async pause(e,t,n,s){let o=O.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let c=(await this.assertExecutor().runScript(this.code,"UDTPausable.pause",[o.toBytes(),O.mol.Byte32Vec.encode(t.map(a=>O.Script.from(a).hash()).concat(s?.map(O.hexFrom)??[]))],{script:this.script})).map(a=>O.Transaction.fromBytes(a));return c.res.addCellDeps({outPoint:this.code,depType:"code"}),c}async unpause(e,t,n,s){let o=O.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let c=(await this.assertExecutor().runScript(this.code,"UDTPausable.unpause",[o.toBytes(),O.mol.Byte32Vec.encode(t.map(a=>O.Script.from(a).hash()).concat(s?.map(O.hexFrom)??[]))],{script:this.script})).map(a=>O.Transaction.fromBytes(a));return c.res.addCellDeps({outPoint:this.code,depType:"code"}),c}async isPaused(e,t){return(await this.assertExecutor().runScript(this.code,"UDTPausable.is_paused",[O.mol.Byte32Vec.encode(e.map(s=>O.Script.from(s).hash()).concat(t?.map(O.hexFrom)??[]))],{script:this.script})).map(s=>O.mol.BoolVec.decode(s))}async enumeratePaused(e,t){return(await this.assertExecutor().runScript(this.code,"UDTPausable.enumerate_paused",[O.numToBytes(e??0,8),O.numToBytes(t??0,8)],{script:this.script})).map(s=>O.mol.Byte32Vec.decode(s))}};var Cl={};be(Cl,{Signer:()=>kl,getUniSatSigners:()=>AI});var kl=class extends O.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:O.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:O.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async _getNetworkToChange(){let e=await(async()=>this.provider.getChain?{BITCOIN_MAINNET:"btc",BITCOIN_TESTNET:"btcTestnet",FRACTAL_BITCOIN_MAINNET:"fractalBtc"}[(await this.provider.getChain()).enum]??"":await this.provider.getNetwork()==="livenet"?"btc":"btcTestnet")(),{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}async ensureNetwork(){let e=await this._getNetworkToChange();if(e){if(this.provider.switchChain){let t={btc:"BITCOIN_MAINNET",btcTestnet:"BITCOIN_TESTNET",fractalBtc:"FRACTAL_BITCOIN_MAINNET"}[e];if(t){await this.provider.switchChain(t);return}}else if(e==="btc"||e==="btcTestnet"){await this.provider.switchNetwork(e==="btc"?"livenet":"testnet");return}throw new Error(`UniSat wallet doesn't support the requested chain ${e}`)}}async getBtcAccount(){return(await this.provider.getAccounts())[0]}async getBtcPublicKey(){return O.hexFrom(await this.provider.getPublicKey())}async connect(){await this.provider.requestAccounts(),await this.ensureNetwork()}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async isConnected(){return await this._getNetworkToChange()?!1:(await this.provider.getAccounts()).length!==0}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return this.provider.signMessage(t,"ecdsa")}};function AI(r,e){let t=window;return typeof t.unisat>"u"?[]:[{signer:new kl(r,t.unisat,e),name:"BTC"}]}var Ol={};be(Ol,{SignerBtc:()=>Bl,SignerCkb:()=>Il,getUtxoGlobalSigners:()=>kI});var Bl=class extends O.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:O.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:O.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async getBtcAccount(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async getBtcPublicKey(){let e=await this.provider.getPublicKey(),t=await this.getBtcAccount(),n=e.find(s=>s.address===t);if(!n)throw new Error("pubKey not found");return O.hexFrom(n.publicKey)}async ensureNetwork(){let e=await this._getNetworkToChange();if(!e)return;let t={btc:"btc",btcTestnet:"btc_testnet",btcTestnet4:"btc_testnet_4",btcSignet:"btc_signet"}[e];if(t){await this.provider.switchNetwork(t);return}throw new Error(`UTXO Global wallet doesn't support the requested chain ${e}`)}async _getNetworkToChange(){let e={btc:"btc",btc_testnet:"btcTestnet",btc_testnet_4:"btcTestnet4",btc_signet:"btcSignet"}[await this.provider.getNetwork()],{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async connect(){await this.provider.connect(),await this.ensureNetwork()}async isConnected(){return await this._getNetworkToChange()!==void 0?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getBtcAccount())}};var Il=class extends O.Signer{get type(){return O.SignerType.CKB}get signType(){return O.SignerSignType.CkbSecp256k1}constructor(e,t){super(e),this.provider=t}getInternalAddress(){return this.getAccount()}async getIdentity(){return this.getPublicKey()}async getAddressObj(){let e=await this.getInternalAddress();return O.Address.fromString(e,this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async getAccount(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async getPublicKey(){let e=await this.provider.getPublicKey(),t=await this.getAccount(),n=e.find(s=>s.address===t);if(!n)throw new Error("pubKey not found");return O.hexFrom(n.publicKey)}get ckbNetwork(){return this.client.addressPrefix==="ckb"?"nervos":"nervos_testnet"}async connect(){await this.provider.connect(),this.ckbNetwork!==await this.provider.getNetwork()&&await this.provider.switchNetwork(this.ckbNetwork)}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async isConnected(){return await this.provider.getNetwork()!==this.ckbNetwork?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getAccount())}async signOnlyTransaction(e){let t=await this.provider.signTransaction(e);return O.Transaction.from(t)}async prepareTransaction(e){let t=O.Transaction.from(e),{script:n}=await this.getAddressObj();return await t.addCellDepsOfKnownScripts(this.client,O.KnownScript.Secp256k1Blake160),await t.prepareSighashAllWitness(n,65,this.client),t}};var g1=class extends O.SignerDoge{constructor(e,t,n=[{addressPrefix:"ckb",signerType:O.SignerType.Doge,network:"doge"},{addressPrefix:"ckt",signerType:O.SignerType.Doge,network:"dogeTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async getDogeAddress(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async ensureNetwork(){let e=await this._getNetworkToChange();if(!e)return;let t={doge:"dogecoin",dogeTestnet:"dogecoin_testnet"}[e];if(t){await this.provider.switchNetwork(t);return}throw new Error(`UTXO Global Doge wallet doesn't support the requested chain ${e}`)}async _getNetworkToChange(){let e={dogecoin:"doge",dogecoin_testnet:"dogeTestnet"}[await this.provider.getNetwork()],{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async connect(){await this.provider.connect(),await this.ensureNetwork()}async isConnected(){return await this._getNetworkToChange()!==void 0?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getDogeAddress())}};function kI(r,e){let t=window;return typeof t.utxoGlobal>"u"?[]:[{name:"CKB",signer:new Il(r,t.utxoGlobal.ckbSigner)},{name:"BTC",signer:new Bl(r,t.utxoGlobal.bitcoinSigner,e)},{name:"DOGE",signer:new g1(r,t.utxoGlobal.dogeSigner,e)}]}var Ll={};be(Ll,{Signer:()=>Nl,getXverseSigners:()=>sO});var $5;function CI(r){return{lang:r?.lang??$5?.lang,message:r?.message,abortEarly:r?.abortEarly??$5?.abortEarly,abortPipeEarly:r?.abortPipeEarly??$5?.abortPipeEarly}}var BI;function II(r){return BI?.get(r)}var OI;function DI(r){return OI?.get(r)}var PI;function MI(r,e){return PI?.get(r)?.get(e)}function b1(r){let e=typeof r;return e==="string"?`"${r}"`:e==="number"||e==="bigint"||e==="boolean"?`${r}`:e==="object"||e==="function"?(r&&Object.getPrototypeOf(r)?.constructor?.name)??"null":e}function hr(r,e,t,n,s){let o=s&&"input"in s?s.input:t.value,i=s?.expected??r.expects??null,c=s?.received??b1(o),a={kind:r.kind,type:r.type,input:o,expected:i,received:c,message:`Invalid ${e}: ${i?`Expected ${i} but r`:"R"}eceived ${c}`,requirement:r.requirement,path:s?.path,issues:s?.issues,lang:n.lang,abortEarly:n.abortEarly,abortPipeEarly:n.abortPipeEarly},u=r.kind==="schema",d=s?.message??r.message??MI(r.reference,a.lang)??(u?DI(a.lang):null)??n.message??II(a.lang);d!==void 0&&(a.message=typeof d=="function"?d(a):d),u&&(t.typed=!1),t.issues?t.issues.push(a):t.issues=[a]}function kr(r){return{version:1,vendor:"valibot",validate(e){return r["~run"]({value:e},CI())}}}function RI(r,e){return Object.hasOwn(r,e)&&e!=="__proto__"&&e!=="prototype"&&e!=="constructor"}function x1(r,e){let t=[...new Set(r)];return t.length>1?`(${t.join(` ${e} `)})`:t[0]??"never"}function uw(r,e,t){return typeof r.fallback=="function"?r.fallback(e,t):r.fallback}function w1(r,e,t){return typeof r.default=="function"?r.default(e,t):r.default}function Gf(r,e){return!r["~run"]({value:e},{abortEarly:!0}).issues}function Jt(r,e){return{kind:"schema",type:"array",reference:Jt,expects:"Array",async:!1,item:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){let s=t.value;if(Array.isArray(s)){t.typed=!0,t.value=[];for(let o=0;o<s.length;o++){let i=s[o],c=this.item["~run"]({value:i},n);if(c.issues){let a={type:"array",origin:"value",input:s,key:o,value:i};for(let u of c.issues)u.path?u.path.unshift(a):u.path=[a],t.issues?.push(u);if(t.issues||(t.issues=c.issues),n.abortEarly){t.typed=!1;break}}c.typed||(t.typed=!1),t.value.push(c.value)}}else hr(this,"type",t,n);return t}}}function qr(r,e){let t=[];for(let n in r)(`${+n}`!==n||typeof r[n]!="string"||!Object.is(r[r[n]],+n))&&t.push(r[n]);return{kind:"schema",type:"enum",reference:qr,expects:x1(t.map(b1),"|"),async:!1,enum:r,options:t,message:e,get"~standard"(){return kr(this)},"~run"(n,s){return this.options.includes(n.value)?n.typed=!0:hr(this,"type",n,s),n}}}function pe(r,e){return{kind:"schema",type:"literal",reference:pe,expects:b1(r),async:!1,literal:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){return t.value===this.literal?t.typed=!0:hr(this,"type",t,n),t}}}function Dl(r,e){return{kind:"schema",type:"loose_object",reference:Dl,expects:"Object",async:!1,entries:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){let s=t.value;if(s&&typeof s=="object"){t.typed=!0,t.value={};for(let o in this.entries){let i=this.entries[o];if(o in s||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){let c=o in s?s[o]:w1(i),a=i["~run"]({value:c},n);if(a.issues){let u={type:"object",origin:"value",input:s,key:o,value:c};for(let d of a.issues)d.path?d.path.unshift(u):d.path=[u],t.issues?.push(d);if(t.issues||(t.issues=a.issues),n.abortEarly){t.typed=!1;break}}a.typed||(t.typed=!1),t.value[o]=a.value}else if(i.fallback!==void 0)t.value[o]=uw(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(hr(this,"key",t,n,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:s,key:o,value:s[o]}]}),n.abortEarly))break}if(!t.issues||!n.abortEarly)for(let o in s)RI(s,o)&&!(o in this.entries)&&(t.value[o]=s[o])}else hr(this,"type",t,n);return t}}}function Fc(r,e){return{kind:"schema",type:"non_optional",reference:Fc,expects:"!undefined",async:!1,wrapped:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){return t.value!==void 0&&(t=this.wrapped["~run"](t,n)),t.value===void 0&&hr(this,"type",t,n),t}}}function mr(r){return{kind:"schema",type:"null",reference:mr,expects:"null",async:!1,message:r,get"~standard"(){return kr(this)},"~run"(e,t){return e.value===null?e.typed=!0:hr(this,"type",e,t),e}}}function ns(r,e){return{kind:"schema",type:"nullish",reference:ns,expects:`(${r.expects} | null | undefined)`,async:!1,wrapped:r,default:e,get"~standard"(){return kr(this)},"~run"(t,n){return(t.value===null||t.value===void 0)&&(this.default!==void 0&&(t.value=w1(this,t,n)),t.value===null||t.value===void 0)?(t.typed=!0,t):this.wrapped["~run"](t,n)}}}function Pl(r){return{kind:"schema",type:"number",reference:Pl,expects:"number",async:!1,message:r,get"~standard"(){return kr(this)},"~run"(e,t){return typeof e.value=="number"&&!isNaN(e.value)?e.typed=!0:hr(this,"type",e,t),e}}}function se(r,e){return{kind:"schema",type:"object",reference:se,expects:"Object",async:!1,entries:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){let s=t.value;if(s&&typeof s=="object"){t.typed=!0,t.value={};for(let o in this.entries){let i=this.entries[o];if(o in s||(i.type==="exact_optional"||i.type==="optional"||i.type==="nullish")&&i.default!==void 0){let c=o in s?s[o]:w1(i),a=i["~run"]({value:c},n);if(a.issues){let u={type:"object",origin:"value",input:s,key:o,value:c};for(let d of a.issues)d.path?d.path.unshift(u):d.path=[u],t.issues?.push(d);if(t.issues||(t.issues=a.issues),n.abortEarly){t.typed=!1;break}}a.typed||(t.typed=!1),t.value[o]=a.value}else if(i.fallback!==void 0)t.value[o]=uw(i);else if(i.type!=="exact_optional"&&i.type!=="optional"&&i.type!=="nullish"&&(hr(this,"key",t,n,{input:void 0,expected:`"${o}"`,path:[{type:"object",origin:"key",input:s,key:o,value:s[o]}]}),n.abortEarly))break}}else hr(this,"type",t,n);return t}}}function yr(r,e){return{kind:"schema",type:"optional",reference:yr,expects:`(${r.expects} | undefined)`,async:!1,wrapped:r,default:e,get"~standard"(){return kr(this)},"~run"(t,n){return t.value===void 0&&(this.default!==void 0&&(t.value=w1(this,t,n)),t.value===void 0)?(t.typed=!0,t):this.wrapped["~run"](t,n)}}}function Ml(r,e){return{kind:"schema",type:"picklist",reference:Ml,expects:x1(r.map(b1),"|"),async:!1,options:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){return this.options.includes(t.value)?t.typed=!0:hr(this,"type",t,n),t}}}function ae(r){return{kind:"schema",type:"string",reference:ae,expects:"string",async:!1,message:r,get"~standard"(){return kr(this)},"~run"(e,t){return typeof e.value=="string"?e.typed=!0:hr(this,"type",e,t),e}}}function $c(r){return{kind:"schema",type:"undefined",reference:$c,expects:"undefined",async:!1,message:r,get"~standard"(){return kr(this)},"~run"(e,t){return e.value===void 0?e.typed=!0:hr(this,"type",e,t),e}}}function fw(r){let e;if(r)for(let t of r)e?e.push(...t.issues):e=t.issues;return e}function To(r,e){return{kind:"schema",type:"union",reference:To,expects:x1(r.map(t=>t.expects),"|"),async:!1,options:r,message:e,get"~standard"(){return kr(this)},"~run"(t,n){let s,o,i;for(let c of this.options){let a=c["~run"]({value:t.value},n);if(a.typed)if(a.issues)o?o.push(a):o=[a];else{s=a;break}else i?i.push(a):i=[a]}if(s)return s;if(o){if(o.length===1)return o[0];hr(this,"type",t,n,{issues:fw(o)}),t.typed=!0}else{if(i?.length===1)return i[0];hr(this,"type",t,n,{issues:fw(i)})}return t}}}function Eo(){return{kind:"schema",type:"unknown",reference:Eo,expects:"unknown",async:!1,get"~standard"(){return kr(this)},"~run"(r){return r.typed=!0,r}}}function Rl(r,e,t){return{kind:"schema",type:"variant",reference:Rl,expects:"Object",async:!1,key:r,options:e,message:t,get"~standard"(){return kr(this)},"~run"(n,s){let o=n.value;if(o&&typeof o=="object"){let i,c=0,a=this.key,u=[],d=(y,v)=>{for(let _ of y.options){if(_.type==="variant")d(_,new Set(v).add(_.key));else{let T=!0,A=0;for(let B of v){let I=_.entries[B];if(B in o?I["~run"]({typed:!1,value:o[B]},{abortEarly:!0}).issues:I.type!=="exact_optional"&&I.type!=="optional"&&I.type!=="nullish"){T=!1,a!==B&&(c<A||c===A&&B in o&&!(a in o))&&(c=A,a=B,u=[]),a===B&&u.push(_.entries[B].expects);break}A++}if(T){let B=_["~run"]({value:o},s);(!i||!i.typed&&B.typed)&&(i=B)}}if(i&&!i.issues)break}};if(d(this,new Set([this.key])),i)return i;hr(this,"type",n,s,{input:o[a],expected:x1(u,"|"),path:[{type:"object",origin:"value",input:o,key:a,value:o[a]}]})}else hr(this,"type",n,s);return n}}}var lw;(function(r){r.Mainnet="Mainnet",r.Testnet="Testnet",r.Signet="Signet"})(lw||(lw={}));var q5=yr(To([ae(),Pl(),mr()])),Ls=se({jsonrpc:pe("2.0"),method:ae(),params:yr(To([Jt(Eo()),Dl({}),mr()])),id:q5}),v1;(function(r){r[r.PARSE_ERROR=-32700]="PARSE_ERROR",r[r.INVALID_REQUEST=-32600]="INVALID_REQUEST",r[r.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",r[r.INVALID_PARAMS=-32602]="INVALID_PARAMS",r[r.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",r[r.USER_REJECTION=-32e3]="USER_REJECTION",r[r.METHOD_NOT_SUPPORTED=-32001]="METHOD_NOT_SUPPORTED",r[r.ACCESS_DENIED=-32002]="ACCESS_DENIED"})(v1||(v1={}));var j5=se({jsonrpc:pe("2.0"),result:Fc(Eo()),id:q5}),z5=se({jsonrpc:pe("2.0"),error:Fc(Eo()),id:q5}),Gee=To([j5,z5]);var NI=["software","ledger"],dw=Ml(NI),LI="wallet_requestPermissions",HI=$c(),Yee=pe(!0),Qee=se({...Ls.entries,...se({method:pe(LI),params:HI,id:ae()}).entries}),UI="wallet_renouncePermissions",FI=$c(),ete=pe(!0),tte=se({...Ls.entries,...se({method:pe(UI),params:FI,id:ae()}).entries}),$I="wallet_getWalletType",rte=ns(mr());var nte=se({...Ls.entries,...se({method:pe($I),id:ae()}).entries});var qc;(function(r){r.Ordinals="ordinals",r.Payment="payment",r.Stacks="stacks"})(qc||(qc={}));var V5;(function(r){r.p2pkh="p2pkh",r.p2sh="p2sh",r.p2wpkh="p2wpkh",r.p2wsh="p2wsh",r.p2tr="p2tr",r.stacks="stacks"})(V5||(V5={}));var pw=se({address:ae(),publicKey:ae(),purpose:qr(qc),addressType:qr(V5)}),qI="getInfo",jI=ns(mr()),cte=se({version:ae(),methods:yr(Jt(ae())),supports:Jt(ae())}),ate=se({...Ls.entries,...se({method:pe(qI),params:jI,id:ae()}).entries}),zI="getAddresses",VI=se({purposes:Jt(qr(qc)),message:yr(ae())}),fte=se({addresses:Jt(pw)}),ute=se({...Ls.entries,...se({method:pe(zI),params:VI,id:ae()}).entries}),KI="signMessage",Jf;(function(r){r.ECDSA="ECDSA",r.BIP322="BIP322"})(Jf||(Jf={}));var WI=se({address:ae(),message:ae(),protocol:yr(qr(Jf))}),lte=se({signature:ae(),messageHash:ae(),address:ae(),protocol:qr(Jf)}),dte=se({...Ls.entries,...se({method:pe(KI),params:WI,id:ae()}).entries}),ZI="getAccounts",GI=se({purposes:Jt(qr(qc)),message:yr(ae())}),pte=Jt(se({...pw.entries,...se({walletType:dw}).entries})),hte=se({...Ls.entries,...se({method:pe(ZI),params:GI,id:ae()}).entries}),JI="getBalance",mte=ns(mr()),yte=se({confirmed:ae(),unconfirmed:ae(),total:ae()}),gte=se({...Ls.entries,...se({method:pe(JI),id:ae()}).entries});var XI="accountChange",YI=se({type:pe(XI)}),QI="networkChange",eO=se({type:pe(QI)}),tO="disconnect",rO=se({type:pe(tO)}),xte=Rl("type",[YI,eO,rO]);async function S1(r){let e=await r;if(Gf(z5,e))throw e.error;if(Gf(j5,e))return e.result;throw{code:v1.INTERNAL_ERROR,message:"Received unknown response from provider.",data:e}}var Nl=class extends O.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:O.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:O.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async assertAddress(){this.addressCache=this.addressCache??(async()=>{if(await this.isConnected())return(await S1(this.provider.request("getAddresses",{purposes:[qc.Payment]}))).addresses[0]})();let e=await this.addressCache;if(e)return e;throw Error("Not connected")}async getBtcAccount(){return(await this.assertAddress()).address}async getBtcPublicKey(){return O.hexFrom((await this.assertAddress()).publicKey)}async connect(){await this.isConnected()||await S1(this.provider.request("wallet_requestPermissions",void 0))}async disconnect(){this.addressCache=void 0}onReplaced(e){let t=[],n=()=>{e(),t[0]?.()};return t.push(this.provider.addListener("accountChange",n),this.provider.addListener("networkChange",n)),t[0]}async isConnected(){try{return await S1(this.provider.request("getBalance",void 0)),!0}catch{return!1}}async signMessageRaw(e){let t=typeof e=="string"?e:O.hexFrom(e).slice(2);return(await S1(this.provider.request("signMessage",{message:t,address:(await this.assertAddress()).address,protocol:Jf.ECDSA}))).signature}};function nO(r){return r?.split(".").reduce((e,t)=>e?.[t],window)}function sO(r,e){let t=window;return t.btc_providers?t.btc_providers.map(s=>({wallet:{name:s.name,icon:s.icon},signerInfo:{name:"BTC",signer:new Nl(r,nO(s.id),e)}})):[]}function Cr(r){return`data:image/svg+xml,${encodeURIComponent(r)}`}var hw=Cr('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_46_558)"><circle cx="16" cy="16" r="16" fill="#627EEA"/><path d="M15.9957 20.4203L9.14282 16.3876L15.9957 5.14258V20.4203Z" fill="white"/><path d="M15.9957 26.8573L9.30029 17.396L15.9957 21.3511V26.8573Z" fill="white"/><path d="M16.2319 20.4203L23.0849 16.3876L16.2319 5.14258V20.4203Z" fill="#C1CCF7"/><path d="M16.3107 26.8573L23.0848 17.396L16.3107 21.3511V26.8573Z" fill="#C1CCF7"/></g><defs><clipPath id="clip0_46_558"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>');var mw=Cr('<svg xmlns="http://www.w3.org/2000/svg" width="420" height="420" viewBox="0 0 420 420" fill="none"><circle cx="210" cy="210" r="210" fill="#333333"/><path d="M271.127 204.419C279.096 204.419 285.555 197.959 285.555 189.991C285.555 182.022 279.096 175.562 271.127 175.562C263.159 175.562 256.699 182.022 256.699 189.991C256.699 197.959 263.159 204.419 271.127 204.419Z" fill="#8CDD00"/><path d="M173.995 175.562C166.773 175.562 160.91 181.425 160.91 188.648C160.91 195.87 166.773 201.733 173.995 201.733C181.218 201.733 187.081 195.87 187.081 188.648C187.064 181.425 181.218 175.562 173.995 175.562Z" fill="#8CDD00"/><path d="M213.43 164.836L198.969 233.586C197.626 240.006 191.878 244.657 185.327 244.657C181.086 244.657 177.139 242.757 174.47 239.465C172.39 236.894 171.342 233.734 171.391 230.491L145.27 237.238C146.383 244.084 149.2 250.618 153.687 256.203C161.434 265.816 172.963 271.335 185.311 271.335C204.407 271.335 221.111 257.775 225.041 239.089L240.665 164.852H213.43V164.836Z" fill="#C1C1C1"/><path d="M335.83 115.983C327.068 105.19 314.065 99 300.161 99H267.981L262.363 125.662H300.161C305.991 125.662 311.445 128.249 315.113 132.786C318.782 137.306 320.207 143.185 319.011 148.884L313.394 175.562H340.645L345.116 154.387C347.965 140.778 344.592 126.775 335.83 115.983Z" fill="#8CDD00"/><path d="M295.216 261.999C291.285 280.669 274.597 294.212 255.518 294.212H226.875L221.258 320.874H255.518C287.126 320.874 314.803 298.421 321.304 267.485L326.021 245.049H298.77L295.216 261.999Z" fill="#8CDD00"/><path d="M98.8061 152.39L93.9258 175.58H121.177L124.894 157.892C128.825 139.223 145.513 125.679 164.592 125.679H192.04L197.657 99.0176H164.592C132.985 99.0012 105.308 121.454 98.8061 152.39Z" fill="#8CDD00"/><path d="M104.998 287.072C101.33 282.552 99.9049 276.673 101.1 270.974L106.079 247.342L77.2555 254.777L74.9956 265.487C72.1296 279.097 75.5196 293.099 84.2813 303.891C93.0429 314.684 106.046 320.874 119.95 320.874H150.935L156.553 294.212H119.95C114.12 294.196 108.666 291.608 104.998 287.072Z" fill="#8CDD00"/></svg>');var yw=Cr('<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" version="1.1" viewBox="0 0 318.6 318.6"><style>.st1,.st6{fill:#e4761b;stroke:#e4761b;stroke-linecap:round;stroke-linejoin:round}.st6{fill:#f6851b;stroke:#f6851b}</style><path fill="#e2761b" stroke="#e2761b" stroke-linecap="round" stroke-linejoin="round" d="m274.1 35.5-99.5 73.9L193 65.8z"/><path d="m44.4 35.5 98.7 74.6-17.5-44.3zm193.9 171.3-26.5 40.6 56.7 15.6 16.3-55.3zm-204.4.9L50.1 263l56.7-15.6-26.5-40.6z" class="st1"/><path d="m103.6 138.2-15.8 23.9 56.3 2.5-2-60.5zm111.3 0-39-34.8-1.3 61.2 56.2-2.5zM106.8 247.4l33.8-16.5-29.2-22.8zm71.1-16.5 33.9 16.5-4.7-39.3z" class="st1"/><path fill="#d7c1b3" stroke="#d7c1b3" stroke-linecap="round" stroke-linejoin="round" d="m211.8 247.4-33.9-16.5 2.7 22.1-.3 9.3zm-105 0 31.5 14.9-.2-9.3 2.5-22.1z"/><path fill="#233447" stroke="#233447" stroke-linecap="round" stroke-linejoin="round" d="m138.8 193.5-28.2-8.3 19.9-9.1zm40.9 0 8.3-17.4 20 9.1z"/><path fill="#cd6116" stroke="#cd6116" stroke-linecap="round" stroke-linejoin="round" d="m106.8 247.4 4.8-40.6-31.3.9zM207 206.8l4.8 40.6 26.5-39.7zm23.8-44.7-56.2 2.5 5.2 28.9 8.3-17.4 20 9.1zm-120.2 23.1 20-9.1 8.2 17.4 5.3-28.9-56.3-2.5z"/><path fill="#e4751f" stroke="#e4751f" stroke-linecap="round" stroke-linejoin="round" d="m87.8 162.1 23.6 46-.8-22.9zm120.3 23.1-1 22.9 23.7-46zm-64-20.6-5.3 28.9 6.6 34.1 1.5-44.9zm30.5 0-2.7 18 1.2 45 6.7-34.1z"/><path d="m179.8 193.5-6.7 34.1 4.8 3.3 29.2-22.8 1-22.9zm-69.2-8.3.8 22.9 29.2 22.8 4.8-3.3-6.6-34.1z" class="st6"/><path fill="#c0ad9e" stroke="#c0ad9e" stroke-linecap="round" stroke-linejoin="round" d="m180.3 262.3.3-9.3-2.5-2.2h-37.7l-2.3 2.2.2 9.3-31.5-14.9 11 9 22.3 15.5h38.3l22.4-15.5 11-9z"/><path fill="#161616" stroke="#161616" stroke-linecap="round" stroke-linejoin="round" d="m177.9 230.9-4.8-3.3h-27.7l-4.8 3.3-2.5 22.1 2.3-2.2h37.7l2.5 2.2z"/><path fill="#763d16" stroke="#763d16" stroke-linecap="round" stroke-linejoin="round" d="m278.3 114.2 8.5-40.8-12.7-37.9-96.2 71.4 37 31.3 52.3 15.3 11.6-13.5-5-3.6 8-7.3-6.2-4.8 8-6.1zM31.8 73.4l8.5 40.8-5.4 4 8 6.1-6.1 4.8 8 7.3-5 3.6 11.5 13.5 52.3-15.3 37-31.3-96.2-71.4z"/><path d="m267.2 153.5-52.3-15.3 15.9 23.9-23.7 46 31.2-.4h46.5zm-163.6-15.3-52.3 15.3-17.4 54.2h46.4l31.1.4-23.6-46zm71 26.4 3.3-57.7 15.2-41.1h-67.5l15 41.1 3.5 57.7 1.2 18.2.1 44.8h27.7l.2-44.8z" class="st6"/><script xmlns=""/></svg>');var gw=Cr('<svg version="1.1" id="_8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" style="enable-background:new 0 0 256 256;" xml:space="preserve"><style type="text/css">.st0{fill:none;} .st1{fill:#FFFFFF;} .st2{fill:#662482;}</style><g><path class="st0" d="M0,0v256h256V0H0z M231.2,159.2c0,20.7,0,31.1-3.5,42.2c-4.4,12.2-14,21.8-26.2,26.2 c-11.1,3.5-21.5,3.5-42.2,3.5H96.8c-20.7,0-31.1,0-42.2-3.5c-12.2-4.4-21.8-14-26.2-26.2c-3.5-11.1-3.5-21.5-3.5-42.2V96.8 c0-20.7,0-31.1,3.5-42.2c4.4-12.2,14-21.8,26.2-26.2c11.2-3.5,21.5-3.5,42.2-3.5h62.5c20.7,0,31.1,0,42.2,3.5 c12.2,4.4,21.8,14,26.2,26.2c3.5,11.1,3.5,21.5,3.5,42.2V159.2z"/> <circle class="st1" cx="137.9" cy="99" r="12.1"/><path class="st1" d="M210.8,115.9c0-47.3-27.7-68.7-64.4-68.7c-16.4,0-31,4.4-42.4,12.5c-3.8,2.7-9,0.1-9-4.5 c0-3.1-2.5-5.7-5.7-5.7H57.7c-3.1,0-5.7,2.5-5.7,5.7v144c0,3.1,2.5,5.7,5.7,5.7h33.7c3.1,0,5.6-2.5,5.6-5.6v-8.4 c0-62.8-33.2-109.8-0.4-116c30-5.7,64.1-3,64.5,20.1c0,2,0.3,8,8.6,11.2c5,2,12.6,2.6,22.6,2.4c0,0,9.1-0.7,9.1,8.5 c0,11.5-20.4,10.7-20.4,10.7c-6.7,0.3-22.6-1.5-31.7,1.2c-4.8,1.5-9,4.2-11.5,9.1c-4.2,8.3-6.2,26.5-6.5,45.5v15.5 c0,3.1,2.5,5.7,5.7,5.7h68c3.1,0,5.7-2.5,5.7-5.7l0,0V115.9z"/><path class="st2" d="M227.6,54.6c-4.4-12.2-14-21.8-26.2-26.2c-11.1-3.5-21.5-3.5-42.2-3.5H96.8c-20.7,0-31.1,0-42.2,3.5 c-12.2,4.4-21.8,14-26.2,26.2c-3.5,11.2-3.5,21.5-3.5,42.2v62.5c0,20.7,0,31.1,3.5,42.2c4.4,12.2,14,21.8,26.2,26.2 c11.2,3.5,21.5,3.5,42.2,3.5h62.5c20.7,0,31.1,0,42.2-3.5c12.2-4.4,21.8-14,26.2-26.2c3.5-11.1,3.5-21.5,3.5-42.2V96.8 C231.2,76.1,231.2,65.7,227.6,54.6z M205.1,204.8h-68c-3.1,0-5.7-2.5-5.7-5.7v-15.5c0.3-19,2.3-37.2,6.5-45.5 c2.5-5,6.7-7.7,11.5-9.1c9-2.7,24.9-0.9,31.7-1.2c0,0,20.4,0.8,20.4-10.7c0-9.3-9.1-8.5-9.1-8.5c-10,0.3-17.7-0.4-22.6-2.4 c-8.3-3.3-8.6-9.2-8.6-11.2c-0.4-23.1-34.5-25.9-64.5-20.1c-32.8,6.2,0.4,53.3,0.4,116v8.4c-0.1,3.1-2.5,5.6-5.6,5.6H57.7 c-3.1,0-5.7-2.5-5.7-5.7v-144c0-3.1,2.5-5.7,5.7-5.7h31.7c3.1,0,5.7,2.5,5.7,5.7c0,4.7,5.2,7.2,9,4.5c11.4-8.2,26-12.5,42.4-12.5 c36.7,0,64.4,21.4,64.4,68.7v83.2l0,0C210.8,202.3,208.3,204.8,205.1,204.8z M125.7,99c0-6.7,5.4-12.1,12.1-12.1S150,92.3,150,99 s-5.4,12.1-12.1,12.1S125.7,105.8,125.7,99z"/></g></svg>');var K5=Cr('<svg width="1000" height="1000" viewBox="0 0 1000 1000" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="1000" height="1000" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M393.949 218.518H231.049C224.129 218.518 218.519 224.128 218.519 231.048V393.948C218.519 400.869 224.129 406.479 231.049 406.479H393.949C400.87 406.479 406.48 400.869 406.48 393.948V231.048C406.48 224.128 400.87 218.518 393.949 218.518ZM581.992 406.479H419.092C412.172 406.479 406.561 412.09 406.561 419.01V581.91C406.561 588.831 412.172 594.441 419.092 594.441H581.992C588.913 594.441 594.523 588.831 594.523 581.91V419.01C594.523 412.09 588.913 406.479 581.992 406.479ZM606.974 218.518H769.874C776.794 218.518 782.405 224.128 782.405 231.048V393.948C782.405 400.869 776.794 406.479 769.874 406.479H606.974C600.053 406.479 594.443 400.869 594.443 393.948V231.048C594.443 224.128 600.053 218.518 606.974 218.518ZM393.95 594.442H231.049C224.129 594.442 218.519 600.052 218.519 606.973V769.873C218.519 776.793 224.129 782.404 231.049 782.404H393.95C400.87 782.404 406.48 776.793 406.48 769.873V606.973C406.48 600.052 400.87 594.442 393.95 594.442ZM606.974 594.442H769.874C776.794 594.442 782.405 600.052 782.405 606.973V769.873C782.405 776.793 776.794 782.404 769.874 782.404H606.974C600.053 782.404 594.443 776.793 594.443 769.873V606.973C594.443 600.052 600.053 594.442 606.974 594.442Z" fill="white"/></svg>');var bw=Cr('<svg id="layer2" data-name="layer2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 88.24 70.95"><defs><style>.cls-1{fill:url(#linear_9)}.cls-2{fill:rgba(155,84,168,0)}</style><linearGradient id="linear_9" data-name="linear 9" x1="216.98" y1="-423.81" x2="170.95" y2="319.28" gradientTransform="translate(18.94 29.12) scale(.09 -.09)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#01f395"/><stop offset="1" stop-color="#01b56a"/></linearGradient></defs><g id="layer1" data-name="layer1"><g><rect class="cls-2" width="88.24" height="70.95"/><g><path class="cls-1" d="m19.08,0H4.9l49.8,70.95h14.19L19.08,0Z"/><path d="m69.08,44.08c9.93-2.84,16.92-9.85,16.92-21.5v-.2c0-6.18-2.12-11.44-5.87-15.29-4.56-4.45-11.54-7.08-20.46-7.08H24.09l7.97,11.37h26.59c9.22,0,14.7,4.12,14.7,11.72v.2c0,7.19-5.68,11.86-14.6,11.86h-9.98l25.11,35.79h14.37l-19.16-26.87Z"/><path d="m0,20.16l35.64,50.78h14.19L14.19,20.16H0Z"/></g></g></g></svg>');var W5=Cr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 115.77 147.7" xmlns:v="https://vecta.io/nano"><defs><linearGradient id="A" x1="106.985" y1="30.78" x2="13.053" y2="72.524" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#201c1b"/><stop offset=".36" stop-color="#77390d"/><stop offset=".67" stop-color="#ea8101"/><stop offset="1" stop-color="#f4b852"/></linearGradient><linearGradient id="B" x1="11.381" y1="118.167" x2="120.232" y2="85.771" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1f1d1c"/><stop offset=".37" stop-color="#77390d"/><stop offset=".67" stop-color="#ea8101"/><stop offset="1" stop-color="#f4fb52"/></linearGradient><radialGradient id="C" cx="53.01" cy="45.84" fx="53.01" fy="45.84" r="11.13" gradientTransform="translate(0 0)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f4b852"/><stop offset=".33" stop-color="#ea8101"/><stop offset=".64" stop-color="#77390d"/><stop offset="1" stop-color="#211c1d"/></radialGradient></defs><path d="M81.66 13.29l30.31 30.02c2.58 2.55 3.85 5.13 3.81 7.73s-1.15 4.97-3.32 7.12c-2.27 2.25-4.72 3.39-7.34 3.44-2.62.04-5.22-1.22-7.8-3.77l-31-30.7c-3.52-3.49-6.92-5.96-10.19-7.41s-6.71-1.68-10.31-.68c-3.61.99-7.48 3.54-11.63 7.64-5.72 5.67-8.45 10.99-8.17 15.96s3.12 10.13 8.51 15.46l31.25 30.96c2.61 2.58 3.89 5.16 3.85 7.72-.04 2.57-1.16 4.94-3.37 7.13-2.2 2.18-4.63 3.32-7.27 3.41s-5.27-1.16-7.87-3.74L20.81 73.56c-4.93-4.88-8.49-9.5-10.68-13.86s-3.01-9.29-2.44-14.79c.51-4.71 2.02-9.27 4.54-13.69 2.51-4.42 6.11-8.94 10.78-13.57 5.56-5.51 10.87-9.73 15.93-12.67C43.99 2.04 48.88.41 53.6.07c4.73-.34 9.39.6 14 2.82s9.29 5.68 14.05 10.4z" fill="url(#A)"/><path d="M34.11 134.42L3.81 104.4C1.23 101.84-.04 99.27 0 96.67s1.15-4.97 3.32-7.12c2.27-2.25 4.72-3.39 7.34-3.44 2.62-.04 5.22 1.21 7.8 3.77l30.99 30.7c3.53 3.49 6.92 5.96 10.19 7.41s6.71 1.67 10.32.68 7.48-3.54 11.63-7.65c5.72-5.67 8.45-10.99 8.17-15.96s-3.12-10.13-8.51-15.47L64.6 73.24c-2.61-2.58-3.89-5.16-3.85-7.72.04-2.57 1.16-4.94 3.37-7.13 2.2-2.18 4.63-3.32 7.27-3.41s5.27 1.16 7.87 3.74l15.7 15.41c4.93 4.88 8.49 9.5 10.68 13.86s3.01 9.29 2.44 14.79c-.51 4.71-2.02 9.27-4.54 13.69-2.51 4.42-6.11 8.94-10.78 13.57-5.56 5.51-10.87 9.73-15.93 12.67s-9.95 4.58-14.68 4.92-9.39-.6-14-2.82-9.29-5.68-14.05-10.4z" fill="url(#B)"/><circle cx="53.01" cy="45.83" r="11.13" fill="url(#C)"/></svg>');var Z5=Cr(`
<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="512" height="512" rx="256" fill="black"/>
    <g clip-path="url(#clip0_3306_46207)">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M303.998 281.91C303.998 290.558 311.018 297.568 319.677 297.568H379.781C381.224 297.568 382.394 298.736 382.394 300.178V359.734V360.2H382.401C382.648 368.632 389.57 375.392 398.074 375.392C406.577 375.392 413.499 368.632 413.746 360.2H413.753V359.734V297.568V276.691C413.753 270.926 409.073 266.252 403.3 266.252H382.394H319.677C311.018 266.252 303.998 273.262 303.998 281.91Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M382.394 391.05C382.394 382.402 375.375 375.392 366.715 375.392H306.612C305.168 375.392 303.998 374.223 303.998 372.782V313.226V312.76H303.992C303.745 304.328 296.822 297.568 288.319 297.568C279.816 297.568 272.894 304.328 272.647 312.76H272.64V313.226V375.392V396.269C272.64 402.034 277.32 406.708 283.093 406.708H303.998H366.715C375.375 406.708 382.394 399.697 382.394 391.05Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M102.456 401.977C108.579 408.092 118.507 408.092 124.63 401.977L167.13 359.535C168.15 358.516 169.805 358.516 170.825 359.535L212.995 401.647L213.325 401.977L213.33 401.972C219.475 407.76 229.156 407.652 235.168 401.647C241.181 395.643 241.289 385.975 235.494 379.838L235.499 379.833L235.168 379.503L191.151 335.546L176.369 320.783C172.287 316.707 165.668 316.707 161.586 320.783L146.804 335.546L102.456 379.833C96.333 385.948 96.333 395.862 102.456 401.977Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M102.291 269.894C108.414 263.779 118.342 263.779 124.465 269.894L166.965 312.336C167.985 313.355 169.64 313.355 170.66 312.336L212.83 270.224L213.16 269.894L213.165 269.899C219.31 264.111 228.991 264.219 235.003 270.224C241.016 276.228 241.125 285.896 235.329 292.033L235.334 292.038L235.003 292.367L190.986 336.325L176.204 351.088C172.122 355.164 165.503 355.164 161.421 351.088L146.639 336.325L102.291 292.038C96.1681 285.923 96.1681 276.009 102.291 269.894Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M273.839 120.74C273.839 129.388 280.859 136.398 289.518 136.398H327.223C328.666 136.398 329.836 137.567 329.836 139.008L329.829 230.412V230.878H329.836C330.083 239.31 337.005 246.07 345.508 246.07C354.011 246.07 360.934 239.31 361.181 230.878H361.188V230.412L361.194 136.398V115.521C361.194 109.756 356.514 105.082 350.742 105.082H329.836H289.518C280.859 105.082 273.839 112.093 273.839 120.74Z" fill="#FF7201"/>
    <path d="M395.035 105.082C403.694 105.082 410.714 112.093 410.714 120.74C410.714 129.388 403.694 136.398 395.035 136.398C386.376 136.398 379.356 129.388 379.356 120.74C379.356 112.093 386.376 105.082 395.035 105.082Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M239.114 120.646L239.114 120.658L239.114 120.67L239.112 199.095V199.562H239.106C238.859 207.994 231.936 214.754 223.433 214.754C214.93 214.754 208.008 207.994 207.761 199.562H207.754V199.101L207.754 199.096L207.754 199.091L207.756 120.658L207.756 120.184H207.763C208.014 111.756 214.934 105 223.435 105C231.935 105 238.856 111.756 239.107 120.184H239.114V120.646Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M207.755 230.412C207.755 221.764 200.735 214.754 192.075 214.754H131.972C130.528 214.754 129.358 213.586 129.358 212.144V121.272V120.806H129.352C129.105 112.374 122.182 105.614 113.679 105.614C105.176 105.614 98.2539 112.374 98.0069 120.806H98.0001V121.272V214.754V235.632C98.0001 241.397 102.68 246.07 108.453 246.07H129.358H192.075C200.735 246.07 207.755 239.06 207.755 230.412Z" fill="white"/>
    </g>
    <defs>
    <clipPath id="clip0_3306_46207">
    <rect width="316" height="302" fill="white" transform="translate(98 105)"/>
    </clipPath>
    </defs>
</svg>
`);var G5=class{constructor(){this.resetListeners=[]}getConfig(e){let t=e?.name??document.querySelector("head title")?.text??"Unknown",n=e?.icon??document.querySelector('link[rel="icon"]')?.href??"https://fav.farm/%E2%9D%93",s=[...e?.preferredNetworks??[],{addressPrefix:"ckb",signerType:$r.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:$r.SignerType.BTC,network:"btcTestnet"},{addressPrefix:"ckb",signerType:$r.SignerType.Doge,network:"doge"},{addressPrefix:"ckt",signerType:$r.SignerType.Doge,network:"dogeTestnet"}];return{appName:t,appIcon:n,preferredNetworks:s}}disconnect(){this.resetListeners.forEach(e=>e()),this.resetListeners=[]}async refresh(e,t,n){this.disconnect();let{appName:s,appIcon:o,preferredNetworks:i}=this.getConfig(n),c={client:e,appName:s,appIcon:o,preferredNetworks:i,onUpdate:t,wallets:[]};await this.addRealSigners(c),await this.addDummySigners(c)}async addRealSigners(e){let{appName:t,appIcon:n,client:s,preferredNetworks:o}=e;await this.addSigners("UTXO Global Wallet",Z5,Ol.getUtxoGlobalSigners(s,o),e),await this.addSigners("Rei Wallet",bw,ul.getReiSigners(s),e),await this.addSigners("JoyID Passkey",mw,sl.getJoyIdSigners(s,t,n,o),e),await this.addSigners("UniSat",W5,Cl.getUniSatSigners(s,o),e),await this.addSigners("OKX Wallet",K5,al.getOKXSigners(s,o),e),await Promise.all(Ll.getXverseSigners(s,o).map(({wallet:c,signerInfo:a})=>this.addSigner(c.name,c.icon,a,e)));let i=il.getNip07Signer(s);i&&await this.addSigner("Nostr",gw,{name:"Nostr",signer:i},e),this.resetListeners.push(new el.SignerFactory(s).subscribeSigners((c,a)=>this.addSigner(a?.info.name??"EVM",a?.info.icon??hw,{name:"EVM",signer:c},e)))}async addDummySigners(e){await this.addLinkSigners("MetaMask",yw,[$r.SignerType.EVM],`https://metamask.app.link/dapp/${window.location.href}`,e),await this.addLinkSigners("OKX Wallet",K5,[$r.SignerType.EVM,$r.SignerType.BTC],"https://www.okx.com/download?deeplink="+encodeURIComponent("okx://wallet/dapp/url?dappUrl="+encodeURIComponent(window.location.href)),e),await this.addLinkSigners("UniSat",W5,[$r.SignerType.BTC],"https://unisat.io/download",e),await this.addLinkSigners("UTXO Global Wallet",Z5,[$r.SignerType.CKB,$r.SignerType.BTC],"https://chromewebstore.google.com/detail/lnamkkidoonpeknminiadpgjiofpdmle",e)}async addLinkSigners(e,t,n,s,o){return this.addSigners(e,t,n.map(i=>({name:i,signer:new $r.SignerOpenLink(o.client,i,s)})),o)}async addSigners(e,t,n,s){return Promise.all(n.map(o=>this.addSigner(e,t,o,s)))}async addSigner(e,t,n,{wallets:s,onUpdate:o}){let i=s.find(c=>c.name===e);if(!i)s.push({name:e,icon:t,signers:[n]});else{let c=[...i.signers,n].filter(({signer:a})=>!(a instanceof $r.SignerDummy));i.signers=c.length!==0?c:[n]}o(s)}};var Wr={};be(Wr,{Address:()=>$t,Bytes:()=>J5,Cell:()=>Xt,CellAny:()=>$s,CellDep:()=>jr,CellDepInfo:()=>Pi,CellDepVec:()=>L1,CellInput:()=>zr,CellInputVec:()=>N1,CellOutput:()=>fn,CellOutputVec:()=>R1,Client:()=>ea,ClientBlock:()=>Vc,ClientBlockHeader:()=>an,ClientBlockUncle:()=>Yf,ClientCache:()=>Yc,ClientCacheMemory:()=>Qc,ClientIndexerSearchKey:()=>os,ClientIndexerSearchKeyFilter:()=>jc,ClientIndexerSearchKeyTransaction:()=>zc,ClientJsonRpc:()=>Po,ClientPublicMainnet:()=>Gl,ClientPublicTestnet:()=>Jl,ClientTransactionResponse:()=>Io,DepTypeCodec:()=>D1,Eip6963:()=>Td,ErrorClientBase:()=>kn,ErrorClientDuplicatedTransaction:()=>Zc,ErrorClientMaxFeeRateExceeded:()=>Xc,ErrorClientRBFRejected:()=>Gc,ErrorClientResolveUnknown:()=>Kc,ErrorClientVerification:()=>Wc,ErrorClientWaitTransactionTimeout:()=>Jc,ErrorTransactionInsufficientCapacity:()=>Fs,ErrorTransactionInsufficientCoin:()=>ca,HashTypeCodec:()=>B1,HasherCkb:()=>Oi,HasherKeecak256:()=>na,JoyId:()=>Cd,KnownScript:()=>re,Nip07:()=>Id,Okx:()=>Dd,One:()=>sm,OutPoint:()=>ze,RawTransaction:()=>nd,Rei:()=>Md,RequestorJsonRpc:()=>ta,Script:()=>ge,ScriptInfo:()=>Bo,ScriptOpt:()=>Yl,ScriptVec:()=>Tm,Signature:()=>pd,Signer:()=>Yt,SignerAlwaysError:()=>wd,SignerBtc:()=>la,SignerBtcPublicKeyReadonly:()=>md,SignerCkbPrivateKey:()=>yd,SignerCkbPublicKey:()=>da,SignerCkbScriptReadonly:()=>gd,SignerDoge:()=>Ro,SignerDogeAddressReadonly:()=>bd,SignerDogePrivateKey:()=>xd,SignerDummy:()=>No,SignerEvm:()=>pa,SignerEvmAddressReadonly:()=>Sd,SignerInfo:()=>hd,SignerNostr:()=>qs,SignerNostrPrivateKey:()=>_d,SignerNostrPublicKeyReadonly:()=>ha,SignerOpenLink:()=>vd,SignerSignType:()=>Le,SignerType:()=>gr,SignersController:()=>sy,Since:()=>Ri,Transaction:()=>Te,UniSat:()=>Fd,UtxoGlobal:()=>jd,WitnessArgs:()=>ar,Xverse:()=>Vd,Zero:()=>et,apply:()=>ue,btcEcdsaPublicKeyHash:()=>Ni,btcP2pkhAddressFromPublicKey:()=>cd,btcPublicKeyFromP2pkhAddress:()=>ad,btcVarLengthBytesFrom:()=>U1,buildNostrEventFromMessage:()=>cu,bytesConcat:()=>ke,bytesConcatTo:()=>En,bytesEq:()=>Hl,bytesFrom:()=>Q,bytesTo:()=>Ao,calcDaoClaimEpoch:()=>Am,calcDaoProfit:()=>H1,depTypeFrom:()=>ra,depTypeFromBytes:()=>M1,depTypeToBytes:()=>P1,epochFrom:()=>Qf,epochFromHex:()=>Zl,epochToHex:()=>Em,fixedPointFrom:()=>Do,fixedPointToString:()=>zl,hashCkb:()=>Br,hashTypeFrom:()=>Oo,hashTypeFromBytes:()=>tu,hashTypeId:()=>km,hashTypeToBytes:()=>eu,hexFrom:()=>z,isWebview:()=>Q5,keystoreDecrypt:()=>Dm,keystoreEncrypt:()=>Om,messageHashBtcEcdsa:()=>ou,messageHashCkbSecp256k1:()=>su,messageHashDogeEcdsa:()=>iu,mol:()=>W,nostrEventHash:()=>au,numBeFromBytes:()=>Xf,numBeToBytes:()=>Hs,numFrom:()=>$,numFromBytes:()=>ko,numLeFromBytes:()=>Co,numLeToBytes:()=>ss,numMax:()=>Fl,numMin:()=>Ul,numToBytes:()=>qe,numToHex:()=>Ut,reduceAsync:()=>An,sleep:()=>$l,spore:()=>Rd,ssri:()=>Bn,stringify:()=>em,udt:()=>Hd,udtBalanceFrom:()=>fa,verifyMessageBtcEcdsa:()=>fd,verifyMessageCkbSecp256k1:()=>od,verifyMessageDogeEcdsa:()=>ud,verifyMessageEvmPersonal:()=>ld,verifyMessageJoyId:()=>id,verifyMessageNostrEvent:()=>dd});var Td={};be(Td,{Signer:()=>fu,SignerFactory:()=>Lm});var D={};be(D,{Address:()=>$t,Bytes:()=>J5,Cell:()=>Xt,CellAny:()=>$s,CellDep:()=>jr,CellDepInfo:()=>Pi,CellDepVec:()=>L1,CellInput:()=>zr,CellInputVec:()=>N1,CellOutput:()=>fn,CellOutputVec:()=>R1,Client:()=>ea,ClientBlock:()=>Vc,ClientBlockHeader:()=>an,ClientBlockUncle:()=>Yf,ClientCache:()=>Yc,ClientCacheMemory:()=>Qc,ClientIndexerSearchKey:()=>os,ClientIndexerSearchKeyFilter:()=>jc,ClientIndexerSearchKeyTransaction:()=>zc,ClientJsonRpc:()=>Po,ClientPublicMainnet:()=>Gl,ClientPublicTestnet:()=>Jl,ClientTransactionResponse:()=>Io,DepTypeCodec:()=>D1,ErrorClientBase:()=>kn,ErrorClientDuplicatedTransaction:()=>Zc,ErrorClientMaxFeeRateExceeded:()=>Xc,ErrorClientRBFRejected:()=>Gc,ErrorClientResolveUnknown:()=>Kc,ErrorClientVerification:()=>Wc,ErrorClientWaitTransactionTimeout:()=>Jc,ErrorTransactionInsufficientCapacity:()=>Fs,ErrorTransactionInsufficientCoin:()=>ca,HashTypeCodec:()=>B1,HasherCkb:()=>Oi,HasherKeecak256:()=>na,KnownScript:()=>re,One:()=>sm,OutPoint:()=>ze,RawTransaction:()=>nd,RequestorJsonRpc:()=>ta,Script:()=>ge,ScriptInfo:()=>Bo,ScriptOpt:()=>Yl,ScriptVec:()=>Tm,Signature:()=>pd,Signer:()=>Yt,SignerAlwaysError:()=>wd,SignerBtc:()=>la,SignerBtcPublicKeyReadonly:()=>md,SignerCkbPrivateKey:()=>yd,SignerCkbPublicKey:()=>da,SignerCkbScriptReadonly:()=>gd,SignerDoge:()=>Ro,SignerDogeAddressReadonly:()=>bd,SignerDogePrivateKey:()=>xd,SignerDummy:()=>No,SignerEvm:()=>pa,SignerEvmAddressReadonly:()=>Sd,SignerInfo:()=>hd,SignerNostr:()=>qs,SignerNostrPrivateKey:()=>_d,SignerNostrPublicKeyReadonly:()=>ha,SignerOpenLink:()=>vd,SignerSignType:()=>Le,SignerType:()=>gr,Since:()=>Ri,Transaction:()=>Te,WitnessArgs:()=>ar,Zero:()=>et,apply:()=>ue,btcEcdsaPublicKeyHash:()=>Ni,btcP2pkhAddressFromPublicKey:()=>cd,btcPublicKeyFromP2pkhAddress:()=>ad,btcVarLengthBytesFrom:()=>U1,buildNostrEventFromMessage:()=>cu,bytesConcat:()=>ke,bytesConcatTo:()=>En,bytesEq:()=>Hl,bytesFrom:()=>Q,bytesTo:()=>Ao,calcDaoClaimEpoch:()=>Am,calcDaoProfit:()=>H1,depTypeFrom:()=>ra,depTypeFromBytes:()=>M1,depTypeToBytes:()=>P1,epochFrom:()=>Qf,epochFromHex:()=>Zl,epochToHex:()=>Em,fixedPointFrom:()=>Do,fixedPointToString:()=>zl,hashCkb:()=>Br,hashTypeFrom:()=>Oo,hashTypeFromBytes:()=>tu,hashTypeId:()=>km,hashTypeToBytes:()=>eu,hexFrom:()=>z,isWebview:()=>Q5,keystoreDecrypt:()=>Dm,keystoreEncrypt:()=>Om,messageHashBtcEcdsa:()=>ou,messageHashCkbSecp256k1:()=>su,messageHashDogeEcdsa:()=>iu,mol:()=>W,nostrEventHash:()=>au,numBeFromBytes:()=>Xf,numBeToBytes:()=>Hs,numFrom:()=>$,numFromBytes:()=>ko,numLeFromBytes:()=>Co,numLeToBytes:()=>ss,numMax:()=>Fl,numMin:()=>Ul,numToBytes:()=>qe,numToHex:()=>Ut,reduceAsync:()=>An,sleep:()=>$l,stringify:()=>em,udtBalanceFrom:()=>fa,verifyMessageBtcEcdsa:()=>fd,verifyMessageCkbSecp256k1:()=>od,verifyMessageDogeEcdsa:()=>ud,verifyMessageEvmPersonal:()=>ld,verifyMessageJoyId:()=>id,verifyMessageNostrEvent:()=>dd});var Im=Ge(Jr(),1);var T1=Ge(G2(),1),J5=Uint8Array;function En(r,...e){return e.reduce((t,n)=>{let s=Q(n);for(let o of s)r.push(o);return t},r)}function ke(...r){return new Uint8Array(En([],...r))}function Ao(r,e){return T1.Buffer.from(Q(r)).toString(e)}function Q(r,e){if(r instanceof Uint8Array)return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(typeof r=="string"){if(e!==void 0)return T1.Buffer.from(r,e);let n=r.startsWith("0x")?r.slice(2):r,s=n.length%2===0?n:`0${n}`,o=T1.Buffer.from(s,"hex");if(o.length*2!==s.length)throw new Error(`Invalid bytes ${r}`);return o}if(Array.from(r).some(n=>n<0||255<n))throw new Error(`Invalid bytes ${JSON.stringify(r)}`);return new Uint8Array(r)}function Hl(r,e){if(r===e)return!0;let t=Q(r),n=Q(e);if(t.length!==n.length)return!1;for(let s=0;s<t.length;s++)if(t[s]!==n[s])return!1;return!0}function z(r){return`0x${Ao(Q(r),"hex")}`}var X5="ckb-default-hash";var Oi=class{constructor(e=32,t=X5){this.hasher=hp.create({personalization:t,dkLen:e})}update(e){return this.hasher.update(Q(e)),this}digest(){return z(this.hasher.digest())}};function Br(...r){let e=new Oi;return r.forEach(t=>e.update(t)),e.digest()}function Ul(r,...e){let t=$(r);return e.forEach(n=>{let s=$(n);s<t&&(t=s)}),t}function Fl(r,...e){let t=$(r);return e.forEach(n=>{let s=$(n);s>t&&(t=s)}),t}function $(r){if(typeof r=="bigint")return r;if(r==="0x")return BigInt(0);if(typeof r=="string"||typeof r=="number")return BigInt(r);let e=z(r);return BigInt(e)}function Ut(r){return`0x${$(r).toString(16)}`}function qe(r,e){return ss(r,e)}function ss(r,e){return Hs(r,e).reverse()}function Hs(r,e){let t=$(r);if(t<$(0)){if(e==null)throw Error("negative number can not be serialized without knowing bytes length");if(t=($(1)<<$(8)*$(e))+t,t<0)throw Error("negative number underflow")}let n=Q(t.toString(16));if(e==null)return n;if(n.length>e)throw Error("number overflow");return ke("00".repeat(e-n.length),n)}function ko(r){return Co(r)}function Co(r){return Xf(Q(r).map(e=>e).reverse())}function Xf(r){return $(Q(r))}var E1=$(1e7),Y5=$(1e3);function Di([r,e]){return[$(r),$(e)]}function ue(r,e){if(e!=null)return r(e)}async function An(r,e,t){if(t===void 0){if(r.length===0)throw new TypeError("Reduce of empty array with no initial value");t=r[0],r=r.slice(1)}return r.reduce((n,s,o,i)=>n.then(c=>Promise.resolve(e(c,s,o,i)).then(a=>a??c)),Promise.resolve(t))}function $l(r){return new Promise(e=>setTimeout(e,Number($(r))))}function Q5(r){return/webview|wv|ip((?!.*Safari)|(?=.*like Safari))/i.test(r)}function em(r){return JSON.stringify(r,(e,t)=>typeof t=="bigint"?Ut(t):t)}var Pi=class r{constructor(e,t){this.cellDep=e,this.type=t}static from(e){return e instanceof r?e:new r(jr.from(e.cellDep),ue(ge.from,e.type))}},Bo=class r{constructor(e,t,n){this.codeHash=e,this.hashType=t,this.cellDeps=n}static from(e){return e instanceof r?e:new r(z(e.codeHash),Oo(e.hashType),e.cellDeps.map(t=>Pi.from(t)))}},Io=class r{constructor(e,t,n,s,o,i,c){this.transaction=e,this.status=t,this.cycles=n,this.blockHash=s,this.blockNumber=o,this.txIndex=i,this.reason=c}static from(e){return e instanceof r?e:new r(Te.from(e.transaction),e.status,ue($,e.cycles),ue(z,e.blockHash),ue($,e.blockNumber),ue($,e.txIndex),e.reason)}clone(){return new r(this.transaction.clone(),this.status,this.cycles,this.blockHash,this.blockNumber,this.txIndex,this.reason)}},jc=class r{constructor(e,t,n,s,o,i,c){this.script=e,this.scriptLenRange=t,this.outputData=n,this.outputDataSearchMode=s,this.outputDataLenRange=o,this.outputCapacityRange=i,this.blockRange=c}static from(e){return e instanceof r?e:new r(ue(ge.from,e.script),ue(Di,e.scriptLenRange),ue(z,e.outputData),e.outputDataSearchMode??void 0,ue(Di,e.outputDataLenRange),ue(Di,e.outputCapacityRange),ue(Di,e.blockRange))}},os=class r{constructor(e,t,n,s,o){this.script=e,this.scriptType=t,this.scriptSearchMode=n,this.filter=s,this.withData=o}static from(e){return e instanceof r?e:new r(ge.from(e.script),e.scriptType,e.scriptSearchMode,ue(jc.from,e.filter),e.withData??void 0)}},zc=class r{constructor(e,t,n,s,o){this.script=e,this.scriptType=t,this.scriptSearchMode=n,this.filter=s,this.groupByTransaction=o}static from(e){return e instanceof r?e:new r(ge.from(e.script),e.scriptType,e.scriptSearchMode,ue(jc.from,e.filter),e.groupByTransaction??void 0)}},an=class r{constructor(e,t,n,s,o,i,c,a,u,d,y,v){this.compactTarget=e,this.dao=t,this.epoch=n,this.extraHash=s,this.hash=o,this.nonce=i,this.number=c,this.parentHash=a,this.proposalsHash=u,this.timestamp=d,this.transactionsRoot=y,this.version=v}static from(e){return e instanceof r?e:new r($(e.compactTarget),{c:$(e.dao.c),ar:$(e.dao.ar),s:$(e.dao.s),u:$(e.dao.u)},Qf(e.epoch),z(e.extraHash),z(e.hash),$(e.nonce),$(e.number),z(e.parentHash),z(e.proposalsHash),$(e.timestamp),z(e.transactionsRoot),$(e.version))}},Yf=class r{constructor(e,t){this.header=e,this.proposals=t}static from(e){return e instanceof r?e:new r(an.from(e.header),e.proposals.map(z))}},Vc=class r{constructor(e,t,n,s){this.header=e,this.proposals=t,this.transactions=n,this.uncles=s}static from(e){return e instanceof r?e:new r(an.from(e.header),e.proposals.map(z),e.transactions.map(Te.from),e.uncles.map(Yf.from))}},kn=class extends Error{constructor(e){super(`Client request error ${e.message}`),this.code=e.code,this.data=e.data}},Kc=class extends kn{constructor(e,t){super(e),this.outPoint=ze.from(t)}},Wc=class extends kn{constructor(e,t,n,s,o,i){super(e),this.source=t,this.errorCode=s,this.scriptHashType=o,this.sourceIndex=$(n),this.scriptCodeHash=z(i)}},Zc=class extends kn{constructor(e,t){super(e),this.txHash=z(t)}},Gc=class extends kn{constructor(e,t,n){super(e),this.currentFee=$(t),this.leastFee=$(n)}},Jc=class extends kn{constructor(e){let t=$(e).toString();super({message:`Wait transaction timeout ${t}ms`,data:JSON.stringify({timeout:t})})}},Xc=class extends kn{constructor(e,t){let n=$(e).toString(),s=$(t).toString();super({message:`Max fee rate exceeded limit ${n}, actual ${s}. Developer might forgot to complete transaction fee before sending. See https://api.ckbccc.com/classes/_ckb_ccc_core.index.ccc.Transaction.html#completeFeeBy.`,data:JSON.stringify({limit:n,actual:s})})}};var jl=$(1e3*10*50);function rm(r,e,t){if(!e)return!0;let n=z(r),s=z(e);return!(t==="exact"&&n!==s||t==="prefix"&&!n.startsWith(s)||t==="partial"&&n.search(s)===-1)}function ql(r,e,t){if(!e)return!0;if(!r)return!1;let n=ge.from(r),s=ge.from(e);return n.codeHash!==s.codeHash||n.hashType!==s.hashType?!1:rm(n.args,s?.args,t)}function A1(r,e){if(!e)return!0;let t=$(r),[n,s]=Di(e);return n<=t&&t<s}function tm(r,e){if(!e)return!0;let t=r?Q(ge.from(r).args).length+33:0;return A1(t,e)}function nm(r,e){let t=os.from(r),n=Xt.from(e);return!(t.scriptType==="lock"&&(!ql(n.cellOutput.lock,t.script,t.scriptSearchMode)||!ql(n.cellOutput.type,t.filter?.script,"prefix")||!tm(n.cellOutput.type,t.filter?.scriptLenRange))||t.scriptType==="type"&&(!ql(n.cellOutput.type,t.script,t.scriptSearchMode)||!ql(n.cellOutput.lock,t.filter?.script,"prefix")||!tm(n.cellOutput.lock,t.filter?.scriptLenRange))||!rm(n.outputData,t.filter?.outputData,t.filter?.outputDataSearchMode??"prefix")||!A1(Q(n.outputData).length,t.filter?.outputDataLenRange)||!A1(n.cellOutput.capacity,t.filter?.outputCapacityRange))}var Mi=class extends Map{constructor(e){if(super(),this.capacity=e,this.lru=new Set,!Number.isInteger(e)||e<1)throw new Error("Capacity must be a positive integer")}get(e){if(super.has(e))return this.lru.delete(e),this.lru.add(e),super.get(e)}set(e,t){if(super.set(e,t),this.lru.delete(e),this.lru.add(e),this.lru.size>this.capacity){let n=this.lru.keys().next().value;this.delete(n)}return this}delete(e){return super.delete(e)?(this.lru.delete(e),!0):!1}clear(){super.clear(),this.lru.clear()}};var Yc=class{async markUsable(...e){return await this.recordCells(...e),this.markUsableNoCache(...e)}async markTransactions(...e){await Promise.all([this.recordTransactionResponses(e.flat().map(t=>({transaction:t,status:"sent"}))),...e.flat().map(t=>{let n=Te.from(t),s=n.hash();return Promise.all([...n.inputs.map(o=>this.markUnusable(o.previousOutput)),...n.outputs.map((o,i)=>this.markUsable({cellOutput:o,outputData:n.outputsData[i],outPoint:{txHash:s,index:i}}))])})])}async recordCells(...e){}async getCell(e){}async recordTransactionResponses(...e){}async getTransactionResponse(e){}async recordTransactions(...e){return this.recordTransactionResponses(e.flat().map(t=>({transaction:t,status:"unknown"})))}async getTransaction(e){return(await this.getTransactionResponse(e))?.transaction}async recordHeaders(...e){}async getHeaderByHash(e){}async getHeaderByNumber(e){}async recordBlocks(...e){}async getBlockByHash(e){}async getBlockByNumber(e){}hasHeaderConfirmed(e){return $(Date.now())-e.timestamp>=jl}};var Qc=class extends Yc{constructor(e=512,t=256,n=128,s=jl){super(),this.maxCells=e,this.maxTxs=t,this.maxBlocks=n,this.cells=new Mi(this.maxCells),this.knownTransactions=new Mi(this.maxTxs),this.knownBlockHashes=new Mi(this.maxBlocks),this.knownBlocks=new Mi(this.maxBlocks),this.confirmedBlockTime=$(s)}async markUsableNoCache(...e){e.flat().forEach(t=>{let n=Xt.from(t).clone(),s=z(n.outPoint.toBytes());this.cells.set(s,[!0,n])})}async markUnusable(...e){e.flat().forEach(t=>{let n=ze.from(t),s=z(n.toBytes()),o=this.cells.get(s);if(o){o[0]=!1;return}this.cells.set(s,[!1,{outPoint:n}])})}async clear(){this.cells.clear(),this.knownTransactions.clear()}async*findCells(e){for(let[t,[n,s]]of this.cells.entries())n&&nm(e,s)&&(this.cells.get(t),yield s.clone())}async isUnusable(e){let t=ze.from(e);return!(this.cells.get(z(t.toBytes()))?.[0]??!0)}async recordCells(...e){e.flat().map(t=>{let n=Xt.from(t),s=z(n.outPoint.toBytes());this.cells.get(s)||this.cells.set(s,[void 0,n])})}async getCell(e){let t=ze.from(e),n=this.cells.get(z(t.toBytes()))?.[1];if(n&&n.cellOutput&&n.outputData)return Xt.from(n.clone())}async recordTransactionResponses(...e){e.flat().map(t=>{let n=Io.from(t);this.knownTransactions.set(n.transaction.hash(),n)})}async getTransactionResponse(e){let t=z(e);return this.knownTransactions.get(t)?.clone()}async recordHeaders(...e){e.flat().map(t=>{let n=an.from(t);this.knownBlockHashes.set(n.number,n.hash),!this.knownBlocks.get(n.hash)&&this.knownBlocks.set(n.hash,{header:n})})}async getHeaderByHash(e){let t=z(e),n=this.knownBlocks.get(t);return n&&this.knownBlockHashes.get(n.header.number),n?.header}async getHeaderByNumber(e){let t=$(e),n=this.knownBlockHashes.get(t);if(n)return this.getHeaderByHash(n)}async recordBlocks(...e){e.flat().map(t=>{let n=Vc.from(t);this.knownBlockHashes.set(n.header.number,n.header.hash),this.knownBlocks.set(n.header.hash,n)})}async getBlockByHash(e){let t=z(e),n=this.knownBlocks.get(t);if(n&&(this.knownBlockHashes.get(n.header.number),"transactions"in n))return n}async getBlockByNumber(e){let t=$(e),n=this.knownBlockHashes.get(t);if(n)return this.getBlockByHash(n)}hasHeaderConfirmed(e){return $(Date.now())-e.timestamp>=this.confirmedBlockTime}};function zl(r,e=8){let t=Do(r).toString();if(e===0)return t;let n=t.length<=e?"0":t.slice(0,-e),s=t.slice(-e).padStart(e,"0").replace(/0*$/,"");return s===""?n:`${n}.${s}`}function Do(r,e=8){if(typeof r=="bigint")return r;let[t,n]=(typeof r=="number"?r.toFixed(e):r.toString()).split("."),s=BigInt(t.padEnd(t.length+e,"0"));return n===void 0?s:s+BigInt(n.slice(0,e).padEnd(e,"0"))}var et=0n,sm=Do("1");var ea=class{constructor(e){this.cache=e?.cache??new Qc}async getFeeRate(e,t){let n=Fl((await this.getFeeRateStatistics(e)).median,Y5),s=$(t?.maxFeeRate??E1);return s===et?n:Ul(n,s)}async getBlockByNumber(e,t,n){let s=await this.cache.getBlockByNumber(e);if(s)return s;let o=await this.getBlockByNumberNoCache(e,t,n);return o&&this.cache.hasHeaderConfirmed(o.header)&&await this.cache.recordBlocks(o),o}async getBlockByHash(e,t,n){let s=await this.cache.getBlockByHash(e);if(s)return s;let o=await this.getBlockByHashNoCache(e,t,n);return o&&this.cache.hasHeaderConfirmed(o.header)&&await this.cache.recordBlocks(o),o}async getHeaderByNumber(e,t){let n=await this.cache.getHeaderByNumber(e);if(n)return n;let s=await this.getHeaderByNumberNoCache(e,t);return s&&this.cache.hasHeaderConfirmed(s)&&await this.cache.recordHeaders(s),s}async getHeaderByHash(e,t){let n=await this.cache.getHeaderByHash(e);if(n)return n;let s=await this.getHeaderByHashNoCache(e,t);return s&&this.cache.hasHeaderConfirmed(s)&&await this.cache.recordHeaders(s),s}async getCell(e){let t=ze.from(e),n=await this.cache.getCell(t);if(n)return n;let s=await this.getTransaction(t.txHash);if(!s)return;let o=s.transaction.getOutput(t.index);if(!o)return;let i=Xt.from({...o,outPoint:t});return await this.cache.recordCells(i),i}async getCellWithHeader(e){let t=ze.from(e),n=await this.getTransactionWithHeader(t.txHash);if(!n)return;let{transaction:s,header:o}=n,i=s.transaction.getOutput(t.index);if(!i)return;let c=Xt.from({...i,outPoint:t});return await this.cache.recordCells(c),{cell:c,header:o}}async getCellLive(e,t,n){let s=await this.getCellLiveNoCache(e,t,n);return t&&s&&await this.cache.recordCells(s),s}async findCellsPaged(e,t,n,s){let o=await this.findCellsPagedNoCache(e,t,n,s);return await this.cache.recordCells(o.cells),o}async*findCellsOnChain(e,t,n=10){let s;for(;;){let{cells:o,lastCursor:i}=await this.findCellsPaged(e,t,n,s);for(let c of o)yield c;if(o.length===0||o.length<n)return;s=i}}async*findCells(e,t,n=10){let s=os.from(e),o=[];for await(let i of this.cache.findCells(s))o.push(i.outPoint),yield i;for await(let i of this.findCellsOnChain(s,t,n))await this.cache.isUnusable(i.outPoint)||o.some(c=>c.eq(i.outPoint))||(yield i)}findCellsByLock(e,t,n=!0,s,o=10){return this.findCells({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{script:t},withData:n},s,o)}findCellsByType(e,t=!0,n,s=10){return this.findCells({script:e,scriptType:"type",scriptSearchMode:"exact",withData:t},n,s)}async findSingletonCellByType(e,t=!1){for await(let n of this.findCellsByType(e,t,void 0,1))return n}async getCellDeps(...e){return Promise.all(e.flat().map(async t=>{let{cellDep:n,type:s}=Pi.from(t);if(s===void 0)return n;let o=await this.findSingletonCellByType(s);return o?jr.from({outPoint:o.outPoint,depType:n.depType}):n}))}async*findTransactions(e,t,n=10){let s;for(;;){let{transactions:o,lastCursor:i}=await this.findTransactionsPaged(e,t,n,s);for(let c of o)yield c;if(o.length===0||o.length<n)return;s=i}}findTransactionsByLock(e,t,n,s,o=10){return this.findTransactions({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{script:t},groupByTransaction:n},s,o)}findTransactionsByType(e,t,n,s=10){return this.findTransactions({script:e,scriptType:"type",scriptSearchMode:"exact",groupByTransaction:t},n,s)}async getBalanceSingle(e){return this.getCellsCapacity({script:e,scriptType:"lock",scriptSearchMode:"exact",filter:{scriptLenRange:[0,1],outputDataLenRange:[0,1]}})}async getBalance(e){return An(e,async(t,n)=>t+await this.getBalanceSingle(n),et)}async sendTransaction(e,t,n){let s=Te.from(e),o=$(n?.maxFeeRate??E1),i=await s.getFeeRate(this);if(o>et&&i>o)throw new Xc(o,i);let c=await this.sendTransactionNoCache(s,t);return await this.cache.markTransactions(s),c}async getTransaction(e){let t=z(e),n=await this.getTransactionNoCache(t);return n?(await this.cache.recordTransactionResponses(n),n):this.cache.getTransactionResponse(t)}async getTransactionWithHeader(e){let t=z(e),n=await this.cache.getTransactionResponse(t);if(n?.blockHash){let o=await this.getHeaderByHash(n.blockHash);if(o&&this.cache.hasHeaderConfirmed(o))return{transaction:n,header:o}}let s=await this.getTransactionNoCache(t);if(s)return await this.cache.recordTransactionResponses(s),{transaction:s,header:s.blockHash?await this.getHeaderByHash(s.blockHash):void 0}}async waitTransaction(e,t=0,n=6e4,s=2e3){let o=Date.now(),i,c=async()=>{let a=await this.getTransaction(e);if(!(!a||a.blockNumber==null||["sent","pending","proposed"].includes(a.status)))return i=a,a};for(;;){if(i){if(t===0)return i;if((await this.getTipHeader()).number-i.blockNumber>=t)return i}else if(await c())continue;if(Date.now()-o+s>=n)throw new Jc(n);await $l(s)}}};var re;(function(r){r.NervosDao="NervosDao",r.Secp256k1Blake160="Secp256k1Blake160",r.Secp256k1Multisig="Secp256k1Multisig",r.Secp256k1MultisigV2="Secp256k1MultisigV2",r.AnyoneCanPay="AnyoneCanPay",r.TypeId="TypeId",r.XUdt="XUdt",r.JoyId="JoyId",r.COTA="COTA",r.PWLock="PWLock",r.OmniLock="OmniLock",r.NostrLock="NostrLock",r.UniqueType="UniqueType",r.AlwaysSuccess="AlwaysSuccess",r.InputTypeProxyLock="InputTypeProxyLock",r.OutputTypeProxyLock="OutputTypeProxyLock",r.LockProxyLock="LockProxyLock",r.SingleUseLock="SingleUseLock",r.TypeBurnLock="TypeBurnLock",r.EasyToDiscoverType="EasyToDiscoverType",r.TimeLock="TimeLock"})(re||(re={}));var om=Object.freeze({[re.NervosDao]:{codeHash:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xe2fb199810d49a4d8beec56718ba2593b665db9d52299a0f9e6e75416d73ff5c",index:2},depType:"code"}}]},[re.Secp256k1Blake160]:{codeHash:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}}]},[re.Secp256k1Multisig]:{codeHash:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:1},depType:"depGroup"}}]},[re.Secp256k1MultisigV2]:{codeHash:"0x36c971b8d41fbd94aabca77dc75e826729ac98447b46f91e00796155dddb0d29",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x6888aa39ab30c570c2c30d9d5684d3769bf77265a7973211a3c087fe8efbf738",index:0},depType:"depGroup"}}]},[re.AnyoneCanPay]:{codeHash:"0xd369597ff47f29fbc0d47d2e3775370d1250b85140c670e4718af712983a2354",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x4153a2014952d7cac45f285ce9a7c5c0c0e1b21f2d378b82ac1433cb11c25c4d",index:0},depType:"depGroup"}}]},[re.TypeId]:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",cellDeps:[]},[re.XUdt]:{codeHash:"0x50bd8d6680b8b9cf98b73f3c08faf8b2a21914311954118ad6609be6e78a1b95",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xc07844ce21b38e4b071dd0e1ee3b0e27afd8d7532491327f39b786343f558ab7",index:0},depType:"code"}}]},[re.JoyId]:{codeHash:"0xd00c84f0ec8fd441c38bc3f87a371f547190f2fcff88e642bc5bf54b9e318323",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x2d1f2d4d1514ccc3bb4f04f5437a5ae30d00636ee57cedd2c70ab3ea75b62adc"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xc086090432098835ec542a1b94bdd1b842c5aa1ccd1616873fe77f4a04044417"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:2},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x165b225c6fbed7e655b024384d9083de3243375f9893706f4452858ecd694e96"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:3},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xafb8408d0094ab944e6286aac750b9bb854ac0bcb66dfe5c60559744a700e70c"}},{cellDep:{outPoint:{txHash:"0x8a605a4402cadda69fa64fd25cbbd74058e3eb86a7a72aee3d25df278564d31b",index:4},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x773bf0647be24b4e18ef44068fd069b9de5549c4b86be227779ceb9179598ec4"}}]},[re.COTA]:{codeHash:"0x1122a4fb54697cf2e6e3a96c9d80fd398a936559b90954c6e88eb7ba0cf652df",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xabaa25237554f0d6c586dc010e7e85e6870bcfd9fb8773257ecacfbe1fd738a0",index:0},depType:"depGroup"}}]},[re.PWLock]:{codeHash:"0xbf43c3602455798c1a61a596e0d95278864c552fafe231c063b3fabf97a8febc",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0x1d60cb8f4666e039f418ea94730b1a8c5aa0bf2f7781474406387462924d15d4",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x42ade2f25eb938b5dbfd3d8f07b8b07aa593d848e7ff14bdfbbea5aeb6175261"}}]},[re.OmniLock]:{codeHash:"0x9b819793a64463aed77c615d6cb226eea5487ccfc0783043a587254cda2b6f26",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x71a7ba8fc96349fea0ed3a5c47992e3b4084b031a42264a018e0072e8172e46c",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0xc76edf469816aa22f416503c38d0b533d2a018e253e379f134c3985b3472c842",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x855508fe0f0ca25b935b070452ecaee48f6c9f1d66cd15f046616b99e948236a"}}]},[re.NostrLock]:{codeHash:"0x641a89ad2f77721b803cd50d01351c1f308444072d5fa20088567196c0574c68",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x1911208b136957d5f7c1708a8835edfe8ae1d02700d5cb2c3a6aacf4d5906306",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xfad8cb75eb0bb01718e2336002064568bc05887af107f74ed5dd501829e192f8"}}]},[re.UniqueType]:{codeHash:"0x2c8c11c985da60b0a330c61a85507416d6382c130ba67f0c47ab071e00aec628",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x67524c01c0cb5492e499c7c7e406f2f9d823e162d6b0cf432eacde0c9808c2ad",index:0},depType:"code"}}]},[re.AlwaysSuccess]:{codeHash:"0x3b521cc4b552f109d092d8cc468a8048acb53c5952dbe769d2b2f9cf6e47f7f1",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:0},depType:"code"}}]},[re.InputTypeProxyLock]:{codeHash:"0x5123908965c711b0ffd8aec642f1ede329649bda1ebdca6bd24124d3796f768a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:1},depType:"code"}}]},[re.OutputTypeProxyLock]:{codeHash:"0x2df53b592db3ae3685b7787adcfef0332a611edb83ca3feca435809964c3aff2",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:2},depType:"code"}}]},[re.LockProxyLock]:{codeHash:"0x5d41e32e224c15f152b7e6529100ebeac83b162f5f692a5365774dad2c1a1d02",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:3},depType:"code"}}]},[re.SingleUseLock]:{codeHash:"0x8290467a512e5b9a6b816469b0edabba1f4ac474e28ffdd604c2a7c76446bbaf",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:4},depType:"code"}}]},[re.TypeBurnLock]:{codeHash:"0xff78bae0abf17d7a404c0be0f9ad9c9185b3f88dcc60403453d5ba8e1f22f53a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x10d63a996157d32c01078058000052674ca58d15f921bec7f1dcdac2160eb66b",index:5},depType:"code"}}]},[re.EasyToDiscoverType]:{codeHash:"0xaba4430cc7110d699007095430a1faa72973edf2322ddbfd4d1d219cacf237af",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb0ed754fb27d67fd8388c97fed914fb7998eceaa01f3e6f967e498de1ba0ac9b",index:0},depType:"code"}}]},[re.TimeLock]:{codeHash:"0x6fac4b2e89360a1e692efcddcb3a28656d8446549fb83da6d896db8b714f4451",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb0ed754fb27d67fd8388c97fed914fb7998eceaa01f3e6f967e498de1ba0ac9b",index:1},depType:"code"}}]}});var Vl=class{constructor(e,t=3e4){this.url=e,this.timeout=t}async request(e){let t=new AbortController,n=setTimeout(()=>t.abort(),this.timeout),s=await(await fetch(this.url,{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(e),signal:t.signal})).json();return clearTimeout(n),s}};var Kl=class{constructor(e,t=3e4){this.url=e,this.timeout=t,this.ongoing=new Map}request(e){let t=(()=>{if(this.socket&&this.socket.readyState!==this.socket.CLOSING&&this.socket.readyState!==this.socket.CLOSED&&this.openSocket)return this.openSocket;let n=new Pn(this.url),s=({data:i})=>{let c=JSON.parse(i);if(typeof c!="object"||c===null||typeof c.id!="number")throw new Error(`Unknown response ${i}`);let a=c.id,u=this.ongoing.get(a);if(!u)return;let[d,y,v]=u;clearTimeout(v),this.ongoing.delete(a),d(c)},o=()=>{this.ongoing.forEach(([i,c,a])=>{clearTimeout(a),c(new Error("Connection closed"))}),this.ongoing.clear()};return n.onclose=o,n.onerror=o,n.onmessage=s,this.socket=n,this.openSocket=new Promise(i=>{n.readyState===n.OPEN?i(n):n.onopen=()=>{i(n)}}),this.openSocket})();return new Promise((n,s)=>{let o=[n,s,setTimeout(()=>{this.ongoing.delete(e.id),t.then(i=>i.close()).catch(i=>s(i)),s(new Error("Request timeout"))},this.timeout)];this.ongoing.set(e.id,o),t.then(i=>{i.readyState===i.CLOSED||i.readyState===i.CLOSING?(clearTimeout(o[2]),this.ongoing.delete(e.id),s(new Error("Connection closed"))):i.send(JSON.stringify(e))}).catch(i=>s(i))})}};function im(r,e){return r.startsWith("wss://")||r.startsWith("ws://")?new Kl(r,e?.timeout):new Vl(r,e?.timeout)}var Wl=class{constructor(e){this.transports=e,this.i=0}async request(e){let t=0;for(;;)try{return await this.transports[this.i%this.transports.length].request(e)}catch(n){if(t+=1,this.i+=1,t>=this.transports.length)throw n}}};function xw(r,e){return e?e(r):r}var ta=class{constructor(e,t,n){this.url_=e,this.onError=n,this.concurrent=0,this.pending=[],this.id=0,this.maxConcurrent=t?.maxConcurrent,this.transport=t?.transport??new Wl(Array.from(new Set([e,...t?.fallbacks??[]]).values(),s=>im(s,t)))}get url(){return this.url_}async request(e,t,n,s){let o=this.buildPayload(e,n?await Promise.all(t.concat(Array.from(new Array(Math.max(n.length-t.length,0)))).map((i,c)=>xw(i,n[c]))):t);try{return await xw(await this.requestPayload(o),s)}catch(i){if(!this.onError)throw i;await this.onError(i)}}async requestPayload(e){this.maxConcurrent!==void 0&&this.concurrent>=this.maxConcurrent&&await new Promise(s=>this.pending.push(s)),this.concurrent+=1;let t=await this.transport.request(e);if(this.concurrent-=1,this.pending.shift()?.(),t.id!==e.id)throw new Error(`Id mismatched, got ${t.id}, expected ${e.id}`);if(t.error!=null)throw t.error;return t.result}buildPayload(e,t){return{id:this.id++,method:e,params:t,jsonrpc:"2.0"}}};var Ft=class r{static hashTypeFrom(e){return Oo(e)}static hashTypeTo(e){return e}static depTypeFrom(e){switch(ra(e)){case"code":return"code";case"depGroup":return"dep_group"}}static depTypeTo(e){switch(e){case"code":return"code";case"dep_group":return"depGroup"}}static scriptFrom(e){let t=ge.from(e);return{code_hash:t.codeHash,hash_type:r.hashTypeFrom(t.hashType),args:t.args}}static scriptTo(e){return ge.from({codeHash:e.code_hash,hashType:r.hashTypeTo(e.hash_type),args:e.args})}static outPointFrom(e){let t=ze.from(e);return{index:Ut(t.index),tx_hash:t.txHash}}static outPointTo(e){return ze.from({index:e.index,txHash:e.tx_hash})}static cellInputFrom(e){let t=zr.from(e);return{previous_output:r.outPointFrom(t.previousOutput),since:Ut(t.since)}}static cellInputTo(e){return zr.from({previousOutput:r.outPointTo(e.previous_output),since:e.since})}static cellOutputFrom(e,t){let n=fn.from(e,t);return{capacity:Ut(n.capacity),lock:r.scriptFrom(n.lock),type:ue(r.scriptFrom,n.type)}}static cellOutputTo(e){return fn.from({capacity:e.capacity,lock:r.scriptTo(e.lock),type:ue(r.scriptTo,e.type)})}static cellDepFrom(e){return{out_point:r.outPointFrom(e.outPoint),dep_type:r.depTypeFrom(e.depType)}}static cellDepTo(e){return jr.from({outPoint:r.outPointTo(e.out_point),depType:r.depTypeTo(e.dep_type)})}static transactionFrom(e){let t=Te.from(e);return{version:Ut(t.version),cell_deps:t.cellDeps.map(n=>r.cellDepFrom(n)),header_deps:t.headerDeps,inputs:t.inputs.map(n=>r.cellInputFrom(n)),outputs:t.outputs.map(n=>r.cellOutputFrom(n)),outputs_data:t.outputsData,witnesses:t.witnesses}}static transactionTo(e){return Te.from({version:e.version,cellDeps:e.cell_deps.map(t=>r.cellDepTo(t)),headerDeps:e.header_deps,inputs:e.inputs.map(t=>r.cellInputTo(t)),outputs:e.outputs.map(t=>r.cellOutputTo(t)),outputsData:e.outputs_data,witnesses:e.witnesses})}static transactionResponseTo({cycles:e,tx_status:{status:t,block_number:n,block_hash:s,tx_index:o,reason:i},transaction:c}){if(c!=null)return Io.from({transaction:r.transactionTo(c),status:t,cycles:ue($,e),blockHash:ue(z,s),blockNumber:ue($,n),txIndex:ue($,o),reason:i})}static blockHeaderTo(e){let t=Q(e.dao);return{compactTarget:$(e.compact_target),dao:{c:Co(t.slice(0,8)),ar:Co(t.slice(8,16)),s:Co(t.slice(16,24)),u:Co(t.slice(24,32))},epoch:Zl(e.epoch),extraHash:e.extra_hash,hash:e.hash,nonce:$(e.nonce),number:$(e.number),parentHash:e.parent_hash,proposalsHash:e.proposals_hash,timestamp:$(e.timestamp),transactionsRoot:e.transactions_root,version:$(e.version)}}static blockUncleTo(e){return{header:r.blockHeaderTo(e.header),proposals:e.proposals}}static blockTo(e){return{header:r.blockHeaderTo(e.header),proposals:e.proposals,transactions:e.transactions.map(t=>r.transactionTo(t)),uncles:e.uncles.map(t=>r.blockUncleTo(t))}}static rangeFrom([e,t]){return[Ut(e),Ut(t)]}static indexerSearchKeyFilterFrom(e){return{script:ue(r.scriptFrom,e.script),script_len_range:ue(r.rangeFrom,e.scriptLenRange),output_data:e.outputData,output_data_filter_mode:e.outputDataSearchMode,output_data_len_range:ue(r.rangeFrom,e.outputDataLenRange),output_capacity_range:ue(r.rangeFrom,e.outputCapacityRange),block_range:ue(r.rangeFrom,e.blockRange)}}static indexerSearchKeyFrom(e){let t=os.from(e);return{script:r.scriptFrom(t.script),script_type:t.scriptType,script_search_mode:t.scriptSearchMode,filter:ue(r.indexerSearchKeyFilterFrom,t.filter),with_data:t.withData}}static findCellsResponseTo({last_cursor:e,objects:t}){return{lastCursor:e,cells:t.map(n=>Xt.from({outPoint:r.outPointTo(n.out_point),cellOutput:r.cellOutputTo(n.output),outputData:n.output_data??"0x"}))}}static indexerSearchKeyTransactionFrom(e){let t=zc.from(e);return{script:r.scriptFrom(t.script),script_type:t.scriptType,script_search_mode:t.scriptSearchMode,filter:ue(r.indexerSearchKeyFilterFrom,t.filter),group_by_transaction:t.groupByTransaction}}static findTransactionsResponseTo({last_cursor:e,objects:t}){return t.length===0?{lastCursor:e,transactions:[]}:"io_index"in t[0]?{lastCursor:e,transactions:t.map(n=>({txHash:n.tx_hash,blockNumber:$(n.block_number),txIndex:$(n.tx_index),cellIndex:$(n.io_index),isInput:n.io_type==="input"}))}:{lastCursor:e,transactions:t.map(n=>({txHash:n.tx_hash,blockNumber:$(n.block_number),txIndex:$(n.tx_index),cells:n.cells.map(([s,o])=>({isInput:s==="input",cellIndex:$(o)}))}))}}};var oO=[["Resolve\\(Unknown\\(OutPoint\\((0x.*)\\)\\)\\)",(r,e)=>new Kc(r,ze.fromBytes(e[1]))],["Verification\\(Error { kind: Script, inner: TransactionScriptError { source: (Inputs|Outputs)\\[([0-9]*)\\].(Lock|Type), cause: ValidationFailure: see error code (-?[0-9])* on page https://nervosnetwork\\.github\\.io/ckb-script-error-codes/by-(type|data)-hash/(.*)\\.html",(r,e)=>new Wc(r,e[3]==="Lock"?"lock":e[1]==="Inputs"?"inputType":"outputType",e[2],Number(e[4]),e[5]==="data"?"data":"type",e[6])],["Duplicated\\(Byte32\\((0x.*)\\)\\)",(r,e)=>new Zc(r,e[1])],[`RBFRejected\\("Tx's current fee is ([0-9]*), expect it to >= ([0-9]*) to replace old txs"\\)`,(r,e)=>new Gc(r,e[1],e[2])]],Po=class extends ea{constructor(e,t){super(t),this.getFeeRateStatistics=this.buildSender("get_fee_rate_statistics",[n=>ue($,n)],({mean:n,median:s})=>({mean:$(n),median:$(s)})),this.getTip=this.buildSender("get_tip_block_number",[],$),this.getTipHeader=this.buildSender("get_tip_header",[],n=>ue(Ft.blockHeaderTo,n)),this.getBlockByNumberNoCache=this.buildSender("get_block_by_number",[n=>Ut($(n))],n=>ue(Ft.blockTo,n)),this.getBlockByHashNoCache=this.buildSender("get_block",[z],n=>ue(Ft.blockTo,n)),this.getHeaderByNumberNoCache=this.buildSender("get_header_by_number",[n=>Ut($(n))],n=>ue(Ft.blockHeaderTo,n)),this.getHeaderByHashNoCache=this.buildSender("get_header",[z],n=>ue(Ft.blockHeaderTo,n)),this.estimateCycles=this.buildSender("estimate_cycles",[Ft.transactionFrom],({cycles:n})=>$(n)),this.sendTransactionDry=this.buildSender("test_tx_pool_accept",[Ft.transactionFrom],({cycles:n})=>$(n)),this.sendTransactionNoCache=this.buildSender("send_transaction",[Ft.transactionFrom,n=>n??void 0],z),this.getTransactionNoCache=this.buildSender("get_transaction",[z],Ft.transactionResponseTo),this.findCellsPagedNoCache=this.buildSender("get_cells",[Ft.indexerSearchKeyFrom,n=>n??"asc",n=>Ut(n??10)],Ft.findCellsResponseTo),this.findTransactionsPaged=this.buildSender("get_transactions",[Ft.indexerSearchKeyTransactionFrom,n=>n??"asc",n=>Ut(n??10)],Ft.findTransactionsResponseTo),this.getCellsCapacity=this.buildSender("get_cells_capacity",[Ft.indexerSearchKeyFrom],({capacity:n})=>$(n)),this.requestor=t?.requestor??new ta(e,t,n=>{if(typeof n!="object"||n===null||!("data"in n)||typeof n.data!="string")throw n;let s=n;for(let[o,i]of oO){let c=s.data.match(o);if(c)throw i(s,c)}throw new kn(s)})}get url(){return this.requestor.url}getCellLiveNoCache(e,t,n){return this.buildSender("get_live_cell",[Ft.outPointFrom],({cell:s})=>ue(({output:o,data:i})=>Xt.from({cellOutput:Ft.cellOutputTo(o),outputData:i?.content??"0x",outPoint:e}),s))(e,t??!0,n)}buildSender(e,t,n){return async(...s)=>this.requestor.request(e,s,t,n)}};var Gl=class extends Po{constructor(e){let t=typeof Pn<"u";super(e?.url??(t?"wss://mainnet.ckb.dev/ws":"https://mainnet.ckb.dev/"),{...e,fallbacks:e?.fallbacks??(t?["wss://mainnet.ckb.dev/ws","https://mainnet.ckb.dev/","https://mainnet.ckbapp.dev/"]:["https://mainnet.ckb.dev/","https://mainnet.ckbapp.dev/"])}),this.config=e}get scripts(){return this.config?.scripts??om}get addressPrefix(){return"ckb"}async getKnownScript(e){let t=this.scripts[e];if(!t)throw new Error(`No script information was found for ${e} on ${this.addressPrefix}`);return Bo.from(t)}};var cm=Object.freeze({[re.NervosDao]:{codeHash:"0x82d76d1b75fe2fd9a27dfbaa65a039221a380d76c926f378d3f81cf3e7e13f2e",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x8f8c79eb6671709633fe6a46de93c0fedc9c1b8a6527a18d3983879542635c9f",index:2},depType:"code"}}]},[re.Secp256k1Blake160]:{codeHash:"0x9bd7e06f3ecf4be0f2fcd2188b23f1b9fcc88e5d4b65a8637b17723bbda3cce8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}}]},[re.Secp256k1Multisig]:{codeHash:"0x5c5069eb0857efc65e1bca0c07df34c31663b3622fd3876c876320fc9634e2a8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:1},depType:"depGroup"}}]},[re.Secp256k1MultisigV2]:{codeHash:"0x36c971b8d41fbd94aabca77dc75e826729ac98447b46f91e00796155dddb0d29",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x2eefdeb21f3a3edf697c28a52601b4419806ed60bb427420455cc29a090b26d5",index:0},depType:"depGroup"}}]},[re.AnyoneCanPay]:{codeHash:"0x3419a1c09eb2567f6552ee7a8ecffd64155cffe0f1796e6e61ec088d740c1356",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xec26b0f85ed839ece5f11c4c4e837ec359f5adc4420410f6453b1f6b60fb96a6",index:0},depType:"depGroup"}}]},[re.TypeId]:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",cellDeps:[]},[re.XUdt]:{codeHash:"0x25c29dc317811a6f6f3985a7a9ebc4838bd388d19d0feeecf0bcd60f6c0975bb",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xbf6fb538763efec2a70a6a3dcb7242787087e1030c4e7d86585bc63a9d337f5f",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x44ec8b96663e06cc94c8c468a4d46d7d9af69eaf418f6390c9f11bb763dda0ae"}}]},[re.JoyId]:{codeHash:"0xd23761b364210735c19c60561d213fb3beae2fd6172743719eff6920e020baac",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x4a596d31dc35e88fb1591debbf680b04a44b4a434e3a94453c21ea8950ffb4d9",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x1c9fc299ba0570d077b4d7fb9acff1ccc0de69d369942d82678bae937c44ec30"}},{cellDep:{outPoint:{txHash:"0x4a596d31dc35e88fb1591debbf680b04a44b4a434e3a94453c21ea8950ffb4d9",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x27f0d3ccdc2fcd52ae31fbacad5f86b97bc147d7093e4807cd6e3d21c1fe6841"}},{cellDep:{outPoint:{txHash:"0xf2c9dbfe7438a8c622558da8fa912d36755271ea469d3a25cb8d3373d35c8638",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x0ac15fe5b2d059ec39de03f2d3159d5463abb918a1a07a9fa00d2b9c61d89ef3"}},{cellDep:{outPoint:{txHash:"0x95ecf9b41701b45d431657a67bbfa3f07ef7ceb53bf87097f3674e1a4a19ce62",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xc7bafc5550ccad7cea32c27764f5df6aca4de547da65e3e67fa08477a1af7f5e"}},{cellDep:{outPoint:{txHash:"0x8b3255491f3c4dcc1cfca33d5c6bcaec5409efe4bbda243900f9580c47e0242e",index:1},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x71decef9ca8725e64ec99a5521790d16b8d5daadb4989b45dd6ab51806a8c0e4"}}]},[re.COTA]:{codeHash:"0x89cd8003a0eaf8e65e0c31525b7d1d5c1becefd2ea75bb4cff87810ae37764d8",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x636a786001f87cb615acfcf408be0f9a1f077001f0bbc75ca54eadfe7e221713",index:0},depType:"depGroup"}}]},[re.PWLock]:{codeHash:"0x58c5f491aba6d61678b7cf7edf4910b1f5e00ec0cde2f42e0abb4fd9aff25a63",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0x57a62003daeab9d54aa29b944fc3b451213a5ebdf2e232216a3cfed0dde61b38",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xf6d90bfe3041d0fd7e01c45770241697f5f837974bd6ae1672a7ec0f9f523268"}}]},[re.OmniLock]:{codeHash:"0xf329effd1c475a2978453c8600e1eaf0bc2087ee093c3ee64cc96ec6847752cb",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xf8de3bb47d055cdf460d93a2a6e1b05f7432f9777c8c474abf4eec1d4aee5d37",index:0},depType:"depGroup"}},{cellDep:{outPoint:{txHash:"0xec18bf0d857c981c3d1f4e17999b9b90c484b303378e94de1a57b0872f5d4602",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x761f51fc9cd6a504c32c6ae64b3746594d1af27629b427c5ccf6c9a725a89144"}}]},[re.NostrLock]:{codeHash:"0x6ae5ee0cb887b2df5a9a18137315b9bdc55be8d52637b2de0624092d5f0c91d5",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xa2a434dcdbe280b9ed75bb7d6c7d68186a842456aba0fc506657dc5ed7c01d68",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x8dc56c6f35f0c535e23ded1629b1f20535477a1b43e59f14617d11e32c50e0aa"}}]},[re.UniqueType]:{codeHash:"0x8e341bcfec6393dcd41e635733ff2dca00a6af546949f70c57a706c0f344df8b",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0xff91b063c78ed06f10a1ed436122bd7d671f9a72ef5f5fa28d05252c17cf4cef",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0xe04976b67600fd25ac50305f77b33aee2c12e3c18e63ece9119e5b32117884b5"}}]},[re.AlwaysSuccess]:{codeHash:"0x3b521cc4b552f109d092d8cc468a8048acb53c5952dbe769d2b2f9cf6e47f7f1",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:0},depType:"code"}}]},[re.InputTypeProxyLock]:{codeHash:"0x5123908965c711b0ffd8aec642f1ede329649bda1ebdca6bd24124d3796f768a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:1},depType:"code"}}]},[re.OutputTypeProxyLock]:{codeHash:"0x2df53b592db3ae3685b7787adcfef0332a611edb83ca3feca435809964c3aff2",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:2},depType:"code"}}]},[re.LockProxyLock]:{codeHash:"0x5d41e32e224c15f152b7e6529100ebeac83b162f5f692a5365774dad2c1a1d02",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:3},depType:"code"}}]},[re.SingleUseLock]:{codeHash:"0x8290467a512e5b9a6b816469b0edabba1f4ac474e28ffdd604c2a7c76446bbaf",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:4},depType:"code"}}]},[re.TypeBurnLock]:{codeHash:"0xff78bae0abf17d7a404c0be0f9ad9c9185b3f88dcc60403453d5ba8e1f22f53a",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xb4f171c9c9caf7401f54a8e56225ae21d95032150a87a4678eac3f66a3137b93",index:5},depType:"code"}}]},[re.EasyToDiscoverType]:{codeHash:"0xaba4430cc7110d699007095430a1faa72973edf2322ddbfd4d1d219cacf237af",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x1b4ffcad55ecd36ffb2715b6816b83da73851f1a24fe594f263c4f34dad90792",index:0},depType:"code"}}]},[re.TimeLock]:{codeHash:"0x6fac4b2e89360a1e692efcddcb3a28656d8446549fb83da6d896db8b714f4451",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x1b4ffcad55ecd36ffb2715b6816b83da73851f1a24fe594f263c4f34dad90792",index:1},depType:"code"}}]}});var Jl=class extends Po{constructor(e){let t=typeof Pn<"u";super(e?.url??(t?"wss://testnet.ckb.dev/ws":"https://testnet.ckb.dev/"),{...e,fallbacks:e?.fallbacks??(t?["wss://testnet.ckb.dev/ws","https://testnet.ckb.dev/","https://testnet.ckbapp.dev/"]:["https://testnet.ckb.dev/","https://testnet.ckbapp.dev/"])}),this.config=e}get scripts(){return this.config?.scripts??cm}get addressPrefix(){return"ckt"}async getKnownScript(e){let t=this.scripts[e];if(!t)throw new Error(`No script information was found for ${e} on ${this.addressPrefix}`);return Bo.from(t)}};var na=class{constructor(){this.hasher=Zo.create()}update(e){return this.hasher.update(Q(e)),this}digest(){return z(this.hasher.digest())}};var W={};be(W,{Bool:()=>gm,BoolOpt:()=>PO,BoolVec:()=>MO,Byte16:()=>wm,Byte16Opt:()=>UO,Byte16Vec:()=>FO,Byte32:()=>vm,Byte32Opt:()=>$O,Byte32Vec:()=>qO,Byte4:()=>bm,Byte4Opt:()=>RO,Byte4Vec:()=>NO,Byte8:()=>xm,Byte8Opt:()=>LO,Byte8Vec:()=>HO,Bytes:()=>ym,BytesOpt:()=>OO,BytesVec:()=>DO,Codec:()=>cr,Entity:()=>am,String:()=>Sm,StringOpt:()=>zO,StringVec:()=>jO,Uint128:()=>pm,Uint128BE:()=>SO,Uint128LE:()=>Ew,Uint128Opt:()=>_O,Uint128Vec:()=>TO,Uint16:()=>um,Uint16BE:()=>pO,Uint16LE:()=>Sw,Uint16Opt:()=>hO,Uint16Vec:()=>mO,Uint256:()=>hm,Uint256BE:()=>EO,Uint256LE:()=>Aw,Uint256Opt:()=>AO,Uint256Vec:()=>kO,Uint32:()=>lm,Uint32BE:()=>yO,Uint32LE:()=>_w,Uint32Opt:()=>gO,Uint32Vec:()=>bO,Uint512:()=>mm,Uint512BE:()=>CO,Uint512LE:()=>kw,Uint512Opt:()=>BO,Uint512Vec:()=>IO,Uint64:()=>dm,Uint64BE:()=>xO,Uint64LE:()=>Tw,Uint64Opt:()=>wO,Uint64Vec:()=>vO,Uint8:()=>fm,Uint8Opt:()=>lO,Uint8Vec:()=>dO,array:()=>fO,byteVec:()=>k1,codec:()=>uO,dynItemVec:()=>vw,fixedItemVec:()=>ww,option:()=>Or,struct:()=>aO,table:()=>iO,uint:()=>is,uintNumber:()=>oa,union:()=>cO,vector:()=>Ir});var cr=class r{constructor(e,t,n){this.encode=e,this.decode=t,this.byteLength=n}static from({encode:e,decode:t,byteLength:n}){return new r(s=>{let o=e(s);if(n!==void 0&&o.byteLength!==n)throw new Error(`Codec.encode: expected byte length ${n}, got ${o.byteLength}`);return o},(s,o)=>{let i=Q(s);if(n!==void 0&&i.byteLength!==n)throw new Error(`Codec.decode: expected byte length ${n}, got ${i.byteLength}`);return t(s,o)},n)}map({inMap:e,outMap:t}){return new r(n=>this.encode(e?e(n):n),(n,s)=>t?t(this.decode(n,s)):this.decode(n,s),this.byteLength)}mapIn(e){return this.map({inMap:e})}mapOut(e){return this.map({outMap:e})}};function sa(r){return qe(r,4)}function Us(r){return Number(ko(r))}function ww(r){let e=r.byteLength;if(e===void 0)throw new Error("fixedItemVec: itemCodec requires a byte length");return cr.from({encode(t){try{let n=[];En(n,sa(t.length));for(let s of t)En(n,r.encode(s));return Q(n)}catch(n){throw new Error(`fixedItemVec(${n?.toString()})`)}},decode(t,n){let s=Q(t);if(s.byteLength<4)throw new Error(`fixedItemVec: too short buffer, expected at least 4 bytes, but got ${s.byteLength}`);let i=4+Us(s.slice(0,4))*e;if(s.byteLength!==i)throw new Error(`fixedItemVec: invalid buffer size, expected ${i}, but got ${s.byteLength}`);try{let c=[];for(let a=4;a<i;a+=e)c.push(r.decode(s.slice(a,a+e),n));return c}catch(c){throw new Error(`fixedItemVec(${c?.toString()})`)}}})}function vw(r){return cr.from({encode(e){try{let t=4+e.length*4,n=[],s=[];for(let i of e){let c=r.encode(i);En(n,sa(t)),En(s,c),t+=c.byteLength}let o=sa(n.length+s.length+4);return ke(o,n,s)}catch(t){throw new Error(`dynItemVec(${t?.toString()})`)}},decode(e,t){let n=Q(e);if(n.byteLength<4)throw new Error(`dynItemVec: too short buffer, expected at least 4 bytes, but got ${n.byteLength}`);let s=Us(n.slice(0,4));if(s!==n.byteLength)throw new Error(`dynItemVec: invalid buffer size, expected ${s}, but got ${n.byteLength}`);if(s===4)return[];let i=(Us(n.slice(4,8))-4)/4,c=Array.from(new Array(i),(a,u)=>Us(n.slice(4+u*4,8+u*4)));c.push(s);try{let a=[];for(let u=0;u<c.length-1;u++){let d=c[u],y=c[u+1],v=n.slice(d,y);a.push(r.decode(v,t))}return a}catch(a){throw new Error(`dynItemVec(${a?.toString()})`)}}})}function Ir(r){return r.byteLength!==void 0?ww(r):vw(r)}function Or(r){return cr.from({encode(e){if(e==null)return Q([]);try{return r.encode(e)}catch(t){throw new Error(`option(${t?.toString()})`)}},decode(e,t){if(Q(e).byteLength!==0)try{return r.decode(e,t)}catch(s){throw new Error(`option(${s?.toString()})`)}}})}function k1(r){return cr.from({encode(e){try{let t=Q(r.encode(e)),n=sa(t.byteLength);return ke(n,t)}catch(t){throw new Error(`byteVec(${t?.toString()})`)}},decode(e,t){let n=Q(e);if(n.byteLength<4)throw new Error(`byteVec: too short buffer, expected at least 4 bytes, but got ${n.byteLength}`);let s=Us(n.slice(0,4));if(s!==n.byteLength-4)throw new Error(`byteVec: invalid buffer size, expected ${s}, but got ${n.byteLength}`);try{return r.decode(n.slice(4),t)}catch(o){throw new Error(`byteVec(${o?.toString()})`)}}})}function iO(r){let e=Object.keys(r);return cr.from({encode(t){let n=4+e.length*4,s=[],o=[];for(let c of e)try{let a=r[c].encode(t[c]);En(s,sa(n)),En(o,a),n+=a.byteLength}catch(a){throw new Error(`table.${c}(${a?.toString()})`)}let i=sa(s.length+o.length+4);return ke(i,s,o)},decode(t,n){let s=Q(t);if(s.byteLength<4)throw new Error(`table: too short buffer, expected at least 4 bytes, but got ${s.byteLength}`);let o=Us(s.slice(0,4)),c=(Us(s.slice(4,8))-4)/4;if(o!==s.byteLength)throw new Error(`table: invalid buffer size, expected ${o}, but got ${s.byteLength}`);if(c<e.length)throw new Error(`table: invalid field count, expected ${e.length}, but got ${c}`);if(c>e.length&&!n?.isExtraFieldIgnored)throw new Error(`table: invalid field count, expected ${e.length}, but got ${c}, and extra fields are not allowed in the current configuration. If you want to ignore extra fields, set isExtraFieldIgnored to true.`);let a=e.map((d,y)=>Us(s.slice(4+y*4,8+y*4)));c>e.length?a.push(Us(s.slice(4+e.length*4,8+e.length*4))):a.push(o);let u={};for(let d=0;d<a.length-1;d++){let y=a[d],v=a[d+1],_=e[d],T=r[_],A=s.slice(y,v);try{Object.assign(u,{[_]:T.decode(A,n)})}catch(B){throw new Error(`table.${_}(${B?.toString()})`)}}return u}})}function cO(r,e){let t=Object.entries(r),n;if(t.length>0){let s=t[0][1].byteLength;s!==void 0&&t.every(([,{byteLength:o}])=>o===s)&&(n=s+4)}return cr.from({byteLength:n,encode({type:s,value:o}){let i=s.toString(),c=r[i];if(!c)throw new Error(`union: invalid type, expected ${t.map(d=>d[0]).toString()}, but got ${i}`);let a=e?e[i]??-1:t.findIndex(d=>d[0]===i);if(a<0)throw new Error(`union: invalid field id ${a} of ${i}`);let u=sa(a);try{let d=c.encode(o);return ke(u,d)}catch(d){throw new Error(`union.(${i})(${d?.toString()})`)}},decode(s,o){let i=Q(s),c=Us(i.slice(0,4)),a=Object.keys(r),u=e?Object.entries(e).find(([,y])=>y===c)?.[0]:a[c];if(!u){if(!e)throw new Error(`union: unknown union field index ${c}, only ${a.toString()} are allowed`);let d=Object.keys(e);throw new Error(`union: unknown union field index ${c}, only ${d.toString()} and ${a.toString()} are allowed`)}return{type:u,value:r[u].decode(i.slice(4),o)}}})}function aO(r){let e=Object.values(r),t=Object.keys(r);return cr.from({byteLength:e.reduce((n,s)=>{if(s.byteLength===void 0)throw new Error("struct: all fields must be fixed-size");return n+s.byteLength},0),encode(n){let s=[];for(let o of t)try{let i=r[o].encode(n[o]);En(s,i)}catch(i){throw new Error(`struct.${o}(${i?.toString()})`)}return Q(s)},decode(n,s){let o=Q(n),i={},c=0;return Object.entries(r).forEach(([a,u])=>{let d=o.slice(c,c+u.byteLength);try{Object.assign(i,{[a]:u.decode(d,s)})}catch(y){throw new Error(`struct.${a}(${y.toString()})`)}c=c+u.byteLength}),i}})}function fO(r,e){if(r.byteLength===void 0)throw new Error("array: itemCodec requires a byte length");let t=r.byteLength*e;return cr.from({byteLength:t,encode(n){try{let s=[];for(let o of n)En(s,r.encode(o));return Q(s)}catch(s){throw new Error(`array(${s?.toString()})`)}},decode(n,s){let o=Q(n);if(o.byteLength!=t)throw new Error(`array: invalid buffer size, expected ${t}, but got ${o.byteLength}`);try{let i=[];for(let c=0;c<o.byteLength;c+=r.byteLength)i.push(r.decode(o.slice(c,c+r.byteLength),s));return i}catch(i){throw new Error(`array(${i?.toString()})`)}}})}function is(r,e=!1){return cr.from({byteLength:r,encode:t=>e?qe(t,r):Hs(t,r),decode:t=>e?ko(t):Xf(t)})}function oa(r,e=!1){if(r>4)throw new Error("uintNumber: byteLength must be less than or equal to 4");return is(r,e).map({outMap:t=>Number(t)})}var am=class{static Base(){class e{static encode(n){throw new Error("encode not implemented, use @ccc.mol.codec to decorate your type")}static decode(n){throw new Error("decode not implemented, use @ccc.mol.codec to decorate your type")}static fromBytes(n){throw new Error("fromBytes not implemented, use @ccc.mol.codec to decorate your type")}static from(n){throw new Error("from not implemented")}toBytes(){return this.constructor.encode(this)}clone(){return this.constructor.fromBytes(this.toBytes())}eq(n){return this===n?!0:Hl(this.toBytes(),(this.constructor?.from(n)??n).toBytes())}hash(){return Br(this.toBytes())}}return e}};function uO(r){return function(e,...t){return e.byteLength=r.byteLength,e.encode=function(n){return r.encode(n)},e.decode=function(n){return e.from(r.decode(n))},e.fromBytes=function(n){return e.from(r.decode(n))},e}}var fm=oa(1,!0),lO=Or(fm),dO=Ir(fm),Sw=oa(2,!0),pO=oa(2),um=Sw,hO=Or(um),mO=Ir(um),_w=oa(4,!0),yO=oa(4),lm=_w,gO=Or(lm),bO=Ir(lm),Tw=is(8,!0),xO=is(8),dm=Tw,wO=Or(dm),vO=Ir(dm),Ew=is(16,!0),SO=is(16),pm=Ew,_O=Or(pm),TO=Ir(pm),Aw=is(32,!0),EO=is(32),hm=Aw,AO=Or(hm),kO=Ir(hm),kw=is(64,!0),CO=is(64),mm=kw,BO=Or(mm),IO=Ir(mm),ym=k1({encode:r=>Q(r),decode:r=>z(r)}),OO=Or(ym),DO=Ir(ym),gm=cr.from({byteLength:1,encode:r=>Q(r?[1]:[0]),decode:r=>Q(r)[0]!==0}),PO=Or(gm),MO=Ir(gm),bm=cr.from({byteLength:4,encode:r=>Q(r),decode:r=>z(r)}),RO=Or(bm),NO=Ir(bm),xm=cr.from({byteLength:8,encode:r=>Q(r),decode:r=>z(r)}),LO=Or(xm),HO=Ir(xm),wm=cr.from({byteLength:16,encode:r=>Q(r),decode:r=>z(r)}),UO=Or(wm),FO=Ir(wm),vm=cr.from({byteLength:32,encode:r=>Q(r),decode:r=>z(r)}),$O=Or(vm),qO=Ir(vm),Sm=k1({encode:r=>Q(r,"utf8"),decode:r=>Ao(r,"utf8")}),jO=Ir(Sm),zO=Or(Sm);var C1={type:1,data:0,data1:2,data2:4},Xl={1:"type",0:"data",2:"data1",4:"data2"},_m=Object.keys(C1);var VO=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ia,B1=W.Codec.from({byteLength:1,encode:eu,decode:tu});function Oo(r){let e=(()=>{if(typeof r=="number")return Xl[r];if(typeof r=="bigint")return Xl[Number(r)];if(_m.includes(r))return r})();if(e===void 0)throw new Error(`Invalid hash type ${r}`);return e}function eu(r){return Q([C1[Oo(r)]])}function tu(r){return Xl[Q(r)[0]]}var ge=ia=class extends W.Entity.Base(){constructor(e,t,n){super(),this.codeHash=e,this.hashType=t,this.args=n}get occupiedSize(){return 33+Q(this.args).length}clone(){return new ia(this.codeHash,this.hashType,this.args)}eq(e){return e=ia.from(e),this.args===e.args&&this.codeHash===e.codeHash&&this.hashType===e.hashType}static from(e){return e instanceof ia?e:new ia(z(e.codeHash),Oo(e.hashType),z(e.args))}static async fromKnownScript(e,t,n){let s=await e.getKnownScript(t);return new ia(s.codeHash,s.hashType,z(n))}};ge=ia=VO([W.codec(W.table({codeHash:W.Byte32,hashType:B1,args:W.Bytes}))],ge);var Yl=W.option(ge),Tm=W.vector(ge);var I1={code:0,depGroup:1},Ql={0:"code",1:"depGroup"},KO=Object.keys(I1);var Fs=class extends Error{constructor(e,t){let n=$(e),s=t?.isForChange??!1;super(`Insufficient CKB, need ${zl(n)} extra CKB${s?" for the change cell":""}`),this.amount=n,this.isForChange=s}},ca=class extends Error{constructor(e,t){let n=$(e),s=ge.from(t);super(`Insufficient coin, need ${n} extra coin`),this.amount=n,this.type=s}};var ua=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},ru,ed,aa,td,rd,O1,Mo,D1=W.Codec.from({byteLength:1,encode:P1,decode:M1});function ra(r){let e=typeof r=="number"?Ql[r]:typeof r=="bigint"?Ql[Number(r)]:r;if(e===void 0)throw new Error(`Invalid dep type ${r}`);return e}function P1(r){return Q([I1[ra(r)]])}function M1(r){return Ql[Q(r)[0]]}var ze=ru=class extends W.Entity.Base(){constructor(e,t){super(),this.txHash=e,this.index=t}static from(e){return e instanceof ru?e:new ru(z(e.txHash),$(e.index))}clone(){return new ru(this.txHash,this.index)}eq(e){return e=ru.from(e),this.txHash===e.txHash&&this.index===e.index}};ze=ru=ua([W.codec(W.struct({txHash:W.Byte32,index:W.Uint32}))],ze);var fn=ed=class extends W.Entity.Base(){constructor(e,t,n){super(),this.capacity=e,this.lock=t,this.type=n}get occupiedSize(){return 8+this.lock.occupiedSize+(this.type?.occupiedSize??0)}static from(e,t){if(e instanceof ed)return e;let n=new ed($(e.capacity??0),ge.from(e.lock),ue(ge.from,e.type));return n.capacity===et&&(n.capacity=Do(n.occupiedSize+Q(t??"0x").length)),n}clone(){return new ed(this.capacity,this.lock.clone(),this.type?.clone())}};fn=ed=ua([W.codec(W.table({capacity:W.Uint64,lock:ge,type:Yl}))],fn);var R1=W.vector(fn),$s=class r{constructor(e,t,n){this.cellOutput=e,this.outputData=t,this.outPoint=n}static from(e){return e instanceof r?e:new r(fn.from(e.cellOutput,e.outputData),z(e.outputData??"0x"),ue(ze.from,e.outPoint??e.previousOutput))}get occupiedSize(){return this.cellOutput.occupiedSize+Q(this.outputData).byteLength}get capacityFree(){return this.cellOutput.capacity-Do(this.occupiedSize)}async isNervosDao(e,t){let{type:n}=this.cellOutput,s=await e.getKnownScript(re.NervosDao);if(!n||n.codeHash!==s.codeHash||n.hashType!==s.hashType)return!1;let o=$(this.outputData)!==et;return!t||t==="deposited"&&!o||t==="withdrew"&&o}clone(){return new r(this.cellOutput.clone(),this.outputData,this.outPoint?.clone())}},Xt=class r extends $s{constructor(e,t,n){super(t,n,e),this.outPoint=e}static from(e){return e instanceof r?e:new r(ze.from(e.outPoint??e.previousOutput),fn.from(e.cellOutput,e.outputData),z(e.outputData??"0x"))}async getDaoProfit(e){if(!await this.isNervosDao(e,"withdrew"))return et;let{depositHeader:t,withdrawHeader:n}=await this.getNervosDaoInfo(e);if(!n||!t)throw new Error(`Unable to get headers of a Nervos DAO cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return H1(this.capacityFree,t,n)}async getNervosDaoInfo(e){if(!await this.isNervosDao(e))return{};if($(this.outputData)===et){let s=await e.getCellWithHeader(this.outPoint);if(!s?.header)throw new Error(`Unable to get header of a Nervos DAO deposited cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return{depositHeader:s.header}}let[t,n]=await Promise.all([e.getHeaderByNumber(ko(this.outputData)),e.getCellWithHeader(this.outPoint)]);if(!n?.header||!t)throw new Error(`Unable to get headers of a Nervos DAO withdrew cell ${this.outPoint.txHash}:${this.outPoint.index.toString()}`);return{depositHeader:t,withdrawHeader:n.header}}clone(){return new r(this.outPoint.clone(),this.cellOutput.clone(),this.outputData)}};function Qf(r){return[$(r[0]),$(r[1]),$(r[2])]}function Zl(r){let e=$(z(r));return[e&$("0xffffff"),e>>$(24)&$("0xffff"),e>>$(40)&$("0xffff")]}function Em(r){let e=Qf(r);return Ut($(e[0])+($(e[1])<<$(24))+($(e[2])<<$(40)))}var Ri=aa=class extends W.Entity.Base(){constructor(e,t,n){super(),this.relative=e,this.metric=t,this.value=n}clone(){return new aa(this.relative,this.metric,this.value)}static from(e){return e instanceof aa?e:typeof e=="object"&&"relative"in e?new aa(e.relative,e.metric,$(e.value)):aa.fromNum(e)}toNum(){return this.value|(this.relative==="absolute"?et:$("0x8000000000000000"))|{blockNumber:$("0x0000000000000000"),epoch:$("0x2000000000000000"),timestamp:$("0x4000000000000000")}[this.metric]}static fromNum(e){let t=$(e),n=t>>$(63)===et?"absolute":"relative",s=["blockNumber","epoch","timestamp"][Number(t>>$(61)&$(3))],o=t&$("0x00ffffffffffffff");return new aa(n,s,o)}};Ri=aa=ua([W.codec(W.Uint64.mapIn(r=>Ri.from(r).toNum()))],Ri);var zr=td=class extends W.Entity.Base(){constructor(e,t,n,s){super(),this.previousOutput=e,this.since=t,this.cellOutput=n,this.outputData=s}static from(e){return e instanceof td?e:new td(ze.from("previousOutput"in e?e.previousOutput:e.outPoint),Ri.from(e.since??0).toNum(),ue(fn.from,e.cellOutput),ue(z,e.outputData))}async getCell(e){if(await this.completeExtraInfos(e),!this.cellOutput||!this.outputData)throw new Error("Unable to complete input");return Xt.from({outPoint:this.previousOutput,cellOutput:this.cellOutput,outputData:this.outputData})}async completeExtraInfos(e){if(this.cellOutput&&this.outputData)return;let t=await e.getCell(this.previousOutput);t&&(this.cellOutput=t.cellOutput,this.outputData=t.outputData)}async getExtraCapacity(e){return(await this.getCell(e)).getDaoProfit(e)}clone(){return new td(this.previousOutput.clone(),this.since,this.cellOutput?.clone(),this.outputData)}};zr=td=ua([W.codec(W.struct({since:Ri,previousOutput:ze}).mapIn(r=>zr.from(r)))],zr);var N1=W.vector(zr),jr=rd=class extends W.Entity.Base(){constructor(e,t){super(),this.outPoint=e,this.depType=t}static from(e){return e instanceof rd?e:new rd(ze.from(e.outPoint),ra(e.depType))}clone(){return new rd(this.outPoint.clone(),this.depType)}};jr=rd=ua([W.codec(W.struct({outPoint:ze,depType:D1}))],jr);var L1=W.vector(jr),ar=O1=class extends W.Entity.Base(){constructor(e,t,n){super(),this.lock=e,this.inputType=t,this.outputType=n}static from(e){return e instanceof O1?e:new O1(ue(z,e.lock),ue(z,e.inputType),ue(z,e.outputType))}};ar=O1=ua([W.codec(W.table({lock:W.BytesOpt,inputType:W.BytesOpt,outputType:W.BytesOpt}))],ar);function fa(r){let e=Q(r).slice(0,16);return e.length===0?et:ko(e)}var nd=W.table({version:W.Uint32,cellDeps:L1,headerDeps:W.Byte32Vec,inputs:N1,outputs:R1,outputsData:W.BytesVec}),Te=Mo=class extends W.Entity.Base(){constructor(e,t,n,s,o,i,c){super(),this.version=e,this.cellDeps=t,this.headerDeps=n,this.inputs=s,this.outputs=o,this.outputsData=i,this.witnesses=c}static default(){return new Mo(0n,[],[],[],[],[],[])}copy(e){let t=Mo.from(e);this.version=t.version,this.cellDeps=t.cellDeps,this.headerDeps=t.headerDeps,this.inputs=t.inputs,this.outputs=t.outputs,this.outputsData=t.outputsData,this.witnesses=t.witnesses}clone(){return new Mo(this.version,this.cellDeps.map(e=>e.clone()),this.headerDeps.map(e=>e),this.inputs.map(e=>e.clone()),this.outputs.map(e=>e.clone()),this.outputsData.map(e=>e),this.witnesses.map(e=>e))}static from(e){if(e instanceof Mo)return e;let t=e.outputs?.map((s,o)=>fn.from(s,e.outputsData?.[o]??[]))??[],n=t.map((s,o)=>z(e.outputsData?.[o]??"0x"));return e.outputsData!=null&&n.length<e.outputsData.length&&n.push(...e.outputsData.slice(n.length).map(s=>z(s))),new Mo($(e.version??0),e.cellDeps?.map(s=>jr.from(s))??[],e.headerDeps?.map(z)??[],e.inputs?.map(s=>zr.from(s))??[],t,n,e.witnesses?.map(z)??[])}static fromLumosSkeleton(e){return Mo.from({version:0n,cellDeps:e.cellDeps.toArray(),headerDeps:e.headerDeps.toArray(),inputs:e.inputs.toArray().map((t,n)=>{if(!t.outPoint)throw new Error("outPoint is required in input");return zr.from({previousOutput:t.outPoint,since:e.inputSinces.get(n,"0x0"),cellOutput:t.cellOutput,outputData:t.data})}),outputs:e.outputs.toArray().map(t=>t.cellOutput),outputsData:e.outputs.toArray().map(t=>t.data),witnesses:e.witnesses.toArray()})}stringify(){return JSON.stringify(this,(e,t)=>typeof t=="bigint"?Ut(t):t)}rawToBytes(){return nd.encode(this)}hash(){return Br(this.rawToBytes())}hashFull(){return Br(this.toBytes())}static hashWitnessToHasher(e,t){let n=Q(z(e));t.update(qe(n.length,8)),t.update(n)}async getSignHashInfo(e,t,n=new Oi){let s=ge.from(e),o=-1;n.update(this.hash());for(let i=0;i<this.witnesses.length;i+=1){let c=this.inputs[i];if(c){let{cellOutput:a}=await c.getCell(t);if(!s.eq(a.lock))continue;o===-1&&(o=i)}if(o===-1)return;Mo.hashWitnessToHasher(this.witnesses[i],n)}if(o!==-1)return{message:n.digest(),position:o}}async findInputIndexByLockId(e,t){let n=ge.from({...e,args:"0x"});for(let s=0;s<this.inputs.length;s+=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.codeHash===o.lock.codeHash&&n.hashType===o.lock.hashType)return s}}async findInputIndexByLock(e,t){let n=ge.from(e);for(let s=0;s<this.inputs.length;s+=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.eq(o.lock))return s}}async findLastInputIndexByLock(e,t){let n=ge.from(e);for(let s=this.inputs.length-1;s>=0;s-=1){let{cellOutput:o}=await this.inputs[s].getCell(t);if(n.eq(o.lock))return s}}addCellDeps(...e){e.flat().forEach(t=>{let n=jr.from(t);this.cellDeps.some(s=>s.eq(n))||this.cellDeps.push(n)})}addCellDepsAtStart(...e){e.flat().forEach(t=>{let n=jr.from(t);this.cellDeps.some(s=>s.eq(n))||this.cellDeps.unshift(n)})}async addCellDepInfos(e,...t){this.addCellDeps(await e.getCellDeps(...t))}async addCellDepsOfKnownScripts(e,...t){await Promise.all(t.flat().map(async n=>this.addCellDepInfos(e,(await e.getKnownScript(n)).cellDeps)))}setOutputDataAt(e,t){this.outputsData.length<e&&this.outputsData.push(...Array.from(new Array(e-this.outputsData.length),()=>"0x")),this.outputsData[e]=z(t)}getInput(e){return this.inputs[Number($(e))]}addInput(e){return this.witnesses.length>this.inputs.length&&this.witnesses.splice(this.inputs.length,0,"0x"),this.inputs.push(zr.from(e))}getOutput(e){let t=Number($(e));if(!(t>=this.outputs.length))return $s.from({cellOutput:this.outputs[t],outputData:this.outputsData[t]??"0x"})}get outputCells(){let{outputs:e,outputsData:t}=this;function*n(){for(let s=0;s<e.length;s++)yield $s.from({cellOutput:e[s],outputData:t[s]??"0x"})}return n()}addOutput(e,t){let n="cellOutput"in e?$s.from(e):$s.from({cellOutput:e,outputData:t}),s=this.outputs.push(n.cellOutput);return this.setOutputDataAt(s-1,n.outputData),s}getWitnessArgsAt(e){let t=this.witnesses[e];return(t??"0x")!=="0x"?ar.fromBytes(t):void 0}setWitnessArgsAt(e,t){this.setWitnessAt(e,t.toBytes())}setWitnessAt(e,t){this.witnesses.length<e&&this.witnesses.push(...Array.from(new Array(e-this.witnesses.length),()=>"0x")),this.witnesses[e]=z(t)}async prepareSighashAllWitness(e,t,n){let s=await this.findInputIndexByLock(e,n);if(s===void 0)return;let o=this.getWitnessArgsAt(s)??ar.from({});o.lock=z(Array.from(new Array(t),()=>0)),this.setWitnessArgsAt(s,o)}async getInputsCapacityExtra(e){return An(this.inputs,async(t,n)=>t+await n.getExtraCapacity(e),$(0))}async getInputsCapacity(e){return await An(this.inputs,async(t,n)=>{let{cellOutput:{capacity:s}}=await n.getCell(e);return t+s},$(0))+await this.getInputsCapacityExtra(e)}getOutputsCapacity(){return this.outputs.reduce((e,{capacity:t})=>e+t,$(0))}async getInputsUdtBalance(e,t){return An(this.inputs,async(n,s)=>{let{cellOutput:o,outputData:i}=await s.getCell(e);if(o.type?.eq(t))return n+fa(i)},$(0))}getOutputsUdtBalance(e){return this.outputs.reduce((t,n,s)=>n.type?.eq(e)?t+fa(this.outputsData[s]):t,$(0))}async completeInputs(e,t,n,s){let o=[],i=s,c=!1;for await(let a of e.findCells(t,!0)){if(this.inputs.some(({previousOutput:y})=>y.eq(a.outPoint)))continue;let u=o.push(a),d=await Promise.resolve(n(i,a,u-1,o));if(d===void 0){c=!0;break}i=d}return o.forEach(a=>this.addInput(a)),c?{addedCount:o.length}:{addedCount:o.length,accumulated:i}}async completeInputsByCapacity(e,t,n){let s=this.getOutputsCapacity()+$(t??0),o=await this.getInputsCapacity(e.client);if(o>=s)return 0;let{addedCount:i,accumulated:c}=await this.completeInputs(e,n??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},(a,{cellOutput:{capacity:u}})=>{let d=a+u;return d>=s?void 0:d},o);if(c===void 0)return i;throw new Fs(s-c)}async completeInputsAll(e,t){let{addedCount:n}=await this.completeInputs(e,t??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},(s,{cellOutput:{capacity:o}})=>s+o,et);return n}async completeInputsByUdt(e,t,n){let s=this.getOutputsUdtBalance(t)+$(n??0);if(s===$(0))return 0;let[o,i]=await An(this.inputs,async([u,d],y)=>{let{cellOutput:v,outputData:_}=await y.getCell(e.client);if(v.type?.eq(t))return[u+fa(_),d+1]},[$(0),0]);if(o===s||o>=s&&i>=2)return 0;let{addedCount:c,accumulated:a}=await this.completeInputs(e,{script:t,outputDataLenRange:[16,$("0xffffffff")]},(u,{outputData:d},y,v)=>{let _=fa(d),T=u+_;return T===s||T>=s&&i+v.length>=2?void 0:T},o);if(a===void 0||a>=s)return c;throw new ca(s-a,t)}async completeInputsAddOne(e,t){let{addedCount:n,accumulated:s}=await this.completeInputs(e,t??{scriptLenRange:[0,1],outputDataLenRange:[0,1]},()=>{},!0);if(s===void 0)return n;throw new Error("Insufficient CKB, need at least one new cell")}async completeInputsAtLeastOne(e,t){return this.inputs.length>0?0:this.completeInputsAddOne(e,t)}async getFee(e){return await this.getInputsCapacity(e)-this.getOutputsCapacity()}async getFeeRate(e){return await this.getFee(e)*$(1e3)/$(this.toBytes().length+4)}estimateFee(e){let t=this.toBytes().length+4;return($(t)*$(e)+$(999))/$(1e3)}async completeFee(e,t,n,s,o){let i=n??await e.client.getFeeRate(o?.feeRateBlockRange,o);await this.getInputsCapacity(e.client);let c=et,a=et,u=0;for(;;){u+=await(async()=>{if(!(o?.shouldAddInputs??!0))return 0;try{return await this.completeInputsByCapacity(e,c+a,s)}catch(T){throw T instanceof Fs&&a!==et?new Fs(T.amount,{isForChange:!0}):T}})();let d=await this.getFee(e.client);if(d<c+a)throw new Fs(c+a-d,{isForChange:a!==et});if(await e.prepareTransaction(this),c===et&&(c=this.estimateFee(i)),d===c)return[u,!1];let y=this.clone(),v=$(await Promise.resolve(t(y,d-c)));if(v>et){a=v;continue}if(await y.getFee(e.client)!==c)throw new Error("The change function doesn't use all available capacity");await e.prepareTransaction(y);let _=y.estimateFee(i);if(c>_)throw new Error("The change function removed existed transaction data");if(c===_)return this.copy(y),[u,!0];c=_}}completeFeeChangeToLock(e,t,n,s,o){let i=ge.from(t);return this.completeFee(e,(c,a)=>{let u=fn.from({capacity:0,lock:i}),d=Do(u.occupiedSize);return a<d?d:(u.capacity=a,c.addOutput(u),0)},n,s,o)}async completeFeeBy(e,t,n,s){let{script:o}=await e.getRecommendedAddressObj();return this.completeFeeChangeToLock(e,o,t,n,s)}completeFeeChangeToOutput(e,t,n,s,o){let i=Number($(t));if(!this.outputs[i])throw new Error("Non-existed output to change");return this.completeFee(e,(c,a)=>(c.outputs[i].capacity+=a,0),n,s,o)}};Te=Mo=ua([W.codec(W.table({raw:nd,witnesses:W.BytesVec}).mapIn(r=>{let e=Te.from(r);return{raw:e,witnesses:e.witnesses}}).mapOut(r=>Te.from({...r.raw,witnesses:r.witnesses})))],Te);function H1(r,e,t){let n=an.from(e),s=an.from(t),o=$(r);return o*s.dao.ar/n.dao.ar-o}function Am(r,e){let t=an.from(r).epoch,n=an.from(e).epoch,s=n[0]-t[0];return s%$(180)!==$(0)||t[1]*n[2]<=t[2]*n[1]?[t[0]+(s/$(180)+$(1))*$(180),t[1],t[2]]:[t[0]+s/$(180)*$(180),t[1],t[2]]}function km(r,e){return Br(zr.from(r).toBytes(),ss(e,8))}var nu=Ge(Jr(),1);function Cm(r){try{let{words:e,prefix:t}=nu.bech32m.decode(r,sd),n=nu.bech32m.fromWords(e),s=n[0],o=n.slice(1);if(s===Cn.Full)return{prefix:t,format:Cn.Full,payload:o}}catch{}try{let{prefix:e,words:t}=nu.bech32.decode(r,sd),n=nu.bech32.fromWords(t),s=n[0],o=n.slice(1);if([Cn.FullData,Cn.FullType,Cn.Short].includes(s))return{prefix:e,format:s,payload:o}}catch{}throw Error(`Unknown address format ${r}`)}async function Bm(r,e,t,n){if(e===Cn.Full){if(t.length<33)throw new Error(`Invalid full address without enough payload ${z(t)}`);return{script:{codeHash:t.slice(0,32),hashType:tu(t.slice(32,33)),args:t.slice(33)},prefix:r}}if(e===Cn.FullData){if(t.length<32)throw new Error(`Invalid full data address without enough payload ${z(t)}`);return{script:{codeHash:t.slice(0,32),hashType:"data",args:t.slice(32)},prefix:r}}if(e===Cn.FullType){if(t.length<32)throw new Error(`Invalid full type address without enough payload ${z(t)}`);return{script:{codeHash:t.slice(0,32),hashType:"type",args:t.slice(32)},prefix:r}}if(t.length!==21)throw new Error(`Invalid short address without enough payload ${z(t)}`);let s=[re.Secp256k1Blake160,re.Secp256k1Multisig,re.AnyoneCanPay][t[0]];if(s===void 0)throw new Error(`Invalid short address with unknown script ${z(t)}`);return{script:await ge.fromKnownScript(n,s,t.slice(1)),prefix:r}}var Cn;(function(r){r[r.Full=0]="Full",r[r.Short=1]="Short",r[r.FullData=2]="FullData",r[r.FullType=4]="FullType"})(Cn||(Cn={}));var sd=1023;var $t=class r{constructor(e,t){this.script=e,this.prefix=t}static from(e){return e instanceof r?e:new r(ge.from(e.script),e.prefix)}static async fromString(e,t){let{prefix:n,format:s,payload:o}=Cm(e),i=t[n]??t;if(!i)throw new Error(`Unknown address prefix ${n}`);let c=i.addressPrefix;if(c!==n)throw new Error(`Unknown address prefix ${n}, expected ${c}`);return r.from(await Bm(n,s,o,i))}static fromScript(e,t){return r.from({script:e,prefix:t.addressPrefix})}static async fromKnownScript(e,t,n){return r.from({script:await ge.fromKnownScript(e,t,n),prefix:e.addressPrefix})}toString(){let e=ke([Cn.Full],Q(this.script.codeHash),eu(this.script.hashType),Q(this.script.args));return Im.bech32m.encode(this.prefix,Im.bech32m.toWords(e),sd)}};var WO=8,ZO=1,GO=262144;function Cw(r,e){return z(Zo(ke(r.slice(16,32),e))).slice(2)}async function Om(r,e,t){let n=Mr(32),s=Mr(16),o={dklen:32,salt:z(n).slice(2),n:GO,r:WO,p:ZO},i=await Ga(Q(t,"utf8"),n,{N:o.n,r:o.r,p:o.p,dkLen:o.dklen}),a=Za(i.slice(0,16),s.map(u=>u)).encrypt(ke(Q(r),Q(e)));return{id:z(Mr(16)).slice(2),crypto:{ciphertext:z(a).slice(2),cipherparams:{iv:z(s).slice(2)},cipher:"aes-128-ctr",kdf:"scrypt",kdfparams:o,mac:Cw(i,a)}}}async function Dm(r,e){if(typeof r!="object"||r===null||!("crypto"in r))throw Error("Invalid keystore");let t=r.crypto;if(typeof t!="object"||t===null||!("kdfparams"in t)||!("ciphertext"in t)||typeof t.ciphertext!="string"||!("mac"in t)||typeof t.mac!="string"||!("cipherparams"in t)||typeof t.cipherparams!="object"||t.cipherparams===null||!("iv"in t.cipherparams)||typeof t.cipherparams.iv!="string")throw Error("Invalid crypto");let n=t.kdfparams;if(typeof n!="object"||n===null||!("n"in n)||typeof n.n!="number"||!("r"in n)||typeof n.r!="number"||!("p"in n)||typeof n.p!="number"||!("dklen"in n)||typeof n.dklen!="number"||!("salt"in n)||typeof n.salt!="string")throw Error("Invalid kdfparams");let s=await Ga(Q(e,"utf8"),Q(n.salt),{N:n.n,r:n.r,p:n.p,dkLen:n.dklen}),o=Q(t.ciphertext);if(Cw(s,o)!==t.mac)throw Error("Invalid password");let c=Za(s.slice(0,16),Q(t.cipherparams.iv)).decrypt(o);return{privateKey:c.slice(0,32),chainCode:c.slice(32)}}function su(r){let e=typeof r=="string"?r:z(r),t=Q(`Nervos Message:${e}`,"utf8");return Br(t)}function od(r,e,t){let n=Q(e);return Ie.verify(new Ie.Signature($(n.slice(0,32)),$(n.slice(32,64))).addRecoveryBit(Number($(n.slice(64,65)))).toBytes(),Q(su(r)),Q(t))}function id(r,e,t){let n=typeof r=="string"?r:z(r).slice(2),{publicKey:s,keyType:o}=JSON.parse(t);return Ih({challenge:n,pubkey:s,keyType:o,...JSON.parse(e)})}function U1(r){let e=$(r);return e<253?ss(e,1):e<=65535?ke([253],ss(e,2)):e<=4294967295?ke([254],ss(e,4)):ke([255],ss(e,8))}function ou(r,e){let t=e??`Bitcoin Signed Message:
`,n=typeof t=="string"?Q(t,"utf8"):Q(t),s=typeof r=="string"?Q(r,"utf8"):Q(r);return rt(rt(ke(n,U1(s.length),s)))}function Ni(r){return Kp(rt(Q(r)))}function cd(r,e){return xs.encode(ke([e],Ni(r)))}function ad(r){return z(xs.decode(r).slice(1))}function fd(r,e,t){let n=typeof r=="string"?r:z(r).slice(2),s=Q(e,"base64").slice(1);return Ie.verify(Q(s),ou(n),Q(t))}function iu(r,e){return ou(r,e??`Dogecoin Signed Message:
`)}function ud(r,e,t){let n=typeof r=="string"?r:z(r).slice(2),s=Q(e,"base64"),o=s[0],i=s.slice(1),c=Ie.Signature.fromCompact(z(i).slice(2)).addRecoveryBit(o-31);return ad(t)===z(Ni(c.recoverPublicKey(iu(n)).toHex()))}function ld(r,e,t){return t.toLowerCase()===Of(typeof r=="string"?r:Q(r),e).toLowerCase()}var Pm=Ge(Jr(),1);function cu(r){if(typeof r=="string")try{let e=JSON.parse(r);if(typeof e=="object"&&typeof e.created_at=="number"&&typeof e.kind=="number"&&typeof e.content=="string"&&Array.isArray(e.tags)&&e.tags.every(t=>Array.isArray(t)&&t.every(n=>typeof n=="string")))return e}catch{}return{kind:23335,created_at:0,content:typeof r=="string"?r:z(r),tags:[]}}function au(r){let e=JSON.stringify([0,r.pubkey,r.created_at,r.kind,r.tags,r.content]);return rt(Q(e,"utf8"))}function dd(r,e,t){let{words:n}=Pm.bech32.decode(t),s=z(Pm.bech32.fromWords(n)).slice(2),o=cu(r),i=au({...o,pubkey:s});try{return bs.verify(z(e).slice(2),i,s)}catch{return!1}}var Le;(function(r){r.Unknown="Unknown",r.BtcEcdsa="BtcEcdsa",r.EvmPersonal="EvmPersonal",r.JoyId="JoyId",r.NostrEvent="NostrEvent",r.CkbSecp256k1="CkbSecp256k1",r.DogeEcdsa="DogeEcdsa"})(Le||(Le={}));var gr;(function(r){r.EVM="EVM",r.BTC="BTC",r.CKB="CKB",r.Nostr="Nostr",r.Doge="Doge"})(gr||(gr={}));var pd=class{constructor(e,t,n){this.signature=e,this.identity=t,this.signType=n}},Yt=class r{constructor(e){this.client_=e}get client(){return this.client_}matchNetworkPreference(e,t){if(!(t!==void 0&&e.some(({signerType:n,addressPrefix:s,network:o})=>n===this.type&&s===this.client.addressPrefix&&o===t)))return e.find(({signerType:n,addressPrefix:s})=>n===this.type&&s===this.client.addressPrefix)}static async verifyMessage(e,t){switch(t.signType){case Le.EvmPersonal:return ld(e,t.signature,t.identity);case Le.BtcEcdsa:return fd(e,t.signature,t.identity);case Le.JoyId:return id(e,t.signature,t.identity);case Le.NostrEvent:return dd(e,t.signature,t.identity);case Le.CkbSecp256k1:return od(e,t.signature,t.identity);case Le.DogeEcdsa:return ud(e,t.signature,t.identity);case Le.Unknown:throw new Error("Unknown signer sign type")}}onReplaced(e){return()=>{}}async disconnect(){}async getIdentity(){return this.getInternalAddress()}async getRecommendedAddressObj(e){return(await this.getAddressObjs())[0]}async getRecommendedAddress(e){return(await this.getRecommendedAddressObj(e)).toString()}async getAddresses(){return this.getAddressObjs().then(e=>e.map(t=>t.toString()))}async*findCellsOnChain(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findCellsOnChain({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",withData:t},n,s))yield c}async*findCells(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findCells({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",withData:t},n,s))yield c}async*findTransactions(e,t,n,s){let o=await this.getAddressObjs();for(let{script:i}of o)for await(let c of this.client.findTransactions({script:i,scriptType:"lock",filter:e,scriptSearchMode:"exact",groupByTransaction:t},n,s))yield c}async getBalance(){return this.client.getBalance((await this.getAddressObjs()).map(({script:e})=>e))}async signMessage(e){return{signature:await this.signMessageRaw(e),identity:await this.getIdentity(),signType:this.signType}}signMessageRaw(e){throw Error("Signer.signMessageRaw not implemented")}async verifyMessage(e,t){return typeof t=="string"?r.verifyMessage(e,{signType:this.signType,signature:t,identity:await this.getIdentity()}):t.identity!==await this.getIdentity()||![Le.Unknown,this.signType].includes(t.signType)?!1:r.verifyMessage(e,t)}async sendTransaction(e){return this.client.sendTransaction(await this.signTransaction(e))}async signTransaction(e){let t=await this.prepareTransaction(e);return this.signOnlyTransaction(t)}async prepareTransaction(e){return Te.from(e)}signOnlyTransaction(e){throw Error("Signer.signOnlyTransaction not implemented")}},hd=class{constructor(e,t){this.name=e,this.signer=t}};var la=class extends Yt{get type(){return gr.BTC}get signType(){return Le.BtcEcdsa}async getInternalAddress(){return this.getBtcAccount()}async getIdentity(){return z(await this.getBtcPublicKey()).slice(2)}async getAddressObjs(){let e=await this.getBtcPublicKey(),t=Ni(e);return[await $t.fromKnownScript(this.client,re.OmniLock,z([4,...t,0]))]}async prepareTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,re.OmniLock),await t.prepareSighashAllWitness(n,85,this.client),t}async signOnlyTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Q(await this.signMessageRaw(`CKB (Bitcoin Layer) transaction: ${s.message}`),"base64");o[0]=31+(o[0]-27)%4;let i=ar.fromBytes(t.witnesses[s.position]);return i.lock=z(ke(qe(20+o.length,4),qe(16,4),qe(20+o.length,4),qe(20+o.length,4),qe(o.length,4),o)),t.setWitnessArgsAt(s.position,i),t}};var md=class extends la{constructor(e,t,n){super(e),this.account=t,this.publicKey=z(n)}async connect(){}async isConnected(){return!0}async getBtcAccount(){return this.account}async getBtcPublicKey(){return this.publicKey}};var da=class extends Yt{get type(){return gr.CKB}get signType(){return Le.CkbSecp256k1}constructor(e,t){if(super(e),this.publicKey=z(t),Q(this.publicKey).length!==33)throw new Error("Public key must be 33 bytes!")}async connect(){}async isConnected(){return!0}async getInternalAddress(){return this.getRecommendedAddress()}async getIdentity(){return this.publicKey}async getAddressObjSecp256k1(){return $t.fromKnownScript(this.client,re.Secp256k1Blake160,Q(Br(this.publicKey)).slice(0,20))}async getRecommendedAddressObj(e){return this.getAddressObjSecp256k1()}async getAddressObjs(){let e=await this.getAddressObjSecp256k1(),t=[],n=0;for await(let s of this.client.findCells({script:await ge.fromKnownScript(this.client,re.AnyoneCanPay,e.script.args),scriptType:"lock",scriptSearchMode:"prefix",withData:!1})){if(n>=10)break;n+=1,!t.some(({script:o})=>o.eq(s.cellOutput.lock))&&t.push($t.from({prefix:this.client.addressPrefix,script:s.cellOutput.lock}))}return[e,...t]}async getRelatedScripts(e){let t=Te.from(e),n=await this.getAddressObjSecp256k1(),s=await ge.fromKnownScript(this.client,re.AnyoneCanPay,n.script.args),o=[];for(let i of t.inputs){let{cellOutput:{lock:c}}=await i.getCell(this.client);o.some(({script:a})=>a.eq(c))||(c.eq(n.script)?o.push({script:c,cellDeps:(await this.client.getKnownScript(re.Secp256k1Blake160)).cellDeps}):c.codeHash===s.codeHash&&c.hashType===s.hashType&&c.args.startsWith(s.args)&&o.push({script:c,cellDeps:(await this.client.getKnownScript(re.AnyoneCanPay)).cellDeps}))}return o}async prepareTransaction(e){let t=Te.from(e);return await Promise.all((await this.getRelatedScripts(t)).map(async({script:n,cellDeps:s})=>{await t.prepareSighashAllWitness(n,65,this.client),await t.addCellDepInfos(this.client,s)})),t}};var yd=class extends da{constructor(e,t){let n=z(t);if(Q(n).length!==32)throw new Error("Private key must be 32 bytes!");super(e,Ie.getPublicKey(Q(n),!0)),this.privateKey=n}async _signMessage(e){let t=Ie.sign(Q(e),Q(this.privateKey)),{r:n,s,recovery:o}=t;return z(ke(Hs(n,32),Hs(s,32),Hs(o,1)))}async signMessageRaw(e){return this._signMessage(su(e))}async signOnlyTransaction(e){let t=Te.from(e);for(let{script:n}of await this.getRelatedScripts(t)){let s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=await this._signMessage(s.message),i=t.getWitnessArgsAt(s.position)??ar.from({});i.lock=o,t.setWitnessArgsAt(s.position,i)}return t}};var gd=class extends Yt{get type(){return gr.CKB}get signType(){return Le.Unknown}constructor(e,...t){if(super(e),this.scripts=t.flat().map(ge.from),this.scripts.length===0)throw new Error("SignerCkbScriptReadonly requires at least one script.")}async connect(){}async isConnected(){return!0}async getInternalAddress(){return this.getRecommendedAddress()}async getAddressObjs(){return this.scripts.map(e=>$t.fromScript(e,this.client))}};var Ro=class extends Yt{get type(){return gr.Doge}get signType(){return Le.DogeEcdsa}async getInternalAddress(){return this.getDogeAddress()}async getIdentity(){return this.getDogeAddress()}async getAddressObjs(){let e=xs.decode(await this.getDogeAddress()).slice(1);return[await $t.fromKnownScript(this.client,re.OmniLock,z([5,...e,0]))]}async prepareTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,re.OmniLock),await t.prepareSighashAllWitness(n,85,this.client),t}async signOnlyTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Q(await this.signMessageRaw(s.message.slice(2)),"base64");o[0]=31+(o[0]-27)%4;let i=ar.fromBytes(t.witnesses[s.position]);return i.lock=z(ke(qe(20+o.length,4),qe(16,4),qe(20+o.length,4),qe(20+o.length,4),qe(o.length,4),o)),t.setWitnessArgsAt(s.position,i),t}};var bd=class extends Ro{constructor(e,t){super(e),this.address=t}async connect(){}async isConnected(){return!0}async getDogeAddress(){return this.address}};var xd=class extends Ro{constructor(e,t,n=30){if(super(e),this.dogeNetwork=n,this.privateKey=Q(t),this.privateKey.length!==32)throw new Error("Private key must be 32 bytes!")}async connect(){}async isConnected(){return!0}async getDogePublicKey(){return z(Ie.getPublicKey(this.privateKey,!0))}async getDogeAddress(){return cd(await this.getDogePublicKey(),this.dogeNetwork)}async signMessageRaw(e){let t=typeof e=="string"?e:z(e).slice(2),n=Ie.sign(iu(t),this.privateKey);return Ao(ke([31+n.recovery],n.toCompactRawBytes()),"base64")}};var No=class extends Yt{get signType(){return Le.Unknown}constructor(e,t){super(e),this.type=t}async isConnected(){return!1}async getInternalAddress(){throw new Error("Can't get address from SignerDummy")}async getAddressObjs(){throw new Error("Can't get addresses from SignerDummy")}};var wd=class extends No{constructor(e,t,n){super(e,t),this.message=n}async connect(){throw new Error(this.message)}};var vd=class extends No{constructor(e,t,n){super(e,t),this.link=n}async connect(){window.open(this.link,"_blank")?.focus()}};var pa=class extends Yt{get type(){return gr.EVM}get signType(){return Le.EvmPersonal}async getInternalAddress(){return this.getEvmAccount()}async getAddressObjs(){let e=await this.getEvmAccount();return(await Promise.all([this._getOmniLockAddresses(e),this._getPWLockAddresses(e)])).flat()}_getOmniLockAddresses(e){return Promise.all([this._getOmniLockEvmAddressObj(e),this._getOmniLockOldEvmAddressObj(e)])}async _getPWLockAddresses(e){let t=await this._getPWLockEvmAddressObj(e);return t?[t]:[]}async _getOmniLockEvmAddressObj(e){return $t.fromKnownScript(this.client,re.OmniLock,z([18,...Q(e),0]))}async _getOmniLockOldEvmAddressObj(e){return $t.fromKnownScript(this.client,re.OmniLock,z([1,...Q(e),0]))}async _getPWLockEvmAddressObj(e){try{return $t.fromKnownScript(this.client,re.PWLock,z(Q(e)))}catch{}}async prepareTransaction(e){let t=Te.from(e);await t.findInputIndexByLockId(await this.client.getKnownScript(re.OmniLock),this.client)!==void 0&&await t.addCellDepsOfKnownScripts(this.client,re.OmniLock),await t.findInputIndexByLockId(await this.client.getKnownScript(re.PWLock),this.client)!==void 0&&await t.addCellDepsOfKnownScripts(this.client,re.PWLock);let n=await this.getEvmAccount(),s=await this._getOmniLockAddresses(n),o=await this._getPWLockAddresses(n),i=An(s,(c,{script:a})=>c.prepareSighashAllWitness(a,85,this.client),t);return An(o,(c,{script:a})=>c.prepareSighashAllWitness(a,65,this.client),i)}async signOnlyTransaction(e){let t=Te.from(e),n=await this.getEvmAccount(),{script:s}=await this._getOmniLockEvmAddressObj(n),{script:o}=await this._getOmniLockOldEvmAddressObj(n);t=await this._signOmniLockScriptForTransaction(t,s,c=>`CKB transaction: ${c}`),t=await this._signOmniLockScriptForTransaction(t,o,c=>Q(c));let i=await this._getPWLockEvmAddressObj(n);return i&&(t=await this._signPWLockScriptForTransaction(t,i.script,c=>Q(c))),t}async _signOmniLockScriptForTransaction(e,t,n){let s=await this._signPersonalEvmForTransaction(e,t,n);if(!s)return e;let o=ar.fromBytes(e.witnesses[s.position]);return o.lock=z(ke(qe(20+s.signature.length,4),qe(16,4),qe(20+s.signature.length,4),qe(20+s.signature.length,4),qe(s.signature.length,4),s.signature)),e.setWitnessArgsAt(s.position,o),e}async _signPWLockScriptForTransaction(e,t,n){let s=await this._signPersonalEvmForTransaction(e,t,n,new na);if(!s)return e;let o=ar.fromBytes(e.witnesses[s.position]);return o.lock=z(s.signature),e.setWitnessArgsAt(s.position,o),e}async _signPersonalEvmForTransaction(e,t,n,s){let o=await e.getSignHashInfo(t,this.client,s);if(!o)return;let i=Q(await this.signMessageRaw(n(o.message)));return i[i.length-1]>=27&&(i[i.length-1]-=27),{signature:i,position:o.position}}};var Sd=class extends pa{constructor(e,t){super(e),this.address=z(t)}async connect(){}async isConnected(){return!0}async getEvmAccount(){return this.address}};var Mm=Ge(Jr(),1);var qs=class r extends Yt{get type(){return gr.Nostr}get signType(){return Le.NostrEvent}async signNostrEvent(e){throw Error("SignerNostr.signNostrEvent not implemented")}async signMessageRaw(e){return z((await this.signNostrEvent(cu(e))).sig)}async getInternalAddress(){return Mm.bech32.encode("npub",Mm.bech32.toWords(Q(await this.getNostrPublicKey())))}async getAddressObjs(){let e=await this.getNostrPublicKey();return[await $t.fromKnownScript(this.client,re.NostrLock,z(ke([0],Br(e).slice(0,42))))]}async prepareTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj();return await t.addCellDepsOfKnownScripts(this.client,re.NostrLock),await t.prepareSighashAllWitness(n,572,this.client),t}async signOnlyTransaction(e){let t=Te.from(e),{script:n}=await this.getRecommendedAddressObj(),s=await t.getSignHashInfo(n,this.client);if(!s)return t;let o=Q(JSON.stringify(await this.signNostrEvent({pubkey:(await this.getNostrPublicKey()).slice(2),tags:[[r.CKB_SIG_HASH_ALL_TAG,s.message.slice(2)]],created_at:Math.floor(Date.now()/1e3),kind:r.CKB_UNLOCK_EVENT_KIND,content:r.CKB_UNLOCK_EVENT_CONTENT})),"utf8"),i=ar.fromBytes(t.witnesses[s.position]);return i.lock=z(o),t.setWitnessArgsAt(s.position,i),t}};qs.CKB_SIG_HASH_ALL_TAG="ckb_sighash_all";qs.CKB_UNLOCK_EVENT_KIND=23334;qs.CKB_UNLOCK_EVENT_CONTENT=`Signing a CKB transaction

IMPORTANT: Please verify the integrity and authenticity of connected Nostr client before signing this message
`;var Nm=Ge(Jr(),1);var Rm=Ge(Jr(),1);var ha=class extends qs{constructor(e,t){if(super(e),typeof t=="string"&&t.startsWith("npub")){let{words:n}=Rm.bech32.decode(t);this.publicKey=z(Rm.bech32.fromWords(n))}else this.publicKey=z(t)}async connect(){}async isConnected(){return!0}async getNostrPublicKey(){return this.publicKey}};var _d=class extends ha{constructor(e,t){let n=(()=>{if(typeof t=="string"&&t.startsWith("nsec")){let{words:s}=Nm.bech32.decode(t);return z(Nm.bech32.fromWords(s))}return z(t)})();super(e,bs.getPublicKey(n.slice(2))),this.privateKey=n}async signNostrEvent(e){let t=(await this.getNostrPublicKey()).slice(2),n=au({...e,pubkey:t}),s=bs.sign(n,this.privateKey.slice(2));return{...e,id:z(n).slice(2),pubkey:t,sig:z(s).slice(2)}}};var fu=class extends D.SignerEvm{constructor(e,t){super(e),this.provider=t,this.accountCache=void 0}async getEvmAccount(){return this.accountCache=(await this.provider.request({method:"eth_accounts"}))[0],this.accountCache}async connect(){await this.provider.request({method:"eth_requestAccounts"})}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("disconnect",n)}),this.provider.on("accountsChanged",n),this.provider.on("disconnect",n),t[0]}async isConnected(){return(await this.provider.request({method:"eth_accounts"})).length!==0}async signMessageRaw(e){let t=typeof e=="string"?D.bytesFrom(e,"utf8"):e,n=this.accountCache??await this.getEvmAccount();return this.provider.request({method:"personal_sign",params:[D.hexFrom(t),n]})}};var Lm=class{constructor(e){this.client=e,this.existedUuids=[]}subscribeSigners(e){let t=s=>{let{detail:o}=s,{uuid:i}=o.info;if(this.existedUuids.includes(i))return;this.existedUuids.push(i);let c=new fu(this.client,o.provider);e(c,o)};window.addEventListener("eip6963:announceProvider",t),window.dispatchEvent(new Event("eip6963:requestProvider"));let n=window;return typeof n.ethereum<"u"&&e(new fu(this.client,n.ethereum)),()=>window.removeEventListener("eip6963:announceProvider",t)}};var Cd={};be(Cd,{BitcoinSigner:()=>ma,CkbSigner:()=>Ed,EvmSigner:()=>Ad,NostrSigner:()=>kd,getJoyIdSigners:()=>JO});async function un(r,e){return e.popup==null&&(e.popup=Yp(""),e.popup==null)?Qp(async()=>un(r,e)):(e.popup.location.href=r,new Promise((t,n)=>{oi()&&n(new Xp(e.popup));let s,o,i=setInterval(()=>{e.popup?.closed&&(clearInterval(i),clearTimeout(o),window.removeEventListener("message",s,!1),n(new i0(e.popup)))},1e3);o=setTimeout(()=>{clearInterval(i),n(new Jp(e.popup)),window.removeEventListener("message",s,!1)},(e.timeoutInSeconds??3e3)*1e3),s=c=>{let{joyidAppURL:a}=e,u=new URL(a);c.origin===u.origin&&(!c.data||c.data?.type!==e.type||(clearTimeout(o),clearInterval(i),window.removeEventListener("message",s,!1),e.popup.close(),c.data.error&&n(new Error(c.data.error)),t(c.data.data)))},window.addEventListener("message",s)}))}function Hm(r,e){return r.uri===e.uri&&r.addressType.startsWith(e.addressType)}var js=class{constructor(e="ccc-joy-id-signer"){this.storageKey=e,this.operationLock=Promise.resolve()}async readConnections(){return JSON.parse(window.localStorage.getItem(this.storageKey)??"[]")}async get(e){return(await this.readConnections()).find(([t])=>Hm(e,t))?.[1]}async set(e,t){let n=this.operationLock.catch(()=>{}).then(async()=>{let s=await this.readConnections();if(t){let o=s.find(([i])=>Hm(i,e));o?o[1]=t:s.push([e,t]),window.localStorage.setItem(this.storageKey,JSON.stringify(s))}else window.localStorage.setItem(this.storageKey,JSON.stringify(s.filter(([o])=>!Hm(o,e))))});this.operationLock=n,await n}};var ma=class extends D.SignerBtc{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s=[{addressPrefix:"ckb",signerType:D.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:D.SignerType.BTC,network:"btcTestnet"}],o="auto",i,c=new js){super(e),this.name=t,this.icon=n,this.preferredNetworks=s,this.addressType=o,this._appUri=i,this.connectionsRepo=c,this.network="btcTestnet"}getConfig(){let{network:e}=this.matchNetworkPreference(this.preferredNetworks,this.network)??{network:this.network};this.network!==e&&(this.connection=void 0),this.network=e;let t={btc:"https://app.joy.id",btcTestnet:"https://testnet.joyid.dev"}[e];if(!t)throw new Error(`JoyID wallet doesn't support the requested chain ${this.network}`);return{redirectURL:location.href,joyidAppURL:this._appUri??t,requestNetwork:`btc-${this.addressType}`,name:this.name,logo:this.icon}}async disconnect(){await super.disconnect(),await this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"btc"},void 0)}async getBtcAccount(){let{address:e}=await this.assertConnection();return e}async getBtcPublicKey(){let{publicKey:e}=await this.assertConnection();return e}async connect(){let e=this.getConfig(),t=await un(Ue(e,"popup","/auth"),{...e,type:Pe.Auth}),{address:n,pubkey:s}=this.addressType==="auto"?t.btcAddressType==="p2wpkh"?t.nativeSegwit:t.taproot:this.addressType==="p2wpkh"?t.nativeSegwit:t.taproot;this.connection={address:n,publicKey:D.hexFrom(s),keyType:t.keyType},await Promise.all([this.connectionsRepo.set({uri:e.joyidAppURL,addressType:`btc-${this.addressType}`},this.connection),this.connectionsRepo.set({uri:e.joyidAppURL,addressType:"btc-auto"},this.connection)])}async isConnected(){return this.connection?!0:(this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:`btc-${this.addressType}`}),this.connection!==void 0)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:D.hexFrom(e).slice(2),s=this.getConfig(),{signature:o}=await un(Ue({...s,challenge:n,address:t,signMessageType:"ecdsa"},"popup","/sign-message"),{...s,type:Pe.SignMessage});return o}};var Ed=class extends D.Signer{get type(){return D.SignerType.CKB}get signType(){return D.SignerSignType.JoyId}async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o,i=new js){super(e),this.name=t,this.icon=n,this._appUri=s,this._aggregatorUri=o,this.connectionsRepo=i}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),name:this.name,logo:this.icon}}getAggregatorUri(){return this._aggregatorUri??(this.client.addressPrefix==="ckb"?"https://cota.nervina.dev/mainnet-aggregator":"https://cota.nervina.dev/aggregator")}async connect(){let e=this.getConfig(),t=await un(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:t.address,publicKey:D.hexFrom(t.pubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async getInternalAddress(){return(await this.assertConnection()).address}async getIdentity(){let e=await this.assertConnection();return JSON.stringify({keyType:e.keyType,publicKey:e.publicKey.slice(2)})}async getAddressObj(){return await D.Address.fromString(await this.getInternalAddress(),this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async prepareTransaction(e){let t=D.Transaction.from(e);await t.addCellDepsOfKnownScripts(this.client,D.KnownScript.JoyId);let n=await t.findInputIndexByLock((await this.getAddressObj()).script,this.client);if(n===void 0)return t;let s=t.getWitnessArgsAt(n)??D.WitnessArgs.from({});return s.lock=D.hexFrom("00".repeat(1e3)),await this.prepareTransactionForSubKey(t,s),t.setWitnessArgsAt(n,s),t}async prepareTransactionForSubKey(e,t){if(this.connection?.keyType!=="sub_key"||(t.outputType??"0x")!=="0x")return;let n=D.hashCkb(this.connection.publicKey).substring(0,42),s=(await this.getAddressObj()).script,o=new Bh(this.getAggregatorUri()),{unlock_entry:i}=await o.generateSubkeyUnlockSmt({alg_index:1,pubkey_hash:n,lock_script:D.hexFrom(s.toBytes())});t.outputType=D.hexFrom(i);let c=[];for await(let a of this.client.findCellsByLock(s,await D.Script.fromKnownScript(this.client,D.KnownScript.COTA,"0x")))c.push(D.CellDep.from({depType:"code",outPoint:a.outPoint}));if(c.length===0)throw new Error("No COTA cells for sub key wallet");e.addCellDepsAtStart(c)}async signOnlyTransaction(e){let t=D.Transaction.from(e),{script:n}=await this.getAddressObj(),s=await D.reduceAsync(t.inputs,async(c,a,u)=>{let{cellOutput:d}=await a.getCell(this.client);d.lock.eq(n)&&c.push(u)},[]);await t.prepareSighashAllWitness(n,0,this.client),t.inputs.forEach(c=>{c.cellOutput=void 0,c.outputData=void 0});let o=this.getConfig(),i=await un(Ue({...o,tx:JSON.parse(t.stringify()),signerAddress:(await this.assertConnection()).address,witnessIndexes:s},"popup","/sign-ckb-raw-tx"),{...o,type:Pe.SignCkbRawTx});return D.Transaction.from(i.tx)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:D.hexFrom(e).slice(2),s=this.getConfig(),o=await un(Ue({...s,challenge:n,isData:typeof e!="string",address:t},"popup","/sign-message"),{...s,type:Pe.SignMessage});return JSON.stringify({signature:o.signature,alg:o.alg,message:o.message})}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"ckb"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"ckb"})}};var Ad=class extends D.SignerEvm{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o=new js){super(e),this.name=t,this.icon=n,this._appUri=s,this.connectionsRepo=o}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),requestNetwork:"ethereum",name:this.name,logo:this.icon}}async getEvmAccount(){return(await this.assertConnection()).address}async connect(){let e=this.getConfig(),t=await un(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:t.ethAddress,publicKey:D.hexFrom(t.pubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async signMessageRaw(e){let{address:t}=await this.assertConnection(),n=typeof e=="string"?e:D.hexFrom(e).slice(2),s=this.getConfig(),{signature:o}=await un(Ue({...s,challenge:n,isData:typeof e!="string",address:t},"popup","/sign-message"),{...s,type:Pe.SignMessage});return D.hexFrom(o)}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"ethereum"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"ethereum"})}};var kd=class extends D.SignerNostr{async assertConnection(){if(!await this.isConnected()||!this.connection)throw new Error("Not connected");return this.connection}constructor(e,t,n,s,o=new js){super(e),this.name=t,this.icon=n,this._appUri=s,this.connectionsRepo=o}getConfig(){return{redirectURL:location.href,joyidAppURL:this._appUri??(this.client.addressPrefix==="ckb"?"https://app.joy.id":"https://testnet.joyid.dev"),requestNetwork:"nostr",name:this.name,logo:this.icon}}async connect(){let e=this.getConfig(),t=await un(Ue(e,"popup","/auth"),{...e,type:Pe.Auth});this.connection={address:"",publicKey:D.hexFrom(t.nostrPubkey),keyType:t.keyType},await this.saveConnection()}async disconnect(){await super.disconnect(),this.connection=void 0,await this.saveConnection()}async isConnected(){return this.connection?!0:(await this.restoreConnection(),this.connection!==void 0)}async getNostrPublicKey(){return(await this.assertConnection()).publicKey}async signNostrEvent(e){let t=this.getConfig();return(await un(Ue({...t,event:e},"popup","/sign-nostr-event"),{...t,type:Pe.SignNostrEvent})).event}async saveConnection(){return this.connectionsRepo.set({uri:this.getConfig().joyidAppURL,addressType:"nostr"},this.connection)}async restoreConnection(){this.connection=await this.connectionsRepo.get({uri:this.getConfig().joyidAppURL,addressType:"nostr"})}};function JO(r,e,t,n){return oi()||D.isWebview(window.navigator.userAgent)?[D.SignerType.CKB,D.SignerType.EVM,D.SignerType.BTC].map(s=>({name:s,signer:new D.SignerAlwaysError(r,s,"JoyID can only be used with standard browsers")})):[{name:"CKB",signer:new Ed(r,e,t)},{name:"BTC",signer:new ma(r,e,t,n)},{name:"Nostr",signer:new kd(r,e,t)},{name:"EVM",signer:new Ad(r,e,t)},{name:"BTC (P2WPKH)",signer:new ma(r,e,t,n,"p2wpkh")},{name:"BTC (P2TR)",signer:new ma(r,e,t,n,"p2tr")}]}var Id={};be(Id,{Signer:()=>Bd,getNip07Signer:()=>XO});var Bd=class extends D.SignerNostr{constructor(e,t){super(e),this.provider=t,this.publicKeyCache=void 0}async getNostrPublicKey(){return this.publicKeyCache||(this.publicKeyCache=this.provider.getPublicKey().catch(e=>{throw this.publicKeyCache=void 0,e})),D.hexFrom(await this.publicKeyCache)}async signNostrEvent(e){return this.provider.signEvent({...e,pubkey:await this.publicKeyCache})}async connect(){await this.getNostrPublicKey()}async isConnected(){return!0}};function XO(r){let e=window;if(!(typeof e.nostr>"u"))return new Bd(r,e.nostr)}var Dd={};be(Dd,{BitcoinSigner:()=>Od,getOKXSigners:()=>YO});var Od=class extends D.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:D.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:D.SignerType.BTC,network:"btcTestnet"}]){super(e),this.providers=t,this.preferredNetworks=n,this.network="btcTestnet"}get provider(){let{network:e}=this.matchNetworkPreference(this.preferredNetworks,this.network)??{network:this.network};this.network=e;let t={btc:"bitcoin",btcTestnet:"bitcoinTestnet",btcSignet:"bitcoinSignet"}[e];if(!t)throw new Error(`OKX wallet doesn't support the requested chain ${this.network}`);let n=this.providers[t];if(!n)throw new Error(`OKX wallet doesn't support the requested chain ${this.network}`);return n}async getBtcAccount(){if(this.provider.getAccounts){let e=(await this.provider.getAccounts())[0];if(!e)throw Error("Not connected");return e}if(this.provider.getSelectedAccount){let e=await this.provider.getSelectedAccount();if(!e)throw Error("Not connected");return e.address}throw Error("Unsupported OKX provider")}async getBtcPublicKey(){if(this.provider.getPublicKey){let e=await this.provider.getPublicKey();if(e==="")throw Error("The OKX Wallet returned wrong public key");return D.hexFrom(e)}if(this.provider.getSelectedAccount){let e=await this.provider.getSelectedAccount();if(!e)throw Error("Not connected");return D.hexFrom(e.compressedPublicKey)}throw Error("Unsupported OKX provider")}async connect(){if(this.provider.requestAccounts){await this.provider.requestAccounts();return}if(this.provider.connect){await this.provider.connect();return}throw Error("Unsupported OKX provider")}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountChanged",n)}),this.provider.on("accountChanged",n),t[0]}async isConnected(){try{this.provider}catch{return!1}if(this.provider.getAccounts){if((await this.provider.getAccounts()).length===0)return!1}else if(this.provider.getSelectedAccount&&await this.provider.getSelectedAccount()===null)return!1;return await this.connect(),!0}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return this.provider.signMessage(t,"ecdsa")}};var F1=class extends D.SignerNostr{constructor(e,t){super(e),this.provider=t,this.publicKeyCache=void 0}async getNostrPublicKey(){return this.publicKeyCache||(this.publicKeyCache=this.provider.getPublicKey().then(e=>{if(e)return e;throw Error("This OKX Wallet account does not support Nostr")}).catch(e=>{throw this.publicKeyCache=void 0,e})),D.hexFrom(await this.publicKeyCache)}async signNostrEvent(e){return this.provider.signEvent({...e,pubkey:await this.publicKeyCache})}async connect(){await this.provider.connect?.(),await this.getNostrPublicKey()}onReplaced(e){let t=[],n=()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountChanged",n)}),this.provider.on("accountChanged",n),t[0]}async isConnected(){return!0}};function YO(r,e){let t=window;return typeof t.okxwallet>"u"?[]:[{signer:new Od(r,t.okxwallet,e),name:"BTC"},{signer:new F1(r,t.okxwallet.nostr),name:"Nostr"}]}var Md={};be(Md,{ReiSigner:()=>Pd,getReiSigners:()=>QO});var zs={};be(zs,{ADDRESS_BECH32_LIMIT:()=>sd,AddressFormat:()=>Cn,CKB_BLAKE2B_PERSONAL:()=>X5,DEFAULT_CONFIRMED_BLOCK_TIME:()=>jl,DEFAULT_MAX_FEE_RATE:()=>E1,DEFAULT_MIN_FEE_RATE:()=>Y5,DEP_TYPES:()=>KO,DEP_TYPE_TO_NUM:()=>I1,HASH_TYPES:()=>_m,HASH_TYPE_TO_NUM:()=>C1,JsonRpcTransformers:()=>Ft,MAINNET_SCRIPTS:()=>om,MapLru:()=>Mi,NUM_TO_DEP_TYPE:()=>Ql,NUM_TO_HASH_TYPE:()=>Xl,TESTNET_SCRIPTS:()=>cm,TransportFallback:()=>Wl,TransportHttp:()=>Vl,TransportWebSocket:()=>Kl,addressFromPayload:()=>Bm,addressPayloadFromString:()=>Cm,clientSearchKeyRangeFrom:()=>Di,filterCell:()=>nm,filterData:()=>rm,filterNumByRange:()=>A1,filterScript:()=>ql,filterScriptByLenRange:()=>tm,transportFromUri:()=>im});var Pd=class extends D.Signer{constructor(e,t){super(e),this.provider=t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.off("accountsChanged",n),this.provider.off("chainChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("chainChanged",n),t[0]}get type(){return D.SignerType.CKB}get signType(){return D.SignerSignType.CkbSecp256k1}async connect(){let e=this.client.addressPrefix;if(await this._getNetworkChanged()){let n=e==="ckb"?"mainnet":"testnet";await this.provider.request({method:"ckb_switchNetwork",data:n})}}async isConnected(){let e=await this.provider.isConnected();return!e||await this._getNetworkChanged()?!1:e}async _getNetworkChanged(){let e=this.client.addressPrefix,t=await this.getInternalAddress(),{prefix:n}=zs.addressPayloadFromString(t);return e!==n}async getInternalAddress(){return this.provider.request({method:"ckb_requestAccounts"})}async getAddressObj(){return D.Address.fromString(await this.getInternalAddress(),this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async getIdentity(){return this.provider.request({method:"ckb_getPublicKey"})}async signMessageRaw(e){return this.provider.request({method:"ckb_signMessage",data:{message:e}})}async prepareTransaction(e){let t=D.Transaction.from(e);return await t.addCellDepsOfKnownScripts(this.client,D.KnownScript.Secp256k1Blake160),D.reduceAsync(await this.getAddressObjs(),(n,{script:s})=>n.prepareSighashAllWitness(s,65,this.client),t)}async signOnlyTransaction(e){let t=zs.JsonRpcTransformers.transactionFrom(e);return this.provider.request({method:"ckb_signTransaction",data:{txSkeleton:t}})}};function QO(r){let e=window;return typeof e?.rei?.ckb>"u"?[]:[{signer:new Pd(r,e.rei.ckb),name:"CKB"}]}var Kr={};be(Kr,{Address:()=>$t,Bytes:()=>J5,Cell:()=>Xt,CellAny:()=>$s,CellDep:()=>jr,CellDepInfo:()=>Pi,CellDepVec:()=>L1,CellInput:()=>zr,CellInputVec:()=>N1,CellOutput:()=>fn,CellOutputVec:()=>R1,Client:()=>ea,ClientBlock:()=>Vc,ClientBlockHeader:()=>an,ClientBlockUncle:()=>Yf,ClientCache:()=>Yc,ClientCacheMemory:()=>Qc,ClientIndexerSearchKey:()=>os,ClientIndexerSearchKeyFilter:()=>jc,ClientIndexerSearchKeyTransaction:()=>zc,ClientJsonRpc:()=>Po,ClientPublicMainnet:()=>Gl,ClientPublicTestnet:()=>Jl,ClientTransactionResponse:()=>Io,DepTypeCodec:()=>D1,ErrorClientBase:()=>kn,ErrorClientDuplicatedTransaction:()=>Zc,ErrorClientMaxFeeRateExceeded:()=>Xc,ErrorClientRBFRejected:()=>Gc,ErrorClientResolveUnknown:()=>Kc,ErrorClientVerification:()=>Wc,ErrorClientWaitTransactionTimeout:()=>Jc,ErrorTransactionInsufficientCapacity:()=>Fs,ErrorTransactionInsufficientCoin:()=>ca,HashTypeCodec:()=>B1,HasherCkb:()=>Oi,HasherKeecak256:()=>na,KnownScript:()=>re,One:()=>sm,OutPoint:()=>ze,RawTransaction:()=>nd,RequestorJsonRpc:()=>ta,Script:()=>ge,ScriptInfo:()=>Bo,ScriptOpt:()=>Yl,ScriptVec:()=>Tm,Signature:()=>pd,Signer:()=>Yt,SignerAlwaysError:()=>wd,SignerBtc:()=>la,SignerBtcPublicKeyReadonly:()=>md,SignerCkbPrivateKey:()=>yd,SignerCkbPublicKey:()=>da,SignerCkbScriptReadonly:()=>gd,SignerDoge:()=>Ro,SignerDogeAddressReadonly:()=>bd,SignerDogePrivateKey:()=>xd,SignerDummy:()=>No,SignerEvm:()=>pa,SignerEvmAddressReadonly:()=>Sd,SignerInfo:()=>hd,SignerNostr:()=>qs,SignerNostrPrivateKey:()=>_d,SignerNostrPublicKeyReadonly:()=>ha,SignerOpenLink:()=>vd,SignerSignType:()=>Le,SignerType:()=>gr,Since:()=>Ri,Transaction:()=>Te,WitnessArgs:()=>ar,Zero:()=>et,apply:()=>ue,btcEcdsaPublicKeyHash:()=>Ni,btcP2pkhAddressFromPublicKey:()=>cd,btcPublicKeyFromP2pkhAddress:()=>ad,btcVarLengthBytesFrom:()=>U1,buildNostrEventFromMessage:()=>cu,bytesConcat:()=>ke,bytesConcatTo:()=>En,bytesEq:()=>Hl,bytesFrom:()=>Q,bytesTo:()=>Ao,calcDaoClaimEpoch:()=>Am,calcDaoProfit:()=>H1,depTypeFrom:()=>ra,depTypeFromBytes:()=>M1,depTypeToBytes:()=>P1,epochFrom:()=>Qf,epochFromHex:()=>Zl,epochToHex:()=>Em,fixedPointFrom:()=>Do,fixedPointToString:()=>zl,hashCkb:()=>Br,hashTypeFrom:()=>Oo,hashTypeFromBytes:()=>tu,hashTypeId:()=>km,hashTypeToBytes:()=>eu,hexFrom:()=>z,isWebview:()=>Q5,keystoreDecrypt:()=>Dm,keystoreEncrypt:()=>Om,messageHashBtcEcdsa:()=>ou,messageHashCkbSecp256k1:()=>su,messageHashDogeEcdsa:()=>iu,mol:()=>W,nostrEventHash:()=>au,numBeFromBytes:()=>Xf,numBeToBytes:()=>Hs,numFrom:()=>$,numFromBytes:()=>ko,numLeFromBytes:()=>Co,numLeToBytes:()=>ss,numMax:()=>Fl,numMin:()=>Ul,numToBytes:()=>qe,numToHex:()=>Ut,reduceAsync:()=>An,sleep:()=>$l,spore:()=>Rd,ssri:()=>Bn,stringify:()=>em,udt:()=>Hd,udtBalanceFrom:()=>fa,verifyMessageBtcEcdsa:()=>fd,verifyMessageCkbSecp256k1:()=>od,verifyMessageDogeEcdsa:()=>ud,verifyMessageEvmPersonal:()=>ld,verifyMessageJoyId:()=>id,verifyMessageNostrEvent:()=>dd});var Rd={};be(Rd,{DEFAULT_COBUILD_INFO_HASH:()=>ya,SPORE_VERSION_DEFAULT:()=>j1,SporeScriptInfo:()=>ln,SporeVersion:()=>fr,assertCluster:()=>V1,assertSpore:()=>Wm,createSpore:()=>ND,createSporeCluster:()=>AD,dob:()=>Km,findCluster:()=>Ww,findSpore:()=>Qw,findSporeClusters:()=>BD,findSporeClustersBySigner:()=>CD,findSpores:()=>FD,findSporesBySigner:()=>UD,getClusterScriptInfo:()=>qm,getClusterScriptInfos:()=>du,getSporeScriptInfo:()=>$m,getSporeScriptInfos:()=>lu,meltSpore:()=>HD,transferSpore:()=>LD,transferSporeCluster:()=>kD});var Dw=W.table({name:W.String,description:W.String}),Pw=W.table({name:W.String,description:W.String,mutantId:W.BytesOpt});function Mw(r,e){if(!e)return Bw(r);switch(e){case"v1":return eD(r);case"v2":return Bw(r)}}function eD(r){return D.bytesFrom(Dw.encode({name:r.name,description:r.description}))}function Bw(r){return D.bytesFrom(Pw.encode({name:r.name,description:r.description,mutantId:r.mutantId}))}function $1(r,e){if(e)switch(e){case"v1":return Iw(r);case"v2":return Ow(r)}try{return Ow(r)}catch{try{return Iw(r)}catch{throw new Error(`Cannot unpack ClusterData, no matching molecule: ${D.hexFrom(r)}`)}}}function Iw(r){return Dw.decode(r)}function Ow(r){return Pw.decode(r)}var tD=W.table({scriptInfoHash:W.Byte32,scriptHash:W.Byte32,data:W.Bytes}),Rw=W.vector(tD),Um=W.table({actions:Rw}),rD=W.table({outputs:D.CellOutputVec,outputsData:W.BytesVec}),nD=W.table({name:W.String,url:W.String,scriptHash:W.Byte32,schema:W.String,messageType:W.String}),sD=W.vector(nD),oD=W.table({message:Um,payload:D.Transaction,resolvedInputs:rD,changeOutput:W.Uint32Opt,scriptInfos:sD,lockActions:Rw}),f0e=W.union({BuildingPacketV1:oD});var Vr=W.union({Script:D.Script}),iD=W.table({sporeId:W.Byte32,to:Vr,dataHash:W.Byte32}),cD=W.table({sporeId:W.Byte32,from:Vr,to:Vr}),aD=W.table({sporeId:W.Byte32,from:Vr}),fD=W.table({clusterId:W.Byte32,to:Vr,dataHash:W.Byte32}),uD=W.table({clusterId:W.Byte32,from:Vr,to:Vr}),lD=W.table({clusterId:W.Byte32,clusterProxyId:W.Byte32,to:Vr}),dD=W.table({clusterId:W.Byte32,clusterProxyId:W.Byte32,from:Vr,to:Vr}),pD=W.table({clusterId:W.Byte32,clusterProxyId:W.Byte32,from:Vr}),hD=W.table({clusterId:W.Byte32,clusterProxyId:W.Byte32,to:Vr}),mD=W.table({clusterId:W.Byte32,from:Vr,to:Vr}),yD=W.table({clusterId:W.Byte32,from:Vr}),uu=W.union({CreateSpore:iD,TransferSpore:cD,MeltSpore:aD,CreateCluster:fD,TransferCluster:uD,CreateClusterProxy:lD,TransferClusterProxy:dD,MeltClusterProxy:pD,CreateClusterAgent:hD,TransferClusterAgent:mD,MeltClusterAgent:yD});var gD=W.table({seal:W.Bytes,message:Um}),bD=W.table({seal:W.Bytes}),xD=W.table({}),wD=W.table({}),vD={SighashAll:4278190081,SighashAllOnly:4278190082,Otx:4278190083,OtxStart:4278190084},Fm=W.union({SighashAll:gD,SighashAllOnly:bD,Otx:xD,OtxStart:wD},vD);var Nw=W.table({contentType:W.String,content:W.Bytes,clusterId:W.BytesOpt});function Lw(r){return D.bytesFrom(Nw.encode({contentType:r.contentType,content:r.content,clusterId:r.clusterId}))}function q1(r){return Nw.decode(r)}var ya=D.hashCkb(D.bytesFrom("CCC_DEFAULT_COBUILD_INFO","utf8")),fr;(function(r){r.V1="V1",r.V2="V2",r.DID="DID"})(fr||(fr={}));var j1=fr.V2,ln=class r extends D.ScriptInfo{constructor(e,t,n,s){super(e,t,n),this.cobuild=s}static from(e){return new r(D.hexFrom(e.codeHash),D.hashTypeFrom(e.hashType),e.cellDeps.map(t=>D.CellDepInfo.from(t)),e.cobuild)}};var Hw=Object.freeze({[fr.DID]:{codeHash:"0xcfba73b58b6f30e70caed8a999748781b164ef9a1e218424a6fb55ebf641cb33",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x37c80ba8124780920bc8fe06b49e3535b43ca339bb9a97fb462b16d575bfa9a6",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x62312cd846659e188b05da11dc3f080b083c27371ea701d6026e11e713e0e3de"}}],cobuild:!0},[fr.V2]:{codeHash:"0x4a4dce1df3dffff7f8b2cd7dff7303df3b6150c9788cb75dcf6747247132b9f5",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x96b198fb5ddbd1eed57ed667068f1f1e55d07907b4c0dbd38675a69ea1b69824",index:0},depType:"code"}}],cobuild:!0},[fr.V1]:void 0}),Uw=Object.freeze({[fr.V2]:{codeHash:"0x7366a61534fa7c7e6225ecc0d828ea3b5366adec2b58206f2ee84995fe030075",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xe464b7fb9311c5e2820e61c99afc615d6b98bdefbe318c34868c010cbd0dc938",index:0},depType:"code"}}],cobuild:!0},[fr.V1]:void 0,[fr.DID]:void 0});var Fw=Object.freeze({[fr.DID]:{codeHash:"0x0b1f412fbae26853ff7d082d422c2bdd9e2ff94ee8aaec11240a5b34cc6e890f",hashType:"type",cellDeps:[{cellDep:{outPoint:{txHash:"0x306961e0eb04ed972c60cb89a0aed1b0ef065d96d2fc0000c62db5275e32dc6f",index:0},depType:"code"},type:{codeHash:"0x00000000000000000000000000000000000000000000000000545950455f4944",hashType:"type",args:"0x80f0d4bf6b3951911aa6b98cc609d477a8a10b903b35cfd528d098e95c36f680"}}]},[fr.V2]:{codeHash:"0x685a60219309029d01310311dba953d67029170ca4848a4ff638e57002130a0d",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x5e8d2a517d50fd4bb4d01737a7952a1f1d35c8afc77240695bb569cd7d9d5a1f",index:0},depType:"code"}}],cobuild:!0},[fr.V1]:{codeHash:"0xbbad126377d45f90a8ee120da988a2d7332c78ba8fd679aab478a19d6c133494",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xfd694382e621f175ddf81ce91ce2ecf8bfc027d53d7d31b8438f7d26fc37fd19",index:0},depType:"code"}}]}}),$w=Object.freeze({[fr.V2]:{codeHash:"0x0bbe768b519d8ea7b96d58f1182eb7e6ef96c541fbd9526975077ee09f049058",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0xcebb174d6e300e26074aea2f5dbd7f694bb4fe3de52b6dfe205e54f90164510a",index:0},depType:"code"}}],cobuild:!0},[fr.V1]:{codeHash:"0x598d793defef36e2eeba54a9b45130e4ca92822e1d193671f490950c3b856080",hashType:"data1",cellDeps:[{cellDep:{outPoint:{txHash:"0x49551a20dfe39231e7db49431d26c9c08ceec96a29024eef3acc936deeb2ca76",index:0},depType:"code"}}]},[fr.DID]:void 0});function lu(r){return r.addressPrefix==="ckb"?Hw:Fw}function du(r){return r.addressPrefix==="ckb"?Uw:$w}function $m(r,e){let t=lu(r)[e??j1];if(!t)throw new Error(`Spore script info not found of for version ${e} on ${r.addressPrefix}`);return ln.from(t)}function qm(r,e){let t=du(r)[e??j1];if(!t)throw new Error(`Cluster script info not found of for version ${e} on ${r.addressPrefix}`);return ln.from(t)}function qw(r,e,t=ya){if(!r.type)throw new Error("Spore cell must have a type script");let n=D.Script.from(r.type),s=n.hash(),o=uu.encode({type:"CreateSpore",value:{sporeId:n.args,to:{type:"Script",value:r.lock},dataHash:D.hashCkb(e)}});return{scriptInfoHash:D.hexFrom(t),scriptHash:s,data:D.hexFrom(o)}}function jw(r,e,t=ya){if(!r.type||!e.type)throw new Error("Spore cell must have a type script");let n=D.Script.from(e.type),s=n.hash(),o=uu.encode({type:"TransferSpore",value:{sporeId:n.args,from:{type:"Script",value:r.lock},to:{type:"Script",value:e.lock}}});return{scriptInfoHash:D.hexFrom(t),scriptHash:s,data:D.hexFrom(o)}}function zw(r,e=ya){if(!r.type)throw new Error("Spore cell must have a type script");let t=D.Script.from(r.type),n=t.hash(),s=uu.encode({type:"MeltSpore",value:{sporeId:t.args,from:{type:"Script",value:r.lock}}});return{scriptInfoHash:D.hexFrom(e),scriptHash:n,data:D.hexFrom(s)}}function Vw(r,e,t=ya){if(!r.type)throw new Error("Cluster cell must have a type script");let n=D.Script.from(r.type),s=n.hash(),o=uu.encode({type:"CreateCluster",value:{clusterId:n.args,to:{type:"Script",value:r.lock},dataHash:D.hashCkb(e)}});return{scriptInfoHash:D.hexFrom(t),scriptHash:s,data:D.hexFrom(o)}}function z1(r,e,t=ya){if(!r.type||!e.type)throw new Error("Cluster cell must have a type script");let n=D.Script.from(e.type),s=n.hash(),o=uu.encode({type:"TransferCluster",value:{clusterId:n.args,from:{type:"Script",value:r.lock},to:{type:"Script",value:e.lock}}});return{scriptInfoHash:D.hexFrom(t),scriptHash:s,data:D.hexFrom(o)}}async function ga(r,e,t){let n=D.Transaction.from(e);if(t.length===0)return r.prepareTransaction(n);let s=_D(n);return n=await r.prepareTransaction(n),TD(n,[s,t].flat()),n}function SD(r){try{return Fm.decode(D.bytesFrom(r))}catch{return}}function _D(r){if(r.witnesses.length===0)return[];let e=SD(r.witnesses[r.witnesses.length-1]);if(!e)return[];if(e.type!=="SighashAll")throw new Error("Invalid cobuild proof type: SighashAll");return r.witnesses.pop(),e.value.message.actions}function TD(r,e){r.setWitnessAt(Math.max(r.witnesses.length,r.inputs.length),Fm.encode({type:"SighashAll",value:{seal:"0x",message:{actions:e}}}))}async function Kw(r,e,t,n,s){if(!t.clusterId||n==="skip")return;if(!n)throw Error("clusterMode is undefined but the spore has a cluster");let{cell:o,scriptInfo:i}=await V1(r.client,t.clusterId);switch(n){case"lockProxy":{let c=o.cellOutput.lock,a=await e.findInputIndexByLock(c,r.client);if(a===void 0&&(await e.completeInputsAddOne(new D.SignerCkbScriptReadonly(r.client,c)),a=await e.findInputIndexByLock(c,r.client),a===void 0))throw new Error("Lock proxy input not found");e.outputs.some(u=>u.lock===c)||e.addOutput(await e.getInput(a).getCell(r.client)),e.addCellDeps({outPoint:o.outPoint,depType:"code"});return}case"clusterCell":return e.inputs.some(c=>c.previousOutput.eq(o.outPoint))?void 0:(e.addInput(o),e.addOutput(o.cellOutput,o.outputData),await e.addCellDepInfos(r.client,i.cellDeps),e.addCellDeps({outPoint:o.outPoint,depType:"code"}),i.cobuild?z1(o.cellOutput,o.cellOutput,s):void 0)}}async function K1(r,e,t){for(let n of t){if(!n)continue;let s=await r.findSingletonCellByType({...n,args:e},!0);if(s)return{cell:s,scriptInfo:ln.from(n)}}}async function Ww(r,e,t){let n=await K1(r,e,t??Object.values(du(r)));if(n)return{cell:n.cell,cluster:n.cell,clusterData:$1(n.cell.outputData),scriptInfo:n.scriptInfo}}async function V1(r,e,t){let n=await Ww(r,e,t);if(!n)throw new Error(`Cluster ${D.hexFrom(e)} not found`);return n}async function AD(r){let{signer:e,data:t,to:n,scriptInfoHash:s}=r,o=r.scriptInfo??qm(e.client),i=D.Transaction.from(r.tx??{});await i.completeInputsAtLeastOne(e);let c=D.hashTypeId(i.inputs[0],i.outputs.length),a=Mw(t);i.addOutput({lock:n??(await e.getRecommendedAddressObj()).script,type:{...o,args:c}},a),await i.addCellDepInfos(e.client,o.cellDeps);let u=o.cobuild?[Vw(i.outputs[i.outputs.length-1],a,s)]:[];return{tx:await ga(e,i,u),id:c}}async function kD(r){let{signer:e,id:t,to:n,scripts:s,scriptInfoHash:o}=r,i=D.Transaction.from(r.tx??{}),{cell:c,scriptInfo:a}=await V1(e.client,t,s);i.addInput(c),i.addOutput({lock:n,type:c.cellOutput.type},c.outputData),await i.addCellDepInfos(e.client,a.cellDeps);let u=a.cobuild?[z1(c.cellOutput,i.outputs[i.outputs.length-1],o)]:[];return{tx:await ga(e,i,u)}}async function*CD(r){let{signer:e,order:t,limit:n,scriptInfos:s}=r;for(let o of s??Object.values(du(e.client)))if(o)for await(let i of e.findCells({script:{...o,args:""}},!0,t,n))yield{cell:i,cluster:i,clusterData:$1(i.outputData),scriptInfo:ln.from(o)}}async function*BD(r){let{client:e,lock:t,order:n,limit:s,scriptInfos:o}=r;for(let i of o??Object.values(du(e)))if(i)for await(let c of e.findCells({script:{...i,args:""},scriptType:"type",scriptSearchMode:"prefix",withData:!0,filter:t?{script:t}:void 0},n,s))yield{cell:c,cluster:c,clusterData:$1(c.outputData),scriptInfo:ln.from(i)}}var Km={};be(Km,{DOB_MAINNET_DECODERS:()=>Yw,DOB_TESTNET_DECODERS:()=>Xw,checkDecoder:()=>W1,checkPatternDob0:()=>Z1,checkPatternDob1:()=>Vm,decodeDobByRawData:()=>OD,decodeDobBySporeCell:()=>Jw,decodeDobBySporeId:()=>Gw,decodeDobBySporeOutpoint:()=>ID,encodeClusterDescriptionForDob0:()=>PD,encodeClusterDescriptionForDob1:()=>MD,encodeDna:()=>DD,extractDobFromDecoderResult:()=>zm,getDecoder:()=>RD,getErrorByCode:()=>jm});var Zw={1001:"DnaLengthNotMatch",1002:"SporeIdLengthInvalid",1003:"NativeDecoderNotFound",1004:"SporeIdNotFound",1005:"SporeDataUncompatible",1006:"SporeDataContentTypeUncompatible",1007:"DOBVersionUnexpected",1008:"ClusterIdNotSet",1009:"ClusterIdNotFound",1010:"ClusterDataUncompatible",1011:"DecoderIdNotFound",1012:"DecoderOutputInvalid",1013:"HexedDNAParseError",1014:"HexedSporeIdParseError",1015:"DecoderBinaryPathInvalid",1016:"DecoderExecutionError",1017:"DecoderExecutionInternalError",1018:"FetchLiveCellsError",1019:"FetchTransactionError",1020:"NoOutputCellInTransaction",1021:"DOBContentUnexpected",1022:"DOBMetadataUnexpected",1023:"DOBRenderCacheNotFound",1024:"DOBRenderCacheModified",1025:"DecoderBinaryHashInvalid",1026:"DecoderBinaryNotFoundInCell",1027:"JsonRpcRequestError",1028:"SystemTimeError",1029:"DecoderHashNotFound",1030:"DecoderScriptNotFound",1031:"DecoderChainIsEmpty"};function jm(r){let e=Object.keys(Zw).indexOf(r.toString());if(e<0)throw new Error(`Error code ${r} not found`);return Object.values(Zw)[e]}function zm(r){let e=JSON.parse(r);if("error"in e){let s=jm(e.error.code);throw new Error(`Decode DOB failed: ${s}`)}let t=JSON.parse(e.result);return JSON.parse(t.render_output)}async function Gw(r,e){let n=await new Vf({baseURL:e,method:"POST",headers:{"Content-Type":"application/json"}}).post("/",JSON.stringify({id:0,jsonrpc:"2.0",method:"dob_decode",params:[D.hexFrom(r).replace(/^0x/,"")]}));return zm(n.data)}async function Jw(r,e){let t=r.type?.args;if(t===void 0)throw new Error("Invalid spore cell: missing spore id");return Gw(D.hexFrom(t),e)}async function ID(r,e,t){let n=await r.getCell(e);if(!n)throw new Error("Invalid spore outpoint: missing spore cell");return Jw(n.cellOutput,t)}async function OD(r,e,t){let s=await new Vf({baseURL:t,method:"POST",headers:{"Content-Type":"application/json"}}).post("/",JSON.stringify({id:0,jsonrpc:"2.0",method:"dob_raw_decode",params:[D.hexFrom(r),D.hexFrom(e)]}));return zm(s.data)}function W1(r){if((r.type==="code_hash"||r.type==="type_id")&&r.hash===void 0)throw new Error("Invalid decoder: 'hash' is required for 'code_hash' and 'type_id'");if(r.type==="type_script"&&r.script===void 0)throw new Error("Invalid decoder: 'script' is required for 'type_script'")}function Z1(r){switch(r.patternType){case"options":{if(r.traitArgs===void 0)throw new Error("Invalid pattern: 'traitArgs' is required for 'options'");if(r.traitArgs.length===0)throw new Error("Invalid pattern: 'traitArgs' should not be empty for 'options'");break}case"range":{if(r.traitArgs===void 0)throw new Error("Invalid pattern: 'traitArgs' is required for 'range'");if(r.traitArgs.length!==2||r.traitArgs.filter(e=>typeof e=="number").length!==2)throw new Error("Invalid pattern: 'traitArgs' should contain exactly 2 numbers for 'range'");break}}if(r.dnaLength===0)throw new Error("Invalid pattern: 'dnaLength' should be greater than 0")}function Vm(r){switch(r.patternType){case"options":{if(!Array.isArray(r.traitArgs))throw new Error("Invalid pattern: 'traitArgs' should be an array for 'options'");for(let e of r.traitArgs){if(e.length!==2)throw new Error("Invalid pattern: 'traitArgs' should contain exactly 2 elements for 'options'");if(typeof e[0]!="string"){if(!Array.isArray(e[0]))throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===1&&e[0][0]!=="*")throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===2&&(typeof e[0][0]!="number"||typeof e[0][1]!="number"))throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'");if(e[0].length===0||e[0].length>2)throw new Error("Invalid pattern: 'traitArgs[0]' should be a string or an array that contains only 2 numbers or the '*' for 'options'")}if(typeof e[1]!="string")throw new Error("Invalid pattern: 'traitArgs[1]' should be a string for 'options'")}break}case"raw":{if(r.traitName!==""||typeof r.traitArgs!="string")throw new Error("Invalid pattern: 'traitName' should be empty and 'traitArgs' should be a string for 'raw'");break}}}function DD(r){let e=D.bytesFrom(JSON.stringify(r),"utf8"),t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(e),t}function PD(r){return W1(r.dob.decoder),r.dob.pattern.forEach(e=>{Z1(e),e.toJSON=function(){return e.traitArgs?[e.traitName,e.dobType,e.dnaOffset,e.dnaLength,e.patternType,e.traitArgs]:[e.traitName,e.dobType,e.dnaOffset,e.dnaLength,e.patternType]}}),JSON.stringify(r)}function MD(r){return r.dob.decoders.forEach(e=>{W1(e.decoder),e.pattern.forEach(t=>{"dnaOffset"in t?(Z1(t),t.toJSON=function(){return t.traitArgs?[t.traitName,t.dobType,t.dnaOffset,t.dnaLength,t.patternType,t.traitArgs]:[t.traitName,t.dobType,t.dnaOffset,t.dnaLength,t.patternType]}):(Vm(t),t.toJSON=()=>[t.imageName,t.svgFields,t.traitName,t.patternType,t.traitArgs])})}),JSON.stringify(r)}var Xw=Object.freeze({dob0:{type:"code_hash",hash:"0x13cac78ad8482202f18f9df4ea707611c35f994375fa03ae79121312dda9925c"},dob1:{type:"code_hash",hash:"0xda3525549b72970b4c95f5b5749357f20d1293d335710b674f09c32f7d54b6dc"}}),Yw=Object.freeze({dob0:{type:"code_hash",hash:"0x13cac78ad8482202f18f9df4ea707611c35f994375fa03ae79121312dda9925c"},dob1:{type:"code_hash",hash:"0xda3525549b72970b4c95f5b5749357f20d1293d335710b674f09c32f7d54b6dc"}});function RD(r,e,t){return t?t[e]:r.addressPrefix==="ckb"?Yw[e]:Xw[e]}async function Qw(r,e,t){let n=await K1(r,e,t??Object.values(lu(r)));if(n)return{cell:n.cell,spore:n.cell,sporeData:q1(n.cell.outputData),scriptInfo:n.scriptInfo}}async function Wm(r,e,t){let n=await Qw(r,e,t);if(!n)throw new Error(`Spore ${D.hexFrom(e)} not found`);return n}async function ND(r){let{signer:e,data:t,to:n,clusterMode:s,scriptInfoHash:o}=r,i=r.scriptInfo??$m(e.client),c=[],a=[],u=D.Transaction.from(r.tx??{});await u.completeInputsAtLeastOne(e);let{script:d}=await e.getRecommendedAddressObj(),y=D.hashTypeId(u.inputs[0],u.outputs.length);a.push(y);let v=Lw(t);if(u.addOutput({lock:n??d,type:{...i,args:y}},v),i.cobuild){let T=u.outputs[u.outputs.length-1],A=qw(T,v,o);c.push(A)}await u.addCellDepInfos(e.client,i.cellDeps);let _=await Kw(e,u,t,s);return _&&c.push(_),{tx:await ga(e,u,c),id:y}}async function LD(r){let{signer:e,id:t,to:n,scripts:s,scriptInfoHash:o}=r,i=D.Transaction.from(r.tx??{}),{cell:c,scriptInfo:a}=await Wm(e.client,t,s);await i.addCellDepInfos(e.client,a.cellDeps),i.addInput(c),i.addOutput({lock:n,type:c.cellOutput.type},c.outputData);let u=a.cobuild?[jw(c.cellOutput,i.outputs[i.outputs.length-1],o)]:[];return{tx:await ga(e,i,u)}}async function HD(r){let{signer:e,id:t,scripts:n,scriptInfoHash:s}=r,o=D.Transaction.from(r.tx??{}),{cell:i,scriptInfo:c}=await Wm(e.client,t,n);await o.addCellDepInfos(e.client,c.cellDeps),o.addInput(i);let a=c.cobuild?[zw(i.cellOutput,s)]:[];return{tx:await ga(e,o,a)}}async function*UD(r){let{signer:e,clusterId:t,scriptInfos:n,limit:s,order:o}=r;for(let i of n??Object.values(lu(e.client)))if(i)for await(let c of e.findCells({script:{...i,args:[]}},!0,o,s)){let a=q1(c.outputData);(!t||t===""&&!a.clusterId||a.clusterId===D.hexFrom(t))&&(yield{cell:c,spore:c,sporeData:a,scriptInfo:ln.from(i)})}}async function*FD(r){let{client:e,lock:t,clusterId:n,scriptInfos:s,limit:o,order:i}=r;for(let c of s??Object.values(lu(e)))if(c)for await(let a of e.findCells({script:{...c,args:[]},scriptType:"type",scriptSearchMode:"prefix",withData:!0,filter:t?{script:t}:void 0},i,o)){let u=q1(a.outputData);(!n||n===""&&!u.clusterId||u.clusterId===D.hexFrom(n))&&(yield{cell:a,spore:a,sporeData:u,scriptInfo:ln.from(c)})}}var Bn={};be(Bn,{Executor:()=>G1,ExecutorErrorDecode:()=>hu,ExecutorErrorExecutionFailed:()=>Li,ExecutorErrorUnknown:()=>pu,ExecutorJsonRpc:()=>Zm,ExecutorResponse:()=>mu,Trait:()=>Gm,getMethodPath:()=>Nd});function Nd(r){return D.hashCkb(D.bytesFrom(r,"utf8")).slice(0,18)}var pu=class extends Error{constructor(e){super(e)}},Li=class extends Error{constructor(e){super(e)}},hu=class extends Error{constructor(e){super(e)}},mu=class r{constructor(e,t){this.res=e,this.cellDeps=t}static new(e,t){return new r(e,t?.map(D.OutPoint.from)??[])}map(e){try{return new r(e(this.res),this.cellDeps)}catch(t){throw new hu(JSON.stringify(t))}}},G1=class{async runScriptTry(e,t,n,s){try{return await this.runScript(e,t,n,s)}catch(o){if(o instanceof Li)return;throw o}}},Zm=class extends G1{constructor(e,t){super(),this.requestor=t?.requestor??new D.RequestorJsonRpc(e,t,n=>{throw typeof n!="object"||n===null||!("code"in n)||typeof n.code!="number"?new pu(JSON.stringify(n)):n.code===1003||n.code===1004?"message"in n&&typeof n.message=="string"?new Li(n.message):new Li:"message"in n&&typeof n.message=="string"?new pu(n.message):new pu})}get url(){return this.requestor.url}async runScript(e,t,n,s){let o=D.OutPoint.from(e),[i,c]=(()=>{if(s?.tx){let d=D.Transaction.from(s.tx);return["run_script_level_transaction",[{inner:zs.JsonRpcTransformers.transactionFrom(d),hash:d.hash()}]]}if(s?.cell){let d=D.CellAny.from(s.cell);return["run_script_level_cell",[{cell_output:zs.JsonRpcTransformers.cellOutputFrom(d.cellOutput,d.outputData),hex_data:D.hexFrom(d.outputData)}]]}return s?.script?["run_script_level_script",[zs.JsonRpcTransformers.scriptFrom(s.script)]]:["run_script_level_code",[]]})(),{content:a,cell_deps:u}=await this.requestor.request(i,[o.txHash,Number(o.index),[Nd(t),...n.map(D.hexFrom)],...c]);return mu.new(a,u.map(zs.JsonRpcTransformers.outPointTo))}};var Gm=class r{constructor(e,t){this.code=D.OutPoint.from(e),this.executor=t??void 0}static async tryRun(e){try{return await e}catch(t){if(t instanceof Li||t instanceof hu)return mu.new(void 0);throw t}}async tryRun(e){return r.tryRun(e)}assertExecutor(){if(!this.executor)throw new Error("SSRI executor is not set");return this.executor}async getMethods(e=0,t=0){return(await this.assertExecutor().runScript(this.code,"SSRI.get_methods",[D.numToBytes(e??0,8),D.numToBytes(t??0,8)])).map(s=>D.mol.Byte8Vec.decode(s))}async hasMethods(e,t){let n=D.mol.Byte8Vec.encode(e.map(Nd).concat(t?.map(D.hexFrom)??[]));return(await this.assertExecutor().runScript(this.code,"SSRI.has_methods",[n])).map(o=>D.mol.BoolVec.decode(o))}async version(){return(await this.assertExecutor().runScript(this.code,"SSRI.version",[])).map(t=>{if(t.length!==4)throw new Error("Invalid U8");return D.numFrom(t)})}};var Hd={};be(Hd,{Udt:()=>Ld,UdtPausable:()=>Jm});var Ld=class extends Bn.Trait{constructor(e,t,n){super(e,n?.executor),this.script=D.Script.from(t)}async name(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.name",[],{script:this.script,...e});if(t)return t.map(n=>D.bytesTo(n,"utf8"))}return Bn.ExecutorResponse.new(void 0)}async symbol(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.symbol",[],{script:this.script,...e});if(t)return t.map(n=>D.bytesTo(n,"utf8"))}return Bn.ExecutorResponse.new(void 0)}async decimals(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.decimals",[],{script:this.script,...e});if(t)return t.map(n=>D.numFromBytes(n))}return Bn.ExecutorResponse.new(void 0)}async icon(e){if(this.executor){let t=await this.executor.runScriptTry(this.code,"UDT.icon",[],{script:this.script,...e});if(t)return t.map(n=>D.bytesTo(n,"utf8"))}return Bn.ExecutorResponse.new(void 0)}async transfer(e,t,n){let s;if(this.executor){let o=D.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let i=await this.executor.runScriptTry(this.code,"UDT.transfer",[o.toBytes(),D.ScriptVec.encode(t.map(({to:c})=>c)),D.mol.Uint128Vec.encode(t.map(({amount:c})=>c))],{script:this.script});i&&(s=i.map(c=>D.Transaction.fromBytes(c)))}if(!s){let o=D.Transaction.from(n??{});for(let{to:i,amount:c}of t)o.addOutput({lock:i,type:this.script},D.numLeToBytes(c,16));s=Bn.ExecutorResponse.new(o)}return s.res.addCellDeps({outPoint:this.code,depType:"code"}),s}async mint(e,t,n){let s;if(this.executor){let o=D.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let i=await this.executor.runScriptTry(this.code,"UDT.mint",[o.toBytes(),D.ScriptVec.encode(t.map(({to:c})=>c)),D.mol.Uint128Vec.encode(t.map(({amount:c})=>c))],{script:this.script});i&&(s=i.map(c=>D.Transaction.fromBytes(c)))}if(!s){let o=D.Transaction.from(n??{});for(let{to:i,amount:c}of t)o.addOutput({lock:i,type:this.script},D.numLeToBytes(c,16));s=Bn.ExecutorResponse.new(o)}return s.res.addCellDeps({outPoint:this.code,depType:"code"}),s}async completeChangeToLock(e,t,n){let s=D.Transaction.from(e);await s.completeInputsByUdt(t,this.script);let o=await s.getInputsUdtBalance(t.client,this.script)-s.getOutputsUdtBalance(this.script);return o>D.Zero&&s.addOutput({lock:n,type:this.script},D.numLeToBytes(o,16)),s}async completeBy(e,t){let{script:n}=await t.getRecommendedAddressObj();return this.completeChangeToLock(e,t,n)}};var Jm=class extends Ld{constructor(e,t,n){super(e,t,n)}async pause(e,t,n,s){let o=D.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let c=(await this.assertExecutor().runScript(this.code,"UDTPausable.pause",[o.toBytes(),D.mol.Byte32Vec.encode(t.map(a=>D.Script.from(a).hash()).concat(s?.map(D.hexFrom)??[]))],{script:this.script})).map(a=>D.Transaction.fromBytes(a));return c.res.addCellDeps({outPoint:this.code,depType:"code"}),c}async unpause(e,t,n,s){let o=D.Transaction.from(n??{});await o.completeInputsAtLeastOne(e);let c=(await this.assertExecutor().runScript(this.code,"UDTPausable.unpause",[o.toBytes(),D.mol.Byte32Vec.encode(t.map(a=>D.Script.from(a).hash()).concat(s?.map(D.hexFrom)??[]))],{script:this.script})).map(a=>D.Transaction.fromBytes(a));return c.res.addCellDeps({outPoint:this.code,depType:"code"}),c}async isPaused(e,t){return(await this.assertExecutor().runScript(this.code,"UDTPausable.is_paused",[D.mol.Byte32Vec.encode(e.map(s=>D.Script.from(s).hash()).concat(t?.map(D.hexFrom)??[]))],{script:this.script})).map(s=>D.mol.BoolVec.decode(s))}async enumeratePaused(e,t){return(await this.assertExecutor().runScript(this.code,"UDTPausable.enumerate_paused",[D.numToBytes(e??0,8),D.numToBytes(t??0,8)],{script:this.script})).map(s=>D.mol.Byte32Vec.decode(s))}};var Fd={};be(Fd,{Signer:()=>Ud,getUniSatSigners:()=>$D});var Ud=class extends D.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:D.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:D.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async _getNetworkToChange(){let e=await(async()=>this.provider.getChain?{BITCOIN_MAINNET:"btc",BITCOIN_TESTNET:"btcTestnet",FRACTAL_BITCOIN_MAINNET:"fractalBtc"}[(await this.provider.getChain()).enum]??"":await this.provider.getNetwork()==="livenet"?"btc":"btcTestnet")(),{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}async ensureNetwork(){let e=await this._getNetworkToChange();if(e){if(this.provider.switchChain){let t={btc:"BITCOIN_MAINNET",btcTestnet:"BITCOIN_TESTNET",fractalBtc:"FRACTAL_BITCOIN_MAINNET"}[e];if(t){await this.provider.switchChain(t);return}}else if(e==="btc"||e==="btcTestnet"){await this.provider.switchNetwork(e==="btc"?"livenet":"testnet");return}throw new Error(`UniSat wallet doesn't support the requested chain ${e}`)}}async getBtcAccount(){return(await this.provider.getAccounts())[0]}async getBtcPublicKey(){return D.hexFrom(await this.provider.getPublicKey())}async connect(){await this.provider.requestAccounts(),await this.ensureNetwork()}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async isConnected(){return await this._getNetworkToChange()?!1:(await this.provider.getAccounts()).length!==0}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return this.provider.signMessage(t,"ecdsa")}};function $D(r,e){let t=window;return typeof t.unisat>"u"?[]:[{signer:new Ud(r,t.unisat,e),name:"BTC"}]}var jd={};be(jd,{SignerBtc:()=>$d,SignerCkb:()=>qd,getUtxoGlobalSigners:()=>qD});var $d=class extends D.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:D.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:D.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async getBtcAccount(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async getBtcPublicKey(){let e=await this.provider.getPublicKey(),t=await this.getBtcAccount(),n=e.find(s=>s.address===t);if(!n)throw new Error("pubKey not found");return D.hexFrom(n.publicKey)}async ensureNetwork(){let e=await this._getNetworkToChange();if(!e)return;let t={btc:"btc",btcTestnet:"btc_testnet",btcTestnet4:"btc_testnet_4",btcSignet:"btc_signet"}[e];if(t){await this.provider.switchNetwork(t);return}throw new Error(`UTXO Global wallet doesn't support the requested chain ${e}`)}async _getNetworkToChange(){let e={btc:"btc",btc_testnet:"btcTestnet",btc_testnet_4:"btcTestnet4",btc_signet:"btcSignet"}[await this.provider.getNetwork()],{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async connect(){await this.provider.connect(),await this.ensureNetwork()}async isConnected(){return await this._getNetworkToChange()!==void 0?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getBtcAccount())}};var qd=class extends D.Signer{get type(){return D.SignerType.CKB}get signType(){return D.SignerSignType.CkbSecp256k1}constructor(e,t){super(e),this.provider=t}getInternalAddress(){return this.getAccount()}async getIdentity(){return this.getPublicKey()}async getAddressObj(){let e=await this.getInternalAddress();return D.Address.fromString(e,this.client)}async getAddressObjs(){return[await this.getAddressObj()]}async getAccount(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async getPublicKey(){let e=await this.provider.getPublicKey(),t=await this.getAccount(),n=e.find(s=>s.address===t);if(!n)throw new Error("pubKey not found");return D.hexFrom(n.publicKey)}get ckbNetwork(){return this.client.addressPrefix==="ckb"?"nervos":"nervos_testnet"}async connect(){await this.provider.connect(),this.ckbNetwork!==await this.provider.getNetwork()&&await this.provider.switchNetwork(this.ckbNetwork)}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async isConnected(){return await this.provider.getNetwork()!==this.ckbNetwork?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getAccount())}async signOnlyTransaction(e){let t=await this.provider.signTransaction(e);return D.Transaction.from(t)}async prepareTransaction(e){let t=D.Transaction.from(e),{script:n}=await this.getAddressObj();return await t.addCellDepsOfKnownScripts(this.client,D.KnownScript.Secp256k1Blake160),await t.prepareSighashAllWitness(n,65,this.client),t}};var J1=class extends D.SignerDoge{constructor(e,t,n=[{addressPrefix:"ckb",signerType:D.SignerType.Doge,network:"doge"},{addressPrefix:"ckt",signerType:D.SignerType.Doge,network:"dogeTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async getDogeAddress(){let e=await this.provider.getAccount();return this.accountCache=e[0],this.accountCache}async ensureNetwork(){let e=await this._getNetworkToChange();if(!e)return;let t={doge:"dogecoin",dogeTestnet:"dogecoin_testnet"}[e];if(t){await this.provider.switchNetwork(t);return}throw new Error(`UTXO Global Doge wallet doesn't support the requested chain ${e}`)}async _getNetworkToChange(){let e={dogecoin:"doge",dogecoin_testnet:"dogeTestnet"}[await this.provider.getNetwork()],{network:t}=this.matchNetworkPreference(this.preferredNetworks,e)??{network:e};if(t!==e)return t}onReplaced(e){let t=[],n=async()=>{e(),t[0]?.()};return t.push(()=>{this.provider.removeListener("accountsChanged",n),this.provider.removeListener("networkChanged",n)}),this.provider.on("accountsChanged",n),this.provider.on("networkChanged",n),t[0]}async connect(){await this.provider.connect(),await this.ensureNetwork()}async isConnected(){return await this._getNetworkToChange()!==void 0?!1:await this.provider.isConnected()}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return this.provider.signMessage(t,this.accountCache??await this.getDogeAddress())}};function qD(r,e){let t=window;return typeof t.utxoGlobal>"u"?[]:[{name:"CKB",signer:new qd(r,t.utxoGlobal.ckbSigner)},{name:"BTC",signer:new $d(r,t.utxoGlobal.bitcoinSigner,e)},{name:"DOGE",signer:new J1(r,t.utxoGlobal.dogeSigner,e)}]}var Vd={};be(Vd,{Signer:()=>zd,getXverseSigners:()=>lP});var ev;(function(r){r.Mainnet="Mainnet",r.Testnet="Testnet",r.Signet="Signet"})(ev||(ev={}));var Xm=yr(To([ae(),Pl(),mr()])),Vs=se({jsonrpc:pe("2.0"),method:ae(),params:yr(To([Jt(Eo()),Dl({}),mr()])),id:Xm}),X1;(function(r){r[r.PARSE_ERROR=-32700]="PARSE_ERROR",r[r.INVALID_REQUEST=-32600]="INVALID_REQUEST",r[r.METHOD_NOT_FOUND=-32601]="METHOD_NOT_FOUND",r[r.INVALID_PARAMS=-32602]="INVALID_PARAMS",r[r.INTERNAL_ERROR=-32603]="INTERNAL_ERROR",r[r.USER_REJECTION=-32e3]="USER_REJECTION",r[r.METHOD_NOT_SUPPORTED=-32001]="METHOD_NOT_SUPPORTED",r[r.ACCESS_DENIED=-32002]="ACCESS_DENIED"})(X1||(X1={}));var Ym=se({jsonrpc:pe("2.0"),result:Fc(Eo()),id:Xm}),Qm=se({jsonrpc:pe("2.0"),error:Fc(Eo()),id:Xm}),Hde=To([Ym,Qm]);var jD=["software","ledger"],tv=Ml(jD),zD="wallet_requestPermissions",VD=$c(),$de=pe(!0),qde=se({...Vs.entries,...se({method:pe(zD),params:VD,id:ae()}).entries}),KD="wallet_renouncePermissions",WD=$c(),jde=pe(!0),zde=se({...Vs.entries,...se({method:pe(KD),params:WD,id:ae()}).entries}),ZD="wallet_getWalletType",Vde=ns(mr());var Kde=se({...Vs.entries,...se({method:pe(ZD),id:ae()}).entries});var ba;(function(r){r.Ordinals="ordinals",r.Payment="payment",r.Stacks="stacks"})(ba||(ba={}));var ey;(function(r){r.p2pkh="p2pkh",r.p2sh="p2sh",r.p2wpkh="p2wpkh",r.p2wsh="p2wsh",r.p2tr="p2tr",r.stacks="stacks"})(ey||(ey={}));var rv=se({address:ae(),publicKey:ae(),purpose:qr(ba),addressType:qr(ey)}),GD="getInfo",JD=ns(mr()),Jde=se({version:ae(),methods:yr(Jt(ae())),supports:Jt(ae())}),Xde=se({...Vs.entries,...se({method:pe(GD),params:JD,id:ae()}).entries}),XD="getAddresses",YD=se({purposes:Jt(qr(ba)),message:yr(ae())}),Yde=se({addresses:Jt(rv)}),Qde=se({...Vs.entries,...se({method:pe(XD),params:YD,id:ae()}).entries}),QD="signMessage",yu;(function(r){r.ECDSA="ECDSA",r.BIP322="BIP322"})(yu||(yu={}));var eP=se({address:ae(),message:ae(),protocol:yr(qr(yu))}),epe=se({signature:ae(),messageHash:ae(),address:ae(),protocol:qr(yu)}),tpe=se({...Vs.entries,...se({method:pe(QD),params:eP,id:ae()}).entries}),tP="getAccounts",rP=se({purposes:Jt(qr(ba)),message:yr(ae())}),rpe=Jt(se({...rv.entries,...se({walletType:tv}).entries})),npe=se({...Vs.entries,...se({method:pe(tP),params:rP,id:ae()}).entries}),nP="getBalance",spe=ns(mr()),ope=se({confirmed:ae(),unconfirmed:ae(),total:ae()}),ipe=se({...Vs.entries,...se({method:pe(nP),id:ae()}).entries});var sP="accountChange",oP=se({type:pe(sP)}),iP="networkChange",cP=se({type:pe(iP)}),aP="disconnect",fP=se({type:pe(aP)}),ape=Rl("type",[oP,cP,fP]);async function Y1(r){let e=await r;if(Gf(Qm,e))throw e.error;if(Gf(Ym,e))return e.result;throw{code:X1.INTERNAL_ERROR,message:"Received unknown response from provider.",data:e}}var zd=class extends D.SignerBtc{constructor(e,t,n=[{addressPrefix:"ckb",signerType:D.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:D.SignerType.BTC,network:"btcTestnet"}]){super(e),this.provider=t,this.preferredNetworks=n}async assertAddress(){this.addressCache=this.addressCache??(async()=>{if(await this.isConnected())return(await Y1(this.provider.request("getAddresses",{purposes:[ba.Payment]}))).addresses[0]})();let e=await this.addressCache;if(e)return e;throw Error("Not connected")}async getBtcAccount(){return(await this.assertAddress()).address}async getBtcPublicKey(){return D.hexFrom((await this.assertAddress()).publicKey)}async connect(){await this.isConnected()||await Y1(this.provider.request("wallet_requestPermissions",void 0))}async disconnect(){this.addressCache=void 0}onReplaced(e){let t=[],n=()=>{e(),t[0]?.()};return t.push(this.provider.addListener("accountChange",n),this.provider.addListener("networkChange",n)),t[0]}async isConnected(){try{return await Y1(this.provider.request("getBalance",void 0)),!0}catch{return!1}}async signMessageRaw(e){let t=typeof e=="string"?e:D.hexFrom(e).slice(2);return(await Y1(this.provider.request("signMessage",{message:t,address:(await this.assertAddress()).address,protocol:yu.ECDSA}))).signature}};function uP(r){return r?.split(".").reduce((e,t)=>e?.[t],window)}function lP(r,e){let t=window;return t.btc_providers?t.btc_providers.map(s=>({wallet:{name:s.name,icon:s.icon},signerInfo:{name:"BTC",signer:new zd(r,uP(s.id),e)}})):[]}function Dr(r){return`data:image/svg+xml,${encodeURIComponent(r)}`}var nv=Dr('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_46_558)"><circle cx="16" cy="16" r="16" fill="#627EEA"/><path d="M15.9957 20.4203L9.14282 16.3876L15.9957 5.14258V20.4203Z" fill="white"/><path d="M15.9957 26.8573L9.30029 17.396L15.9957 21.3511V26.8573Z" fill="white"/><path d="M16.2319 20.4203L23.0849 16.3876L16.2319 5.14258V20.4203Z" fill="#C1CCF7"/><path d="M16.3107 26.8573L23.0848 17.396L16.3107 21.3511V26.8573Z" fill="#C1CCF7"/></g><defs><clipPath id="clip0_46_558"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>');var sv=Dr('<svg xmlns="http://www.w3.org/2000/svg" width="420" height="420" viewBox="0 0 420 420" fill="none"><circle cx="210" cy="210" r="210" fill="#333333"/><path d="M271.127 204.419C279.096 204.419 285.555 197.959 285.555 189.991C285.555 182.022 279.096 175.562 271.127 175.562C263.159 175.562 256.699 182.022 256.699 189.991C256.699 197.959 263.159 204.419 271.127 204.419Z" fill="#8CDD00"/><path d="M173.995 175.562C166.773 175.562 160.91 181.425 160.91 188.648C160.91 195.87 166.773 201.733 173.995 201.733C181.218 201.733 187.081 195.87 187.081 188.648C187.064 181.425 181.218 175.562 173.995 175.562Z" fill="#8CDD00"/><path d="M213.43 164.836L198.969 233.586C197.626 240.006 191.878 244.657 185.327 244.657C181.086 244.657 177.139 242.757 174.47 239.465C172.39 236.894 171.342 233.734 171.391 230.491L145.27 237.238C146.383 244.084 149.2 250.618 153.687 256.203C161.434 265.816 172.963 271.335 185.311 271.335C204.407 271.335 221.111 257.775 225.041 239.089L240.665 164.852H213.43V164.836Z" fill="#C1C1C1"/><path d="M335.83 115.983C327.068 105.19 314.065 99 300.161 99H267.981L262.363 125.662H300.161C305.991 125.662 311.445 128.249 315.113 132.786C318.782 137.306 320.207 143.185 319.011 148.884L313.394 175.562H340.645L345.116 154.387C347.965 140.778 344.592 126.775 335.83 115.983Z" fill="#8CDD00"/><path d="M295.216 261.999C291.285 280.669 274.597 294.212 255.518 294.212H226.875L221.258 320.874H255.518C287.126 320.874 314.803 298.421 321.304 267.485L326.021 245.049H298.77L295.216 261.999Z" fill="#8CDD00"/><path d="M98.8061 152.39L93.9258 175.58H121.177L124.894 157.892C128.825 139.223 145.513 125.679 164.592 125.679H192.04L197.657 99.0176H164.592C132.985 99.0012 105.308 121.454 98.8061 152.39Z" fill="#8CDD00"/><path d="M104.998 287.072C101.33 282.552 99.9049 276.673 101.1 270.974L106.079 247.342L77.2555 254.777L74.9956 265.487C72.1296 279.097 75.5196 293.099 84.2813 303.891C93.0429 314.684 106.046 320.874 119.95 320.874H150.935L156.553 294.212H119.95C114.12 294.196 108.666 291.608 104.998 287.072Z" fill="#8CDD00"/></svg>');var ov=Dr('<svg xmlns="http://www.w3.org/2000/svg" xml:space="preserve" id="Layer_1" x="0" y="0" version="1.1" viewBox="0 0 318.6 318.6"><style>.st1,.st6{fill:#e4761b;stroke:#e4761b;stroke-linecap:round;stroke-linejoin:round}.st6{fill:#f6851b;stroke:#f6851b}</style><path fill="#e2761b" stroke="#e2761b" stroke-linecap="round" stroke-linejoin="round" d="m274.1 35.5-99.5 73.9L193 65.8z"/><path d="m44.4 35.5 98.7 74.6-17.5-44.3zm193.9 171.3-26.5 40.6 56.7 15.6 16.3-55.3zm-204.4.9L50.1 263l56.7-15.6-26.5-40.6z" class="st1"/><path d="m103.6 138.2-15.8 23.9 56.3 2.5-2-60.5zm111.3 0-39-34.8-1.3 61.2 56.2-2.5zM106.8 247.4l33.8-16.5-29.2-22.8zm71.1-16.5 33.9 16.5-4.7-39.3z" class="st1"/><path fill="#d7c1b3" stroke="#d7c1b3" stroke-linecap="round" stroke-linejoin="round" d="m211.8 247.4-33.9-16.5 2.7 22.1-.3 9.3zm-105 0 31.5 14.9-.2-9.3 2.5-22.1z"/><path fill="#233447" stroke="#233447" stroke-linecap="round" stroke-linejoin="round" d="m138.8 193.5-28.2-8.3 19.9-9.1zm40.9 0 8.3-17.4 20 9.1z"/><path fill="#cd6116" stroke="#cd6116" stroke-linecap="round" stroke-linejoin="round" d="m106.8 247.4 4.8-40.6-31.3.9zM207 206.8l4.8 40.6 26.5-39.7zm23.8-44.7-56.2 2.5 5.2 28.9 8.3-17.4 20 9.1zm-120.2 23.1 20-9.1 8.2 17.4 5.3-28.9-56.3-2.5z"/><path fill="#e4751f" stroke="#e4751f" stroke-linecap="round" stroke-linejoin="round" d="m87.8 162.1 23.6 46-.8-22.9zm120.3 23.1-1 22.9 23.7-46zm-64-20.6-5.3 28.9 6.6 34.1 1.5-44.9zm30.5 0-2.7 18 1.2 45 6.7-34.1z"/><path d="m179.8 193.5-6.7 34.1 4.8 3.3 29.2-22.8 1-22.9zm-69.2-8.3.8 22.9 29.2 22.8 4.8-3.3-6.6-34.1z" class="st6"/><path fill="#c0ad9e" stroke="#c0ad9e" stroke-linecap="round" stroke-linejoin="round" d="m180.3 262.3.3-9.3-2.5-2.2h-37.7l-2.3 2.2.2 9.3-31.5-14.9 11 9 22.3 15.5h38.3l22.4-15.5 11-9z"/><path fill="#161616" stroke="#161616" stroke-linecap="round" stroke-linejoin="round" d="m177.9 230.9-4.8-3.3h-27.7l-4.8 3.3-2.5 22.1 2.3-2.2h37.7l2.5 2.2z"/><path fill="#763d16" stroke="#763d16" stroke-linecap="round" stroke-linejoin="round" d="m278.3 114.2 8.5-40.8-12.7-37.9-96.2 71.4 37 31.3 52.3 15.3 11.6-13.5-5-3.6 8-7.3-6.2-4.8 8-6.1zM31.8 73.4l8.5 40.8-5.4 4 8 6.1-6.1 4.8 8 7.3-5 3.6 11.5 13.5 52.3-15.3 37-31.3-96.2-71.4z"/><path d="m267.2 153.5-52.3-15.3 15.9 23.9-23.7 46 31.2-.4h46.5zm-163.6-15.3-52.3 15.3-17.4 54.2h46.4l31.1.4-23.6-46zm71 26.4 3.3-57.7 15.2-41.1h-67.5l15 41.1 3.5 57.7 1.2 18.2.1 44.8h27.7l.2-44.8z" class="st6"/><script xmlns=""/></svg>');var iv=Dr('<svg version="1.1" id="_8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" style="enable-background:new 0 0 256 256;" xml:space="preserve"><style type="text/css">.st0{fill:none;} .st1{fill:#FFFFFF;} .st2{fill:#662482;}</style><g><path class="st0" d="M0,0v256h256V0H0z M231.2,159.2c0,20.7,0,31.1-3.5,42.2c-4.4,12.2-14,21.8-26.2,26.2 c-11.1,3.5-21.5,3.5-42.2,3.5H96.8c-20.7,0-31.1,0-42.2-3.5c-12.2-4.4-21.8-14-26.2-26.2c-3.5-11.1-3.5-21.5-3.5-42.2V96.8 c0-20.7,0-31.1,3.5-42.2c4.4-12.2,14-21.8,26.2-26.2c11.2-3.5,21.5-3.5,42.2-3.5h62.5c20.7,0,31.1,0,42.2,3.5 c12.2,4.4,21.8,14,26.2,26.2c3.5,11.1,3.5,21.5,3.5,42.2V159.2z"/> <circle class="st1" cx="137.9" cy="99" r="12.1"/><path class="st1" d="M210.8,115.9c0-47.3-27.7-68.7-64.4-68.7c-16.4,0-31,4.4-42.4,12.5c-3.8,2.7-9,0.1-9-4.5 c0-3.1-2.5-5.7-5.7-5.7H57.7c-3.1,0-5.7,2.5-5.7,5.7v144c0,3.1,2.5,5.7,5.7,5.7h33.7c3.1,0,5.6-2.5,5.6-5.6v-8.4 c0-62.8-33.2-109.8-0.4-116c30-5.7,64.1-3,64.5,20.1c0,2,0.3,8,8.6,11.2c5,2,12.6,2.6,22.6,2.4c0,0,9.1-0.7,9.1,8.5 c0,11.5-20.4,10.7-20.4,10.7c-6.7,0.3-22.6-1.5-31.7,1.2c-4.8,1.5-9,4.2-11.5,9.1c-4.2,8.3-6.2,26.5-6.5,45.5v15.5 c0,3.1,2.5,5.7,5.7,5.7h68c3.1,0,5.7-2.5,5.7-5.7l0,0V115.9z"/><path class="st2" d="M227.6,54.6c-4.4-12.2-14-21.8-26.2-26.2c-11.1-3.5-21.5-3.5-42.2-3.5H96.8c-20.7,0-31.1,0-42.2,3.5 c-12.2,4.4-21.8,14-26.2,26.2c-3.5,11.2-3.5,21.5-3.5,42.2v62.5c0,20.7,0,31.1,3.5,42.2c4.4,12.2,14,21.8,26.2,26.2 c11.2,3.5,21.5,3.5,42.2,3.5h62.5c20.7,0,31.1,0,42.2-3.5c12.2-4.4,21.8-14,26.2-26.2c3.5-11.1,3.5-21.5,3.5-42.2V96.8 C231.2,76.1,231.2,65.7,227.6,54.6z M205.1,204.8h-68c-3.1,0-5.7-2.5-5.7-5.7v-15.5c0.3-19,2.3-37.2,6.5-45.5 c2.5-5,6.7-7.7,11.5-9.1c9-2.7,24.9-0.9,31.7-1.2c0,0,20.4,0.8,20.4-10.7c0-9.3-9.1-8.5-9.1-8.5c-10,0.3-17.7-0.4-22.6-2.4 c-8.3-3.3-8.6-9.2-8.6-11.2c-0.4-23.1-34.5-25.9-64.5-20.1c-32.8,6.2,0.4,53.3,0.4,116v8.4c-0.1,3.1-2.5,5.6-5.6,5.6H57.7 c-3.1,0-5.7-2.5-5.7-5.7v-144c0-3.1,2.5-5.7,5.7-5.7h31.7c3.1,0,5.7,2.5,5.7,5.7c0,4.7,5.2,7.2,9,4.5c11.4-8.2,26-12.5,42.4-12.5 c36.7,0,64.4,21.4,64.4,68.7v83.2l0,0C210.8,202.3,208.3,204.8,205.1,204.8z M125.7,99c0-6.7,5.4-12.1,12.1-12.1S150,92.3,150,99 s-5.4,12.1-12.1,12.1S125.7,105.8,125.7,99z"/></g></svg>');var ty=Dr('<svg width="1000" height="1000" viewBox="0 0 1000 1000" fill="none" xmlns="http://www.w3.org/2000/svg"><rect width="1000" height="1000" fill="black"/><path fill-rule="evenodd" clip-rule="evenodd" d="M393.949 218.518H231.049C224.129 218.518 218.519 224.128 218.519 231.048V393.948C218.519 400.869 224.129 406.479 231.049 406.479H393.949C400.87 406.479 406.48 400.869 406.48 393.948V231.048C406.48 224.128 400.87 218.518 393.949 218.518ZM581.992 406.479H419.092C412.172 406.479 406.561 412.09 406.561 419.01V581.91C406.561 588.831 412.172 594.441 419.092 594.441H581.992C588.913 594.441 594.523 588.831 594.523 581.91V419.01C594.523 412.09 588.913 406.479 581.992 406.479ZM606.974 218.518H769.874C776.794 218.518 782.405 224.128 782.405 231.048V393.948C782.405 400.869 776.794 406.479 769.874 406.479H606.974C600.053 406.479 594.443 400.869 594.443 393.948V231.048C594.443 224.128 600.053 218.518 606.974 218.518ZM393.95 594.442H231.049C224.129 594.442 218.519 600.052 218.519 606.973V769.873C218.519 776.793 224.129 782.404 231.049 782.404H393.95C400.87 782.404 406.48 776.793 406.48 769.873V606.973C406.48 600.052 400.87 594.442 393.95 594.442ZM606.974 594.442H769.874C776.794 594.442 782.405 600.052 782.405 606.973V769.873C782.405 776.793 776.794 782.404 769.874 782.404H606.974C600.053 782.404 594.443 776.793 594.443 769.873V606.973C594.443 600.052 600.053 594.442 606.974 594.442Z" fill="white"/></svg>');var cv=Dr('<svg id="layer2" data-name="layer2" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 88.24 70.95"><defs><style>.cls-1{fill:url(#linear_9)}.cls-2{fill:rgba(155,84,168,0)}</style><linearGradient id="linear_9" data-name="linear 9" x1="216.98" y1="-423.81" x2="170.95" y2="319.28" gradientTransform="translate(18.94 29.12) scale(.09 -.09)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#01f395"/><stop offset="1" stop-color="#01b56a"/></linearGradient></defs><g id="layer1" data-name="layer1"><g><rect class="cls-2" width="88.24" height="70.95"/><g><path class="cls-1" d="m19.08,0H4.9l49.8,70.95h14.19L19.08,0Z"/><path d="m69.08,44.08c9.93-2.84,16.92-9.85,16.92-21.5v-.2c0-6.18-2.12-11.44-5.87-15.29-4.56-4.45-11.54-7.08-20.46-7.08H24.09l7.97,11.37h26.59c9.22,0,14.7,4.12,14.7,11.72v.2c0,7.19-5.68,11.86-14.6,11.86h-9.98l25.11,35.79h14.37l-19.16-26.87Z"/><path d="m0,20.16l35.64,50.78h14.19L14.19,20.16H0Z"/></g></g></g></svg>');var ry=Dr('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 115.77 147.7" xmlns:v="https://vecta.io/nano"><defs><linearGradient id="A" x1="106.985" y1="30.78" x2="13.053" y2="72.524" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#201c1b"/><stop offset=".36" stop-color="#77390d"/><stop offset=".67" stop-color="#ea8101"/><stop offset="1" stop-color="#f4b852"/></linearGradient><linearGradient id="B" x1="11.381" y1="118.167" x2="120.232" y2="85.771" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#1f1d1c"/><stop offset=".37" stop-color="#77390d"/><stop offset=".67" stop-color="#ea8101"/><stop offset="1" stop-color="#f4fb52"/></linearGradient><radialGradient id="C" cx="53.01" cy="45.84" fx="53.01" fy="45.84" r="11.13" gradientTransform="translate(0 0)" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#f4b852"/><stop offset=".33" stop-color="#ea8101"/><stop offset=".64" stop-color="#77390d"/><stop offset="1" stop-color="#211c1d"/></radialGradient></defs><path d="M81.66 13.29l30.31 30.02c2.58 2.55 3.85 5.13 3.81 7.73s-1.15 4.97-3.32 7.12c-2.27 2.25-4.72 3.39-7.34 3.44-2.62.04-5.22-1.22-7.8-3.77l-31-30.7c-3.52-3.49-6.92-5.96-10.19-7.41s-6.71-1.68-10.31-.68c-3.61.99-7.48 3.54-11.63 7.64-5.72 5.67-8.45 10.99-8.17 15.96s3.12 10.13 8.51 15.46l31.25 30.96c2.61 2.58 3.89 5.16 3.85 7.72-.04 2.57-1.16 4.94-3.37 7.13-2.2 2.18-4.63 3.32-7.27 3.41s-5.27-1.16-7.87-3.74L20.81 73.56c-4.93-4.88-8.49-9.5-10.68-13.86s-3.01-9.29-2.44-14.79c.51-4.71 2.02-9.27 4.54-13.69 2.51-4.42 6.11-8.94 10.78-13.57 5.56-5.51 10.87-9.73 15.93-12.67C43.99 2.04 48.88.41 53.6.07c4.73-.34 9.39.6 14 2.82s9.29 5.68 14.05 10.4z" fill="url(#A)"/><path d="M34.11 134.42L3.81 104.4C1.23 101.84-.04 99.27 0 96.67s1.15-4.97 3.32-7.12c2.27-2.25 4.72-3.39 7.34-3.44 2.62-.04 5.22 1.21 7.8 3.77l30.99 30.7c3.53 3.49 6.92 5.96 10.19 7.41s6.71 1.67 10.32.68 7.48-3.54 11.63-7.65c5.72-5.67 8.45-10.99 8.17-15.96s-3.12-10.13-8.51-15.47L64.6 73.24c-2.61-2.58-3.89-5.16-3.85-7.72.04-2.57 1.16-4.94 3.37-7.13 2.2-2.18 4.63-3.32 7.27-3.41s5.27 1.16 7.87 3.74l15.7 15.41c4.93 4.88 8.49 9.5 10.68 13.86s3.01 9.29 2.44 14.79c-.51 4.71-2.02 9.27-4.54 13.69-2.51 4.42-6.11 8.94-10.78 13.57-5.56 5.51-10.87 9.73-15.93 12.67s-9.95 4.58-14.68 4.92-9.39-.6-14-2.82-9.29-5.68-14.05-10.4z" fill="url(#B)"/><circle cx="53.01" cy="45.83" r="11.13" fill="url(#C)"/></svg>');var ny=Dr(`
<svg width="512" height="512" viewBox="0 0 512 512" fill="none" xmlns="http://www.w3.org/2000/svg">
    <rect width="512" height="512" rx="256" fill="black"/>
    <g clip-path="url(#clip0_3306_46207)">
    <path fill-rule="evenodd" clip-rule="evenodd" d="M303.998 281.91C303.998 290.558 311.018 297.568 319.677 297.568H379.781C381.224 297.568 382.394 298.736 382.394 300.178V359.734V360.2H382.401C382.648 368.632 389.57 375.392 398.074 375.392C406.577 375.392 413.499 368.632 413.746 360.2H413.753V359.734V297.568V276.691C413.753 270.926 409.073 266.252 403.3 266.252H382.394H319.677C311.018 266.252 303.998 273.262 303.998 281.91Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M382.394 391.05C382.394 382.402 375.375 375.392 366.715 375.392H306.612C305.168 375.392 303.998 374.223 303.998 372.782V313.226V312.76H303.992C303.745 304.328 296.822 297.568 288.319 297.568C279.816 297.568 272.894 304.328 272.647 312.76H272.64V313.226V375.392V396.269C272.64 402.034 277.32 406.708 283.093 406.708H303.998H366.715C375.375 406.708 382.394 399.697 382.394 391.05Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M102.456 401.977C108.579 408.092 118.507 408.092 124.63 401.977L167.13 359.535C168.15 358.516 169.805 358.516 170.825 359.535L212.995 401.647L213.325 401.977L213.33 401.972C219.475 407.76 229.156 407.652 235.168 401.647C241.181 395.643 241.289 385.975 235.494 379.838L235.499 379.833L235.168 379.503L191.151 335.546L176.369 320.783C172.287 316.707 165.668 316.707 161.586 320.783L146.804 335.546L102.456 379.833C96.333 385.948 96.333 395.862 102.456 401.977Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M102.291 269.894C108.414 263.779 118.342 263.779 124.465 269.894L166.965 312.336C167.985 313.355 169.64 313.355 170.66 312.336L212.83 270.224L213.16 269.894L213.165 269.899C219.31 264.111 228.991 264.219 235.003 270.224C241.016 276.228 241.125 285.896 235.329 292.033L235.334 292.038L235.003 292.367L190.986 336.325L176.204 351.088C172.122 355.164 165.503 355.164 161.421 351.088L146.639 336.325L102.291 292.038C96.1681 285.923 96.1681 276.009 102.291 269.894Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M273.839 120.74C273.839 129.388 280.859 136.398 289.518 136.398H327.223C328.666 136.398 329.836 137.567 329.836 139.008L329.829 230.412V230.878H329.836C330.083 239.31 337.005 246.07 345.508 246.07C354.011 246.07 360.934 239.31 361.181 230.878H361.188V230.412L361.194 136.398V115.521C361.194 109.756 356.514 105.082 350.742 105.082H329.836H289.518C280.859 105.082 273.839 112.093 273.839 120.74Z" fill="#FF7201"/>
    <path d="M395.035 105.082C403.694 105.082 410.714 112.093 410.714 120.74C410.714 129.388 403.694 136.398 395.035 136.398C386.376 136.398 379.356 129.388 379.356 120.74C379.356 112.093 386.376 105.082 395.035 105.082Z" fill="#FF7201"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M239.114 120.646L239.114 120.658L239.114 120.67L239.112 199.095V199.562H239.106C238.859 207.994 231.936 214.754 223.433 214.754C214.93 214.754 208.008 207.994 207.761 199.562H207.754V199.101L207.754 199.096L207.754 199.091L207.756 120.658L207.756 120.184H207.763C208.014 111.756 214.934 105 223.435 105C231.935 105 238.856 111.756 239.107 120.184H239.114V120.646Z" fill="white"/>
    <path fill-rule="evenodd" clip-rule="evenodd" d="M207.755 230.412C207.755 221.764 200.735 214.754 192.075 214.754H131.972C130.528 214.754 129.358 213.586 129.358 212.144V121.272V120.806H129.352C129.105 112.374 122.182 105.614 113.679 105.614C105.176 105.614 98.2539 112.374 98.0069 120.806H98.0001V121.272V214.754V235.632C98.0001 241.397 102.68 246.07 108.453 246.07H129.358H192.075C200.735 246.07 207.755 239.06 207.755 230.412Z" fill="white"/>
    </g>
    <defs>
    <clipPath id="clip0_3306_46207">
    <rect width="316" height="302" fill="white" transform="translate(98 105)"/>
    </clipPath>
    </defs>
</svg>
`);var sy=class{constructor(){this.resetListeners=[]}getConfig(e){let t=e?.name??document.querySelector("head title")?.text??"Unknown",n=e?.icon??document.querySelector('link[rel="icon"]')?.href??"https://fav.farm/%E2%9D%93",s=[...e?.preferredNetworks??[],{addressPrefix:"ckb",signerType:Kr.SignerType.BTC,network:"btc"},{addressPrefix:"ckt",signerType:Kr.SignerType.BTC,network:"btcTestnet"},{addressPrefix:"ckb",signerType:Kr.SignerType.Doge,network:"doge"},{addressPrefix:"ckt",signerType:Kr.SignerType.Doge,network:"dogeTestnet"}];return{appName:t,appIcon:n,preferredNetworks:s}}disconnect(){this.resetListeners.forEach(e=>e()),this.resetListeners=[]}async refresh(e,t,n){this.disconnect();let{appName:s,appIcon:o,preferredNetworks:i}=this.getConfig(n),c={client:e,appName:s,appIcon:o,preferredNetworks:i,onUpdate:t,wallets:[]};await this.addRealSigners(c),await this.addDummySigners(c)}async addRealSigners(e){let{appName:t,appIcon:n,client:s,preferredNetworks:o}=e;await this.addSigners("UTXO Global Wallet",ny,jd.getUtxoGlobalSigners(s,o),e),await this.addSigners("Rei Wallet",cv,Md.getReiSigners(s),e),await this.addSigners("JoyID Passkey",sv,Cd.getJoyIdSigners(s,t,n,o),e),await this.addSigners("UniSat",ry,Fd.getUniSatSigners(s,o),e),await this.addSigners("OKX Wallet",ty,Dd.getOKXSigners(s,o),e),await Promise.all(Vd.getXverseSigners(s,o).map(({wallet:c,signerInfo:a})=>this.addSigner(c.name,c.icon,a,e)));let i=Id.getNip07Signer(s);i&&await this.addSigner("Nostr",iv,{name:"Nostr",signer:i},e),this.resetListeners.push(new Td.SignerFactory(s).subscribeSigners((c,a)=>this.addSigner(a?.info.name??"EVM",a?.info.icon??nv,{name:"EVM",signer:c},e)))}async addDummySigners(e){await this.addLinkSigners("MetaMask",ov,[Kr.SignerType.EVM],`https://metamask.app.link/dapp/${window.location.href}`,e),await this.addLinkSigners("OKX Wallet",ty,[Kr.SignerType.EVM,Kr.SignerType.BTC],"https://www.okx.com/download?deeplink="+encodeURIComponent("okx://wallet/dapp/url?dappUrl="+encodeURIComponent(window.location.href)),e),await this.addLinkSigners("UniSat",ry,[Kr.SignerType.BTC],"https://unisat.io/download",e),await this.addLinkSigners("UTXO Global Wallet",ny,[Kr.SignerType.CKB,Kr.SignerType.BTC],"https://chromewebstore.google.com/detail/lnamkkidoonpeknminiadpgjiofpdmle",e)}async addLinkSigners(e,t,n,s,o){return this.addSigners(e,t,n.map(i=>({name:i,signer:new Kr.SignerOpenLink(o.client,i,s)})),o)}async addSigners(e,t,n,s){return Promise.all(n.map(o=>this.addSigner(e,t,o,s)))}async addSigner(e,t,n,{wallets:s,onUpdate:o}){let i=s.find(c=>c.name===e);if(!i)s.push({name:e,icon:t,signers:[n]});else{let c=[...i.signers,n].filter(({signer:a})=>!(a instanceof Kr.SignerDummy));i.signers=c.length!==0?c:[n]}o(s)}};var Q1=globalThis,e2=Q1.ShadowRoot&&(Q1.ShadyCSS===void 0||Q1.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,oy=Symbol(),av=new WeakMap,Kd=class{constructor(e,t,n){if(this._$cssResult$=!0,n!==oy)throw Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this.t=t}get styleSheet(){let e=this.o,t=this.t;if(e2&&e===void 0){let n=t!==void 0&&t.length===1;n&&(e=av.get(t)),e===void 0&&((this.o=e=new CSSStyleSheet).replaceSync(this.cssText),n&&av.set(t,e))}return e}toString(){return this.cssText}},fv=r=>new Kd(typeof r=="string"?r:r+"",void 0,oy),Zr=(r,...e)=>{let t=r.length===1?r[0]:e.reduce((n,s,o)=>n+(i=>{if(i._$cssResult$===!0)return i.cssText;if(typeof i=="number")return i;throw Error("Value passed to 'css' function must be a 'css' function result: "+i+". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.")})(s)+r[o+1],r[0]);return new Kd(t,r,oy)},uv=(r,e)=>{if(e2)r.adoptedStyleSheets=e.map(t=>t instanceof CSSStyleSheet?t:t.styleSheet);else for(let t of e){let n=document.createElement("style"),s=Q1.litNonce;s!==void 0&&n.setAttribute("nonce",s),n.textContent=t.cssText,r.appendChild(n)}},iy=e2?r=>r:r=>r instanceof CSSStyleSheet?(e=>{let t="";for(let n of e.cssRules)t+=n.cssText;return fv(t)})(r):r;var{is:dP,defineProperty:pP,getOwnPropertyDescriptor:hP,getOwnPropertyNames:mP,getOwnPropertySymbols:yP,getPrototypeOf:gP}=Object,t2=globalThis,lv=t2.trustedTypes,bP=lv?lv.emptyScript:"",xP=t2.reactiveElementPolyfillSupport,Wd=(r,e)=>r,Zd={toAttribute(r,e){switch(e){case Boolean:r=r?bP:null;break;case Object:case Array:r=r==null?r:JSON.stringify(r)}return r},fromAttribute(r,e){let t=r;switch(e){case Boolean:t=r!==null;break;case Number:t=r===null?null:Number(r);break;case Object:case Array:try{t=JSON.parse(r)}catch{t=null}}return t}},r2=(r,e)=>!dP(r,e),dv={attribute:!0,type:String,converter:Zd,reflect:!1,useDefault:!1,hasChanged:r2};Symbol.metadata??=Symbol("metadata"),t2.litPropertyMetadata??=new WeakMap;var Lo=class extends HTMLElement{static addInitializer(e){this._$Ei(),(this.l??=[]).push(e)}static get observedAttributes(){return this.finalize(),this._$Eh&&[...this._$Eh.keys()]}static createProperty(e,t=dv){if(t.state&&(t.attribute=!1),this._$Ei(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){let n=Symbol(),s=this.getPropertyDescriptor(e,n,t);s!==void 0&&pP(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){let{get:s,set:o}=hP(this.prototype,e)??{get(){return this[t]},set(i){this[t]=i}};return{get:s,set(i){let c=s?.call(this);o?.call(this,i),this.requestUpdate(e,c,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??dv}static _$Ei(){if(this.hasOwnProperty(Wd("elementProperties")))return;let e=gP(this);e.finalize(),e.l!==void 0&&(this.l=[...e.l]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(Wd("finalized")))return;if(this.finalized=!0,this._$Ei(),this.hasOwnProperty(Wd("properties"))){let t=this.properties,n=[...mP(t),...yP(t)];for(let s of n)this.createProperty(s,t[s])}let e=this[Symbol.metadata];if(e!==null){let t=litPropertyMetadata.get(e);if(t!==void 0)for(let[n,s]of t)this.elementProperties.set(n,s)}this._$Eh=new Map;for(let[t,n]of this.elementProperties){let s=this._$Eu(t,n);s!==void 0&&this._$Eh.set(s,t)}this.elementStyles=this.finalizeStyles(this.styles)}static finalizeStyles(e){let t=[];if(Array.isArray(e)){let n=new Set(e.flat(1/0).reverse());for(let s of n)t.unshift(iy(s))}else e!==void 0&&t.push(iy(e));return t}static _$Eu(e,t){let n=t.attribute;return n===!1?void 0:typeof n=="string"?n:typeof e=="string"?e.toLowerCase():void 0}constructor(){super(),this._$Ep=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this._$Em=null,this._$Ev()}_$Ev(){this._$ES=new Promise(e=>this.enableUpdating=e),this._$AL=new Map,this._$E_(),this.requestUpdate(),this.constructor.l?.forEach(e=>e(this))}addController(e){(this._$EO??=new Set).add(e),this.renderRoot!==void 0&&this.isConnected&&e.hostConnected?.()}removeController(e){this._$EO?.delete(e)}_$E_(){let e=new Map,t=this.constructor.elementProperties;for(let n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this._$Ep=e)}createRenderRoot(){let e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return uv(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??=this.createRenderRoot(),this.enableUpdating(!0),this._$EO?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this._$EO?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,n){this._$AK(e,n)}_$ET(e,t){let n=this.constructor.elementProperties.get(e),s=this.constructor._$Eu(e,n);if(s!==void 0&&n.reflect===!0){let o=(n.converter?.toAttribute!==void 0?n.converter:Zd).toAttribute(t,n.type);this._$Em=e,o==null?this.removeAttribute(s):this.setAttribute(s,o),this._$Em=null}}_$AK(e,t){let n=this.constructor,s=n._$Eh.get(e);if(s!==void 0&&this._$Em!==s){let o=n.getPropertyOptions(s),i=typeof o.converter=="function"?{fromAttribute:o.converter}:o.converter?.fromAttribute!==void 0?o.converter:Zd;this._$Em=s;let c=i.fromAttribute(t,o.type);this[s]=c??this._$Ej?.get(s)??c,this._$Em=null}}requestUpdate(e,t,n,s=!1,o){if(e!==void 0){let i=this.constructor;if(s===!1&&(o=this[e]),n??=i.getPropertyOptions(e),!((n.hasChanged??r2)(o,t)||n.useDefault&&n.reflect&&o===this._$Ej?.get(e)&&!this.hasAttribute(i._$Eu(e,n))))return;this.C(e,t,n)}this.isUpdatePending===!1&&(this._$ES=this._$EP())}C(e,t,{useDefault:n,reflect:s,wrapped:o},i){n&&!(this._$Ej??=new Map).has(e)&&(this._$Ej.set(e,i??t??this[e]),o!==!0||i!==void 0)||(this._$AL.has(e)||(this.hasUpdated||n||(t=void 0),this._$AL.set(e,t)),s===!0&&this._$Em!==e&&(this._$Eq??=new Set).add(e))}async _$EP(){this.isUpdatePending=!0;try{await this._$ES}catch(t){Promise.reject(t)}let e=this.scheduleUpdate();return e!=null&&await e,!this.isUpdatePending}scheduleUpdate(){return this.performUpdate()}performUpdate(){if(!this.isUpdatePending)return;if(!this.hasUpdated){if(this.renderRoot??=this.createRenderRoot(),this._$Ep){for(let[s,o]of this._$Ep)this[s]=o;this._$Ep=void 0}let n=this.constructor.elementProperties;if(n.size>0)for(let[s,o]of n){let{wrapped:i}=o,c=this[s];i!==!0||this._$AL.has(s)||c===void 0||this.C(s,void 0,o,c)}}let e=!1,t=this._$AL;try{e=this.shouldUpdate(t),e?(this.willUpdate(t),this._$EO?.forEach(n=>n.hostUpdate?.()),this.update(t)):this._$EM()}catch(n){throw e=!1,this._$EM(),n}e&&this._$AE(t)}willUpdate(e){}_$AE(e){this._$EO?.forEach(t=>t.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e)}_$EM(){this._$AL=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this._$ES}shouldUpdate(e){return!0}update(e){this._$Eq&&=this._$Eq.forEach(t=>this._$ET(t,this[t])),this._$EM()}updated(e){}firstUpdated(e){}};Lo.elementStyles=[],Lo.shadowRootOptions={mode:"open"},Lo[Wd("elementProperties")]=new Map,Lo[Wd("finalized")]=new Map,xP?.({ReactiveElement:Lo}),(t2.reactiveElementVersions??=[]).push("2.1.2");var ay=globalThis,pv=r=>r,n2=ay.trustedTypes,hv=n2?n2.createPolicy("lit-html",{createHTML:r=>r}):void 0,fy="$lit$",Ho=`lit$${Math.random().toFixed(9).slice(2)}$`,uy="?"+Ho,wP=`<${uy}>`,va=document,Jd=()=>va.createComment(""),Xd=r=>r===null||typeof r!="object"&&typeof r!="function",ly=Array.isArray,wv=r=>ly(r)||typeof r?.[Symbol.iterator]=="function",cy=`[ 	
\f\r]`,Gd=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,mv=/-->/g,yv=/>/g,xa=RegExp(`>|${cy}(?:([^\\s"'>=/]+)(${cy}*=${cy}*(?:[^ 	
\f\r"'\`<>=]|("|')|))|$)`,"g"),gv=/'/g,bv=/"/g,vv=/^(?:script|style|textarea|title)$/i,dy=r=>(e,...t)=>({_$litType$:r,strings:e,values:t}),he=dy(1),The=dy(2),Ehe=dy(3),Uo=Symbol.for("lit-noChange"),st=Symbol.for("lit-nothing"),xv=new WeakMap,wa=va.createTreeWalker(va,129);function Sv(r,e){if(!ly(r)||!r.hasOwnProperty("raw"))throw Error("invalid template strings array");return hv!==void 0?hv.createHTML(e):e}var _v=(r,e)=>{let t=r.length-1,n=[],s,o=e===2?"<svg>":e===3?"<math>":"",i=Gd;for(let c=0;c<t;c++){let a=r[c],u,d,y=-1,v=0;for(;v<a.length&&(i.lastIndex=v,d=i.exec(a),d!==null);)v=i.lastIndex,i===Gd?d[1]==="!--"?i=mv:d[1]!==void 0?i=yv:d[2]!==void 0?(vv.test(d[2])&&(s=RegExp("</"+d[2],"g")),i=xa):d[3]!==void 0&&(i=xa):i===xa?d[0]===">"?(i=s??Gd,y=-1):d[1]===void 0?y=-2:(y=i.lastIndex-d[2].length,u=d[1],i=d[3]===void 0?xa:d[3]==='"'?bv:gv):i===bv||i===gv?i=xa:i===mv||i===yv?i=Gd:(i=xa,s=void 0);let _=i===xa&&r[c+1].startsWith("/>")?" ":"";o+=i===Gd?a+wP:y>=0?(n.push(u),a.slice(0,y)+fy+a.slice(y)+Ho+_):a+Ho+(y===-2?c:_)}return[Sv(r,o+(r[t]||"<?>")+(e===2?"</svg>":e===3?"</math>":"")),n]},Yd=class r{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let o=0,i=0,c=e.length-1,a=this.parts,[u,d]=_v(e,t);if(this.el=r.createElement(u,n),wa.currentNode=this.el.content,t===2||t===3){let y=this.el.content.firstChild;y.replaceWith(...y.childNodes)}for(;(s=wa.nextNode())!==null&&a.length<c;){if(s.nodeType===1){if(s.hasAttributes())for(let y of s.getAttributeNames())if(y.endsWith(fy)){let v=d[i++],_=s.getAttribute(y).split(Ho),T=/([.?@])?(.*)/.exec(v);a.push({type:1,index:o,name:T[2],strings:_,ctor:T[1]==="."?o2:T[1]==="?"?i2:T[1]==="@"?c2:_a}),s.removeAttribute(y)}else y.startsWith(Ho)&&(a.push({type:6,index:o}),s.removeAttribute(y));if(vv.test(s.tagName)){let y=s.textContent.split(Ho),v=y.length-1;if(v>0){s.textContent=n2?n2.emptyScript:"";for(let _=0;_<v;_++)s.append(y[_],Jd()),wa.nextNode(),a.push({type:2,index:++o});s.append(y[v],Jd())}}}else if(s.nodeType===8)if(s.data===uy)a.push({type:2,index:o});else{let y=-1;for(;(y=s.data.indexOf(Ho,y+1))!==-1;)a.push({type:7,index:o}),y+=Ho.length-1}o++}}static createElement(e,t){let n=va.createElement("template");return n.innerHTML=e,n}};function Sa(r,e,t=r,n){if(e===Uo)return e;let s=n!==void 0?t._$Co?.[n]:t._$Cl,o=Xd(e)?void 0:e._$litDirective$;return s?.constructor!==o&&(s?._$AO?.(!1),o===void 0?s=void 0:(s=new o(r),s._$AT(r,t,n)),n!==void 0?(t._$Co??=[])[n]=s:t._$Cl=s),s!==void 0&&(e=Sa(r,s._$AS(r,e.values),s,n)),e}var s2=class{constructor(e,t){this._$AV=[],this._$AN=void 0,this._$AD=e,this._$AM=t}get parentNode(){return this._$AM.parentNode}get _$AU(){return this._$AM._$AU}u(e){let{el:{content:t},parts:n}=this._$AD,s=(e?.creationScope??va).importNode(t,!0);wa.currentNode=s;let o=wa.nextNode(),i=0,c=0,a=n[0];for(;a!==void 0;){if(i===a.index){let u;a.type===2?u=new gu(o,o.nextSibling,this,e):a.type===1?u=new a.ctor(o,a.name,a.strings,this,e):a.type===6&&(u=new a2(o,this,e)),this._$AV.push(u),a=n[++c]}i!==a?.index&&(o=wa.nextNode(),i++)}return wa.currentNode=va,s}p(e){let t=0;for(let n of this._$AV)n!==void 0&&(n.strings!==void 0?(n._$AI(e,n,t),t+=n.strings.length-2):n._$AI(e[t])),t++}},gu=class r{get _$AU(){return this._$AM?._$AU??this._$Cv}constructor(e,t,n,s){this.type=2,this._$AH=st,this._$AN=void 0,this._$AA=e,this._$AB=t,this._$AM=n,this.options=s,this._$Cv=s?.isConnected??!0}get parentNode(){let e=this._$AA.parentNode,t=this._$AM;return t!==void 0&&e?.nodeType===11&&(e=t.parentNode),e}get startNode(){return this._$AA}get endNode(){return this._$AB}_$AI(e,t=this){e=Sa(this,e,t),Xd(e)?e===st||e==null||e===""?(this._$AH!==st&&this._$AR(),this._$AH=st):e!==this._$AH&&e!==Uo&&this._(e):e._$litType$!==void 0?this.$(e):e.nodeType!==void 0?this.T(e):wv(e)?this.k(e):this._(e)}O(e){return this._$AA.parentNode.insertBefore(e,this._$AB)}T(e){this._$AH!==e&&(this._$AR(),this._$AH=this.O(e))}_(e){this._$AH!==st&&Xd(this._$AH)?this._$AA.nextSibling.data=e:this.T(va.createTextNode(e)),this._$AH=e}$(e){let{values:t,_$litType$:n}=e,s=typeof n=="number"?this._$AC(e):(n.el===void 0&&(n.el=Yd.createElement(Sv(n.h,n.h[0]),this.options)),n);if(this._$AH?._$AD===s)this._$AH.p(t);else{let o=new s2(s,this),i=o.u(this.options);o.p(t),this.T(i),this._$AH=o}}_$AC(e){let t=xv.get(e.strings);return t===void 0&&xv.set(e.strings,t=new Yd(e)),t}k(e){ly(this._$AH)||(this._$AH=[],this._$AR());let t=this._$AH,n,s=0;for(let o of e)s===t.length?t.push(n=new r(this.O(Jd()),this.O(Jd()),this,this.options)):n=t[s],n._$AI(o),s++;s<t.length&&(this._$AR(n&&n._$AB.nextSibling,s),t.length=s)}_$AR(e=this._$AA.nextSibling,t){for(this._$AP?.(!1,!0,t);e!==this._$AB;){let n=pv(e).nextSibling;pv(e).remove(),e=n}}setConnected(e){this._$AM===void 0&&(this._$Cv=e,this._$AP?.(e))}},_a=class{get tagName(){return this.element.tagName}get _$AU(){return this._$AM._$AU}constructor(e,t,n,s,o){this.type=1,this._$AH=st,this._$AN=void 0,this.element=e,this.name=t,this._$AM=s,this.options=o,n.length>2||n[0]!==""||n[1]!==""?(this._$AH=Array(n.length-1).fill(new String),this.strings=n):this._$AH=st}_$AI(e,t=this,n,s){let o=this.strings,i=!1;if(o===void 0)e=Sa(this,e,t,0),i=!Xd(e)||e!==this._$AH&&e!==Uo,i&&(this._$AH=e);else{let c=e,a,u;for(e=o[0],a=0;a<o.length-1;a++)u=Sa(this,c[n+a],t,a),u===Uo&&(u=this._$AH[a]),i||=!Xd(u)||u!==this._$AH[a],u===st?e=st:e!==st&&(e+=(u??"")+o[a+1]),this._$AH[a]=u}i&&!s&&this.j(e)}j(e){e===st?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,e??"")}},o2=class extends _a{constructor(){super(...arguments),this.type=3}j(e){this.element[this.name]=e===st?void 0:e}},i2=class extends _a{constructor(){super(...arguments),this.type=4}j(e){this.element.toggleAttribute(this.name,!!e&&e!==st)}},c2=class extends _a{constructor(e,t,n,s,o){super(e,t,n,s,o),this.type=5}_$AI(e,t=this){if((e=Sa(this,e,t,0)??st)===Uo)return;let n=this._$AH,s=e===st&&n!==st||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,o=e!==st&&(n===st||s);s&&this.element.removeEventListener(this.name,this,n),o&&this.element.addEventListener(this.name,this,e),this._$AH=e}handleEvent(e){typeof this._$AH=="function"?this._$AH.call(this.options?.host??this.element,e):this._$AH.handleEvent(e)}},a2=class{constructor(e,t,n){this.element=e,this.type=6,this._$AN=void 0,this._$AM=t,this.options=n}get _$AU(){return this._$AM._$AU}_$AI(e){Sa(this,e)}},Tv={M:fy,P:Ho,A:uy,C:1,L:_v,R:s2,D:wv,V:Sa,I:gu,H:_a,N:i2,U:c2,B:o2,F:a2},vP=ay.litHtmlPolyfillSupport;vP?.(Yd,gu),(ay.litHtmlVersions??=[]).push("3.3.2");var Ev=(r,e,t)=>{let n=t?.renderBefore??e,s=n._$litPart$;if(s===void 0){let o=t?.renderBefore??null;n._$litPart$=s=new gu(e.insertBefore(Jd(),o),o,void 0,t??{})}return s._$AI(r),s};var py=globalThis,qt=class extends Lo{constructor(){super(...arguments),this.renderOptions={host:this},this._$Do=void 0}createRenderRoot(){let e=super.createRenderRoot();return this.renderOptions.renderBefore??=e.firstChild,e}update(e){let t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this._$Do=Ev(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this._$Do?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this._$Do?.setConnected(!1)}render(){return Uo}};qt._$litElement$=!0,qt.finalized=!0,py.litElementHydrateSupport?.({LitElement:qt});var SP=py.litElementPolyfillSupport;SP?.({LitElement:qt});(py.litElementVersions??=[]).push("4.2.2");var dn=r=>(e,t)=>{t!==void 0?t.addInitializer(()=>{customElements.define(r,e)}):customElements.define(r,e)};var _P={attribute:!0,type:String,converter:Zd,reflect:!1,hasChanged:r2},TP=(r=_P,e,t)=>{let{kind:n,metadata:s}=t,o=globalThis.litPropertyMetadata.get(s);if(o===void 0&&globalThis.litPropertyMetadata.set(s,o=new Map),n==="setter"&&((r=Object.create(r)).wrapped=!0),o.set(t.name,r),n==="accessor"){let{name:i}=t;return{set(c){let a=e.get.call(this);e.set.call(this,c),this.requestUpdate(i,a,r,!0,c)},init(c){return c!==void 0&&this.C(i,void 0,r,c),c}}}if(n==="setter"){let{name:i}=t;return function(c){let a=this[i];e.call(this,c),this.requestUpdate(i,a,r,!0,c)}}throw Error("Unsupported decorator location: "+n)};function jt(r){return(e,t)=>typeof t=="object"?TP(r,e,t):((n,s,o)=>{let i=s.hasOwnProperty(o);return s.constructor.createProperty(o,n),i?Object.getOwnPropertyDescriptor(s,o):void 0})(r,e,t)}function Qt(r){return jt({...r,state:!0,attribute:!1})}var{I:EP}=Tv,Av=r=>r;var Cv=r=>r.strings===void 0,kv=()=>document.createComment(""),bu=(r,e,t)=>{let n=r._$AA.parentNode,s=e===void 0?r._$AB:e._$AA;if(t===void 0){let o=n.insertBefore(kv(),s),i=n.insertBefore(kv(),s);t=new EP(o,i,r,r.options)}else{let o=t._$AB.nextSibling,i=t._$AM,c=i!==r;if(c){let a;t._$AQ?.(r),t._$AM=r,t._$AP!==void 0&&(a=r._$AU)!==i._$AU&&t._$AP(a)}if(o!==s||c){let a=t._$AA;for(;a!==o;){let u=Av(a).nextSibling;Av(n).insertBefore(a,s),a=u}}}return t},Hi=(r,e,t=r)=>(r._$AI(e,t),r),AP={},Bv=(r,e=AP)=>r._$AH=e,Iv=r=>r._$AH,u2=r=>{r._$AR(),r._$AA.remove()};var l2={ATTRIBUTE:1,CHILD:2,PROPERTY:3,BOOLEAN_ATTRIBUTE:4,EVENT:5,ELEMENT:6},Qd=r=>(...e)=>({_$litDirective$:r,values:e}),xu=class{constructor(e){}get _$AU(){return this._$AM._$AU}_$AT(e,t,n){this._$Ct=e,this._$AM=t,this._$Ci=n}_$AS(e,t){return this.update(e,t)}update(e,t){return this.render(...t)}};var ep=(r,e)=>{let t=r._$AN;if(t===void 0)return!1;for(let n of t)n._$AO?.(e,!1),ep(n,e);return!0},d2=r=>{let e,t;do{if((e=r._$AM)===void 0)break;t=e._$AN,t.delete(r),r=e}while(t?.size===0)},Ov=r=>{for(let e;e=r._$AM;r=e){let t=e._$AN;if(t===void 0)e._$AN=t=new Set;else if(t.has(r))break;t.add(r),BP(e)}};function kP(r){this._$AN!==void 0?(d2(this),this._$AM=r,Ov(this)):this._$AM=r}function CP(r,e=!1,t=0){let n=this._$AH,s=this._$AN;if(s!==void 0&&s.size!==0)if(e)if(Array.isArray(n))for(let o=t;o<n.length;o++)ep(n[o],!1),d2(n[o]);else n!=null&&(ep(n,!1),d2(n));else ep(this,r)}var BP=r=>{r.type==l2.CHILD&&(r._$AP??=CP,r._$AQ??=kP)},p2=class extends xu{constructor(){super(...arguments),this._$AN=void 0}_$AT(e,t,n){super._$AT(e,t,n),Ov(this),this.isConnected=e._$AU}_$AO(e,t=!0){e!==this.isConnected&&(this.isConnected=e,e?this.reconnected?.():this.disconnected?.()),t&&(ep(this,e),d2(this))}setValue(e){if(Cv(this._$Ct))this._$Ct._$AI(e,this);else{let t=[...this._$Ct._$AH];t[this._$Ci]=e,this._$Ct._$AI(t,this,0)}}disconnected(){}reconnected(){}};var yy=()=>new my,my=class{},hy=new WeakMap,h2=Qd(class extends p2{render(r){return st}update(r,[e]){let t=e!==this.G;return t&&this.G!==void 0&&this.rt(void 0),(t||this.lt!==this.ct)&&(this.G=e,this.ht=r.options?.host,this.rt(this.ct=r.element)),st}rt(r){if(this.isConnected||(r=void 0),typeof this.G=="function"){let e=this.ht??globalThis,t=hy.get(e);t===void 0&&(t=new WeakMap,hy.set(e,t)),t.get(this.G)!==void 0&&this.G.call(this.ht,void 0),t.set(this.G,r),r!==void 0&&this.G.call(this.ht,r)}else this.G.value=r}get lt(){return typeof this.G=="function"?hy.get(this.ht??globalThis)?.get(this.G):this.G?.value}disconnected(){this.lt===this.ct&&this.rt(void 0)}reconnected(){this.rt(this.ct)}});var m2=class extends Event{constructor(e){super("select-client"),this.client=e}},y2=class extends Event{constructor(e,t){super("connected"),this.walletName=e,this.signerName=t}},Ui=class extends Event{constructor(e){super("close",{bubbles:!0,composed:!0}),this.callback=e}};var g2=class{get controller(){return this.host.signersController??this.defaultController}constructor(e){this.host=e,this.wallets=[],this.defaultController=new Wr.SignersController,e.addController(this)}refresh(){return this.controller.refresh(this.host.client,e=>{this.wallets=[...e],this.update()},this.host)}update(){this.host.refreshSigner(),this.host.requestUpdate()}hostConnected(){this.refresh(),setTimeout(()=>this.refresh(),500)}hostDisconnected(){this.controller.disconnect()}};var In=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Gr=class extends qt{constructor(){super(...arguments),this.client=new Wr.ClientPublicTestnet,this.signersControllerInner=new g2(this),this.mainRef=yy(),this.bodyRef=yy()}setClient(e){this.client=e}disconnect(){this.onClose(()=>{this.walletName=void 0,this.signerName=void 0,this.saveConnection(),this.signer?.signer.disconnect()})}loadConnection(){let{signerName:e,walletName:t}=JSON.parse(window.localStorage.getItem("ccc-connection-info")??"{}");this.signerName=e,this.walletName=t}saveConnection(){window.localStorage.setItem("ccc-connection-info",JSON.stringify({signerName:this.signerName,walletName:this.walletName}))}connectedCallback(){super.connectedCallback(),this.loadConnection()}willUpdate(e){(e.has("name")||e.has("icon")||e.has("client")||e.has("signerFilter")||e.has("preferredNetworks"))&&this.signersControllerInner.refresh(),(e.has("walletName")||e.has("signerName"))&&this.refreshSigner(),this.dispatchEvent(new Event("willUpdate"))}refreshSigner(){let e=this.signersControllerInner.wallets.find(({name:n})=>n===this.walletName),t=e?.signers.find(({name:n})=>n===this.signerName);this.updateSigner(e,t)}async updateSigner(e,t){t?.signer!==this.signer?.signer&&(this.unregisterSignerReplacer?.(),this.unregisterSignerReplacer=void 0,t&&await t.signer.isConnected()?(this.wallet=e,this.signer=t,this.unregisterSignerReplacer?.(),this.unregisterSignerReplacer=t.signer.onReplaced(()=>{this.signersControllerInner.refresh()})):(this.wallet=void 0,this.signer=void 0))}render(){return he`<div
      class="background"
      @click=${e=>{e.target===e.currentTarget&&this.onClose()}}
      @close=${e=>{e.stopPropagation(),this.onClose(e.callback)}}
      @updated=${()=>this.updated()}
    >
      <div class="main" ${h2(this.mainRef)}>
        ${this.wallet&&this.signer?he`
              <ccc-connected-scene
                ?hideMark=${this.hideMark}
                .wallet=${this.wallet}
                .signer=${this.signer.signer}
                .clientOptions=${this.clientOptions}
                @disconnect=${()=>this.disconnect()}
                @select-client=${e=>this.setClient(e.client)}
                ${h2(this.bodyRef)}
              ></ccc-connected-scene>
            `:he`
              <ccc-selecting-scene
                .wallets=${this.signersControllerInner.wallets}
                @connected=${({walletName:e,signerName:t})=>{this.walletName=e,this.signerName=t,this.refreshSigner(),this.saveConnection()}}
                ${h2(this.bodyRef)}
              ></ccc-selecting-scene>
            `}
      </div>
    </div>`}onClose(e){this.mainRef.value&&(this.mainRef.value.style.height="0"),setTimeout(()=>{this.dispatchEvent(new Ui),this.bodyRef.value?.onClose?.(),e?.()},150)}updated(){this.mainRef.value&&(this.mainRef.value.style.height=`${this.bodyRef.value?.clientHeight??0}px`)}};Gr.styles=Zr`
    :host {
      width: 100vw;
      height: 100vh;
      position: fixed;
      left: 0;
      top: 0;
    }

    .background {
      width: 100%;
      height: 100%;
      background: rgba(18, 19, 24, 0.7);
    }

    .main {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: var(--background);
      border-radius: 1.2rem;
      overflow: hidden;
      transition: height 0.15s ease-out;
    }
  `;In([jt()],Gr.prototype,"hideMark",void 0);In([jt()],Gr.prototype,"name",void 0);In([jt()],Gr.prototype,"icon",void 0);In([jt()],Gr.prototype,"preferredNetworks",void 0);In([jt()],Gr.prototype,"signersController",void 0);In([Qt()],Gr.prototype,"clientOptions",void 0);In([Qt()],Gr.prototype,"client",void 0);In([Qt()],Gr.prototype,"walletName",void 0);In([Qt()],Gr.prototype,"signerName",void 0);In([Qt()],Gr.prototype,"wallet",void 0);In([Qt()],Gr.prototype,"signer",void 0);In([Qt()],Gr.prototype,"unregisterSignerReplacer",void 0);Gr=In([dn("ccc-connector")],Gr);var IP=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},gy=class extends qt{updated(){this.dispatchEvent(new Event("updated",{bubbles:!0,composed:!0}))}render(){return he`<button><slot></slot></button>`}};gy.styles=Zr`
    button {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;

      width: 100%;
      display: flex;
      align-items: center;
      padding: 0.25rem 1rem;
      background: var(--btn-secondary);
      border-radius: 9999px;
      transition: background 0.15s ease-in-out;
    }
    button:hover {
      background: var(--btn-secondary-hover);
    }
    button:disabled {
      cursor: not-allowed;
    }
    button:disabled:hover {
      background: var(--btn-secondary);
    }

    button ::slotted(img),
    button ::slotted(svg) {
      width: 0.8rem;
      height: 0.8rem;
      margin-right: 0.5rem;
    }
  `;gy=IP([dn("ccc-button-pill")],gy);var OP=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},by=class extends qt{updated(){this.dispatchEvent(new Event("updated",{bubbles:!0,composed:!0}))}render(){return he`<button><slot></slot></button>`}};by.styles=Zr`
    :host {
      width: 100%;
    }

    button {
      background: none;
      color: inherit;
      border: none;
      padding: 0;
      font: inherit;
      cursor: pointer;
      outline: inherit;

      width: 100%;
      display: flex;
      align-items: center;
      justify-content: start;
      padding: 0.75rem 1rem;
      background: var(--btn-primary);
      border-radius: 0.4rem;
      transition: background 0.15s ease-in-out;
    }
    button:hover {
      background: var(--btn-primary-hover);
    }
    button:disabled {
      cursor: not-allowed;
    }
    button:disabled:hover {
      background: var(--btn-primary);
    }

    button ::slotted(img),
    button ::slotted(svg) {
      width: 2rem;
      height: 2rem;
      margin-right: 1rem;
      border-radius: 0.4rem;
    }
  `;by=OP([dn("ccc-button")],by);var xy=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},tp=class extends qt{constructor(){super(...arguments),this.isCopied=!1,this.onclick=()=>{if(this.value)return this.isCopied=!0,setTimeout(()=>this.isCopied=!1,3e3),window.navigator.clipboard.writeText(this.value)}}updated(){this.dispatchEvent(new Event("updated",{bubbles:!0,composed:!0}))}render(){return he`
      <slot></slot>
      ${this.isCopied?he`
            <svg class="check" viewBox="0 0 17.837 17.837" alt="copied">
              <path
                d="M16.145,2.571c-0.272-0.273-0.718-0.273-0.99,0L6.92,10.804l-4.241-4.27c-0.272-0.274-0.715-0.274-0.989,0L0.204,8.019c-0.272,0.271-0.272,0.717,0,0.99l6.217,6.258c0.272,0.271,0.715,0.271,0.99,0L17.63,5.047c0.276-0.273,0.276-0.72,0-0.994L16.145,2.571z"
              />
            </svg>
          `:he`
            <svg class="copy" viewBox="0 0 24 24" alt="copy">
              <path
                d="M19 13.5657V6.10526C19 5.49737 18.5091 5 17.9091 5H10.5454C9.94543 5 9.45452 5.49737 9.45452 6.10526V13.5657C9.45452 14.1736 9.94543 14.671 10.5454 14.671H17.9091C18.5091 14.671 19 14.1736 19 13.5657Z"
              />
              <path
                d="M14.5455 15.8684H9.18183C8.58183 15.8684 8.09092 15.3711 8.09092 14.7632V9.329H6.09091C5.49091 9.329 5 9.82637 5 10.4343V17.8947C5 18.5026 5.49091 19 6.09091 19H13.4546C14.0546 19 14.5455 18.5026 14.5455 17.8947V15.8684Z"
              />
            </svg>
          `}
    `}};tp.styles=Zr`
    :host {
      display: flex;
      align-items: center;
      cursor: pointer;
    }
    .copy {
      width: 1em;
      height: 1em;
      fill: currentColor;
    }
    .check {
      width: 0.7em;
      height: 0.7em;
      margin-left: 0.15em;
      fill: currentColor;
    }
  `;xy([jt()],tp.prototype,"value",void 0);xy([Qt()],tp.prototype,"isCopied",void 0);tp=xy([dn("ccc-copy-button")],tp);var Dv=he`
  <svg
    width="12"
    height="12"
    viewBox="0 0 12 12"
    xmlns="http://www.w3.org/2000/svg"
    class="primary-icon"
  >
    <path
      d="M10.8989 1.0512C10.5085 0.660741 9.87543 0.660703 9.48493 1.05111L5.94897 4.58624L2.41397 1.05124C2.0235 0.660772 1.39043 0.660773 0.999968 1.05124C0.609503 1.4417 0.609503 2.07477 0.999969 2.46524L4.53497 6.00024L0.999968 9.53524C0.609503 9.9257 0.609503 10.5588 0.999968 10.9492C1.39043 11.3397 2.0235 11.3397 2.41397 10.9492L5.94897 7.41424L9.48493 10.9494C9.87543 11.3398 10.5085 11.3397 10.8989 10.9493C11.2894 10.5588 11.2894 9.92568 10.8989 9.5352L7.36397 6.00024L10.8989 2.46528C11.2894 2.07479 11.2894 1.44168 10.8989 1.0512Z"
      fill="currentColor"
    />
  </svg>
`;var Pv=he`
  <svg
    width="8"
    height="14"
    viewBox="0 0 8 14"
    xmlns="http://www.w3.org/2000/svg"
    class="primary-icon"
  >
    <path
      d="M6.74554 13.5C6.54646 13.5 6.35454 13.4177 6.21275 13.2695L0.720203 7.55253C0.426599 7.24573 0.426599 6.75035 0.720203 6.44355L6.21275 0.725059C6.50779 0.422747 6.98185 0.42574 7.27402 0.729549C7.5662 1.03485 7.56763 1.52723 7.27832 1.83404L2.31999 6.99729L7.27975 12.162C7.49459 12.3865 7.55904 12.7233 7.44303 13.0166C7.32415 13.3084 7.0506 13.5 6.74554 13.5Z"
      fill="currentColor"
      stroke="currentColor"
    />
  </svg>
`;var wy=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},rp=class extends qt{render(){return he`
      <div
        class="header text-bold fs-lg ${this.header?"header-divider":""}"
      >
        <div
          class="back ${this.canBack!=null?"active":""}"
          @click=${()=>{this.dispatchEvent(new Event("back"))}}
        >
          ${Pv}
        </div>
        ${this.header}
        <span
          class="close active"
          @click=${()=>{this.dispatchEvent(new Ui)}}
        >
          ${Dv}
        </span>
      </div>
      <div class="body">
        <slot></slot>
      </div>
    `}};rp.styles=Zr`
    .primary-icon {
      color: var(--icon-primary);
    }
    .text-bold {
      font-weight: bold;
    }

    .fs-lg {
      font-size: 1.2rem;
    }

    .main {
      position: fixed;
      left: 50%;
      top: 50%;
      transform: translate(-50%, -50%);
      background: var(--background);
      border-radius: 1.2rem;
      overflow: hidden;
      transition: height 0.15s ease-out;
    }

    .header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 1rem 1.3rem 0.5rem;
    }

    .header-divider {
      padding-bottom: 1rem;
      border-bottom: 1px solid var(--divider);
    }
    .close,
    .back {
      padding: 0.2rem 0.4rem;
      cursor: pointer;
    }
    .close svg,
    .back svg {
      width: 0.8rem;
      height: 0.8rem;
      opacity: 0;
      transition: opacity 0.15s ease-in-out;
    }

    .close.active svg,
    .back.active svg {
      opacity: 1;
    }

    .body {
      padding: 0.3rem 1.3rem 1rem;
      min-width: 20rem;
      display: flex;
      flex-direction: column;
      align-items: center;
      max-height: 80vh;
      overflow-y: auto;
    }
  `;wy([jt()],rp.prototype,"canBack",void 0);wy([jt()],rp.prototype,"header",void 0);rp=wy([dn("ccc-dialog")],rp);var Mv=(r,e,t)=>{let n=new Map;for(let s=e;s<=t;s++)n.set(r[s],s);return n},wu=Qd(class extends xu{constructor(r){if(super(r),r.type!==l2.CHILD)throw Error("repeat() can only be used in text expressions")}dt(r,e,t){let n;t===void 0?t=e:e!==void 0&&(n=e);let s=[],o=[],i=0;for(let c of r)s[i]=n?n(c,i):i,o[i]=t(c,i),i++;return{values:o,keys:s}}render(r,e,t){return this.dt(r,e,t).values}update(r,[e,t,n]){let s=Iv(r),{values:o,keys:i}=this.dt(e,t,n);if(!Array.isArray(s))return this.ut=i,o;let c=this.ut??=[],a=[],u,d,y=0,v=s.length-1,_=0,T=o.length-1;for(;y<=v&&_<=T;)if(s[y]===null)y++;else if(s[v]===null)v--;else if(c[y]===i[_])a[_]=Hi(s[y],o[_]),y++,_++;else if(c[v]===i[T])a[T]=Hi(s[v],o[T]),v--,T--;else if(c[y]===i[T])a[T]=Hi(s[y],o[T]),bu(r,a[T+1],s[y]),y++,T--;else if(c[v]===i[_])a[_]=Hi(s[v],o[_]),bu(r,s[y],s[v]),v--,_++;else if(u===void 0&&(u=Mv(i,_,T),d=Mv(c,y,v)),u.has(c[y]))if(u.has(c[v])){let A=d.get(i[_]),B=A!==void 0?s[A]:null;if(B===null){let I=bu(r,s[y]);Hi(I,o[_]),a[_]=I}else a[_]=Hi(B,o[_]),bu(r,s[y],B),s[A]=null;_++}else u2(s[v]),v--;else u2(s[y]),y++;for(;_<=T;){let A=bu(r,a[T+1]);Hi(A,o[_]),a[_++]=A}for(;y<=v;){let A=s[y++];A!==null&&u2(A)}return this.ut=i,Bv(r,a),Uo}});function Ks(r){return`data:image/svg+xml,${encodeURIComponent(r)}`}var Rv=Ks('<svg xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#" xmlns="http://www.w3.org/2000/svg" xmlns:cc="http://creativecommons.org/ns#" xmlns:dc="http://purl.org/dc/elements/1.1/" height="64" width="64" version="1.1"><link xmlns="" type="text/css" rel="stylesheet" id="dark-mode-custom-link"/><link xmlns="" type="text/css" rel="stylesheet" id="dark-mode-general-link"/><style xmlns="" lang="en" type="text/css" id="dark-mode-custom-style"/><style xmlns="" lang="en" type="text/css" id="dark-mode-native-style"/><style xmlns="" lang="en" type="text/css" id="dark-mode-native-sheet"/><script xmlns=""/><g transform="translate(0.00630876,-0.00301984)"><path fill="#f7931a" d="m63.033,39.744c-4.274,17.143-21.637,27.576-38.782,23.301-17.138-4.274-27.571-21.638-23.295-38.78,4.272-17.145,21.635-27.579,38.775-23.305,17.144,4.274,27.576,21.64,23.302,38.784z"/><path fill="#FFF" d="m46.103,27.444c0.637-4.258-2.605-6.547-7.038-8.074l1.438-5.768-3.511-0.875-1.4,5.616c-0.923-0.23-1.871-0.447-2.813-0.662l1.41-5.653-3.509-0.875-1.439,5.766c-0.764-0.174-1.514-0.346-2.242-0.527l0.004-0.018-4.842-1.209-0.934,3.75s2.605,0.597,2.55,0.634c1.422,0.355,1.679,1.296,1.636,2.042l-1.638,6.571c0.098,0.025,0.225,0.061,0.365,0.117-0.117-0.029-0.242-0.061-0.371-0.092l-2.296,9.205c-0.174,0.432-0.615,1.08-1.609,0.834,0.035,0.051-2.552-0.637-2.552-0.637l-1.743,4.019,4.569,1.139c0.85,0.213,1.683,0.436,2.503,0.646l-1.453,5.834,3.507,0.875,1.439-5.772c0.958,0.26,1.888,0.5,2.798,0.726l-1.434,5.745,3.511,0.875,1.453-5.823c5.987,1.133,10.489,0.676,12.384-4.739,1.527-4.36-0.076-6.875-3.226-8.515,2.294-0.529,4.022-2.038,4.483-5.155zm-8.022,11.249c-1.085,4.36-8.426,2.003-10.806,1.412l1.928-7.729c2.38,0.594,10.012,1.77,8.878,6.317zm1.086-11.312c-0.99,3.966-7.1,1.951-9.082,1.457l1.748-7.01c1.982,0.494,8.365,1.416,7.334,5.553z"/></g><script xmlns=""/></svg>');var np=Ks('<svg width="668" height="666.66669" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><polygon points="170.265,206.318 223.416,206.318 223.416,93.897 264.161,93.897 170.265,0 " transform="matrix(1.8256046,0,0,1.8256046,-166.4037,144.47964)" /><polygon points="324.79,112.422 284.046,112.422 377.941,206.318 377.941,0 324.79,0 " transform="matrix(1.8256046,0,0,1.8256046,-166.4037,144.47964)" /></svg>');var Nv=Ks('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1875 1875"><title>Dogecoin (DOGE)</title><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><g id="Layer_1-3" data-name="Layer_1"><circle cx="937.5" cy="937.5" r="937.5" style="fill:#988430"/><circle cx="937.5" cy="937.5" r="907.47" style="fill:#7a6a2a"/><circle cx="937.5" cy="937.5" r="888.35" style="fill:#ba9f33"/><path d="M409.89,837.38c-5.31-4.85-10.92-9.71-16.08-14.56s-10.46-9.71-15.77-14.56l-15.78-15c-2.58-2.58-5.31-4.85-7.89-7.44-2.58-2.27-5.61-4.85-8.19-7.13-20.94-19.87-42-39.74-62.65-59.62,21.39,19.57,42.33,39,63.72,58.86l7.43,7.44c2.58,2.57,5.31,4.85,7.89,7.43l15.77,14.56c5.31,4.85,10.47,9.71,15.78,15s10.47,10.16,15.78,15Zm-277.91-3s76.15,7.88,113.32,13.19c34.43,4.86,142.14,21.39,142.14,21.39Zm0,0c21.39,1.82,42.78,4.09,64.17,6.37,10.92,1.06,21.39,2.27,31.86,3.33l16.07,1.83c5.31.75,10.47,1.51,15.78,2.27l63.72,10.16,31.85,5.31c10.47,1.82,20.94,3.8,31.86,5.62-10.47-1.06-21.39-2.58-31.86-4.1l-31.85-4.55-63.72-9.4c-5.31-.76-10.47-1.83-15.78-2.58L228,846.79c-10.47-1.06-21.39-2.58-31.86-3.8-21.39-2.57-42.78-5.31-64.17-8.64ZM379.86,888.8s-81.31,20.64-108.77,28.53c-27,7.43-108.77,32.31-108.77,32.31l217.53-60.83Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M379.85,888.8c-18.05,5.31-36,10.47-54.31,15.33l-54.31,14.56c-18.05,5.31-36,10.47-54,15.78l-27,7.43c-8.95,2.58-18.05,4.85-27.3,7.44,8.94-3,18.05-6.07,27-8.65l27-8.64c18.05-5.62,36-10.93,54-16.54,18.35-4.55,36.41-9.41,54.76-13.81,17.44-4.4,35.8-8.79,54.16-12.89h0ZM173.7,999.7c8.94-3.34,112.1-51.42,136.07-62.65,12-5.62,46.88-18,46.88-18L173.7,999.7Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M173.7,999.7c7.88-3,15.32-6.67,22.9-10.16l22.45-10.47,45.06-21.69c15-7.13,29.58-15,45.05-21.7,7.89-3.33,15.78-6.06,23.66-8.64l12-3.79c4.09-1.06,7.89-2.28,12-3.34-15,7.13-30.79,13.2-45.81,20.17-15,7.44-30.34,13.51-45.82,20.18l-45.81,20.17C204,986.66,189,993.33,173.69,999.7h0Zm10,42s93.44-54.76,125.6-72.36c16.84-9.4,71.3-36.41,71.3-36.41Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M183.71,1041.72c15.77-9.71,31.85-19.57,47.93-29.58l24-14.57c8.19-4.85,16.08-9.4,24.43-14.25,8.19-4.86,16.08-9.71,24.42-14.26a87.54,87.54,0,0,1,12.44-6.37l12.74-6.37c16.84-8.19,33.68-16.54,51.43-23.67-16.08,10.17-32.62,18.82-49.15,27.76-8.19,4.55-16.54,8.65-24.73,13.2s-16.08,9.41-24.43,13.81c-8.19,4.85-16.08,9.4-24.42,13.8l-24.73,13.5-49.91,27h0Zm196.14-96.79s-58.1,44.6-76.91,58.86-74.18,54.31-74.18,54.31L379.85,944.93Z" style="fill:#cfb66c;fill-rule:evenodd"/><polygon points="713.29 1304.61 683.56 1248.33 700.85 1177.94 824.18 1130.31 771.69 1022.61 797.63 913.84 846.33 816.44 996.82 792.78 1107.4 687.35 1346.18 705.4 1393.05 960.71 1302.79 1282.16 1251.37 1448.58 1042.93 1456.47 946.15 1389.42 832.83 1342.08 713.29 1304.61" style="fill:#e2cc85;fill-rule:evenodd"/><path d="M1078.89,1302.79s-28.83,13.2-78,10.16C986.66,1293.84,887,1284.89,887,1284.89s-12.44-3.79-34.44,5.31c-22.14,9-43.08,7.89-62.65,12.74s-39-20.63-54-25.94c-15-5.61-34.89-19.11-34.89-19.11l-42-4.1-84.34-35.65L440.69,1084.65l-36.41,57-11.23,70.54,40.51,83.59,109.07,99.36,212.68,54L881.37,1412l157.92-66.75,39.6-42.47Z" style="fill:#f1d789;fill-rule:evenodd"/><polygon points="323.27 831.01 350.27 749.25 382.44 696.45 486.04 687.8 454.94 778.52 368.33 932.65 404.28 1070.24 340.57 1102.09 320.99 1072.06 305.22 1003.19 304.16 925.82 323.27 831.01" style="fill:#f4ecb4;fill-rule:evenodd"/><path d="M439.47,1297.18l-19.87-27.76s-5.31-13.2-2.27-24.73c3-11.68,2.57-12.44,1.06-16.84s-14.26-19.57-13.5-32.62c.75-13.2-1.06-17.6,8.64-28.06,10.16-10.16,7.13-27.76,7.13-27.76l13.2,8.19,3-4.55s4.85,3.79,4.85,9.71c1.06-8.19-3.34-46.12,6.67-54.76s27.76,40.5,27.76,40.5l-10.92-71.3-28.07-73.11-49.91-66.75-3-73.58v-6.37s-22.91,35.2-29.28,63c-4.55,19.11,6.37,42.32,4.1,69.78-1.83,27.31-4.1,25.18,2.57,36s22.91,33.07,16.54,49.15c-5.61,13.81-24.73,4.1-24.73,4.1s-3.79,11.22-8.95,15.32c-1.82-6.67-3.79-10.92-7.43-15-.31,2.58-1.06,6.07-1.06,6.07s-3.34-10.47-6.68-23.67c-4.54-17.59-9.4-40.8-13.8-53.24-1.82,7.13-6.37,28.82-6.37,28.82l2.58,33.38,12.44,45.81,12,30,11.68,36.71L358,1198.28l8.19,18.81,7.13,42.33,34.43,36.4,18.36,8.2,13.34-6.83h0Z" style="fill:#f3e19d;fill-rule:evenodd"/><path d="M341.32,764.26s-24.73,42-31.85,84.34-13.5,87.08-9,144.72c4.55,58.11,13.2,93.75,20.18,119.24,12,42.33,43.08,101.19,43.08,101.19l1.06-2.28a159.88,159.88,0,0,1-12.44-31.1c-4.1-16.08-5.62-35.19-9.41-43.84-3.34-8.64-8.95-16.08-11.68-26.7-2.58-10.16-3-26.24-10.92-38.22-3.34-4.86-7.44-17.6-8.65-30.34-1.52-19.12.76-40.51-1.06-58.1-3.34-29.28-5.61-49.15-2.58-64.48s18.82-58.85,28.53-93.44c6.37-22.15,2.57-40.81,14.25-60.08,11.68-19.11,18.82-35.95,21.39-47.63,3-10.62-30.94,46.72-30.94,46.72h0Z" style="fill:#f2e8b0;fill-rule:evenodd"/><path d="M458.59,747.42s-12.74,3.8-18.81,10.47c-6.07,6.37-8.65,11.68-16.84,22.45s-8.65,19.57-15.33,33.07c-6.67,13.2-21.39,33.07-23.21,40.2s-4.85,40.5-8.64,56.28c-3.34,15.78,3.79,35.2,3.79,35.2l8.64-1.83s0,11.23,8.65,18.82c8.64,7.43,10.16-25.19,10.16-25.19l32.31-109.07L488,794.75l5.31-26.7-34.74-20.63h0Z" style="fill:#f5eec0;fill-rule:evenodd"/><path d="M482.25,796.88s-22.91,1.51-34.13,9.71c-4.55,3.33-6.37,6.06-11.22,10.16-8.95,7.43-18.06,14.26-22.45,24-4.86,9.7-10.17,24.42-13.81,52.18-1.52,11.68-1.52,22.45-2.58,31.86-1.52,12.74-3.79,22.9-2.58,30,1.52,14.56,16.54,22.15,18,38.68l31.1-15.77,29.28-115.45,62.2-39-35.2-39.44-18.65,13h0Z" style="fill:#e6db9d;fill-rule:evenodd"/><path d="M318.18,1574.29c.13-1.14.26-2.28.39-3.45,4.54-39,5.31-68.56,8.64-87.07,4.85-26.24,8.19-36,7.43-45.82-1.06-15.77-2.27-27.3-.75-39.44,2.27-16.08,18.05-35.19,17.6-48.39-.31-10.47-5.62-17.29-10.17-23.66s-8.19-11.68-8.19-11.68,31.1-21.39,30.8-107.56a8.18,8.18,0,0,1,1.82.76l15.32,43.53,10.47,12.74,40.2,74.94,51.73,50.22,76.45,51.42L607.86,1493l4.85,139.11-62.65,81.31L539.8,1732a891.11,891.11,0,0,1-221.63-157.72Z" style="fill:#e5cb7a;fill-rule:evenodd"/><path d="M509.56,1707.37s1.06-17.29,15.32-28.52c2.28,3.79,3.79,7.44,3.34,10.16,2.58-4.54,20.63-33.67,61.44-41.26,40.81-7.43,50.67-37.16,50.67-37.16l86.61-78.73L826,1440.69l120.45-42.33,56.29-13.81s1.06,4.1-1.06,13.2c10.46-.75,33.67-6.06,57.79-14.56,9.71-3.79,18.82-5.31,23.67-.3,7.13,6.67,8.19,22.45,8.64,31.85,11.68-2.58,25.18-13.8,36-12.74,17.3,1.82,32.62,22.15,50.22,22.15,23.21,0,33.67-14.26,49.91-25.49,9.71-6.67,23.66-15,31.55-20.63,18.81-13.81,217.84-74.64,217.84-74.64l69.78,4.55,11.23,74.94-6,195.9c-.74.71-1.48,1.45-2.23,2.16l-317.28,165.71L793,1814.07a882.11,882.11,0,0,1-281.16-96.71l-2.25-10h0Z" style="fill:#d8c173;fill-rule:evenodd"/><path d="M344.85,1599.21c6.25-13.07,11.87-24,12.86-27.91.78,7.88,2.21,25.17,5.09,43.55q-9.07-7.71-17.95-15.65Z" style="fill:#f1d789;fill-rule:evenodd"/><path d="M666.12,1783.57,723,1767.75l4.85,1.52s2.58,1.52,2.58,6.67c7.13-4.09,13.2-3.34,17.6-6.06,2.27,4.85,4.54,20.93,14.56,22.9,10.46,2.28,21.69-4.55,33.07-13.19,11.22-8.95,24-20.18,33.67-24.73a180.8,180.8,0,0,1,9.41,20.17c12.74-10.16,34.89-51.42,66.44-50.67A119.72,119.72,0,0,1,949,1671.42c29.28-19.87,47.63-21.39,70.54-19.57a120.62,120.62,0,0,1,33.07-29.58c3.79,1.52,14.26,7.89,27.31,1.82,13.2-6.06,28.06-29.58,47.63-32.61a46,46,0,0,1,30.34,6.37s57-56.59,96.33-75.4c-1.52-4.55-4.55-21.69,41.56-59.62,2.58,2.28.76,8.65,2.58,9,.75,0,12-4.85,26.24-15.78,17.6-13.19,38.68-27,51.42-30.79,24-7.13,49.46,7.43,49.46,7.43a22.8,22.8,0,0,1,7.13-3.34c6.06-1.06,10.46-1.82,13.8-3-.3,7.89,4.1,21.39,0,33.07a73.75,73.75,0,0,0,15,6.37c-2.57,5.61-8.19,19.87-17.59,26.7,7.88,3.79,8.94,8.19,20.17,12-4.55,6.37-12,17.3-15.32,24-3.34,7.13-15.33,36.71-20.64,47.93-5.61,11.23-13.19,31.86-16.84,36s-16.84,21.69-27,30.33c9-3.34,45.82-14.56,61.44-18.81-4.65,6.82-28.22,41.79-50.88,75.42a890.14,890.14,0,0,1-728.7,84.36Z" style="fill:#e0cd81;fill-rule:evenodd"/><path d="M486,792.78s-13.19,0-15.77,1.82,13.2,5.62,18.05,7.44,15.32,10.16,18.05,16.84c2.58,6.37,94.81,43.53,94.81,43.53l65.23-3.34L688.86,828l-42.78-37.47,30-88.44-39.74,6.37-95.57,57-47.94,18.36L486,792.78h0Z" style="fill:#dfc57c;fill-rule:evenodd"/><path d="M629.25,822.06a10.23,10.23,0,0,0,9,4.85c13.5,0,25.93,3.34,31.09,10.16,8.65,10.93,32.62,45.82,32.62,45.82l57.34,20.63L763,836l-62.65-43.53-71.3,26.24v3.34h.16Z" style="fill:#e5cc7c;fill-rule:evenodd"/><path d="M618,847.09s10.46.76,23.66-4.1,34.89-15.32,44.3-11.22c13.19,5.61,10.46,23.21,24.73,39,8.64,9.71,24.42,9.41,33.37,19.88s39.74,5.61,39.74,5.61l11.68,63-46.87,60.08-15.33,74.63H669.9L612,1071l-28.52-69,14.26-69.78L618,847.09h0Z" style="fill:#d2c281;fill-rule:evenodd"/><path d="M740.6,850.12a17.16,17.16,0,0,0,4.85.76c-1.82,1.52-5.62,4.85-4.1,13.5s6.37,19.57,2.28,26.24a32.8,32.8,0,0,1,7.13,12.44c2.58,7.44,3.34,14.26,20.17,15.33a35.44,35.44,0,0,0-6.67,5.31s11.68,10.16,17.6,19.56C787.92,943,804,938,804,938l3.34,2.28,7.13-3s-6.67-2.58-1.82-18.81c4.55-14.26,8.65-13.5,9-14.56s3.34-16.08,3.34-22.15c2.27-7.88,4.09-31.85,4.09-31.85l-4.85-52.94-27.3-16.54L774.73,759l-20.94,39.44L740,812.19l-1.06,34.13,1.66,3.8h0Z" style="fill:#e2c270;fill-rule:evenodd"/><path d="M806.28,805.83s4.85,13.8,6.68,24.42a23.49,23.49,0,0,0,1.06-6.37s3.79,20.94,4.54,29.59c1.52-.31,3-.76,3.34.75s3.8,18.36,3,27.76a75.65,75.65,0,0,1,25.48-25.48c6.07-3.8,13.2-7.89,20.64-8.2,11.68-.3,20.17,7.44,34.13,7.44,33.67,0,64.17-24.73,86.62-32.31,16.53-5.62,30.79-9.71,40.8-18.82,4.86-4.09,13.51-13.19,21.39-26.7,10.47-18,21.39-33.67,32.32-35.64a67.78,67.78,0,0,1-15,1.06s3.34-3.34,9-7.89,12.44-10.16,22.14-10.16c17.3,0,25.94,2.57,35.65,2.57,9.71-.3,15.32-2.57,15.32-2.57s10.17,7.13,33.07,7.13c22.91.3,38.23,2.27,50.22,3.34s52.18-3.34,63.71-3a55.82,55.82,0,0,1,21.7,5.31l-37.17-108L1151.4,513.36l-79.49,56.28L949.63,691.91,831.31,735.75l-24.73,27.76v42.32Z" style="fill:#ccb360;fill-rule:evenodd"/><path d="M1071.76,743.93s3.34-3.33,8.94-7.88,12.45-10.17,22.15-10.17c17.29,0,25.94,2.58,35.65,2.58,9.71-.3,15.32-2.58,15.32-2.58S1164,733,1186.89,733c22.91.3,38.23,2.27,50.22,3.33s52.18-3.33,63.71-3a55.53,55.53,0,0,1,21.69,5.31l-16.84-48.7-19.56-37.16-55.83-61.14s-67-39.44-67.51-39.74c-.3-.3-23.21-6.37-23.21-6.37l-60.68,36.71-55.06,142.45-1.06,30,35.64,16.84c8.95-15,18.82-27,28.07-28.52-8.35.91-14.72.91-14.72.91h0Z" style="fill:#d5b457;fill-rule:evenodd"/><path d="M1071,754.1c-5.31.3-9.7-.76-10.92-4.55-4.55-12.74-8.19-14.56-12-14.56s-8.95,8.19-12,8.94-6.67-9.4-6.67-9.4l-3.34-1.52s-19.57,12.74-33.37,27.76-36.41,40.51-46.57,45.05-45.06,6.07-57,8.65-25.18,11.23-27,13.2,5.32,4.09,6.38,6.06c1.06,1.82-11.69,1.06-12.75,3-.75,1.52,3,10.16,4.86,14.56a24.73,24.73,0,0,1,10.46-2.58c11.68-.3,20.18,7.44,34.13,7.44,33.68,0,64.17-24.73,86.62-32.32,16.54-5.61,30.8-9.71,40.81-18.81,4.85-4.09,13.5-13.2,21.39-26.7,5.76-9.25,11.38-17.9,17-24.27h0Z" style="fill:#d2b257;fill-rule:evenodd"/><path d="M588,1504.86s-3-11.23-30.8-40.2c-7.89-8.19-12.74-15-18.05-19.87-13.2-12.45-20.94-15.78-30.34-22.91-20.63-15.32-43.08-15.32-60.37-34.13S411,1333,397,1296.27c-13.8-36.71-17.6-48.39-17.6-49.45s3.8-8.19,8.65-7.13,4.85,10.46,6.07,12.74a75.27,75.27,0,0,0,8.19,10.46c7.13,8.2,17.29,18,22.45,32.62-1.06-12.44-5.31-26.24-5.31-26.24s26.7,16.84,49.45,34.43c22.91,17.6,32.31,23.67,39,34.89s22.45,40.81,30,49.46,111,41.26,111,41.26L698.11,1466l24.43,53.55-19.12,30-36.71,7.89-59.62-26.7L588,1504.85h0Z" style="fill:#d2b159;fill-rule:evenodd"/><path d="M455.55,1320.39s12.44,19.87,42.78,38.68c27.31,16.54,70.54,31.56,109.08,40.51,22.14,5.31,44.29,9.4,64.16,9.71,53.55.75,90.41-14.56,136.08-19.57,24.73-2.58,55.07-4.55,86.62-12,40.5-9.71,64.47-20.64,97.09-36,23.66-10.92,45.36-19.11,62.95-29.58,24.73-14.56,42.78-30.79,63.72-35.64-2.58,7.13-5.31,19.87-25.94,33.07,10.92-.31,25.94-1.06,25.94-1.06s-14.56,8.64-40.2,28.06c-15.78,12-36.71,32.31-58.1,45.81-13.81,8.65-28.83,15-38.69,20.18-24,13.2-33.68,19.87-49.45,36,5.61-.3,6.07,0,6.07,0s-19.88,2.58-34.13,10.16c-3,0-8.2-1.06-17.3,1.52-7.13,2.27-16.54,7.44-26.24,10.16-13.81,4.1-18.35,2.28-18.35,2.28l2.27,4.55s-18-.31-24,.3c1.06.3.76.76.76.76a9.21,9.21,0,0,0-3,1.06,31.3,31.3,0,0,1-9.4,4.09c-1.82.3-3.34.3-5.62.76.76,1.82,6.68,12,9.41,18-2.27,1.52-36.41,27.31-36.41,27.31a26,26,0,0,1,2.58,5.31c1.06,3.33,1.52,8.19,2.58,10.46,2.57,4.55,4.09,5.31,4.09,5.31s-4.09.76-11.23,2.58c-6.06,1.52-13.5,4.09-24,5.61a95.13,95.13,0,0,1-9.71.76c1.52,3.34,8.19,16.08-4.1,30.79s-16.08,16.85-19.87,26.25a40.69,40.69,0,0,0-6.07-3.8c-4.09-1.82-9.71-4.54-11.68-8.19a97.33,97.33,0,0,1-4.55,14.26c-3.79,10.16-9.4,20.18-10.46,27.76-4.1-4.55-11.68-13.5-22.15-11.68s-18.81,16.08-20.63,20.18c0-2.58-1.82-4.55-2.27-1.52-.31,3.34-6.07,38.22-38.23,66.44-.3-7.13-.3-22.91-1.06-28.06-3,3-6.67,7.43-28.52,16.84-21.39,9.4-18,18.81-18,18.81s-1.82-15,9.71-30.8c11.68-15.77,18.81-23.21,18.81-24.42a6.75,6.75,0,0,0-1.52-3.34c-1.52-1.52-4.55-3.34-4.55-4.55,1.82-.75,19.87-9.4,18.81-27.31-1.06-16.07-7.88-24.42-12.74-30.33-.75-.76,7.14-6.37,6.07-8.19-.76-1.06-10.46-8.2-11.68-12a34.86,34.86,0,0,1,1.52-6.67c1.06-3.34,1.82-5.62,1.52-7.89-.76-3.79-4.86-14.26-6.07-15.32,1.06.3,8.64,0,8.64,0s-6.06-9.71-7.13-14.26-3.34-16.54-4.55-18.81c2.58.3,8.95.75,8.95,0,.31-2.28-5.61-6.07-3-9,1.82.3,5.31,1.82,8.64,6.07-1.82-4.86-4.85-14.26-11.23-18.05,3-1.06,13.2-3.8,22.15,1.51s12,12.74,12,12.74,5.31,4.1,13.51,10.17c9.4,7.43,21.38,18,40.5,25.48,4.1,2.28,14.56,2.28,22.15.76a34.06,34.06,0,0,0,9.4-3.79,17.43,17.43,0,0,1,3.34-1.52,72.71,72.71,0,0,0-5.61-9.41c2.58,0,5.61.31,5.61.31s1.82-4.1-6.37-12c1.82-1.82,4.1-3,4.1-6.07-2.58-.3-7.13-4.09-8.19-5.61,1.51-1.06,3.79-4.55,6.37-5.61-2.28-1.82-7.89-9.41-10.47-10.16a47.69,47.69,0,0,0,7.13-3.34s-12.74-3.34-16.84-6.07c-4.1-3-10.16-8.19-13.8-9.71-3.8-1.52-10.47-2.27-13.2-5.31,2.57.76,6.67,0,9.71,0,2.27,0,3.34.3,4.09.3-.3-1.06-.3-3.34,5.62-4.09a27.71,27.71,0,0,0,8.19-2.58s-5.62-.3-12-6.37-11.68-10.92-15.32-11.68c-3.79-.76-10.92,2.58-15.32,2.27-6.07-.75-8.65-3.79-8.65-3.79s-20.17,1.82-64.92-25.48c-38.69-23.67-55.53-44.6-55.53-44.6a66.52,66.52,0,0,1-10.46-4.86c-14.56-7.58-34.74-23.36-34.13-44h0Z" style="fill:#c2a44d;fill-rule:evenodd"/><path d="M1013.65,409.89a19.69,19.69,0,0,1,9,6.07c7.13,8.19,11.68,23.66-4.55,40.2,6.37,2.27,9,3,14.56,2.27-5.61,6.68-18.35,20.94-19.11,33.38-.76,10.16,5.61,13.2,5.61,13.2s-9.71,11.22-10.16,30a121.56,121.56,0,0,1,15-14.26c11.23-8.95,26.7-19.11,37.17-25.48a21.39,21.39,0,0,0,1.06,7.88s19.56-16.08,36-8.94c7.43,3.34,4.09,13.8,4.09,13.8s10.17-3.79,17.3,3.34S1136.83,536.87,1142,544c2.27,3.34,8.19,9.71,14.25,19.57a247.53,247.53,0,0,1,20.64,43.53c.3-7.89,2.27-20.17,24.73-12.44,22.45,7.89,47.93,24.43,69.32,57S1297.63,721,1308.4,735c10.92,13.5,22.15,35.95,22.91,45.36s-3.34,39.74,19.11,121.81c6.37-25.48,16.08-82.07,16.08-82.07l5.31-49.91,6.07-154.43L1216.62,481.79l-126.06-91.48-82.07,7.89,5.15,11.68h0Z" style="fill:#caa13e;fill-rule:evenodd"/><path d="M1313.26,639.71s-2.28-15-40.2-40.5c-37.93-25.18-67.51-25.18-94.81-46.57-20.94-16.84-42.78-55.53-57-68.27-13.81-12.59-16.08-49-16.08-49l46.57-39L1221,296.26l58.55-64.47,28.06,39,39,45.81,21.69,91.93,7.89,134.56-63,96.63Z" style="fill:#b59544;fill-rule:evenodd"/><path d="M1360.14,801a171,171,0,0,0-7.44-60.37c-10-31.1-31.85-86.32-42-107-4.1-22.91-1.06-24.73,3.34-27.31s20.94-12,30-45.05,37.17-34.13,37.17-34.13l17.29-12.74,26.25,65.68,22.9,59.32,7.13,45.36,5.31,38.68-12.44,81.77-61.43,55.52L1360.13,801h0Z" style="fill:#c89d3a;fill-rule:evenodd"/><path d="M502.89,1712.39v-1.68a12.9,12.9,0,0,0,3.33-3c1.06-1.52,1.83-3.34,2.58-3.79,1.52-.76,8.65-3,12.44-2.28s13.81,4.85,19.12,4.55c10.92-.3,23.66-8.65,43.84-4.85,30.34,5.61,37.47,26.24,55.07,37.92,12,8.2,24.42,4.55,26.24,4.55h4.09c.76,0,6.37-6.37,9.41-6.06,6.07.3,6.67,5.31,10.46,5.61,8.95,1.06,26.25-4.55,34.9-2.27A16.67,16.67,0,0,1,735.29,1752c1.82,5.61.3,12.74-4.1,16.84-9.4,8.64-18.35,16.84-20.17,24a85.25,85.25,0,0,1,6.66,5.64,883.15,883.15,0,0,1-214.79-86Z" style="fill:#ceb052;fill-rule:evenodd"/><path d="M1310.68,1409.29s23.66-31.55,31.86-47.18C1350.73,1346,1316.6,1142,1316.6,1142l68.57-224.66-1.83-73.12s3.34-67.51,11.23-96.79c9.41,16.84,38.69,37.17,45.06,47.94,3-20.64,13.19-64.17,11.68-110.59,5.61,8.64,19.11,95.57,19.11,95.57l13.5,58.55,17.6,62.2,19.57,65.69,11.68,45.36,6.67,10.92,5.62,19.11,5.31,20.64,15.32,48.39,9,39.74,7.13,72.06a109.86,109.86,0,0,1,3.34,16.84c.3,7.89-1.06,12.44-1.06,13.81s2.58,17.29,1.52,29.28c-1.52,12-1.52,21.39-10.93,30s-15.32,60.07-15.32,60.07l-16.84-11.22s3.34-15.33-4.55-29.28-23.21-16.84-31.86-14.56c-8.64,1.82-25.93,4.54-31.55,9.4-5.31,4.85-18.35,19.87-30.34,26.7-15,9-39.44,9.71-52.48,12.74-13.2,3-27.76,12-43.09,22.45a240.58,240.58,0,0,1-37.92,20h0Z" style="fill:#cca847;fill-rule:evenodd"/><path d="M1310.68,1740.75s1,.65,2.93,1.71a891,891,0,0,0,284-210.5c-.87-30.7-2-62.17-3.24-73.83-2.57-24.73-.75-49.91-1.51-64.47s-8.95-73.88-12.74-89.2c-4.1-15.32-12-22.91-13.2-22.91-1.06.31-7.44,28.83-7.44,36s-1.52,24.43-1.52,28.83c-1.06-.31-1.51-3-1.51-4.1-1.52,3.79-3.34,10.47-4.1,11.23s1.06-6.37,0-7.89-3-.76-2.58-4.55a43.41,43.41,0,0,1,1.06-6.67s-4.55,6.67-7.88,23.66c-3.34,16.84-3.34,17.3-4.55,18.81-1.06,1.83-7.13,7.89-7.44,10.17-.3,4.09,5.62,8.19,6.07,10.46.3,3.8-5.31,21.39-7.13,30s-1.06,25.48-3,34.13c-1.52,7.89-3,12.44-8.19,15.77,3.79.76,7.43,1.82,7.43,1.82s5.31,22.45-8.19,41.57c-4.85,6.67-6.06,9.71-11.22,15.78-10.17,11.22-18.06,24-18.82,32.31a54.28,54.28,0,0,1-1.06-7.44s-15.77,18.36-22.45,28.83c-8.64,13.5-20.63,12.74-24,16.08s-4.1,9.4-3,14.26c-3,.75-8.64,1.82-12.44,13.5-1.82,6.06-6.37,12-13.5,16.08s-15.78,5.31-20.18,6.37c3.79,1.06,5.31,1.06,7.13,2.27-2.27,3.79-12.74,9.71-24.42,17.3-11.68,7.13-17.3,17.59-20.18,24.42-3,6.37-7.43,10.47-14.56,11.23,3,1.82,7.44,6.06,9.71,7.43-3.34.76-9,.76-19.11,9.41-10.62,8.8-14.26,11.38-19.12,12.14h0Z" style="fill:#c39d3c;fill-rule:evenodd"/><path d="M1099.6,1811.05a85.79,85.79,0,0,1,18.73-9.93c23.66-9.4,48.69-11.22,58.55-14.25,9.41-3,16.84-7.14,28.52-9.41-.31,2.66-.57,5.16-.85,7.52a884.07,884.07,0,0,1-105,26.07Z" style="fill:#d2ba6b;fill-rule:evenodd"/><path d="M1536,1188.72s-4.85,26.24-13.5,42.78-18,39.44-18,39.44a72.15,72.15,0,0,1,1.82-15.33c-10.92,6.37-37.47,21.7-45,28.52-7.13,6.37-19.12,17.6-22.15,22.91,7.13-20.93,14.56-39.74,15.78-48.39-10.92,7.89-61.9,49.91-88.44,77.67l-82.68,66.9A286.14,286.14,0,0,1,1254.4,1417c-14.25,6.06-31.09,11.22-43.53,16.08,3.34-8.95,8.64-16.85,16.08-24.43,7.89-7.43,31.55-33.07,35.19-45,3.34-12.44,4.1-19.87-.3-30.34-4.1,1.06-13.5,1.52-19.87,3.34s-13.2,8.64-13.2,8.64,4.85-27.76,15.32-54c-7.89.3-21.39,2.57-21.39,2.57s18.81-31.55,51-53.54a165.88,165.88,0,0,0-28.82,8.94c-18.81,7.89-39.44,19.57-54.76,25.94,8.64-12,69.32-98.6,105.43-179.31,36-80.55,49.45-101.18,57.34-144.41,4.09-21.39,3-53,4.09-81.31,1.06-28.07,4.55-53.25,2.28-70.09,9.4,11.68,44.6,44.6,45.81,118.18,1.06,73.57-33.67,172.94-70.54,226.48,9,2.58,32.32,5.62,56.28-36s23.67-53.24,32.32-70.54c1.06,8.65.75,11.68.75,11.68s34.9-42.32,51.43-95.57c3.34,22.91,13.2,43.09-2.28,85.11-13.8,37.92-31.85,47.18-31.85,47.18s8.95-1.52,22.14-9.41c2.28,5.61,1.83,12,5.62,14.26s8.95,6.07,9.71,9.71c4.09-6.07,10.46-13.81,12.44-19.57-1.52,12-2.58,64.47,3,91.17,11.69-1.06,23.67-1.82,31.86-22.91-5.61,20.64-5.61,33.07-1.82,50.67,6.22-4.24,11.83-11.83,11.83-11.83h0Z" style="fill:#c0993a;fill-rule:evenodd"/><path d="M1141.84,352.55s-11.68,4.85-31.55,4.85c-17.29,0-12.44-6.67-39.44-6.67-41.56,0-186.74,24-212.23,23.66-16.54-.3,55.82,7.13,55.82,7.13l184.93,2.58,37.16-3L1150.34,353l-8.5-.45Z" style="fill:#a88f33;fill-rule:evenodd"/><path d="M662.32,714.05s-23.67,18.05-33.68,31.86-15.32,22.9-26.7,34.13a23.3,23.3,0,0,0,7.89-1.06s0,3-1.82,3.79a10.61,10.61,0,0,1,8.64,3c-3.34,1.82-12.44,10.93-5.31,21.7,5.31,8.19,16.54,8.94,16.54,8.94s-2.58,7.44,8.19,6.68c23.21-1.06,49.15-11.23,61.13-8.65,12,3,18.82,4.1,27.31,18.82,9,14.56,16.84,16.84,16.84,16.84s5.31-13.51,4.1-33.68a100.16,100.16,0,0,0,7.13-34.13l-7.89-58.1-34.43-43.54-44.6,24.73-3.34,8.64Z" style="fill:#e3c571;fill-rule:evenodd"/><path d="M704.64,705.4s3.34,7.89,17.3,8.64c-1.52,3.34-1.52,3.8-1.06,6.37.3,2.58.75,6.37.75,6.37a14.11,14.11,0,0,0,4.1-3c.76,3.34-.76,8.64,0,12.44a27.63,27.63,0,0,0,2.27,6.67,13.4,13.4,0,0,1,.76-1.51c.3-.76,3,8.19,10.47,15a6.22,6.22,0,0,1,.75-3,10.52,10.52,0,0,0,1.82,5.31,5.54,5.54,0,0,1-1.51-1.06s.75,24,4.85,36.41a17.05,17.05,0,0,0,1.82-2.58c0-.75-.3,6.68-1.06,12-1.06,5.31-.3,12.74-.3,12.74a39.81,39.81,0,0,1,8.94-5.31c4.55-1.83,12-7.44,16.54-19.88a132.83,132.83,0,0,0,6.07-21.69,30.28,30.28,0,0,1,3,9c.31,3.79,7.44,1.82,7.44,1.82l1.52-16.54,9-37.47,8.19-23.21,39.44-61.43L917,586.61l62.2,14.26,52.48-71.3-90.41-54.31-85.56,8.95L778.06,591.76l-62.19,97.55-11.23,16.08h0Z" style="fill:#d8b65b;fill-rule:evenodd"/><path d="M1152.76,549.76s-5.31,1.06-20.63,9-25.94,10.46-31.86,22.14-6.37,20.94-6.37,20.94,10.47-4.55,16.54-6.07c6.37-1.51,13.5-1.06,12.74,1.52a17.59,17.59,0,0,1-3,4.85s12-.3,11.68,5.62-2.27,12.44-4.54,15.32c-2.28,3-11.68,7.44-12.74,10.93-2.58,7.13,1.06,7.43-.31,13.19-1.06,5.62-6.06,16.54-22.45,35.65-16.84,19.12-24,32.62-24,32.62s-8.19-15.32-12.44-28.52c-3,1.51-19.11,10.46-19.11,10.46l-37.32-130,.75-8.65s3.34-4.09,4.1-11.68c-5.61-1.82-6.37-3.34-13.81-10.46s-13.5-15.78-25.93-21.7c-1.82-3.34-4.1-7.88-13.2-9.71s-14.56-3.33-14.56-3.33,4.85-1.83,7.13-5.62c-5.62.76-10.16,2.58-22.45,2.28-12.44-.31-13.81-.76-20.63.3s-15,4.1-18.05-6.37c-3.34-2.58-10.47-.3-16.54,8.64s-8.19,16.08-19.87,19.57a40.71,40.71,0,0,1-5.31,14.56c-3.34,5.62-8.65,11.23-15.78,19.57-11.23,13.2-9.41,34.89-27.31,51.43-18.05,16.53,3-45.82,3-45.82l28.82-69,82.07-80.25,127.43-8.64,12.44,66,62.2,21.39,39.29,59.92h0Z" style="fill:#d3ae4d;fill-rule:evenodd"/><path d="M1172.94,564.32l-53.55-77.21-37.47-28.83s-26.7-49.14-28.52-50.66c-1.52-1.06-26.7-3.79-42.78-4.85l3,7.43a19.69,19.69,0,0,1,9,6.07c7.13,8.19,11.68,23.66-4.55,40.2,6.37,2.27,9,3,14.56,2.27-5.61,6.68-18.35,20.94-19.11,33.38-.76,10.16,5.61,13.19,5.61,13.19s-9.71,11.23-10.16,30a121.56,121.56,0,0,1,15-14.26c11.23-9,26.7-19.12,37.17-25.49a21.42,21.42,0,0,0,1.06,7.89s19.56-16.08,36-8.95c7.43,3.34,4.09,13.81,4.09,13.81s10.17-3.79,17.3,3.34,17.29,25.48,22.45,32.62c2.27,3.34,8.19,9.71,14.25,19.56a247.31,247.31,0,0,1,20.64,43.54c.3-6.07,1.52-14.56,12-14.56l-15.93-28.52Z" style="fill:#caa13e;fill-rule:evenodd"/><path d="M370.15,783.68s-3.79-9.41,0-27.76,9.71-27,11.68-54,19.57-60.68,19.57-60.68l48.69-22.14,34.44,9.4,10.16,46.12-43.54,24s-2.27,10.16-14.56,18.35-29.28,14.56-33.37,22.91a66.79,66.79,0,0,0-5.31,16.08s-12.44-2.58-19.87,5.61c-7.89,8.35-7.59,15.78-7.89,22.15Z" style="fill:#f4efc8;fill-rule:evenodd"/><path d="M468.45,771.39s-4.1,2.58-7.13,9c-3-4.85-10.17-33.68-10.47-59.62S449,688.4,455,679.46,484.53,661.1,481.19,645c-3.34-15.32-17.3-21.69-34.44-17.29-12,3-20.93,28.52-33.37,41.26-9.41,9.71-20.63,8.19-23.66,13.5-4.1,7.13-.31,14.26-1.52,18.81-.31,1.52-4.1,9.71-10.93,19.57-13.8,19.87-37.16,47.94-40.2,73.12,1.06-14.26.31-14.56,4.1-30.34l-2.28-3.79,15-49.15,9.71-40.5,21.7-67.82,38.22-69.32,37.17-41.57,38.68,2.58,4.55,58.1,22.15,109.08,46.57,57.34L498,768.81l-29.58,2.58h0Z" style="fill:#ebcc73;fill-rule:evenodd"/><path d="M491.66,792s-6.37,1.52-8.65.31-4.54-2.58-3.79-4.1,4.85-4.09,4.85-5.31a4.25,4.25,0,0,0-3.79-4.55c-3.49-.45-4.55,1.82-4.55,1.82s-3.34-2.57-6.06-3a41.93,41.93,0,0,1,4.85-.31,47.29,47.29,0,0,0-13.2-3.79c3.79-2.27,11.23-8.95,16.08-8.95s7.89-.75,7.13-3.33-4.55-6.37-8.64-7.89c1.51-1.82,2.58-4.55-1.06-12-3.8-7.43-2.28-12.44-1.06-14.25,1.06-2.28,4.85-6.37,6.67-8.95s3.34-6.07,6.37-7.89c1.52-1.06,6.37-3,11.23-4.85,5.31-1.82,9.71-4.1,12.74-1.82,3.34,2.27,1.82,5.31,1.82,5.31s10.47-3.8,19.87,1.06c9.41,4.54,32.32,7.43,32.32,7.43L573,733.48l-54.31,46.57-22.45,11.23-4.55.75h0Z" style="fill:#e5c66b;fill-rule:evenodd"/><path d="M567.05,715.87s-16.84,11.23-20.63,15.32c2.27.31,6.06,1.83,4.54,4.1-1.82,2.27-12.74,10.16-18.81,17.6-6.37,7.43-12.44,16.84-14.56,21.39-2.27,4.09-19.57,16.08-25.48,17.59,12.44,0,37.47-15.32,46.87-15.32-.3,4.55,2.58,9.71,7.89,10.16s20.63,3.34,41.26-9.4c20.63-12.44,13.81-21.7,22.45-27.76,16.54-10.93,23.21-20.64,32.31-26.7s13.81-7.44,13.81-7.44.3-4.55,3-4.09a4.08,4.08,0,0,1,3.34,2.58s15.78-11.23,36-14.26a2.1,2.1,0,0,1-1.06-1.06s1.51-.76,1.82-1.52c0,0,1.06-1.52,1.82-.76s1.82,6.37,3.34,8.65c3.34-1.52,9.71-15.78,9.71-15.78L730,645.33V605.28l-12,2.28-90,38.22-54.62,56.59-6.37,13.5Z" style="fill:#e6bd62;fill-rule:evenodd"/><path d="M826.15,519.42A50.87,50.87,0,0,0,840,513.8c-1.82,4.86-1.82,10.17-9.71,21.7s-8.19,13.2-14.56,25.18c-6.37,12.44-7.13,30.34-13.2,38.22a27.74,27.74,0,0,1,8.64-2.57s-6.06,5.31-8.64,10.92-7.13,17.29-18.35,24.43-25.49,11.68-40.81,28.52c-15.33,16.53-31.1,37.47-39,45,4.1-7.13,9.71-21.39,11.23-30.79s-.31-20.64,2.27-33.07,2.58-21.39,15-43.09,33.68-97.09,33.68-97.09l45.81-14.56,13.81,32.77h0Z" style="fill:#b6933f;fill-rule:evenodd"/><path d="M793.08,491.66s-13.8,19.87-17.59,37.47-.31,16.08-2.58,24.73a32.25,32.25,0,0,0,0,16.08A57.09,57.09,0,0,1,792,551.12c13.05-7.88,23.67-13.5,30-20.17,6.37-7.13,11.68-18.81,25.48-27.76-5.61-.76-13.5-3.34-15-3,5.62-6.37,22.45-16.08,39.44-27.76,16.84-12,15.78-16.84,43.09-28.82-8.95,1.52-13.2-.76-20.64,0,3-6.37,13.5-9.41,24-19.87s-6.67-25.94-6.67-25.94l-80,48.39-38.68,45.51Z" style="fill:#c49937;fill-rule:evenodd"/><polygon points="576 455.55 577.82 440.99 600.73 404.28 624.7 339.81 624.7 251.67 622.88 200.7 626.67 167.32 629.55 156.71 632.59 152.61 652.15 162.77 679.16 199.48 681.74 270.33 655.49 382.13 580.55 463.9 576 455.55" style="fill:#dfc068;fill-rule:evenodd"/><path d="M635.62,148.51s-12,.31-14.56,50.22-3.8,76.15-5.62,100.88-6.06,39.74-8.19,54.31-3.34,34.43-10.16,46.57c-3,5.61-9.41,23.21-24.43,36.41-16.84,14.56-42,24.73-45.81,25.49-6.68,1.51-40.51,4.85-54.31,12.44-4.85,2.58-13.2,5.61-22.45,14.26-18.36,16.53-42.78,46.11-60.38,81.76-27,53.25-54,203.58-54,203.58l6.07-10.16s.76-13.5,14.26-37.17c13.2-23.66,9.41-50.21,27.76-95.57,7.13-17.29,16.08-39.74,27-58.86,17.3-31.1,38.23-57.8,59.32-72.36,34.43-23.66,72.36-28.82,72.36-28.82l40.81-27s7.13-13.8,16.54-29.58c13.19-22.14,30-46.87,33.67-82.82,5.62-53.25-7.89-88.14-7.13-119.69s1.06-54.76,7.44-60.38,1.82-3.49,1.82-3.49h0Z" style="fill:#a88f33;fill-rule:evenodd"/><path d="M635.62,386.68s18-44.3,26.24-83.59c1.52-7.89,4.55-15.77,5.31-22.14,3.79-37.17,4.85-52.49,0-72.82-3.79-15-18.35-28.52-25.94-39-7.43-10.93-10.92-15-9.4-17.3s7.43-6.06,13.19-5.61a45.17,45.17,0,0,1,32.32,15c11.68,13.5,20.93,59.32,20.93,59.32L708,281l24.73,76.15-97.09,29.59h0Z" style="fill:#c99e3d;fill-rule:evenodd"/><path d="M804.76,340.57s-3.34,1.51-9.4,0a13.53,13.53,0,0,1-6.07,12.74c-6.37-2.58-66,2.58-66,2.58s-27.76-4.86-36.41-41.57c-6.06-24.43,4.55-58.1,1.06-80.25-5.31-32.62-12.74-39-13.5-49.15s-1.52-12.74-1.52-19.11c-3.34-.76-5.31-1.82-8.64-1.82-.76-3,.75-5.62-2.58-10.93,1.82.76,14.26,2.28,28.82,16.08,12,11.23,12,15.32,13.81,17.6,2.27,2.27,20.63,18,28.52,33.68s23.21,65.68,26.7,73.87c1.06,3.34,3.34,6.68,9,14.26,8.8,10.93,21.69,29,36.25,32h0Z" style="fill:#b58634;fill-rule:evenodd"/><path d="M706.47,187.5a420.38,420.38,0,0,1,24.72,46.12c8.95,20.17,14.26,36.71,25.49,50.21-6.07-17.59-16.84-52.18-23.21-64.47-7.13-13-21.69-27-27-31.85h0Z" style="fill:#a88f33;fill-rule:evenodd"/><path d="M603.31,436.9s-15.32,3.79-43.84,18.81c-9.41,4.85-18.35,8.94-27,12.74C510,478.61,485.9,488,466.78,493.18c1.52,1.82,2.27,2.57,2.27,2.57s0,7.44,4.1,11.68c-2.27,2.28-32.62,22.91-23.66,91.93,6.06-2.27,13.19-5.31,14.25-5.31,1.83.31,2.28,5.31,4.55,5.31s9.71-3,17.6-13.2c-.3,4.1-4.85,45.36,19.57,73.12,4.55-5.31,16.08-22.91,16.08-22.91l.3-5.61s1.06-19.57,7.44-37.47,18.81-31.1,18.81-31.1L613,469.5l-9.71-32.61h0Z" style="fill:#e6c367;fill-rule:evenodd"/><path d="M542.63,573a35.86,35.86,0,0,1-9.71,4.85c-1.06-3.79-2.58-16.84,6.37-29.58,10.47-15.33,33.37-35.2,39.74-51,4.1-10.17,2.28-35.65,38.69-68.27s50.66-43.84,50.66-43.84l58.86-29.58L799.6,384.1,763.65,525l-27.91,66-111-20.93L542.62,573h0Z" style="fill:#dcba5a;fill-rule:evenodd"/><path d="M585,534.74l13.81-17.29V505.16s15.32-4.1,31.85-20.94,39.44-49.15,59.62-47.18c20.18,2.28,22.15,43.84,22.91,55.53s3.34,38.22,7.43,52.49c4.55,14.26-49.15,68.26-49.15,68.26L635,641.08,585,534.74h0Z" style="fill:#e9ce77;fill-rule:evenodd"/><path d="M627.73,678.7s11.23-17.6,3-21.39c4.85-10.92,13.8-22.45,13.8-22.45s6.37-15.77,27-35.19,33.38-32.32,36.72-45.36a119.5,119.5,0,0,0,3.34-25.94,49.24,49.24,0,0,0,7.13,4.85c3.34,1.52,19.11,14.56,16.84,40.81s-12,37.17-12,37.17-9.4,9.4-16.07,14.26c-7.14,4.85-9.71,10.46-21.7,10.92a14.35,14.35,0,0,1,4.1-2.28s-12.44-1.51-19.12,4.55S649.89,663.38,642.76,669c-7.13,4.55-15,9.71-15,9.71h0Z" style="fill:#cdae50;fill-rule:evenodd"/><path d="M1132.13,383.64a182.69,182.69,0,0,0-55.82-10.92c-31.86-1.06-78.43.76-124.09,1.06-49.15.3-93.75-16.84-155.64-19.87-10.16-6.07-36-32.62-116.66,23.66,4.85-.3,58.56-12.44,77.21,10.93,18.81,23.21,13.5,62.65,10.93,72.05-4.86,20.94-20.64,51.43-27,72.82S736.2,566,731.65,581s-14.56,22.45-8.65,39.74c7.89-4.85,12-4.85,25.18-34.43s10.47-50.67,32.32-75.7c21.39-25.18,57-59.62,70.54-68.27s121.05-64.47,233.62-11.22c27.15-2.88,47.48-47.49,47.48-47.49h0Z" style="fill:#d2a83e;fill-rule:evenodd"/><path d="M725.27,363a13.9,13.9,0,0,0-.75-3.34,24.35,24.35,0,0,0-4.1-6.07s-26.7-4.85-40.2-3.34c-23.67,2.58-45.06,31.86-55.07,46.88s-22.45,38.22-35.95,50.21a5,5,0,0,0-.76-3.34s.76,1.06-.75,2.58-1.52,2.27-.76,3l2.28,2.27c.75,0,21.69-9.41,50.21-36,30.34-27.76,53.55-42,65.69-46.88A92.4,92.4,0,0,1,725.28,363h0Z" style="fill:#c29637;fill-rule:evenodd"/><path d="M1243.18,248.94s-4.86,6.06-10.93,12.74c-13.5,14.26-31.1,30.33-46.12,46.87-14.25,15.78-30.33,28.07-48.39,48.7s-39,43.53-44.3,50.21c-4.85,6.68-8.64,17.6-8.64,23.21-2.58-1.82-5.61-3.79-5.61-3.79a38.11,38.11,0,0,0,4.55,6.68c3.79,5.31,9.7,12,12.74,16.08a49,49,0,0,1,7.88,17.29c1.82.3,13.5,2.58,28.07-21.39s33.67-50.21,33.67-50.21l30.34-45.06,19.12-38.22,24-42.78,3.65-20.33h0Z" style="fill:#ac8132;fill-rule:evenodd"/><path d="M1274.28,218.3s-18.36,15-25.49,24-24,32.62-24,32.62l6.07-.76,30.8-27.3,12-21.39.61-7.13Z" style="fill:#a88f33;fill-rule:evenodd"/><path d="M1268.66,1423.85s-.3-12.44,6.68-19.87c7.13-7.44,25.18-18.36,42.78-59.32s19.56-50.21,19.56-50.21-31.55,27-51,33.37c4.55-9.41,7.13-16.08,9.41-20.94-2.58-2.27-13.5-4.85-14.56-6.06,6.06-6.07,9.4-20.94,21.69-30.8,15.78-12,44.6-32.62,67-51s66.44-61.13,72.06-73.57c3.34,4.85,4.09,7.88,4.09,7.88s-22.14,28.83-33.67,47.18c-10.17,15.78-9.41,24.73-9.41,24.73l20.94-9s6.06,22.45-21.39,56.59c12-4.55,16.84-1.82,23.66-5.62-11.23,7.14-26.7,16.85-41.26,43.54-14.26,26.7-33.68,57.8-66.44,77.21-31.86,20.48-50.22,35.8-50.22,35.8h0Z" style="fill:#a67a2e;fill-rule:evenodd"/><path d="M1186.44,399.43s-12.44,25.93-14.26,46.11c-.3,4.86-1.52,8.65-1.52,14.26-.3,18.05,1.06,38.23-3,47.63-1.52-3.79-2.28-6.37-3.8-7.88-2.27,6.37-6.37,26.24-9.71,33.67-1.51-4.85-4.85-21.69-4.54-41.56s.75-23.67.75-27.76c-.75,6.06-4.85,14.26-6.37,19.11-2.27-4.09-4.85-9.4-7.89-13.8-1.82,3-4.09,7.43-6.06,9.71-.31-1.82-1.06-6.68-1.52-13.5-.3-7.89-.76-18.05-.3-20.18.75-4.09,7.13-20.17,20.63-34.89,16.08-17.6,32.62-51.42,37.47-61.89s25.48-54,25.48-54h15.78l-22.91,52.18s-13.8,28.52-20.93,39-22.15,40.51-28.83,52.19c4.85-6.37,8.95-9.71,13.81-15.78,4.7-4.25,17.74-22.6,17.74-22.6h0Z" style="fill:#8c6228;fill-rule:evenodd"/><path d="M1274.58,216.32a65.31,65.31,0,0,1-12,21.7c-9.41,11.23-29.59,26.24-39.44,38.22-9,11.68-27,43.54-18.82,81.31,3-8.19,8.65-24.42,23.67-42.78s31.1-39.44,39-55.82c7.88-16.54,8.94-29.58,8.94-29.58l3-3.79-1.82-8.65-2.58-.61Z" style="fill:#cba94c;fill-rule:evenodd"/><path d="M1581.77,1222.54s-6.07-16.53-7.89-31.55,3-18-2.58-35.19c-3.34-10.47-9.4-9-10.92-10.47s-2.58-17.29-2.28-25.94-.3-19.87-1.82-24.73c-2.27-1.82-3.79-3.34-7.13-14.56-3.79-11.23-5.61-16.84-7.43-20.17s-7.14-6.37-7.14-9.71c0-6.68,6.07-10.16,6.07-12-.3-3.79-4.85-.75-6.07-1.82-1.51-1.82,3.8-12.74,1.83-14.26-.76-.75-6.07,5.62-7.44,3.8-1.52-1.83-3.34-19.88-6.07-31.86-2.57-11.68-5.31-20.17-5.61-23.66-.3-3.34-20.94-62.2-25.94-76.46a361.49,361.49,0,0,1-10.16-36.71c-1.52-7.13-2.58-21.7-3.34-20.18s-.3,8.95-1.52,8.65c-1.06-.31-4.85-26.24-6.06-30.34-1.06-4.1-7.44-18-9-28.06-1.52-10.17-4.85-36.72-7.13-54.77s-3.34-25.48-3.34-30a186.94,186.94,0,0,0-1.82-33.07c-3-19.12-9-42.33-14.26-55.82-10.16-25.49-37.17-90.72-42-106.95,0-4.1,5.31-1.82,5.31-1.82s13.19,33.07,22.9,58.55c9.41,25.49,18.36,47.94,20.64,50.22,1.82,2.27,16.08,27.3,22.45,68.26s8.64,78.73,12.44,103.91c1.82,12,3.34,24.73,7.13,37.47,4.09,13.81,10.46,28.07,18.81,49.91,7.13,18.36,12.44,33.68,15.32,46.88,3.34,16.84,3.34,29.58,5.31,37.93,1.83,7.13,4.55,21.38,10.93,42s15.77,47.18,22.14,63.71c12.45,33.07,18,60.68,19.88,75.4,1.66,15.17,7.28,67.66,5.76,83.43h0Z" style="fill:#a88f33;fill-rule:evenodd"/><path d="M1275.34,214.5l-.76,1.82s2.27.76,1.82,3.8a90.7,90.7,0,0,1-.76,12.44c-.75,5.31-2.27,9.4-2.57,12.74,0,7.13,1.06,15.32-9,35.65-3,5.61-4.85,10.46-6.37,13.8-3.79,8.19-4.55,9.41-7.89,13.2,5.31-3,24.43-15,34.13-13.2-6.67,3.79-16.84,11.23-23.21,20.94,1.52.3,7.89,1.52,18,0,16.84-2.58,35.65-8.65,52.18-7.44,18.06,1.06,10.93-21.69,10.93-21.69L1321,240.75,1281.56,213l-6.22,1.51Z" style="fill:#be9c44;fill-rule:evenodd"/><path d="M1378.19,557.65s-17.6-17.6-24.73-78c-7.13-60.68-5.61-150-5.61-150l-14.26-34.89s-3-23.21-10.47-31.85-22.14-23.21-28.82-30.34-14.26-16.84-18.81-18.36c2.27-3.79,12.44-25.18,51.42-25.48s51,21.39,55.07,29.28,22.45,42,29.27,107c6.37,64.92,6.68,69.78,5.62,92.23-.76,12.44-4.86,41.26-12,72.05-6.52,26.1-13.65,55.23-26.7,68.42Z" style="fill:#a17c34;fill-rule:evenodd"/><path d="M1323,609.38a29.79,29.79,0,0,0,16.84-3.8c5.61-.3,25.94,2.28,41.56-17.59,1.06,4.54,3.8,16.84-3.34,27.76,3.8-3.8,9.41-5.31,10.17-6.37.3,5.61,5.61,22.9-16.84,64.92,6.06-6.67,13.19-6.37,19.56-7.13.31,7.89,4.55,34.43-6.67,48.7-7.43,9.71-19.57,6.67-19.57,6.67a38.15,38.15,0,0,0,0-6.37c-.3-4.1-1.82-8.19-.75-10.92a54.42,54.42,0,0,1-15.78-10.93c-13.2-12.44-30.34-33.67-31.55-49.45-1.52-17.6,14.26-21.39,14.26-21.39a16.87,16.87,0,0,1-3.34-4.1c-.76-2.57-1.52-6.67-4.55-10h0Z" style="fill:#8c6228;fill-rule:evenodd"/><path d="M1206,418.54s-.76-1.06-4.85,3.79c.76-4.85,1.52-9.41,1.82-13.81a47.6,47.6,0,0,1,7.44-11.22c-2.28,4.54-3.8,8.64-3.8,8.64s5.62-10.47,13.81-16.84c5.61-4.55,12.74-6.67,15.77-10.92,3.34-4.55,2.58-5.31,3.34-6.07,0,0,7.44-4.85,18.82-19.12,1.51-1.82,3.79-3.79,5.31-5.61,2.57-1.06,8.64-3.79,15.77-7.44,7.44-4.09,15.78-9.7,20.94-12,10.16-4.55,20.94-4.09,25.94-11.23,3.79-1.06,7.88-12.44,7.13-22.14,5.61,2.27,34.43,20.17,44.3,59.31,7.13,27.76-5.62,70.54-10.93,91.18s-6.06,35.95-13.5,45.35c-9.41,12.45-39.74,30-47.18,38.69-6.37,7.13-25.48,25.18-24.73,38.22.76,9.71,12.74,15,15.33,16.84s2.57,4.1,7.43,3,6.67-3.34,8.65-3.34c2.27.3,2.27.76,3.33.76a10.94,10.94,0,0,0,2.28-.31s-.76,13.81-33.07,18c-2.28.31-4.55,1.06-7.44,1.52,3.8-1.82,6.07-1.82,10.17-7.43-4.55-.76-17.6-1.52-20.94-2.58,1.06-1.82,4.55-6.68,7.43-8.95,2.58-2.27-.3-3-2.57-1.82a121.45,121.45,0,0,0-11.23,8.64c-3.79,3.34-7.13,7.89-13.2,12-1.82-6.07-1.52-17.6,5.62-25.94-1.83.3-5.32,5.61-8.65,4.55a48.31,48.31,0,0,1,1.06-16.54c1.82-6.83,11.68-18.81,11.68-18.81l47.63-85.11,10.16-64.47L1206,418.52h0Z" style="fill:#92723a;fill-rule:evenodd"/><path d="M1203.43,422.18s-2.58,1.82,2.58,5.31c-.76,1.06-2.58,4.85-4.86,7.43-2.57,3-5.31,4.86-6.37,7.44-2.27,5.31-4.09,8.95-4.09,11.23s-.76,16.84-7.13,26.24c-2.28,3.34-4.86,8.95-6.68,12.74-3.79,6.67-7.13,12-7.89,15-1.51,5.31-2.57,19.87-2.57,19.87s3.34-4.1,4.55-5.61c-1.83,3.79-3.8,7.88-6.68,10.92,1.82-1.52,7.13-5.31,16.08-13.2,12.44-10.46,31.86-28.06,55.53-42-7.14,2.58-13.2,2.58-18.05,3.34,3.79-3.79,37.92-43.84,55.82-47.63a7.14,7.14,0,0,0,1.52-4.86l-15.33-1.51-31.1,6.67-4.54-24-20.79,12.59Z" style="fill:#b18e3e;fill-rule:evenodd"/><path d="M1252.89,558.71s-4.1,4.09-7.89,14.26a47.8,47.8,0,0,1-7.44-10.17c-5.61-9.4-14.25-21.39-34.43-14.56-.3-6.37-.76-9.71,0-14.26,3.34-.75,13.5-8.94,23.66-20.93,7.14-8.19,13.81-17.6,18.36-29.58,3-2.28,8.19-6.07,15-10.47,9.71-6.67,21.39-15.78,23.21-25.94-4.55,1.82-14.26,6.37-28.83,5.62,5.62-2.58,14.26-5.31,13.2-16.54,2.28-1.52,4.1-2.58,4.1-2.58a15,15,0,0,0-5.31-.76c-.31-1.06-.76-2.57-3.34-1.82s-3,.76-3.34,1.82c-1.06.31-4.55,0-7.13,1.83s-9.71,7.88-12.44,8.94c1.06-1.82,2.57-4.54,2.57-4.54s-7.43.75-12.74,3c-9.71,3.34-20.93,9.41-32.31,15.32,1.06-1.82,1.52-3,2.27-3.34s2.58-.75,2.58-1.06-.75-3-.3-4.09a139.18,139.18,0,0,1,12-20.63c5.31-7.14,6.37-17.3,6.37-17.3l23.21-11.68,65.23-15,42.33,2.58-5.31,29.28-25,51.12-21.39,46.57-24.43,28.53-22.45,16.38h0Z" style="fill:#543e26;fill-rule:evenodd"/><path d="M1358.62,432s-25.49,31.55-32.62,36.41c4.55-9.71,32.62-67.51,42.78-83.59-2.27-1.82-5.31-1.82,1.82-30-6.06,14.25-8.19,21.69-13.19,25.48s-5.62,2.58-9,2.58a6.34,6.34,0,0,0,.75-3.79s-21.39-2.58-36-2.58-43.53,7.89-59.62,14.26c-12.74,5.31-19.87,5.31-24.42,8.64-4.55,3.79-7.13,7.89-9.41,8.95-1.82,1.06-10.46,3.79-12.44,6.67-1.82,3-4.85,6.37-4.85,7.13s-.76,1.83,1.52,1.06c.75-.3,6.37-3.34,12.74-7.13,8.64-4.85,19.11-10.46,26.7-13.8,21.69-8.65,28.52-7.13,38.22-8.95,10.16-1.82,24.73-6.07,34.43-6.07,9.71-.3,28.07,0,32.32.76-1.82,1.52-3.34,3.34-2.58,9.71,0,1.82-1.52,3.79-3,8.19-4.54,12.44-13.19,33.07-18,43.54-6.67,14.25-14.25,26.24-18,33.67s-12,27-20.17,37.47-12.44,16.84-15,19.12-20.94,15.77-19.57,20.63c3.34-1.06,24.43-9,39.74-26.24s18.36-27.76,30.34-37.17,21.39-25.18,27-38.22c4.7-12.14,3.64-15.93,9.55-26.7h0Z" style="fill:#806031;fill-rule:evenodd"/><path d="M809.32,667.48s-3.34,13.8-10.93,20.63c-7.43,6.68-20.63,12.44-22.14,23.67-1.82,11.22,13.2,16.84,13.2,16.84s-8.2,13.5-8.2,23.66c0,10.47-.3,12.44.76,22.45a10,10,0,0,0-3,3s.75,9.71,8.19,15.77,13.8,9.71,17.59,8.19a35.78,35.78,0,0,1,1.52,3.8s5.62-14.26,9.41-26.7c3.79-12.74,7.13-10.93,8.64-28.07s18-46.57,18-46.57L853.61,679l-18.35-14.26-25.94,2.73Z" style="fill:#b6903c;fill-rule:evenodd"/><path d="M843.45,692.2A110.44,110.44,0,0,0,833,704.64c-4.85,6.68-8.64,12.74-15.77,15.33s-11.68,2.57-11.23,9.71,7.13,10.16,10.92,13.8c4.1,3.79,7.44,10.16,5.62,17.3,2.27-1.06,6.37-2.28,10.16-10.47S863,692.21,863,692.21H843.45Z" style="fill:#685026;fill-rule:evenodd"/><path d="M948,577.06s2.27-6.06,0-10.46c-2.28-4.55-16.08-6.07-22.91-11.23-7.13-5.31-15.78-9-22.91-6.67,1.06-2.58,5.31-8.2,1.82-9.41-3.34-1.06-15.77,4.55-19.11,7.13s-10.93,5.61-12.44,7.44-4.1,5.31-5.62,3.79c-1.52-1.06-2.27-3.79-4.85-2.28s-15,11.68-17.29,17.6-7.44,19.12-22.91,34.13-22.15,24.73-17.6,30.34,6.68,1.52,7.44,6.37a40.91,40.91,0,0,1-.76,14.26c-1.82,7.89-4.85,15.32-.76,16.84,10.47,3.34,20.64-3,22.91-1.06,4.55,4.09-2.58,18.81,8.19,21.69,10.93,3,21.7-2.58,21.7-2.58l39.74-21.39,38.23-20.17,19.56-38.69L949.94,580.4l-2-3.34Z" style="fill:#d4b968;fill-rule:evenodd"/><path d="M910.5,669.45s-6.68-10.16,1.52-19.12,19.87-12.74,24.42-18.35a7,7,0,0,0-3.34-2.27,30.21,30.21,0,0,1,13.2-12.45c-2.27-2.27-5.31-4.09-8.64-4.09-7.44,0-12,4.55-18.82,4.55-6.67,0-7.43-3.34-7.43-3.34s11.23-1.06,10.16-6.07c-1.06-5.31-3-5.31-3-5.31s21.69-9,25.48-13.8,3.34-10.47,4.1-12.74c2.57,0,17.59-7.89,23.66-4.55s1.82,12.44,1.82,12.44S992,570.54,1001.36,557c8.19.76,12-5.61,18-5.61,7.44,0,19.12,10.16,21.39,31.85,1.52,12.44,3.79,19.57,1.52,41.57-1.06,12.44-.76,39,3,52.18,2.57,10.47,8.64,9.41,8.64,9.41a17,17,0,0,1-5.31,8.19c-4.1,3.79-4.55,13.81-4.1,17.6a75,75,0,0,0,2.28,8.19s-4.85,5.61-6.07,9.41c-1.06,3.79-6.06,6.37-9.71,6.37s-1.82-.31-6.67,0-6.37,1.06-9.41,0-5.31-2.28-4.09-12c1.06-9.71-37.47-32.31-37.47-32.31l-63-22.45h0Z" style="fill:#cca849;fill-rule:evenodd"/><path d="M838.14,765.32s13.8,18.36,70.54,18.36c27,0,36.41-2.58,42-4.1,6.07-1.52,28.82-10.46,51.73-37.47,20.63-24.42,16.08-34.43,16.08-34.43l-12-1.82-39,5.31L852.09,760.32l-14,5Z" style="fill:#585136;fill-rule:evenodd"/><path d="M880.46,769.87s-49.15,10.93-49.15-20.17c0-30.34,30.34-62.2,37.93-67.81,7.89-5.62,26.7-12,26.7-12H941.3l8.64,22.91-3.79,49.45-65.69,27.61Z" style="fill:#252211;fill-rule:evenodd"/><path d="M925.82,679.16s-9.4-8.65-30.79,3-38.69,36-39.75,58.11c-1.06,19.56,16.08,34.13,42.78,34.89,19.87.75,31.86-1.52,37.93-3-1.52-1.82-9.41-11.68-9.41-11.68l-.75-81.31h0Z" style="fill:#c3b378;fill-rule:evenodd"/><path d="M916.57,684s-2.27-1.82-9,1.82c-5.61,3-13.8,10.93-20.17,16.54-4.1,3.34-6.68,4.85-9,7.43-9.41,11.23-17.3,29.59-12.74,38.69s19.57,19.57,57.8,12.44l-7-76.91h0Z" style="fill:#e6d89c;fill-rule:evenodd"/><path d="M904.13,702.82s-6.07,9.41-6.07,24.43c0,15.32,8.65,39.74,40.51,41.56,24.42,1.52,40.8-35.19,58.55-49.45,13.5-10.92,21.69-11.23,21.69-11.23s-13.8-15-50.66-34.43c-36.41-19.57-77.22-22.15-99.37,7.89,10.47-.76,44.3-9.41,44.3-9.41l16.54,5.31-25.49,25.34h0Z" style="fill:#252211;fill-rule:evenodd"/><path d="M951.76,722.69c-1.06-2.27-1.82-5.31,2.58-6.06s6.37-.31,7.89,3,3,6.07.75,7.44c-2.27,1.21-8.19,0-11.23-4.4Zm-7.13-21.39s-1.52,1.06-.76-1.06c.3-2.57,2.28-7.13,7.13-6.06s3.8,6.37,3,7.89-4.85,4.09-7.89,3a2.53,2.53,0,0,1-1.52-3.79Z" style="fill:#6f674d;fill-rule:evenodd"/><path d="M534,711s12,9,25.94,8.65c13.8-.31,31.55-14.56,39.74-23.67,4.85-5.31,9-10.92,13.5-15.32,3.8-3.79,6.37-5.61,8.19-8.19,2.58-3,5.31-8.64,6.68-10.47-3.34,2.58-8.19,7.14-13.2,10.17-4.85,3-15.32,8.64-19.57,10.16-4.09,1.52-46.57,24-46.57,24L534,711h0Z" style="fill:#ac924c;fill-rule:evenodd"/><path d="M552.34,598.91s6.67-4.55,19.57-7.44c12.44-3,37.47-5.31,37.47-5.31l20.63,9,8.19,31.1-15,32.32-19.11,12-21.7-34.89-30-36.72h0Z" style="fill:#9f8e57;fill-rule:evenodd"/><path d="M525.34,626.67,518.2,632s1.83-3.34,3.34-13.5,9.41-34.89,20.94-49.15,11.23-13.5,11.23-13.5a7.59,7.59,0,0,0-6.07,1.51C549.16,554,558.87,542,568.58,536s13.5-7.89,23.66-3,12.74,7.43,20.18,7.13,13.8-8.19,13.8-8.19,1.52,4.85-4.09,16.08-27.76,34.13-27.76,34.13l-46.12,31.55-22.91,13h0Z" style="fill:#eac970;fill-rule:evenodd"/><path d="M559.46,595.12s33.38,4.55,43.54-4.85c.3,1.06,1.52,1.06,1.52,1.82a2.65,2.65,0,0,1-.76,1.51,24.44,24.44,0,0,1,3.34-.3,19.7,19.7,0,0,0,4.1.76,23.67,23.67,0,0,0,3.34-.31,5.67,5.67,0,0,1-2.28,3.8c1.52,0,3,.3,3,1.51s.3,4.86-1.52,5.62a6.88,6.88,0,0,1-4.55-.31,18.72,18.72,0,0,0,2.28,8.2c3,5.61,9.4,12,18,10.16,0,0,4.54,10.92-14.57,35.19-2.57,3.34-5.31,7.89-8.64,11.68a44.32,44.32,0,0,0-3,8.95s32.32-12.44,41.57-40.81c9.41-28.52,11.23-56.58,9.41-82.82-.31-7.44-1.52-12.74-3.34-16.54-4.55-9.41-17.3-7.89-22.45-2.58-7.44,7.44-19.88,25.94-37.17,38.68-17.6,12.74-18.35,15-31.86,20.64h0Z" style="fill:#d7bc6b;fill-rule:evenodd"/><path d="M519.42,636.08s-6.37,3.79-9.71,18c-3.34,14.56,3,32.31,6.67,37.92s12,20.94,29.28,21.7a32.1,32.1,0,0,0,12.44-2.58,78.7,78.7,0,0,0,16.84-10.47c7.44-5.61,13.5-10.46,12.74-10.92-1.82-.76-45.81-37.17-45.81-37.17L525.33,634.1l-5.92,2Z" style="fill:#585136;fill-rule:evenodd"/><path d="M561,696.45s8.95-.75,14.26-4.09-31.1-39.44-31.1-39.44l2.58,39L561,696.45Z" style="fill:#453a25;fill-rule:evenodd"/><path d="M522.3,633.34s-4.55,8.65-4.55,10.93c-.76,7.43,1.52,30.79,3.34,38.22,1.82,7.89,11.68,19.87,24.43,19.87,7.88,0,18.81-4.85,18.81-6.06,0-1.52-11.23-3-14.26-8.65-1.82-3-2.58-10.46-3-18-.3-4.85-.3-10.16,1.52-12,4.1-4.55,4.85-17.6,4.85-17.6L568,613H548.85l-22.91,14.26Z" style="fill:#84754b;fill-rule:evenodd"/><path d="M516.69,641.69s15-19.87,28.52-24.43,19.57-1.82,19.57-1.82l-7.89,20.18-11.23,12.44.76,6.37s-1.83,16.84,9.4,28.52,19.57,11.23,24.43,11.23,18.81-4.1,25.94-20.94c6.37-15.77,11.68-36-1.06-56.28C592.68,596.78,570.69,596,566.44,596s-37.62,1.67-49.75,45.66h0Z" style="fill:#252211;fill-rule:evenodd"/><path d="M901.85,709.19c-5.61-2.58-.3-18.35,5.31-23.21s12.74-10.46,25.19-11.23c4.54-.3,8.94,2.58,8.19,5.62-1.06,5.61-8.95,13.5-16.08,19.11-9.86,7.74-16.24,12.59-22.61,9.71Z" style="fill:#f7f7e7;fill-rule:evenodd"/><path d="M598.45,623.18c4.1-.3,9.41,3,10.47,7.44,1.06,4.85-2.58,14.56-10.47,14.56-6.37,0-9.71-7.89-9.71-10.16a11.6,11.6,0,0,1,1.52-5.31c.3-.46,1.06-5.77,8.19-6.53Z" style="fill:#f8f6de;fill-rule:evenodd"/><path d="M539.29,626.67s-10.47,4.85-15.32,15a39.8,39.8,0,0,0-3,24c.76,3.79,4.55,13.19,7.13,16.53s6.07,5.62,8.65,5.31,7.88-7.13,7.88-11.22.31-21.39,5.31-30.8c4.4-9.4-10.62-18.81-10.62-18.81h0Z" style="fill:#d4c38b;fill-rule:evenodd"/><path d="M540.81,625.91c-1.82,1.06-4.85,2.58-4.1,4.55.76,1.82,7.13,3,9.41,7.44,2.58,4.55,2.58,9.4,1.82,11.68a18.48,18.48,0,0,0,5.31-3.8c3.34-3.79,7.43-8.94,10.92-8.94,2.28,0,4.55,1.06,6.68,1.06,3.34,0,6.67-1.06,7.13-4.55.75-4.55-6.37-8.65-10.47-7.89.76-3,1.82-7.43-1.52-10.47s-13.8,2.28-16.08,3.8-9.1,7.13-9.1,7.13h0Z" style="fill:#e2d59d;fill-rule:evenodd"/><path d="M781.86,944.63,804.31,938l6.37,4.55s4.54,9.71,11.68,10.92c-2.28,4.85-8.2,9-7.89,12.44s3.34,6.07,3.34,6.07-20.18,33.37,19.57,67c-9.41,3.79-21.39,9-27.76,12,4.54,1.06,14.25,3,18.35,6.68s4.1,4.85,7.89,7.13,6.06,5.31,5.31,6.67c-2.58-1.52-11.23-6.06-12.74-1.82s-37.47,2.58-37.47,2.58l-60.68,11.68s2.27-6.07-4.1-11.68c-7.43-6.67-16.53.3-26.24-7.13-12.74-9.71-13.2-20.94-17.29-25.18,4.09-2.58,12.44-6.37,32.31-9-.76-1.52-3.34-6.07-1.82-10.16,1.82-5.31,9.4-8.65,7.13-15,3.34-.76,4.85-.76,13.2-11.23,7.89-10.47,12.74-12.74,18.81-13.5s9.71,0,20.94-10.47c7.88-7.43,5.31-13.8,5.31-13.8s5.15-1.67,3.34-12.14h0Z" style="fill:#cbac5a;fill-rule:evenodd"/><path d="M715.57,948c.3-1.52,1.52-2.28,9.71-1.52s60.07-4.85,74.18-5.61c14.26-1.06,64.47-.31,88.9,4.85s49.15,11.23,61.13,14.26c12,3.34,15.78,4.54,15.32,6.06-.3,1.52-3,3-4.55,2.58-1.51-.3-41.26-12.44-53.54-15s-54.77-9.41-78-9c-21.69.31-30.34-.3-48.69,1.82-18.36,2.28-48.7,5.31-57.8,4.1-9-1.06-7.14-1.06-6.68-2.58h0Z" style="fill:#d6bc6f;fill-rule:evenodd"/><path d="M837.68,1066.9s31.1,16.84,42.33,37.47c8.19,15.32-4.85,22.91-4.85,22.91s17.6,0,15.32,9.71c-1.06,6.06-30.34,22.44-49.91,31.09-19.87,8.65-19.11,8.2-28.82,9.71-9.41,1.52-35.2-3-40.51,4.55s-3,15.33-1.52,16.54c1.52,1.06,13.81,2.58,13.81,2.58s-2.58,7.13-28.06,7.89-31.86,2.57-33.38,5.31c-1.52,2.57,4.85,1.06,16.54,3,11.68,1.82,28.06,3,28.06,3s-5.31,4.55-19.11,8.19c-15.78,4.09-40.51,7.89-47.94,12.44,3.79,2.58,9.41,6.37,12,6.67-6.37,1.52-15.33,4.86-16.84,6.07,2.27,1.52,5.31,3.34,5.31,3.34s-12.75,15.32-20.18,19.12-50.21,23.66-64.93,19.87c-36.71-9.71-41.26-49.91-50.21-52.94-13.5-4.55-19.87,4.54-31.86-1.83,5.31-3.79,8.2-6.06,13.81-8.64-6.07-3-37.47-22.91-37.47-22.91a232.72,232.72,0,0,0-10.92-20.93c-6.07-10.47-15-24.43-21.7-36.72-14.56-27-15.32-39.44-28.52-54.76,2.28-3,10.16-2.58,10.16-2.58l110.6,36.41L765,1137.14l51-72.81,21.69,2.58Z" style="fill:#dfc677;fill-rule:evenodd"/><path d="M547.18,1177.94a17.21,17.21,0,0,0,4.09,3.34c3.8,2.58,9.41,5.62,13.2,10.16,1.52-2.27,5.31-6.37,12,0s15,1.83,20.17,3.34c5.31,1.83,5.61,2.58,5.61,2.58s3-2.58,9.71-5.31c4.1-1.52,8.95-2.58,14.26-4.09,4.85-1.06,10.16-2.58,13.81-2.58,3.34,2.27,15.32,15,63.41-3.79,45.36-17.6,55.82-19.57,63.41-16.85.76-1.82,1.52-5.31,13.2-4.85,0-4.85-9.71-21.39-9.71-21.39l-53.55-18.35H687.5l-87.83,16.08L551,1164l-3.79,14Z" style="fill:#c4a859;fill-rule:evenodd"/><path d="M517.9,1147.15s1.06,8.19,13.2,16.84c12,8.64,15.77,13.8,15.77,13.8s2.28-3,4.1-6.06c1.82-3.34,3.34-7.13,6.37-8.19,6.07-2.58,19.87,2.27,22.91,1.51,2.58-.75,1.82-6.06,4.55-6.06,6.37-.31,10.46,4.09,12.74,4.09s7.88-.3,8.64-1.51,1.06-13.81,9.71-19.88c9.41-6.67,20.94-3.79,24-2.27,0,2.27.3,7.89,6.37,8.19s6.67-.76,12,1.06,11.68-.3,14.56,8.64c2.58-.75,8.65-1.51,7.13-10.16,3-2.27,5.62-3.79,12-12.74,1.52-2.27,4.09-4.85,6.07-8.19,5.31,0,11.68-1.06,20.17,6.37-2.58,1.82-4.1,3-4.85,4.85a54.56,54.56,0,0,1,6.06,7.13c2.28,3,3.8,6.68,6.68,7.44,6.37,1.82,16.84-.76,28.52,0,11.23.76,20.63,4.85,24.73,7.43,1.52-.75,1.52-1.06,5.31-.3s6.67,1.06,2.58-3.79c2.27,1.06,4.85,3.34,7.13,1.06s4.09-5.61,10.46-6.37,8.65.3,11.23-6.37c3.34-8.19-8.19-8.19-8.19-8.19s5.31-4.86,11.23-11.23c7.13-6.67,15.32-15.32,17.29-25.94,3.34-19.57-15.77-22.14-15.77-22.14l-92.69,28.52-113.32-5.62-96.63,48.09h0Z" style="fill:#927d49;fill-rule:evenodd"/><path d="M434.62,879.4s-3,3.79-4.85,12.74-1.06,7.89-2.58,14.26S407,976.18,414,997.57s19.12,29.28,26.7,46.57c1.52,3.79,3,6.07,3.79,9.41,2.58,11.22.31,19.87,3.34,31.1,1.06,3.79,3.8,8.19,7.89,12.74,9,9.4,23.67,18.35,30,24.72,8.94,9.41,21.69,28.53,37.92,30.34,8.65,1.06,20.94-2.58,31.1-8.64,9-5.62,14.56-13.5,24-18,6.67-3.34,13.8-4.55,20.17-6.07,13.2-2.58,25.19-3,32.32-1.52,10.92,2.28,36.71,10.17,51,10.17a138.73,138.73,0,0,0,33.07-4.55c21.69-6.37,47.93-17.3,65.23-22.15,10.16-3,18.35-3.79,26.7-5.61,14.26-3.34,26.24-7.89,33.07-16.54-4.55-5.31-10.16-13.5-40.51-13.2-34.43.76-74.18,19.87-93.75,22.91s-28.06,5.61-49.91-2.28C634.71,1079,634,1073.73,634,1073.73S611.51,1058,602.1,1017.9s0-69.32,24.43-97.09c6.37-7.13,4.85-13.5,4.85-13.5s16.08-21.69,11.68-42c-4.85-20.18-35.95-16.08-35.95-16.08L434.63,879.4h0Z" style="fill:#6e6342;fill-rule:evenodd"/><path d="M460.56,946.91a15.72,15.72,0,0,0-1.82,8.19c.3,4.09,1.52,9.4,13.8,21.39,10.47,10.46,8.19,22.14,8.19,22.14S486,999.69,500.3,993c11.23-5.31,15,4.1,15,4.1a31.71,31.71,0,0,1,10.47-3.34,22.91,22.91,0,0,0,9.4-3s13.2,13.5,24.73,19.87c10.47,5.62,16.54,9.41,21.7,5.62,4.85-3.34,4.85-10.17,4.54-13.2a39.39,39.39,0,0,0-4.54-7.89c-3.34-4.85-8.65-10.47-9-15-.76-10.46,7.89-22.91,6.06-25.94s-8.64-3.79-25.48,2.28c-17.44,5.76-92.69-9.56-92.69-9.56h0Z" style="fill:#39331f;fill-rule:evenodd"/><path d="M500.3,1014.72s-8.64-8.19-5.61-47.94a49.38,49.38,0,0,1,10.92,1.06S510.32,998.64,500.3,1014.72Z" style="fill:#292311;fill-rule:evenodd"/><path d="M438.72,849.06a23.74,23.74,0,0,0,3.34-3c-3,5.61-16.85,28.06-5.62,63.41,11.23,35.19,39.44,61.43,74.18,62.65s53-15.78,73.88-41.26c8.19-10.16,17.6-22.91,25.94-31.55,12.44-13.51,22.15-17.3,22.15-30.34,0-26.7-27.31-38.69-67.51-50.67S488.62,807.8,469.81,816c-18.35,8.94-26.24,18.35-31.1,33.07h0Z" style="fill:#252211;fill-rule:evenodd"/><path d="M567.81,1026.7l3-1.52s.75-12,5.61-11.68c4.85.76,7.13,7.14,6.67,9.41-.3,2.27-1.51,6.07-6.37,5.61-6.37.15-8.94-1.82-8.94-1.82Z" style="fill:#3f3824;fill-rule:evenodd"/><path d="M554.31,975.73s3-1.06,6.67,2.58c3,0,16.08-1.52,20.18,1.06s5.31,4.85,5.31,4.85-15.32,3.34-23.67,0c-8.49-2.88-8.49-8.49-8.49-8.49Z" style="fill:#2d2815;fill-rule:evenodd"/><path d="M621.82,978c0-.76-8.19-6.37-16.84-8.2-1.52-.3-1.83.76-3,.76-.76-.3-1.06-2.58-1.06-2.58L596,970.57s-.76,1.06,1.82,3c2.27,1.82,6.07,3.34,7.13,6.37s1.06,4.09,1.52,4.55c.3.3,5.61,0,8.19-1.52s7.44-4,7.13-5h0Z" style="fill:#82764f;fill-rule:evenodd"/><path d="M545.21,1008.8s1.51-10.46,11.68-10.92c10.46-.76,12.44,9.4,12.44,9.4l-6.07,6.07c0-.15-4.55-6.52-18-4.55Z" style="fill:#2d2816;fill-rule:evenodd"/><path d="M611.2,963.74s-5.62,6.07-18.05,7.89c-1.06-1.52-3.34-4.55,0-9.4s7.13-6.37,10.92-4.86a8.88,8.88,0,0,1,7.13,6.37Z" style="fill:#574f35;fill-rule:evenodd"/><path d="M634.1,971.18c.31-1.52-.75-1.82,0-2.58s4.86-2.27,5.62-1.52c.3.31,0,1.52,0,3s0,3-.76,4.09c-1.06,1.52-4.09,2.28-5.61,1.83s-1.82-2.58-1.82-3c.75-.3,2.57-1.06,2.57-1.82ZM660,954.8c0-.76,2.58-2.28,4.1-2.28,2.27,0,2.27,1.82,2.58,2.28.75.3.75-.31,1.51,1.06s1.83,3.79,1.06,5.31-3.79,2.57-4.54,2.27c-1.06-.76-4.4-7.58-4.71-8.64Z" style="fill:#82764f;fill-rule:evenodd"/><path d="M607.86,974.67s3.34.75,7.89,4.55c-1.52,1.06-3.8,2.27-3.8,2.27s-.3-3.49-4.09-6.83Z" style="fill:#6e6342;fill-rule:evenodd"/><path d="M600.43,941.29c-.76-.75,2.27-2.57,4.09-2.27s2.58,1.52,4.55,1.82,2.28-.76,3-1.52,3.34-.3,3.79,0a8.45,8.45,0,0,1,.76,1.06,4.2,4.2,0,0,1,1.51-3,4.79,4.79,0,0,1,4.1-.76c.3,1.06,1.82,4.85,1.52,5.61s-4.85,1.83-5.62,1.06c.76,1.83,4.1,5.62,4.55,6.37s-3.34,2.58-4.85,2.28c-2.12-.15-15.17-7.74-17.44-10.62Zm19.87-25.18a3.52,3.52,0,0,0-1.52-1.82c-1.06-.3-4.55,0-4.55,1.82s3,12,6.37,17.3c3.8,5.31,6.37,9.7,8.95,10.92a3.52,3.52,0,0,0,4.55-1.52c.3-.76,1.06-6.37.76-19.57s-.76-25.94-1.52-26.7-3.79-.75-4.85.76-7.89,16.54-8.2,18.81h0Z" style="fill:#585136;fill-rule:evenodd"/><path d="M606.8,993.78s-5.31-3.34-10.47-1.06c-4.85,2.28-4.55,11.23-4.55,11.23a7.19,7.19,0,0,0,6.68-.76c3.34-2.27,7.58-6.06,8.34-9.4Z" style="fill:#574f35;fill-rule:evenodd"/><path d="M616.81,1005.77c-.3-3-3-3-3-4.55a3.41,3.41,0,0,1,3.33-2.58c1.52,0,3,1.82,4.86,3,1.82,1.06,4.55,3,4.85,5.31s-3,8.64-6.67,8.64-2.58-6.83-3.34-9.86Zm29.28-4.1s-6.07,1.82-5.62,0,1.83-2.27,3.8-2.27a6,6,0,0,1,3.79-1.83,3.29,3.29,0,0,1,2.27.76s4.1-1.82,5.31-.76.31,1.06,1.06,2.28a10.67,10.67,0,0,1,1.83,4.55c0,1.21-4.55,3.79-8.2,3.34-4.24-.91-3.49-5.31-4.24-6.07Zm35.34-6.83s1.82,1.06.31,2.28c-1.06,1.06-6.37,3-10.93,3.34-4.55,0-8.64.75-8.64-.76s3.79-4.55,6.06-5.31a4.84,4.84,0,0,1,3.8-1.82c1.82,0,8.94-.76,10.92-1.06,1.82-.31,3.34.75,2.27,2.27-.45,1.06-3.79,1.06-3.79,1.06ZM691.9,948s-2.28,4.85-4.85,4.85c-2.58-.3-2.58-1.06-2.58-1.82,0-1.06,2.58-3.79,2.27-4.55-.75,0-2.58,0-2.27-1.82,0-1.52,2.58-3.34,4.85-3a10,10,0,0,1,6.07-2.27c2.58,0,4.85.75,4.85,2.27s-3,4.85-4.1,5.62c-1.21,1.21-2.73,2-4.24.75Zm-34.59,89.65s-3,.31-3,1.82c0,.76.75.76,1.82.31a8.24,8.24,0,0,0,1.82-.31c.3.31.3,1.82,2.58,1.82a14.41,14.41,0,0,0,5.31-1.82c1.82-.75,3.34-1.52,3.34-3-.76-2.58-2.28-3.8-4.55-3.8a6.05,6.05,0,0,0-3.34.76s-.76-1.52-3.34,0-2.28,1.52-1.52,2.28c1.36,1.21.91,2,.91,2Zm-17.14,15.78c0-.76,3.79-2.28,4.85-1.82,1.06.3,4.09,6.06,4.09,6.67,0,.76-3.79,2.58-5.31,2.58s-4.09-2.58-4.09-3c0-.3,1.82-.75,1.82-1.06.45-.75-1.36-2.58-1.36-3.34Zm-12-22.15c.76-.3.76-1.06,1.82-1.82a2.61,2.61,0,0,1,2.28-.3,3.69,3.69,0,0,1,2.58-1.83c1.82-.3,3.34,0,3,.76,0,2.28,1.52,3.79,1.52,5.61s-1.06,4.1-4.85,5.62c-3.79,1.06-8.95,1.06-9.71.76s-1.52-3.34-.76-4.86,2.88-3.18,4.1-3.94h0Z" style="fill:#82764f;fill-rule:evenodd"/><path d="M633,1032.31s-2.58,1.52-2.58,2.28a6.74,6.74,0,0,0-.3,2.27c0,.45,3.34-.3,3.79-.76.15-.3-.91-3-.91-3.79Z" style="fill:#6e6342;fill-rule:evenodd"/><path d="M610.44,1025.18c1.51.31,4.09,0,6.06.76,1.52.76,2.58,2.28,1.06,4.1s-3,4.55-6.37,4.09c-3.79-.3-7.43-2.27-7.43-3.79a7.27,7.27,0,0,1,1.82-5.31c1.52-1.21,2.27-.45,4.85.15h0Z" style="fill:#585136;fill-rule:evenodd"/><path d="M608.62,1026.7s-4.85,3.79-6.07,5.62c-1.52,1.82-8.95,11.22-11.22,13.19a28.57,28.57,0,0,1,2.57-3.79,15.52,15.52,0,0,0-6.37,8.19c-1.82,5.62,10.17,8.65,18.05,10.93s10.93,3,10.93,3a84.72,84.72,0,0,1-7.44-13.8c-3-7.13-4.55-7.89-2.58-11.23,1.52-3.34,3.8-5.61,3.8-8.19C609.38,1028.22,608.62,1026.7,608.62,1026.7Z" style="fill:#574f35;fill-rule:evenodd"/><path d="M435.68,1038.69a9.24,9.24,0,0,0,3.34,0c2.27-.31,25.94-9,50.67-7.44a271.06,271.06,0,0,1,54.76,9c31.1,8.19,69.78,24.42,94.81,33.68,6.67,2.57,13.2,7.13,18,8.94,19.12,7.44,19.87,7.44,31.1,9.41,13.2,1.82,26.7-2.58,40.81-5.61,17.29-3.8,46.87-5.62,72.81-9.41a148.73,148.73,0,0,0,24.73-5.61s-20.63,20.63-70.09,28.06a219.27,219.27,0,0,1-60.37.76c-15.78-1.52-26.24-3.8-34.13-6.07-8.95-2.58-27.31-9.41-49.91-15-15.78-4.1-33.38-7.13-53.55-10.92-49.76-9.11-103.76-19.57-123-29.73Z" style="fill:#252211;fill-rule:evenodd"/><line x1="409.89" y1="846.33" x2="283.52" y2="728.31" style="fill:none"/><path d="M379.85,944.94c-12,10.16-24.73,19.87-37.16,29.27L305.22,1003c-12.74,9.4-25.18,19.11-37.93,28.52s-25.48,18.35-39,27c12-10.16,24.73-19.57,37.47-28.82S291.71,1011.38,304,1002l37.47-28.83c12.89-9.4,25.33-19.11,38.38-28.21Zm-66.29,106.19s13.5-11.23,30.34-27c20.93-19.56,46.57-44.6,54.76-49.14l-85.11,76.15Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M313.56,1051.12c6.68-6.67,13.81-13.19,20.94-19.57l10.92-9.4c3.34-3,7.14-6.37,10.47-9.71,6.67-6.67,13.2-13.81,19.87-20.63a127.54,127.54,0,0,1,10.47-9.71,28.3,28.3,0,0,1,6.06-4.1c1.83-1.06,3.8-3,6.37-3.34-1.51,2.28-3.33,3.34-4.85,5.31-1.82,1.52-3.34,3.34-4.85,4.85-3.34,3.34-7.13,6.37-10.47,9.41-7.13,6.07-14.56,12-21.69,18.35s-13.8,13.2-20.94,19.57c-7.73,6.53-14.86,12.9-22.3,19Zm90.72-60.68s-49.45,48.4-59.62,56.28Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M404.28,990.44A161.47,161.47,0,0,1,390,1005l-15,14.26c-4.85,4.85-9.41,9.71-14.56,14.56-5.31,4.55-10.16,9-15.78,13.2l14.56-14.26c4.86-4.85,10.17-8.94,15.33-13.8l14.56-14.26c5-5,9.86-9.86,15.17-14.26Zm2.27,26.24a315.38,315.38,0,0,1-16.08,37.17c-12.74,25.49-31.85,57.34-40.2,73.58l56.28-110.75Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M406.55,1016.69c0,5.61-1.52,10.47-3.34,15.32a150.66,150.66,0,0,1-6.06,14.26c-2.28,4.55-4.86,9.41-7.44,13.81s-5.61,8.94-7.89,13.5l-15.32,27c-5.31,9-10.47,18.05-16.08,26.7,3.79-9.71,8.95-18.81,13.81-27.76,5.31-9,10.16-18,15-27.31a153.85,153.85,0,0,0,6.37-14.25c2.27-4.86,4.54-9.41,6.37-13.81,2.27-4.85,4.09-9.41,6.37-13.8,2.57-4.71,4.7-9.26,8.19-13.66Z" style="fill:#cfb66c;fill-rule:evenodd"/><path d="M460.56,1141.08s-15,19.87-13.5,45.05C451.15,1172.94,456.31,1152.76,460.56,1141.08ZM474.82,1161s-5.31,54-9.71,80.55C471.33,1210.86,472.54,1213.44,474.82,1161Zm99.36,83.74s-22.45,66-22.91,84.34C556.13,1310.22,565.53,1271.69,574.18,1244.69Z" style="fill:#dec270;fill-rule:evenodd"/><path d="M626.67,1137s36.41,60.07,63.72,111.34C683,1222.54,666,1175.22,626.67,1137Z" style="fill:#cbaf59;fill-rule:evenodd"/><path d="M724.52,1225.43a1104.54,1104.54,0,0,1,54,109.07C775.49,1308.71,767.29,1264.57,724.52,1225.43Z" style="fill:#e3c677;fill-rule:evenodd"/><path d="M1012.14,1314c6.06-3.79,18.05-24.43,28.52-29.58,10.46-5.31,18.35-6.37,27.76-16.84,9.4-10.93,12-17.6,32.61-26.24,28.83-12.45,9-28.53,9-28.53a93.07,93.07,0,0,1,10.16-8.64c7.44-5.61,16.08-12.44,15.33-24.43-1.06-20.17-4.85-49.45-21.39-66.44,16.08-3.34,46.87-5.61,66-10.46,22.14-5.62,32.31-13.51,32.31-13.51s-12.74-21.69,7.89-43.53,37.47-34.89,49.91-59.32c-14.26-1.82-36-9.4-91.48,11.68a69.63,69.63,0,0,1,8.65,4.85s-34.13,9.41-46.57,19.88c-21.7,18.35-24.43,33.37-47.94,44.6s-47.18,8.19-66.74,17.29-22.45,16.84-29.59,20.18c1.52,1.82-.3,4.85,2.58,7.43-1.82,2.58-12.44,19.87-23.21,19.87,1.06,4.1,10.16,7.13,10.16,7.13s-6.67,4.86-23.66,6.07c8.64,9,16.84,18.81,39.44,33.07-1.82,3.79-9.41,9.41-6.37,16.54,3.34,7.13,12,16.84,46.57,24.73-17.6.75-38.22,4.85-66,1.06-27.76-3.34-32.31-5.31-49.45-1.06,1.82,1.82,6.67,1.82,10.92,6.67-4.55.3-33.07-3.34-42.78,9.41-10.16,13.19-14.56,34.89-13.8,49.45-5.31,2.58-10.47,7.13-7.89,16.54s16.08,12.44,24.73,18.35c8.64,6.37,9.4,8.64,17.6,7.13,8.64-1.82,21.38-10.46,28.82-10.46s12.74,5.61,12.74,5.61,20.18-9.71,22.15-7.89c1.82,1.82.3,13.5,2.27,15.32,2,1.37,24.73-12.13,30.8-15.93Z" style="fill:#ecd592;fill-rule:evenodd"/><path d="M1453.13,706.92c-94.81-244.84-329.19-290.2-329.19-290.2H455.25l2.58,249.39H591V1223H455.24v248.94h650.19c156.7,0,282.31-157.47,282.31-157.47,201.15-285.49,65.38-607.55,65.38-607.55Zm-344.21,439.77s-51,73.58-106.49,73.58h-111L888.8,666.72h142.45s66,13.8,112.11,144.41c0,0,61.13,187-34.44,335.56Z" style="fill:#fff;fill-opacity:0.800000011920929;fill-rule:evenodd"/></g></g></g></svg>');var Lv=Ks('<svg width="32" height="32" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_46_558)"><circle cx="16" cy="16" r="16" fill="#627EEA"/><path d="M15.9957 20.4203L9.14282 16.3876L15.9957 5.14258V20.4203Z" fill="white"/><path d="M15.9957 26.8573L9.30029 17.396L15.9957 21.3511V26.8573Z" fill="white"/><path d="M16.2319 20.4203L23.0849 16.3876L16.2319 5.14258V20.4203Z" fill="#C1CCF7"/><path d="M16.3107 26.8573L23.0848 17.396L16.3107 21.3511V26.8573Z" fill="#C1CCF7"/></g><defs><clipPath id="clip0_46_558"><rect width="32" height="32" fill="white"/></clipPath></defs></svg>');var Hv=Ks('<svg version="1.1" id="_8" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 256 256" style="enable-background:new 0 0 256 256;" xml:space="preserve"><style type="text/css">.st0{fill:none;} .st1{fill:#FFFFFF;} .st2{fill:#662482;}</style><g><path class="st0" d="M0,0v256h256V0H0z M231.2,159.2c0,20.7,0,31.1-3.5,42.2c-4.4,12.2-14,21.8-26.2,26.2 c-11.1,3.5-21.5,3.5-42.2,3.5H96.8c-20.7,0-31.1,0-42.2-3.5c-12.2-4.4-21.8-14-26.2-26.2c-3.5-11.1-3.5-21.5-3.5-42.2V96.8 c0-20.7,0-31.1,3.5-42.2c4.4-12.2,14-21.8,26.2-26.2c11.2-3.5,21.5-3.5,42.2-3.5h62.5c20.7,0,31.1,0,42.2,3.5 c12.2,4.4,21.8,14,26.2,26.2c3.5,11.1,3.5,21.5,3.5,42.2V159.2z"/> <circle class="st1" cx="137.9" cy="99" r="12.1"/><path class="st1" d="M210.8,115.9c0-47.3-27.7-68.7-64.4-68.7c-16.4,0-31,4.4-42.4,12.5c-3.8,2.7-9,0.1-9-4.5 c0-3.1-2.5-5.7-5.7-5.7H57.7c-3.1,0-5.7,2.5-5.7,5.7v144c0,3.1,2.5,5.7,5.7,5.7h33.7c3.1,0,5.6-2.5,5.6-5.6v-8.4 c0-62.8-33.2-109.8-0.4-116c30-5.7,64.1-3,64.5,20.1c0,2,0.3,8,8.6,11.2c5,2,12.6,2.6,22.6,2.4c0,0,9.1-0.7,9.1,8.5 c0,11.5-20.4,10.7-20.4,10.7c-6.7,0.3-22.6-1.5-31.7,1.2c-4.8,1.5-9,4.2-11.5,9.1c-4.2,8.3-6.2,26.5-6.5,45.5v15.5 c0,3.1,2.5,5.7,5.7,5.7h68c3.1,0,5.7-2.5,5.7-5.7l0,0V115.9z"/><path class="st2" d="M227.6,54.6c-4.4-12.2-14-21.8-26.2-26.2c-11.1-3.5-21.5-3.5-42.2-3.5H96.8c-20.7,0-31.1,0-42.2,3.5 c-12.2,4.4-21.8,14-26.2,26.2c-3.5,11.2-3.5,21.5-3.5,42.2v62.5c0,20.7,0,31.1,3.5,42.2c4.4,12.2,14,21.8,26.2,26.2 c11.2,3.5,21.5,3.5,42.2,3.5h62.5c20.7,0,31.1,0,42.2-3.5c12.2-4.4,21.8-14,26.2-26.2c3.5-11.1,3.5-21.5,3.5-42.2V96.8 C231.2,76.1,231.2,65.7,227.6,54.6z M205.1,204.8h-68c-3.1,0-5.7-2.5-5.7-5.7v-15.5c0.3-19,2.3-37.2,6.5-45.5 c2.5-5,6.7-7.7,11.5-9.1c9-2.7,24.9-0.9,31.7-1.2c0,0,20.4,0.8,20.4-10.7c0-9.3-9.1-8.5-9.1-8.5c-10,0.3-17.7-0.4-22.6-2.4 c-8.3-3.3-8.6-9.2-8.6-11.2c-0.4-23.1-34.5-25.9-64.5-20.1c-32.8,6.2,0.4,53.3,0.4,116v8.4c-0.1,3.1-2.5,5.6-5.6,5.6H57.7 c-3.1,0-5.7-2.5-5.7-5.7v-144c0-3.1,2.5-5.7,5.7-5.7h31.7c3.1,0,5.7,2.5,5.7,5.7c0,4.7,5.2,7.2,9,4.5c11.4-8.2,26-12.5,42.4-12.5 c36.7,0,64.4,21.4,64.4,68.7v83.2l0,0C210.8,202.3,208.3,204.8,205.1,204.8z M125.7,99c0-6.7,5.4-12.1,12.1-12.1S150,92.3,150,99 s-5.4,12.1-12.1,12.1S125.7,105.8,125.7,99z"/></g></svg>');var Uv=he`
  <svg
    width="32"
    height="32"
    viewBox="3 3 26 26"
    fill="none"
    xmlns="http://www.w3.org/2000/svg"
    class="primary-icon"
  >
    <path
      d="M20.375 16.875H14.25V15.125H20.375L19.5 13.375H21.25L23 16L21.25 18.625H19.5L20.375 16.875ZM20.9509 11.051L19.7128 12.2886C19.226 11.8 18.6473 11.4125 18.0101 11.1484C17.3729 10.8844 16.6897 10.749 16 10.75C13.1006 10.75 10.75 13.1006 10.75 16C10.75 18.8994 13.1006 21.25 16 21.25C17.4107 21.25 18.7309 20.6923 19.71 19.7147L20.9462 20.9532C20.297 21.6031 19.5259 22.1184 18.6771 22.4696C17.8283 22.8209 16.9186 23.0011 16 23C12.1341 23 9 19.8659 9 16C9 12.1341 12.1341 9 16 9C17.8816 9 19.647 9.74667 20.9509 11.051Z"
      fill="currentColor"
    />
  </svg>
`;var Fv=he`
  <svg
    width="13"
    height="12"
    viewBox="0 0 13 12"
    xmlns="http://www.w3.org/2000/svg"
    class="secondary-icon"
    stroke="currentColor"
  >
    <path
      d="M9.30688 5.22537L11.1669 3.36536L9.30688 1.50537"
      stroke-width="1.33333"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M2.16699 3.36523H11.167"
      stroke-width="1.33333"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M4.02698 6.77539L2.16699 8.63541L4.02698 10.4954"
      stroke-width="1.33333"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
    <path
      d="M11.167 8.63525H2.16699"
      stroke-width="1.33333"
      stroke-linecap="round"
      stroke-linejoin="round"
    />
  </svg>
`;var $v=he`
  <svg
    xmlns="http://www.w3.org/2000/svg"
    width="24"
    height="24"
    viewBox="-3 -3 30 30"
    fill="none"
    stroke="currentColor"
    stroke-width="2"
    stroke-linecap="round"
    stroke-linejoin="round"
    class="primary-icon"
  >
    <path d="M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" />
    <circle cx="12" cy="7" r="4" />
  </svg>
`;function vy(r){return{[Wr.SignerType.BTC]:Rv,[Wr.SignerType.EVM]:Lv,[Wr.SignerType.CKB]:np,[Wr.SignerType.Nostr]:Hv,[Wr.SignerType.Doge]:Nv}[r]}function qv(r,e){return["Select a Chain",he`
      <img class="wallet-icon mt-1" src=${r.icon} alt=${r.name} />
      <span class="mb-1">${r.name}</span>
      ${wu(r.signers,t=>t.name,t=>he`
          <ccc-button
            class="mt-1"
            @click=${async()=>{e(r,t)}}
          >
            <img
              src=${vy(t.signer.type)}
              alt=${t.signer.type}
            />
            ${t.name}
          </ccc-button>
        `)}
    `]}var Fo=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o};function jv(r,e=9,t=6){return r&&r.length>e+t+3?`${r.slice(0,e)}...${r.slice(-t)}`:r}var cs=class extends qt{constructor(){super(...arguments),this.selectingClient=!1}willUpdate(e){(!this.recommendedAddress||!this.internalAddress||!this.balance||e.has("signer"))&&this.signer&&(this.signer.getRecommendedAddress().then(t=>this.recommendedAddress=t),this.signer.getInternalAddress().then(t=>this.internalAddress=t),this.signer.getBalance().then(t=>this.balance=t))}render(){let{wallet:e,signer:t,internalAddress:n,balance:s,recommendedAddress:o}=this;if(!e||!t)return he`<div></div>`;let i=!this.selectingClient||!this.clientOptions?he`
          <div class="position-relative">
            <img
              class="connecting-wallet-icon"
              src=${e.icon}
              alt=${e.name}
            />
            <img
              class="connected-type-icon"
              src=${vy(t.type)}
              alt=${t.type}
            />
          </div>

          <ccc-copy-button
            value=${o}
            class="text-bold fs-xl mt-2"
          >
            ${jv(o)}
          </ccc-copy-button>
          <div class="text-bold fs-md">
            ${Wr.fixedPointToString(s??Wr.Zero)} CKB
          </div>
          <ccc-copy-button
            value=${n}
            class="text-bold text-tip fs-md"
            style="margin-top: 0.5rem"
          >
            ${jv(n,11,9)}
          </ccc-copy-button>

          <ccc-button
            class="mt-2"
            @click=${()=>window.open("https://mobit.app/","_blank")}
          >
            ${$v} Manage
          </ccc-button>

          <ccc-button
            class="mt-1"
            @click=${()=>this.dispatchEvent(new Event("disconnect"))}
          >
            ${Uv} Disconnect
          </ccc-button>

          ${this.hideMark==null?he`<a href="https://github.com/ckb-devrel/ccc" class="mark"
                >Powered by CCC</a
              >`:""}

          <div
            class="switch-btn-container ${this.clientOptions?"cursor-pointer":""}"
            @click=${()=>this.selectingClient=!!this.clientOptions}
          >
            <div class="switch-line"></div>
            <div class="switch-content ml-2 mr-2 fs-sm">
              <img class="sm-chain-logo" src=${np} alt="Nervos Network" />
              ${t.client.addressPrefix==="ckb"?"Mainnet":"Testnet"}
              ${["ckb","ckt"].includes(t.client.addressPrefix)?"":` ${t.client.addressPrefix}`}
              ${this.clientOptions?Fv:void 0}
            </div>
            <div class="switch-line"></div>
          </div>
        `:wu(this.clientOptions,({name:c})=>c,({client:c,name:a,icon:u})=>he`
          <ccc-button
            class="mt-1"
            @click=${()=>this.dispatchEvent(new m2(c))}
          >
            <img src=${u??np} alt=${a} />
            ${a}
          </ccc-button>
        `);return he`
      <ccc-dialog
        header=${this.selectingClient?"Select Network":void 0}
        ?canBack=${this.selectingClient}
        @back=${()=>this.selectingClient=!1}
      >
        ${i}
      </ccc-dialog>
    `}updated(){this.dispatchEvent(new Event("updated",{bubbles:!0,composed:!0}))}};cs.styles=Zr`
    :host {
      width: 100%;
      display: flex;
      flex-direction: column;
      align-items: center;
    }

    .primary-icon {
      color: var(--icon-primary);
    }
    .secondary-icon {
      color: var(--icon-secondary);
    }

    .text-bold {
      font-weight: bold;
    }

    .text-tip {
      color: var(--tip-color);
    }

    .fs-sm {
      font-size: 0.8rem;
    }
    .fs-md {
      font-size: 1rem;
    }
    .fs-xl {
      font-size: 1.5rem;
    }

    .mt-1 {
      margin-top: 0.7rem;
    }
    .mt-2 {
      margin-top: 1rem;
    }
    .ml-1 {
      margin-left: 0.7em;
    }
    .ml-2 {
      margin-left: 1em;
    }
    .mr-1 {
      margin-right: 0.7rem;
    }
    .mr-2 {
      margin-right: 1rem;
    }

    .connecting-wallet-icon {
      width: 5rem;
      height: 5rem;
      border-radius: 1rem;
    }

    .position-relative {
      position: relative;
    }

    .connected-type-icon {
      position: absolute;
      width: 1.5rem;
      height: 1.5rem;
      right: -0.5rem;
      bottom: -0.5rem;
    }

    .switch-btn-container {
      width: 100%;
      margin-top: 1.2rem;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .cursor-pointer {
      cursor: pointer;
    }

    .switch-content {
      display: flex;
      align-items: center;
      gap: 0.7rem;
    }

    .switch-line {
      flex: 1;
      height: 1px;
      background-color: var(--divider);
    }

    .switching-status-dot {
      width: 0.5rem;
      height: 0.5rem;
      background: #0f0;
      border-radius: 50%;
    }

    .copy-btn {
      width: 1.5rem;
      height: 1.5rem;
    }

    .copy-btn-sm {
      width: 1rem;
      height: 1rem;
    }

    .sm-chain-logo {
      width: 1.125rem;
    }

    .mark {
      text-decoration: none;
      cursor: pointer;
      opacity: 0.2;
      margin: 0;
      margin-top: 0.25rem;
      margin-bottom: -1.05rem;
      color: var(--tip-color);
      font-size: 0.6rem;
    }

    .mark:hover {
      opacity: 0.5;
    }
  `;Fo([jt()],cs.prototype,"hideMark",void 0);Fo([jt()],cs.prototype,"wallet",void 0);Fo([jt()],cs.prototype,"signer",void 0);Fo([jt()],cs.prototype,"clientOptions",void 0);Fo([Qt()],cs.prototype,"recommendedAddress",void 0);Fo([Qt()],cs.prototype,"internalAddress",void 0);Fo([Qt()],cs.prototype,"balance",void 0);Fo([Qt()],cs.prototype,"selectingClient",void 0);cs=Fo([dn("ccc-connected-scene")],cs);var zv=he`
  <svg
    width="12"
    height="12"
    viewBox="0 0 12 12"
    xmlns="http://www.w3.org/2000/svg"
    fill="currentColor"
    class="primary-icon"
  >
    <path
      d="M11.398 1.16864C11.0369 1.16864 10.7961 1.41021 10.7961 1.77256V2.37648C10.1941 1.531 9.35141 0.866684 8.38828 0.504333C5.37851 -0.82429 1.82699 0.564725 0.502691 3.58432C-0.821607 6.60392 0.562886 10.167 3.57265 11.4957C6.58242 12.8243 10.1339 11.4353 11.4582 8.41568H11.398C11.398 8.05333 11.1573 7.81176 10.7961 7.81176C10.4349 7.81176 10.1941 8.05333 10.1941 8.41568H10.1339C9.59219 9.32156 8.80965 10.0463 7.78633 10.469C5.31832 11.4957 2.54933 10.2878 1.52601 7.81176C0.502691 5.33569 1.7066 2.49727 4.17461 1.531C6.40183 0.564725 8.93004 1.531 10.1339 3.58432H8.99023C8.62906 3.58432 8.38828 3.82589 8.38828 4.18824C8.38828 4.55059 8.62906 4.79216 8.99023 4.79216H11.398C11.7592 4.79216 12 4.55059 12 4.18824V1.77256C12 1.41021 11.7592 1.16864 11.398 1.16864Z"
    />
  </svg>
`;function Vv(r,e,t,n){return[r.name,he`
      <img
        class="connecting-wallet-icon mb-1 mt-1"
        src=${r.icon}
        alt=${r.name}
      />
      <span class="text-bold"
        >${t?`Failed to open ${r.name}`:`Opening ${r.name}...`}</span
      >
      <span class="text-tip text-center"
        >${t??"Confirm connection in the wallet"}</span
      >
      <ccc-button-pill
        class="mt-2"
        @click=${()=>n(r,e)}
      >
        ${zv} Try again
      </ccc-button-pill>
    `]}function Kv(r,e,t){return["Connect Wallet",wu(r,n=>n.name,n=>he`
        <ccc-button
          class="mt-1"
          @click=${async()=>{n.signers.length===1?t(n,n.signers[0]):e(n)}}
        >
          <img src=${n.icon} alt=${n.name} />
          ${n.name}
        </ccc-button>
      `)]}var sp=function(r,e,t,n){var s=arguments.length,o=s<3?e:n===null?n=Object.getOwnPropertyDescriptor(e,t):n,i;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")o=Reflect.decorate(r,e,t,n);else for(var c=r.length-1;c>=0;c--)(i=r[c])&&(o=(s<3?i(o):s>3?i(e,t,o):i(e,t))||o);return s>3&&o&&Object.defineProperty(e,t,o),o},Ta=class extends qt{constructor(){super(...arguments),this.signerSelectedHandler=(e,t)=>{this.connectingError=void 0,this.selectedWallet=e,this.selectedSigner=t,(async()=>{let{signer:n}=t;try{if(await n.connect(),!await n.isConnected()){this.connectingError="Unknown connection status";return}}catch(s){if(typeof s!="object"||s===null){this.connectingError=JSON.stringify(s);return}if(!("message"in s)){this.connectingError="Unknown error";return}let o=s.message;if(typeof o=="string"){this.connectingError=o;return}this.connectingError=JSON.stringify(o);return}this.dispatchEvent(new Ui(()=>{this.dispatchEvent(new y2(e.name,t.name))}))})()}}render(){let[e,t]=this.selectedWallet?this.selectedSigner?Vv(this.selectedWallet,this.selectedSigner,this.connectingError,this.signerSelectedHandler):qv(this.selectedWallet,this.signerSelectedHandler):Kv(this.wallets??[],n=>{this.selectedWallet=n},this.signerSelectedHandler);return he`<ccc-dialog
      header=${e}
      ?canBack=${this.selectedSigner||this.selectedWallet}
      @back=${()=>{(!this.selectedSigner||this.selectedWallet&&this.selectedWallet.signers.length<=1)&&(this.selectedWallet=void 0),this.selectedSigner=void 0,this.connectingError=void 0}}
    >
      ${t}
    </ccc-dialog>`}onClose(){this.selectedWallet=void 0,this.selectedSigner=void 0,this.connectingError=void 0}updated(){this.dispatchEvent(new Event("updated",{bubbles:!0,composed:!0}))}};Ta.styles=Zr`
    .primary-icon {
      color: var(--icon-primary);
    }

    :host {
      display: block;
    }

    .text-bold {
      font-weight: bold;
    }

    .text-tip {
      color: var(--tip-color);
    }

    .mb-1 {
      margin-bottom: 0.7rem;
    }
    .mb-2 {
      margin-bottom: 1rem;
    }
    .mt-1 {
      margin-top: 0.7rem;
    }
    .mt-2 {
      margin-top: 1rem;
    }
    .ml-1 {
      margin-left: 0.7rem;
    }
    .ml-2 {
      margin-left: 1em;
    }
    .mr-1 {
      margin-right: 0.7rem;
    }
    .mr-2 {
      margin-right: 1rem;
    }

    .wallet-icon {
      width: 4rem;
      height: 4rem;
      margin-bottom: 0.5rem;
      border-radius: 0.8rem;
    }

    .connecting-wallet-icon {
      width: 5rem;
      height: 5rem;
      border-radius: 1rem;
    }

    .text-center {
      text-align: center;
    }
  `;sp([jt()],Ta.prototype,"wallets",void 0);sp([Qt()],Ta.prototype,"selectedWallet",void 0);sp([Qt()],Ta.prototype,"selectedSigner",void 0);sp([Qt()],Ta.prototype,"connectingError",void 0);Ta=sp([dn("ccc-selecting-scene")],Ta);window.ccc=_1;})();
/*! Bundled license information:

ieee754/index.js:
  (*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> *)

buffer/index.js:
  (*!
   * The buffer module from node.js, for the browser.
   *
   * @author   Feross Aboukhadijeh <https://feross.org>
   * @license  MIT
   *)

@noble/hashes/esm/utils.js:
@noble/hashes/esm/utils.js:
  (*! noble-hashes - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@noble/ciphers/esm/utils.js:
  (*! noble-ciphers - MIT License (c) 2023 Paul Miller (paulmillr.com) *)

@noble/curves/esm/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
@noble/curves/esm/abstract/utils.js:
@noble/curves/esm/abstract/modular.js:
@noble/curves/esm/abstract/curve.js:
@noble/curves/esm/abstract/weierstrass.js:
@noble/curves/esm/_shortw_utils.js:
@noble/curves/esm/secp256k1.js:
  (*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) *)

@lit/reactive-element/css-tag.js:
  (**
   * @license
   * Copyright 2019 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/reactive-element.js:
lit-html/lit-html.js:
lit-element/lit-element.js:
@lit/reactive-element/decorators/custom-element.js:
@lit/reactive-element/decorators/property.js:
@lit/reactive-element/decorators/state.js:
@lit/reactive-element/decorators/event-options.js:
@lit/reactive-element/decorators/base.js:
@lit/reactive-element/decorators/query.js:
@lit/reactive-element/decorators/query-all.js:
@lit/reactive-element/decorators/query-async.js:
@lit/reactive-element/decorators/query-assigned-nodes.js:
lit-html/directive.js:
lit-html/async-directive.js:
lit-html/directives/repeat.js:
  (**
   * @license
   * Copyright 2017 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/is-server.js:
  (**
   * @license
   * Copyright 2022 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

@lit/reactive-element/decorators/query-assigned-elements.js:
  (**
   * @license
   * Copyright 2021 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)

lit-html/directive-helpers.js:
lit-html/directives/ref.js:
  (**
   * @license
   * Copyright 2020 Google LLC
   * SPDX-License-Identifier: BSD-3-Clause
   *)
*/
